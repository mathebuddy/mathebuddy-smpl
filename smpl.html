<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content />
  <meta name="dcterms.date" content="2022-11-11" />
  <title>Simple Math Programming Language (SMPL)</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
</style>
  <style type="text/css">html {
line-height: 1.5;
font-family: Georgia, serif;
font-size: 20px;
color: #1a1a1a;
background-color: #fdfdfd;
}
body {
margin: 0 auto;
max-width: 36em;
padding-left: 50px;
padding-right: 50px;
padding-top: 50px;
padding-bottom: 50px;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
@media (max-width: 600px) {
body {
font-size: 0.9em;
padding: 1em;
}
h1 {
font-size: 1.8em;
}
}
@media print {
body {
background-color: transparent;
color: black;
font-size: 12pt;
}
p,
h2,
h3 {
orphans: 3;
widows: 3;
}
h2,
h3,
h4 {
page-break-after: avoid;
}
}
p {
margin: 1em 0;
}
a {
color: #1a1a1a;
}
a:visited {
color: #1a1a1a;
}
img {
max-width: 100%;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1.4em;
}
h5,
h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
ol,
ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol,
li > ul {
margin-top: 0;
}
blockquote {

margin: 0em 0 -0.75em 0;
padding: 0;

text-align: center;
}
code {
font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
font-size: 85%;
margin: 0;
}
pre {

overflow: auto;
padding: 10px;
border: black;
border-width: 1px;
border-style: solid;
font-size: medium;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {
background-color: transparent;
overflow: visible;
}
hr {
background-color: #1a1a1a;
border: none;
height: 1px;
margin: 1em 0;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
border-top: 1px solid #1a1a1a;
border-bottom: 1px solid #1a1a1a;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
#TOC li {
list-style: none;
}
#TOC ul {
padding-left: 1.3em;
}
#TOC > ul {
padding-left: 0;
}
#TOC a:not(:hover) {
text-decoration: none;
}
code {
white-space: pre-wrap;
}
span.smallcaps {
font-variant: small-caps;
}
div.columns {
display: flex;
gap: min(4vw, 1.5em);
}
div.column {
flex: auto;
overflow-x: auto;
}
div.hanging-indent {
margin-left: 1.5em;
text-indent: -1.5em;
}
ul.task-list {
list-style: none;
}
ul.task-list li input[type='checkbox'] {
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
pre > code.sourceCode {
white-space: pre;
position: relative;
}
pre > code.sourceCode > span {
display: inline-block;
line-height: 1.25;
}
pre > code.sourceCode > span:empty {
height: 1.2em;
}
.sourceCode {
overflow: visible;
}
code.sourceCode > span {
color: inherit;
text-decoration: inherit;
}
div.sourceCode {
margin: 1em 0;
}
pre.sourceCode {
margin: 0;
}
@media screen {
div.sourceCode {
overflow: auto;
}
}
@media print {
pre > code.sourceCode {
white-space: pre-wrap;
}
pre > code.sourceCode > span {
text-indent: -5em;
padding-left: 5em;
}
}
pre.numberSource code {
counter-reset: source-line 0;
}
pre.numberSource code > span {
position: relative;
left: -4em;
counter-increment: source-line;
}
pre.numberSource code > span > a:first-child::before {
content: counter(source-line);
position: relative;
left: -1em;
text-align: right;
vertical-align: baseline;
border: none;
display: inline-block;
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
padding: 0 4px;
width: 4em;
color: #aaaaaa;
}
pre.numberSource {
margin-left: 3em;
border-left: 1px solid #aaaaaa;
padding-left: 4px;
}
div.sourceCode {
}
@media screen {
pre > code.sourceCode > span > a:first-child::before {
text-decoration: underline;
}
}
code span.al {
color: #ff0000;
font-weight: bold;
} 
code span.an {
color: #60a0b0;
font-weight: bold;
font-style: italic;
} 
code span.at {
color: #7d9029;
} 
code span.bn {
color: #40a070;
} 
code span.bu {
color: #008000;
} 
code span.cf {
color: #007020;
font-weight: bold;
} 
code span.ch {
color: #4070a0;
} 
code span.cn {
color: #880000;
} 
code span.co {
color: #60a0b0;
font-style: italic;
} 
code span.cv {
color: #60a0b0;
font-weight: bold;
font-style: italic;
} 
code span.do {
color: #ba2121;
font-style: italic;
} 
code span.dt {
color: #902000;
} 
code span.dv {
color: #40a070;
} 
code span.er {
color: #ff0000;
font-weight: bold;
} 
code span.ex {
} 
code span.fl {
color: #40a070;
} 
code span.fu {
color: #06287e;
} 
code span.im {
color: #008000;
font-weight: bold;
} 
code span.in {
color: #60a0b0;
font-weight: bold;
font-style: italic;
} 
code span.kw {
color: #007020;
font-weight: bold;
} 
code span.op {
color: #666666;
} 
code span.ot {
color: #007020;
} 
code span.pp {
color: #bc7a00;
} 
code span.sc {
color: #4070a0;
} 
code span.ss {
color: #bb6688;
} 
code span.st {
color: #4070a0;
} 
code span.va {
color: #19177c;
} 
code span.vs {
color: #4070a0;
} 
code span.wa {
color: #60a0b0;
font-weight: bold;
font-style: italic;
} 
</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
[<a href="https://app.f07-its.fh-koeln.de">Home</a>] [<a href="https://app.f07-its.fh-koeln.de/docs-mbl.html">MBL Reference</a>] [<a href="https://app.f07-its.fh-koeln.de/docs-smpl.html">SMPL Reference</a>]<h1 class="title">Simple Math Programming Language (SMPL)</h1>
<p class="author"></p>
<p class="date">2022-11-11</p>
</header>
<hr />
<p><strong>NOTE</strong> This reference guide is in work-in-progress
state. We are planning to release version 1.0 by end of 2022.</p>
<hr />
<p>This document describes the <em>Simple Math Programming Language
(SMPL)</em>.</p>
<p>SMPL is a math-oriented programming language that can be interpreted
in the browser. Its primary use is for the <em>mathe:buddy app</em>.</p>
<p>SMPL is (mostly) an imperative, typed language. Its syntax is
basically a subset of <em>JavaScript</em>, but extends with intrinsic
mathematical data types (e.g.Â terms, sets and matrices) and operator
overloading for these types.</p>
<p>The language definition of SMPL is independent of concrete
implementations. A reference implementation can be found <a href="https://github.com/mathebuddy/mathebuddy-smpl">here</a>. Visit our
online <a href="https://mathebuddy.github.io/mathebuddy-smpl/">playground</a>.</p>
<p>SMPL is heavily used by the <a href="https://app.f07-its.fh-koeln.de/docs-mbl.html">mathe:buddy
language</a>.</p>
<h3 id="history-notes">History Notes</h3>
<p>Many concepts (and also parts of the source code) are taken from the
<em>Simple E-Learning Language</em> <a href="https://sell.f07-its.fh-koeln.de">SELL</a>. Compared to SELL, SMPL
is <em>Turing Complete</em>, but lacks an interactive e-learning
environment.</p>
<h2 id="first-example">First Example</h2>
<p>The following example program creates two <span class="math inline">3âÃâ3</span>-matrices <span class="math inline"><em>A</em></span> and <span class="math inline"><em>B</em></span>, with random (integral) entries in
range [-5,5] without zero. Both matrices are numerically unequal. The
product of <span class="math inline"><em>A</em></span> and <span class="math inline"><em>B</em></span> is finally assigned to variable
<span class="math inline"><em>C</em></span>.</p>
<pre><code>let A/B = randZ&lt;3,3&gt;(-5,5);
let C = A * B;</code></pre>
<p>The example demonstrates some of the key features of SMPL:</p>
<ul>
<li>very short syntax</li>
<li>flexible randomization functions</li>
<li>operator overloading</li>
</ul>
<p>The following <em>Python</em> program is similar to the two lines of
SMPL code above (but not semantically equivalent, since it generates
zero-elements in some cases).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> numpy.<span class="bu">round</span>(numpy.random.rand(<span class="dv">3</span>,<span class="dv">3</span>)<span class="op">*</span><span class="dv">10</span>) <span class="op">-</span> <span class="dv">5</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  B <span class="op">=</span> numpy.<span class="bu">round</span>(numpy.random.rand(<span class="dv">3</span>,<span class="dv">3</span>)<span class="op">*</span><span class="dv">10</span>) <span class="op">-</span> <span class="dv">5</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> numpy.array_equal(A,B):</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> numpy.matmul(A, B)</span></code></pre></div>
<h2 id="programs">Programs</h2>
<p>An SMPl program is a sequence of statements <span class="math inline"><em>p</em>â=â(<em>s</em><sub>0</sub>Â <em>s</em><sub>1</sub>â¦)</span>.
Each statements ends by a semicolon (<code>;</code>). Declarations and
assignments are executed statement wise, i.e.Â <span class="math inline"><em>s</em><sub><em>i</em>â+â1</sub></span> is
executed after statement <span class="math inline"><em>s</em><sub><em>i</em></sub></span>.</p>
<p>Example:</p>
<pre><code>let x = 3;
let y = sin(x);</code></pre>
<p>The example programs executes lines one and two in given order. Each
line is evaluated, before the next line is executed. Indeed, we also
could write all statements in one line, since the semicolon separates
statements.</p>
<ul>
<li><p>The first line evaluates the right-hand side of the equal sign
(<code>=</code>) and assigns the result, here <code>3</code>, to a new
variable with identifier <code>x</code>. The type of variable
<code>x</code> is <code>integer</code>.</p></li>
<li><p>The second line first evaluates the expression
<code>sin(x)</code>. Variable <code>x</code> is taken as argument to the
sine function. The numeric result <code>0.14111..</code> is stored to
variable <code>y</code> of data type <code>real</code>. It has
double-precision (refer to IEEE 754). Take care, that real numbers <span class="math inline">â</span> are stored approximately, unless symbolic
computation is applied explicitly.</p></li>
</ul>
<h2 id="data-types">Data Types</h2>
<p>boolean (<code>BOOL</code>), integer (<code>INT</code>), rational
(<code>RATIONAL</code>), real (<code>REAL</code>), term
(<code>TERM</code>), matrix (<code>MATRIX</code>), vector
(<code>VECTOR</code>), set (<code>SET</code>), complex
(<code>COMPLEX</code>).</p>
<h2 id="declarations">Declarations</h2>
<p>Declarations are initiated with keyword <code>let</code>, followed by
an identifier and finally assigned expression by <code>=</code>. The
expression in the right-hand side is mandatory to derive the data
type.</p>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>let x = 5;
let y = 7, z = 9.1011;
let u = rand(5);
let v = zeros&lt;2,3&gt;();
let a : b = rand&lt;3,3&gt;(-2, 2);
let c :/ d :/ e = rand&lt;3,3&gt;(-2, 2);</code></pre>
<ul>
<li>Variables <code>x</code> and <code>u</code> are integral. The value
for <code>u</code> is randomly chosen from set {0,1,2,3,4,5}.</li>
<li>Variable <code>z</code> is a real valued.</li>
<li>Variables <code>x</code> and <code>z</code> are declared together
(without any semantical relation). The notation is equivalent to
<code>let y=7; let y=9.1011;</code></li>
<li>Variables <code>v</code>, <code>a</code>, <code>b</code>,
<code>c</code> and <code>d</code> are matrices. <code>v</code> is a zero
matrix with two rows and three columns.</li>
<li>Matrices <code>a</code> and <code>b</code> consist of randomly
chosen, integral elements in range [-2,2].</li>
<li>The colon separator <code>:</code> evaluates the right-hand side to
each of the variables:
<code>let a = rand&lt;3,3&gt;(-2, 2); let b = rand&lt;3,3&gt;(-2, 2);</code>.
Accordingly, elements for <code>a</code> and <code>b</code> are drawn
individually.</li>
<li>Separator <code>:/</code> guarantees that no pair of matrices
<code>c</code>, <code>d</code> and <code>e</code> is equal.</li>
</ul>
<h2 id="expressions">Expressions</h2>
<p>List of operators, ordered by increasing precedence:</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\|\|</code></td>
<td>Logical Or</td>
</tr>
<tr class="even">
<td><code>&amp;&amp;</code></td>
<td>Logical And</td>
</tr>
<tr class="odd">
<td><code>==</code>,<code>!=</code></td>
<td>Equal, Unequal</td>
</tr>
<tr class="even">
<td><code>&lt;</code>,
<code>&lt;=</code>,<code>&gt;</code>,<code>&gt;=</code></td>
<td>Less than, Less or equal, Greater than, Greater or equal</td>
</tr>
<tr class="odd">
<td><code>+</code>, <code>-</code></td>
<td>Addition, Subtraction</td>
</tr>
<tr class="even">
<td><code>*</code>, <code>/</code></td>
<td>Multiplication, Division</td>
</tr>
<tr class="odd">
<td><code>^</code></td>
<td>Potency</td>
</tr>
<tr class="even">
<td><code>++</code>, <code>--</code></td>
<td>Postfix Incrementation, Decrementation</td>
</tr>
</tbody>
</table>
<p>Base data types are evaluated at compile-time. Properties like
e.g.Â matrix dimensions are evaluated at runtime. Thus, a
<code>RuntimeError</code> is thrown if e.g.Â two matrices with a
different number of rows are added.</p>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>let x = 1.23 * sin(y) + exp(u + 2*w);
let C = A * B^T;
let d = det(C);</code></pre>
<ul>
<li>The examples assumes, that variables <code>y</code>, <code>u</code>,
<code>w</code>, <code>A</code>, <code>B</code>, <code>C</code> have been
declared before usage.</li>
</ul>
<h2 id="conditions">Conditions</h2>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>let s = 0;
if (x &gt; 0) {
  s=1;
}
else if (x &lt; 0) {
  s = -1;
}
else {
  x=0;
}</code></pre>
<h2 id="loops">Loops</h2>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>while (x &gt; 0) {
  // body
}</code></pre>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>do {
  // body
} while (x &gt; 0);</code></pre>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>for (let i = 0; i &lt; 5; i++) {
  // body
}</code></pre>
<h2 id="functions">Functions</h2>
<p>A function consists of a <strong>header</strong> and a
<strong>body</strong>:</p>
<ul>
<li>The <strong>header</strong> declared the name of the function, its
parameter names and types and the return type.</li>
<li>The <strong>body</strong> is represented by a list of statements and
returns a result that is compatible to the return type.</li>
</ul>
<blockquote>
<p>Example</p>
</blockquote>
<pre><code>function f(x: INT, y: INT): INT {
  return x + y;
}

let y = f(3, 4);</code></pre>
<h2 id="appendix-grammar">Appendix: Grammar</h2>
<p>The following formal grammar (denoted in EBNF) is currently
implemented.</p>
<pre class="ebnf"><code>program = { statement };
statement = declaration | if | for | do | while | switch | function | return | break | continue | expression EOS;
declaration = &quot;let&quot; id_list &quot;=&quot; expr EOS | &quot;let&quot; ID &quot;(&quot; ID { &quot;,&quot; ID } &quot;)&quot; &quot;=&quot; expr EOS;
id_list = ID { &quot;:&quot; ID } | ID { &quot;/&quot; ID };
expression = or { (&quot;=&quot;|&quot;+=&quot;|&quot;-=&quot;|&quot;/=&quot;) or };
or = and { &quot;||&quot; and };
and = equal { &quot;&amp;&amp;&quot; equal };
equal = relational [ (&quot;==&quot;|&quot;!=&quot;) relational ];
relational = add [ (&quot;&lt;=&quot;|&quot;&gt;=&quot;|&quot;&lt;&quot;|&quot;&gt;&quot;) add ];
add = mul { (&quot;+&quot;|&quot;-&quot;) mul };
mul = pow { (&quot;*&quot;|&quot;/&quot;) pow };
pow = unary [ &quot;^&quot; unary ];
unary = unaryExpression [ unaryPostfix ];
unaryExpression = &quot;true&quot; | &quot;false&quot; | INT | IMAG | REAL | &quot;(&quot; expr &quot;)&quot; | ID | &quot;-&quot; unary | &quot;!&quot; unary;
unaryPostfix = &quot;++&quot; | &quot;--&quot; | [ &quot;&lt;&quot; [ unary { &quot;,&quot; unary } ] &quot;&gt;&quot; ] &quot;(&quot; [ expr { &quot;,&quot; expr } ] &quot;)&quot; | &quot;[&quot; expr &quot;]&quot;;
for = &quot;for&quot; &quot;(&quot; expression &quot;;&quot; expression &quot;;&quot; expression &quot;)&quot; block;
if = &quot;if&quot; &quot;(&quot; expression &quot;)&quot; block [ &quot;else&quot; block ];
block = statement | &quot;{&quot; { statement } &quot;}&quot;;
do = &quot;do&quot; block &quot;while&quot; &quot;(&quot; expr &quot;)&quot; EOS;
while = &quot;while&quot; &quot;(&quot; expr &quot;)&quot; block;
switch = &quot;switch&quot; &quot;(&quot; expr &quot;)&quot; &quot;{&quot; { &quot;case&quot; INT &quot;:&quot; { statement } } &quot;default&quot; &quot;:&quot; { statement } &quot;}&quot;;
function = &quot;function&quot; ID &quot;(&quot; [ ID { &quot;,&quot; ID } ] &quot;)&quot; block;
return = &quot;return&quot; [ expr ] EOS;
break = &quot;break&quot; EOS;
continue = &quot;continue&quot; EOS;</code></pre>
<p><em>Author: Andreas Schwenk, TH KÃ¶ln</em></p>
</body>
</html>
