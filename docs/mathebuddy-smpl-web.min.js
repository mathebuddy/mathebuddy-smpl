"use strict";var mathebuddySMPL=(()=>{var ps=Object.create;var It=Object.defineProperty;var hs=Object.getOwnPropertyDescriptor;var ms=Object.getOwnPropertyNames;var vs=Object.getPrototypeOf,ds=Object.prototype.hasOwnProperty;var br=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ds=(r,e)=>{for(var t in e)It(r,t,{get:e[t],enumerable:!0})},aa=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ms(e))!ds.call(r,i)&&i!==t&&It(r,i,{get:()=>e[i],enumerable:!(n=hs(e,i))||n.enumerable});return r};var lt=(r,e,t)=>(t=r!=null?ps(vs(r)):{},aa(e||!r||!r.__esModule?It(t,"default",{value:r,enumerable:!0}):t,r)),xs=r=>aa(It({},"__esModule",{value:!0}),r);var ua=br(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.getStr=cr.setLanguage=cr.LanguageText=cr.Language=void 0;var Rt;(function(r){r[r.EN=0]="EN",r[r.DE=1]="DE"})(Rt=cr.Language||(cr.Language={}));var ur;(function(r){r[r.EXPECTED=0]="EXPECTED",r[r.EXPECTED_ONE_OF=1]="EXPECTED_ONE_OF",r[r.CONDITION_NOT_BOOLEAN=2]="CONDITION_NOT_BOOLEAN",r[r.UNKNOWN_SYMBOL=3]="UNKNOWN_SYMBOL",r[r.SYMBOL_IS_NOT_A_FUNCTION=4]="SYMBOL_IS_NOT_A_FUNCTION",r[r.BIN_OP_INCOMPATIBLE_TYPES=5]="BIN_OP_INCOMPATIBLE_TYPES"})(ur=cr.LanguageText||(cr.LanguageText={}));function gs(r){oa=r}cr.setLanguage=gs;function ys(r){return bn[r+"_"+oa]}cr.getStr=ys;var oa=Rt.EN,bn={};function Zr(r,e){bn[r+"_"+Rt.EN]=e}function Hr(r,e){bn[r+"_"+Rt.DE]=e}Zr(ur.EXPECTED,"expected");Hr(ur.EXPECTED,"erwarte");Zr(ur.EXPECTED_ONE_OF,"expected one of");Hr(ur.EXPECTED_ONE_OF,"erwarte Token aus Liste");Zr(ur.CONDITION_NOT_BOOLEAN,"condition must be boolean");Hr(ur.CONDITION_NOT_BOOLEAN,"Bedingung muss Boolsch sein");Zr(ur.UNKNOWN_SYMBOL,"unknown symbol");Hr(ur.UNKNOWN_SYMBOL,"unbekanntes Symbol");Zr(ur.SYMBOL_IS_NOT_A_FUNCTION,"symbol is not a function");Hr(ur.SYMBOL_IS_NOT_A_FUNCTION,"Symbol ist keine Funktion");Zr(ur.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP is incompatible for types $T1 and $T2");Hr(ur.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP ist inkompatibel mit den Typen $T1 und $T2")});var sa=br(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.LexerState=void 0;var pt=class{constructor(){this.i=0,this.n=-1,this.row=1,this.col=1,this.indent=0,this.lastIndent=0,this.stack=[]}copy(){let e=new pt;e.i=this.i,e.n=this.n,e.row=this.row,e.col=this.col,e.indent=this.indent,e.lastIndent=this.lastIndent;for(let t=0;t<this.stack.length;t++)e.stack.push(this.stack[t].copy());return e}};Lt.LexerState=pt});var ca=br(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.LexerToken=qr.LexerTokenType=void 0;var fa;(function(r){r.DEL="DEL",r.TER="TER",r.INT="INT",r.BIGINT="BIGINT",r.REAL="REAL",r.HEX="HEX",r.STR="STR",r.ID="ID",r.END="END"})(fa=qr.LexerTokenType||(qr.LexerTokenType={}));var ht=class{constructor(){this.token="",this.type=fa.TER,this.value=0,this.valueBigint=0n,this.fileID="",this.row=0,this.col=0}toString(){let e=this.token;e=e.replace(/\n/g,"\\n"),e=e.replace(/\t/g,"\\t");let t=this.fileID+":"+this.row+":"+this.col;return t+=': "'+e+'" ('+this.type+")",t}copy(){let e=new ht;return e.token=this.token,e.type=this.type,e.value=this.value,e.fileID=this.fileID,e.row=this.row,e.col=this.col,e}};qr.LexerToken=ht});var la=br(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Lexer=Tr.ParseError=Tr.LexerFile=void 0;var fe=ua(),Es=sa(),j=ca(),Ot=class{constructor(){this.stateBackup=null,this.tokenBackup=null,this.id="",this.sourceCode=""}};Tr.LexerFile=Ot;var Le=class extends Error{constructor(e){super(e),this.name="ParseError"}};Tr.ParseError=Le;var Tn=class{constructor(){this.terminals=new Set,this.fileStack=[],this.token=null,this.lastToken=null,this.state=null,this.singleLineCommentStart="//",this.multiLineCommentStart="/*",this.multilineCommentEnd="*/",this.emitNewline=!1,this.emitHex=!0,this.emitInt=!0,this.emitReal=!0,this.emitBigint=!0,this.emitDoubleQuotes=!0,this.emitIndentation=!1,this.lexerFilePositionPrefix="!>",this.allowBackslashLineBreaks=!1,this.putTrailingSemicolon=[],this.multicharDelimiters=[]}configureSingleLineComments(e="//"){this.singleLineCommentStart=e}configureMultiLineComments(e="/*",t="*/"){this.multiLineCommentStart=e,this.multilineCommentEnd=t}configureLexerFilePositionPrefix(e="!>"){this.lexerFilePositionPrefix=e}enableEmitNewlines(e){this.emitNewline=e}enableEmitHex(e){this.emitHex=e}enableEmitInt(e){this.emitInt=e}enableEmitReal(e){this.emitReal=e}enableEmitBigint(e){this.emitBigint=e}enableEmitDoubleQuotes(e){this.emitDoubleQuotes=e}enableEmitIndentation(e){this.emitIndentation=e}enableBackslashLineBreaks(e){this.allowBackslashLineBreaks=e}isEND(){return this.token.type===j.LexerTokenType.END}isNotEND(){return this.token.type!==j.LexerTokenType.END}END(){if(this.token.type===j.LexerTokenType.END)this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" END")}isID(){return this.token.type===j.LexerTokenType.ID}ID(){let e="";if(this.token.type===j.LexerTokenType.ID)e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" ID");return e}isLID(){return this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase()}LID(){let e="";if(this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase())e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" LowerCaseID");return e}isUID(){return this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase()}UID(){let e="";if(this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase())e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" UpperCaseID");return e}isINT(){return this.token.type===j.LexerTokenType.INT}INT(){let e=0;if(this.token.type===j.LexerTokenType.INT)e=this.token.value,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" INT");return e}isBIGINT(){return this.token.type===j.LexerTokenType.BIGINT}BIGINT(){let e=0n;if(this.token.type===j.LexerTokenType.BIGINT)e=this.token.valueBigint,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" BIGINT");return e}isREAL(){return this.token.type===j.LexerTokenType.REAL}REAL(){let e=0;if(this.token.type===j.LexerTokenType.REAL)e=this.token.value,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" REAL");return e}isHEX(){return this.token.type===j.LexerTokenType.HEX}HEX(){let e="";if(this.token.type===j.LexerTokenType.HEX)e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" HEX");return e}isSTR(){return this.token.type===j.LexerTokenType.STR}STR(){let e="";if(this.token.type===j.LexerTokenType.STR)e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" STR");return e}isTER(e){return this.token.type===j.LexerTokenType.DEL&&this.token.token===e||this.token.type===j.LexerTokenType.ID&&this.token.token===e}isNotTER(e){return this.isTER(e)==!1&&this.token.type!=j.LexerTokenType.END}TER(e){if(this.token.type===j.LexerTokenType.DEL&&this.token.token===e||this.token.type===j.LexerTokenType.ID&&this.token.token===e)this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+' "'+e+'"')}isEOS(){return this.token.token===";"}EOS(){if(this.token.token===";")this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+' ";"')}isINDENT(){return this.token.type==j.LexerTokenType.DEL&&this.token.token==="	+"}isNotINDENT(){return!(this.token.type===j.LexerTokenType.DEL&&this.token.token==="	+")}INDENT(){if(this.token.type==j.LexerTokenType.DEL&&this.token.token==="	+")this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" INDENT")}isOUTDENT(){return this.token.type==j.LexerTokenType.DEL&&this.token.token==="	-"}isNotOUTDENT(){return this.token.type===j.LexerTokenType.END?!1:!(this.token.type===j.LexerTokenType.DEL&&this.token.token==="	-")}OUTDENT(){if(this.token.type==j.LexerTokenType.DEL&&this.token.token==="	-")this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" OUTDENT")}isNEWLINE(){return this.isOUTDENT()||this.token.type==j.LexerTokenType.DEL&&this.token.token===`
`}isNotNEWLINE(){return!this.isOUTDENT()&&!(this.token.type===j.LexerTokenType.DEL&&this.token.token===`
`)}NEWLINE(){if(!this.isOUTDENT())if(this.token.type==j.LexerTokenType.DEL&&this.token.token===`
`)this.next();else throw new Le(this.err_pos()+(0,fe.getStr)(fe.LanguageText.EXPECTED)+" NEWLINE")}error(e,t=null){throw new Le(this.err_pos(t)+e)}errorExpected(e){let t=(0,fe.getStr)(fe.LanguageText.EXPECTED_ONE_OF)+" ";for(let n=0;n<e.length;n++)n>0&&(t+=", "),t+=e[n];t+=".",this.error(t)}errorConditionNotBoolean(){this.error((0,fe.getStr)(fe.LanguageText.CONDITION_NOT_BOOLEAN))}errorUnknownSymbol(e){this.error((0,fe.getStr)(fe.LanguageText.UNKNOWN_SYMBOL)+" "+e)}errorNotAFunction(){this.error((0,fe.getStr)(fe.LanguageText.SYMBOL_IS_NOT_A_FUNCTION))}errorTypesInBinaryOperation(e,t,n){this.error((0,fe.getStr)(fe.LanguageText.BIN_OP_INCOMPATIBLE_TYPES).replace("$OP",e).replace("$T1",t).replace("$T2",n))}err_pos(e=null){return e==null&&(e=this.token),e.fileID+":"+e.row+":"+e.col+": "}addPutTrailingSemicolon(e,t=""){let n=new j.LexerToken;n.type=e,n.token=t,this.putTrailingSemicolon.push(n)}setTerminals(e){this.terminals.clear(),this.multicharDelimiters=[];for(let t of e)t.length!=0&&(t[0]>="A"&&t[0]<="Z"||t[0]>="a"&&t[0]<="z"||t[0]=="_"?this.terminals.add(t):this.multicharDelimiters.push(t));this.multicharDelimiters.sort(function(t,n){return n.length-t.length})}getTerminals(){return Array.from(this.terminals)}getMulticharDelimiters(){return this.multicharDelimiters}getToken(){return this.token}next(){this.lastToken=this.token;let e=this.fileStack.slice(-1)[0].sourceCode,t=this.fileStack.slice(-1)[0].id,n=this.state;if(n.stack.length>0){this.token=n.stack[0],n.stack.shift();return}this.token=new j.LexerToken,this.token.fileID=t,n.indent=-1;let i=!1;for(;;)if(n.i<n.n&&e[n.i]===`
`)n.indent=0,i=this.nextTokenLinefeed(n);else if(n.i<n.n&&e[n.i]===" ")n.i++,n.col++,n.indent>=0&&n.indent++;else if(n.i<n.n&&e[n.i]==="	")n.i++,n.col+=4,n.indent>=0&&(n.indent+=4);else if(this.allowBackslashLineBreaks&&n.i<n.n&&e[n.i]==="\\")for(n.i++;n.i<n.n;){if(e[n.i]==" ")n.col++;else if(e[n.i]=="	")n.col+=4;else if(e[n.i]==`
`)n.row++,n.col=1;else break;n.i++}else if(this.singleLineCommentStart.length>0&&this.isNext(this.singleLineCommentStart)){if(this.emitIndentation&&n.indent>=0)break;let c=this.singleLineCommentStart.length;for(n.i+=c,n.col+=c;n.i<n.n&&e[n.i]!=`
`;)n.i++,n.col++;n.i<n.n&&e[n.i]===`
`&&(i=this.nextTokenLinefeed(n)),n.indent=0}else if(this.multiLineCommentStart.length>0&&this.isNext(this.multiLineCommentStart)){if(this.emitIndentation&&n.indent>=0)break;let c=this.multiLineCommentStart.length;for(n.i+=c,n.col+=c;n.i<n.n&&!this.isNext(this.multilineCommentEnd);)e[n.i]===`
`?(n.row++,n.col=1,n.indent=0):n.col++,n.i++;c=this.multilineCommentEnd.length,n.i+=c,n.col+=c}else if(this.lexerFilePositionPrefix.length>0&&e.substring(n.i).startsWith(this.lexerFilePositionPrefix)){n.i+=this.lexerFilePositionPrefix.length;let c="";for(;n.i<n.n&&e[n.i]!==":";)c+=e[n.i],n.i++;n.i++,this.fileStack.slice(-1)[0].id=c,this.token.fileID=c;let h="";for(;n.i<n.n&&e[n.i]!==":";)h+=e[n.i],n.i++;n.i++,this.token.row=parseInt(h);let f="";for(;n.i<n.n&&e[n.i]!==":";)f+=e[n.i],n.i++;n.i++,this.token.col=parseInt(f)}else break;if(this.emitIndentation&&n.indent>=0){let c=n.indent-n.lastIndent;if(n.lastIndent=n.indent,c!=0)if(c%4==0){let h=c>0,f=Math.floor(Math.abs(c)/4);for(let s=0;s<f;s++)this.token=new j.LexerToken,this.token.fileID=t,this.token.row=n.row,h?this.token.col=n.col-c+4*s:this.token.col=n.col,this.token.type=j.LexerTokenType.DEL,this.token.token=h?"	+":"	-",n.stack.push(this.token);this.token=n.stack[0],n.stack.shift();return}else{this.token.row=n.row,this.token.col=n.col-c,this.token.type=j.LexerTokenType.TER,this.token.token="	err";return}}if(i)return;let o=n.copy();if(this.token.row=n.row,this.token.col=n.col,n.indent=0,n.i>=n.n){this.token.token="$end",this.token.type=j.LexerTokenType.END;return}if(this.token.type=j.LexerTokenType.ID,this.token.token="",n.i<n.n&&(e[n.i]>="A"&&e[n.i]<="Z"||e[n.i]>="a"&&e[n.i]<="z"||e[n.i]==="_"))for(this.token.token+=e[n.i],n.i++,n.col++;n.i<n.n&&(e[n.i]>="A"&&e[n.i]<="Z"||e[n.i]>="a"&&e[n.i]<="z"||e[n.i]>="0"&&e[n.i]<="9"||e[n.i]==="_");)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0){this.terminals.has(this.token.token)&&(this.token.type=j.LexerTokenType.TER),this.state=n;return}if(n=o.copy(),this.emitDoubleQuotes&&(this.token.type=j.LexerTokenType.STR,n.i<n.n&&e[n.i]==='"')){for(this.token.token="",n.i++,n.col++;n.i<n.n&&e[n.i]!='"'&&e[n.i]!=`
`;)this.token.token+=e[n.i],n.i++,n.col++;if(n.i<n.n&&e[n.i]==='"'){n.i++,n.col++,this.state=n;return}}if(n=o.copy(),this.emitHex&&(this.token.type=j.LexerTokenType.HEX,this.token.token="",n.i<n.n&&e[n.i]==="0"&&(n.i++,n.col++,n.i<n.n&&e[n.i]==="x"))){n.i++,n.col++;let c=0;for(;n.i<n.n&&(e[n.i]>="0"&&e[n.i]<="9"||e[n.i]>="A"&&e[n.i]<="F"||e[n.i]>="a"&&e[n.i]<="f");)this.token.token+=e[n.i],n.i++,n.col++,c++;if(c>0){this.token.token="0x"+this.token.token,this.token.value=parseInt(this.token.token,16),this.token.valueBigint=BigInt(this.token.token),this.state=n;return}}if(n=o.copy(),this.emitInt){if(this.token.type=j.LexerTokenType.INT,this.token.token="",n.i<n.n&&e[n.i]==="0")this.token.token="0",n.i++,n.col++;else if(n.i<n.n&&e[n.i]>="1"&&e[n.i]<="9")for(this.token.token=e[n.i],n.i++,n.col++;n.i<n.n&&e[n.i]>="0"&&e[n.i]<="9";)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0&&this.emitBigint&&n.i<n.n&&e[n.i]==="n")n.i++,n.col++,this.token.type=j.LexerTokenType.BIGINT;else if(this.token.token.length>0&&this.emitReal&&n.i<n.n&&e[n.i]===".")for(this.token.type=j.LexerTokenType.REAL,this.token.token+=".",n.i++,n.col++;n.i<n.n&&e[n.i]>="0"&&e[n.i]<="9";)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0){this.token.type===j.LexerTokenType.INT?this.token.value=parseInt(this.token.token):this.token.type===j.LexerTokenType.BIGINT?this.token.valueBigint=BigInt(this.token.token):this.token.value=parseFloat(this.token.token),this.state=n;return}}this.token.type=j.LexerTokenType.DEL,this.token.token="";for(let c=0;c<this.multicharDelimiters.length;c++){let h=this.multicharDelimiters[c],f=!0;n=o.copy();for(let s=0;s<h.length;s++){let a=h[s];if(n.i<n.n&&e[n.i]===a)n.i++,n.col++;else{f=!1;break}}if(f){this.state=n,this.token.token=h;return}}n=o.copy(),this.token.type=j.LexerTokenType.DEL,this.token.token="",n.i<n.n&&(this.token.token=e[n.i],n.i++,n.col++,this.state=n)}nextTokenLinefeed(e){let t=!1;if(this.emitNewline)this.token.row=e.row,this.token.col=e.col,this.token.token=`
`,this.token.type=j.LexerTokenType.DEL;else if(this.putTrailingSemicolon.length>0){let n=!1;for(let i of this.putTrailingSemicolon)if(i.type===this.lastToken.type&&(i.type===j.LexerTokenType.DEL?n=i.token===this.lastToken.token:n=!0,n))break;n&&(t=!0,this.token.row=e.row,this.token.col=e.col,this.token.token=";",this.token.type=j.LexerTokenType.DEL)}return e.row++,e.col=1,e.indent=0,e.i++,this.emitNewline||t}isNext(e){let t=this.fileStack.slice(-1)[0].sourceCode,n=this.state,i=e.length;if(n.i+i>=n.n)return!1;for(let o=0;o<i;o++){let c=e[o];if(t[n.i+o]!=c)return!1}return!0}pushSource(e,t){this.fileStack.length>0&&(this.fileStack.slice(-1)[0].stateBackup=this.state.copy(),this.fileStack.slice(-1)[0].tokenBackup=this.token.copy());let n=new Ot;n.id=e,n.sourceCode=t,this.fileStack.push(n),this.state=new Es.LexerState,this.state.n=t.length,this.next()}popSource(){this.fileStack.pop(),this.fileStack.length>0&&(this.state=this.fileStack.slice(-1)[0].stateBackup,this.token=this.fileStack.slice(-1)[0].tokenBackup)}backupState(){return{state:this.state.copy(),token:this.token.copy()}}replayState(e){this.state=e.state,this.token=e.token}};Tr.Lexer=Tn});var Mn=br(Vr=>{"use strict";var ws=Vr&&Vr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),As=Vr&&Vr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ws(e,r,t)};Object.defineProperty(Vr,"__esModule",{value:!0});As(la(),Vr)});var Za=br((In,Rn)=>{(function(r,e){typeof In=="object"&&typeof Rn<"u"?Rn.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self,r.typed=e())})(In,function(){"use strict";function r(a,u){var l=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!l){if(Array.isArray(a)||(l=e(a))||u&&a&&typeof a.length=="number"){l&&(a=l);var m=0,v=function(){};return{s:v,n:function(){return m>=a.length?{done:!0}:{done:!1,value:a[m++]}},e:function(g){throw g},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,d=!1,x;return{s:function(){l=l.call(a)},n:function(){var g=l.next();return p=g.done,g},e:function(g){d=!0,x=g},f:function(){try{!p&&l.return!=null&&l.return()}finally{if(d)throw x}}}}function e(a,u){if(!!a){if(typeof a=="string")return t(a,u);var l=Object.prototype.toString.call(a).slice(8,-1);if(l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set")return Array.from(a);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return t(a,u)}}function t(a,u){(u==null||u>a.length)&&(u=a.length);for(var l=0,m=new Array(u);l<u;l++)m[l]=a[l];return m}function n(a){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n(a)}function i(){return!0}function o(){return!1}function c(){}var h="Argument is not a typed-function.";function f(){function a(b){return n(b)==="object"&&b!==null&&b.constructor===Object}var u=[{name:"number",test:function(M){return typeof M=="number"}},{name:"string",test:function(M){return typeof M=="string"}},{name:"boolean",test:function(M){return typeof M=="boolean"}},{name:"Function",test:function(M){return typeof M=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(M){return M instanceof Date}},{name:"RegExp",test:function(M){return M instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(M){return M===null}},{name:"undefined",test:function(M){return M===void 0}}],l={name:"any",test:i,isAny:!0},m,v,p=0,d={createCount:0};function x(b){var M=m.get(b);if(M)return M;var B='Unknown type "'+b+'"',P=b.toLowerCase(),V,Z=r(v),G;try{for(Z.s();!(G=Z.n()).done;)if(V=G.value,V.toLowerCase()===P){B+='. Did you mean "'+V+'" ?';break}}catch(k){Z.e(k)}finally{Z.f()}throw new TypeError(B)}function y(b){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",B=M?x(M).index:v.length,P=[],V=0;V<b.length;++V){if(!b[V]||typeof b[V].name!="string"||typeof b[V].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var Z=b[V].name;if(m.has(Z))throw new TypeError('Duplicate type name "'+Z+'"');P.push(Z),m.set(Z,{name:Z,test:b[V].test,isAny:b[V].isAny,index:B+V,conversionsTo:[]})}var G=v.slice(B);v=v.slice(0,B).concat(P).concat(G);for(var k=B+P.length;k<v.length;++k)m.get(v[k]).index=k}function g(){m=new Map,v=[],p=0,y([l],!1)}g(),y(u);function A(){var b,M=r(v),B;try{for(M.s();!(B=M.n()).done;)b=B.value,m.get(b).conversionsTo=[]}catch(P){M.e(P)}finally{M.f()}p=0}function w(b){var M=v.filter(function(B){var P=m.get(B);return!P.isAny&&P.test(b)});return M.length?M:["any"]}function D(b){return b&&typeof b=="function"&&"_typedFunctionData"in b}function E(b,M,B){if(!D(b))throw new TypeError(h);var P=B&&B.exact,V=Array.isArray(M)?M.join(","):M,Z=O(V),G=T(Z);if(!P||G in b.signatures){var k=b._typedFunctionData.signatureMap.get(G);if(k)return k}var H=Z.length,re;if(P){re=[];var se;for(se in b.signatures)re.push(b._typedFunctionData.signatureMap.get(se))}else re=b._typedFunctionData.signatures;for(var $=0;$<H;++$){var Ge=Z[$],ke=[],Ze=void 0,Ne=r(re),We;try{for(Ne.s();!(We=Ne.n()).done;){Ze=We.value;var Re=U(Ze.params,$);if(!(!Re||Ge.restParam&&!Re.restParam)){if(!Re.hasAny){var fr=function(){var je=q(Re);if(Ge.types.some(function(kr){return!je.has(kr.name)}))return"continue"}();if(fr==="continue")continue}ke.push(Ze)}}}catch(je){Ne.e(je)}finally{Ne.f()}if(re=ke,re.length===0)break}var Ye,$e=r(re),zr;try{for($e.s();!(zr=$e.n()).done;)if(Ye=zr.value,Ye.params.length<=H)return Ye}catch(je){$e.e(je)}finally{$e.f()}throw new TypeError("Signature not found (signature: "+(b.name||"unnamed")+"("+T(Z,", ")+"))")}function _(b,M,B){return E(b,M,B).implementation}function C(b,M){var B=x(M);if(B.test(b))return b;var P=B.conversionsTo;if(P.length===0)throw new Error("There are no conversions to "+M+" defined.");for(var V=0;V<P.length;V++){var Z=x(P[V].from);if(Z.test(b))return P[V].convert(b)}throw new Error("Cannot convert "+b+" to "+M)}function T(b){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return b.map(function(B){return B.name}).join(M)}function S(b){var M=b.indexOf("...")===0,B=M?b.length>3?b.slice(3):"any":b,P=B.split("|").map(function(k){return x(k.trim())}),V=!1,Z=M?"...":"",G=P.map(function(k){return V=k.isAny||V,Z+=k.name+"|",{name:k.name,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:null,conversionIndex:-1}});return{types:G,name:Z.slice(0,-1),hasAny:V,hasConversion:!1,restParam:M}}function R(b){var M=b.types.map(function(G){return G.name}),B=ae(M),P=b.hasAny,V=b.name,Z=B.map(function(G){var k=x(G.from);return P=k.isAny||P,V+="|"+G.from,{name:G.from,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:G,conversionIndex:G.index}});return{types:b.types.concat(Z),name:V,hasAny:P,hasConversion:Z.length>0,restParam:b.restParam}}function q(b){return b.typeSet||(b.typeSet=new Set,b.types.forEach(function(M){return b.typeSet.add(M.name)})),b.typeSet}function O(b){var M=[];if(typeof b!="string")throw new TypeError("Signatures must be strings");var B=b.trim();if(B==="")return M;for(var P=B.split(","),V=0;V<P.length;++V){var Z=S(P[V].trim());if(Z.restParam&&V!==P.length-1)throw new SyntaxError('Unexpected rest parameter "'+P[V]+'": only allowed for the last parameter');if(Z.types.length===0)return null;M.push(Z)}return M}function I(b){var M=Se(b);return M?M.restParam:!1}function F(b){if(!b||b.types.length===0)return i;if(b.types.length===1)return x(b.types[0].name).test;if(b.types.length===2){var M=x(b.types[0].name).test,B=x(b.types[1].name).test;return function(Z){return M(Z)||B(Z)}}else{var P=b.types.map(function(V){return x(V.name).test});return function(Z){for(var G=0;G<P.length;G++)if(P[G](Z))return!0;return!1}}}function Y(b){var M,B,P;if(I(b)){M=ve(b).map(F);var V=M.length,Z=F(Se(b)),G=function(H){for(var re=V;re<H.length;re++)if(!Z(H[re]))return!1;return!0};return function(H){for(var re=0;re<M.length;re++)if(!M[re](H[re]))return!1;return G(H)&&H.length>=V+1}}else return b.length===0?function(H){return H.length===0}:b.length===1?(B=F(b[0]),function(H){return B(H[0])&&H.length===1}):b.length===2?(B=F(b[0]),P=F(b[1]),function(H){return B(H[0])&&P(H[1])&&H.length===2}):(M=b.map(F),function(H){for(var re=0;re<M.length;re++)if(!M[re](H[re]))return!1;return H.length===M.length})}function U(b,M){return M<b.length?b[M]:I(b)?Se(b):null}function N(b,M){var B=U(b,M);return B?q(B):new Set}function X(b){return b.conversion===null||b.conversion===void 0}function Q(b,M){var B=new Set;return b.forEach(function(P){var V=N(P.params,M),Z,G=r(V),k;try{for(G.s();!(k=G.n()).done;)Z=k.value,B.add(Z)}catch(H){G.e(H)}finally{G.f()}}),B.has("any")?["any"]:Array.from(B)}function oe(b,M,B){var P,V,Z=b||"unnamed",G=B,k,H=function(){var Ne=[];if(G.forEach(function(Re){var fr=U(Re.params,k),Ye=F(fr);(k<Re.params.length||I(Re.params))&&Ye(M[k])&&Ne.push(Re)}),Ne.length===0){if(V=Q(G,k),V.length>0){var We=w(M[k]);return P=new TypeError("Unexpected type of argument in function "+Z+" (expected: "+V.join(" or ")+", actual: "+We.join(" | ")+", index: "+k+")"),P.data={category:"wrongType",fn:Z,index:k,actual:We,expected:V},{v:P}}}else G=Ne};for(k=0;k<M.length;k++){var re=H();if(n(re)==="object")return re.v}var se=G.map(function(Ze){return I(Ze.params)?1/0:Ze.params.length});if(M.length<Math.min.apply(null,se))return V=Q(G,k),P=new TypeError("Too few arguments in function "+Z+" (expected: "+V.join(" or ")+", index: "+M.length+")"),P.data={category:"tooFewArgs",fn:Z,index:M.length,expected:V},P;var $=Math.max.apply(null,se);if(M.length>$)return P=new TypeError("Too many arguments in function "+Z+" (expected: "+$+", actual: "+M.length+")"),P.data={category:"tooManyArgs",fn:Z,index:M.length,expectedLength:$},P;for(var Ge=[],ke=0;ke<M.length;++ke)Ge.push(w(M[ke]).join("|"));return P=new TypeError('Arguments of type "'+Ge.join(", ")+'" do not match any of the defined signatures of function '+Z+"."),P.data={category:"mismatch",actual:Ge},P}function ee(b){for(var M=v.length+1,B=0;B<b.types.length;B++)X(b.types[B])&&(M=Math.min(M,b.types[B].typeIndex));return M}function K(b){for(var M=p+1,B=0;B<b.types.length;B++)X(b.types[B])||(M=Math.min(M,b.types[B].conversionIndex));return M}function ye(b,M){if(b.hasAny){if(!M.hasAny)return 1}else if(M.hasAny)return-1;if(b.restParam){if(!M.restParam)return 1}else if(M.restParam)return-1;if(b.hasConversion){if(!M.hasConversion)return 1}else if(M.hasConversion)return-1;var B=ee(b)-ee(M);if(B<0)return-1;if(B>0)return 1;var P=K(b)-K(M);return P<0?-1:P>0?1:0}function le(b,M){var B=b.params,P=M.params,V=Se(B),Z=Se(P),G=I(B),k=I(P);if(G&&V.hasAny){if(!k||!Z.hasAny)return 1}else if(k&&Z.hasAny)return-1;var H=0,re=0,se,$=r(B),Ge;try{for($.s();!(Ge=$.n()).done;)se=Ge.value,se.hasAny&&++H,se.hasConversion&&++re}catch(st){$.e(st)}finally{$.f()}var ke=0,Ze=0,Ne=r(P),We;try{for(Ne.s();!(We=Ne.n()).done;)se=We.value,se.hasAny&&++ke,se.hasConversion&&++Ze}catch(st){Ne.e(st)}finally{Ne.f()}if(H!==ke)return H-ke;if(G&&V.hasConversion){if(!k||!Z.hasConversion)return 1}else if(k&&Z.hasConversion)return-1;if(re!==Ze)return re-Ze;if(G){if(!k)return 1}else if(k)return-1;var Re=(B.length-P.length)*(G?-1:1);if(Re!==0)return Re;for(var fr=[],Ye=0,$e=0;$e<B.length;++$e){var zr=ye(B[$e],P[$e]);fr.push(zr),Ye+=zr}if(Ye!==0)return Ye;for(var je,kr=0,St=fr;kr<St.length;kr++)if(je=St[kr],je!==0)return je;return 0}function ae(b){if(b.length===0)return[];var M=b.map(x);b.length>1&&M.sort(function(H,re){return H.index-re.index});var B=M[0].conversionsTo;if(b.length===1)return B;B=B.concat([]);for(var P=new Set(b),V=1;V<M.length;++V){var Z=void 0,G=r(M[V].conversionsTo),k;try{for(G.s();!(k=G.n()).done;)Z=k.value,P.has(Z.from)||(B.push(Z),P.add(Z.from))}catch(H){G.e(H)}finally{G.f()}}return B}function me(b,M){var B=M;if(b.some(function(k){return k.hasConversion})){var P=I(b),V=b.map(he);B=function(){for(var H=[],re=P?arguments.length-1:arguments.length,se=0;se<re;se++)H[se]=V[se](arguments[se]);return P&&(H[re]=arguments[re].map(V[re])),M.apply(this,H)}}var Z=B;if(I(b)){var G=b.length-1;Z=function(){return B.apply(this,ar(arguments,0,G).concat([ar(arguments,G)]))}}return Z}function he(b){var M,B,P,V,Z=[],G=[];switch(b.types.forEach(function(k){k.conversion&&(Z.push(x(k.conversion.from).test),G.push(k.conversion.convert))}),G.length){case 0:return function(H){return H};case 1:return M=Z[0],P=G[0],function(H){return M(H)?P(H):H};case 2:return M=Z[0],B=Z[1],P=G[0],V=G[1],function(H){return M(H)?P(H):B(H)?V(H):H};default:return function(H){for(var re=0;re<G.length;re++)if(Z[re](H))return G[re](H);return H}}}function ne(b){function M(B,P,V){if(P<B.length){var Z=B[P],G=[];if(Z.restParam){var k=Z.types.filter(X);k.length<Z.types.length&&G.push({types:k,name:"..."+k.map(function(H){return H.name}).join("|"),hasAny:k.some(function(H){return H.isAny}),hasConversion:!1,restParam:!0}),G.push(Z)}else G=Z.types.map(function(H){return{types:[H],name:H.name,hasAny:H.isAny,hasConversion:H.conversion,restParam:!1}});return Tt(G,function(H){return M(B,P+1,V.concat([H]))})}else return[V]}return M(b,0,[])}function Me(b,M){for(var B=Math.max(b.length,M.length),P=0;P<B;P++){var V=N(b,P),Z=N(M,P),G=!1,k=void 0,H=r(Z),re;try{for(H.s();!(re=H.n()).done;)if(k=re.value,V.has(k)){G=!0;break}}catch(Ze){H.e(Ze)}finally{H.f()}if(!G)return!1}var se=b.length,$=M.length,Ge=I(b),ke=I(M);return Ge?ke?se===$:$>=se:ke?se>=$:se===$}function Ce(b){return b.map(function(M){return Ur(M)?ot(M.referToSelf.callback):ut(M)?Ft(M.referTo.references,M.referTo.callback):M})}function ue(b,M,B){var P=[],V,Z=r(b),G;try{for(Z.s();!(G=Z.n()).done;){V=G.value;var k=B[V];if(typeof k!="number")throw new TypeError('No definition for referenced signature "'+V+'"');if(k=M[k],typeof k!="function")return!1;P.push(k)}}catch(H){Z.e(H)}finally{Z.f()}return P}function De(b,M,B){for(var P=Ce(b),V=new Array(P.length).fill(!1),Z=!0;Z;){Z=!1;for(var G=!0,k=0;k<P.length;++k)if(!V[k]){var H=P[k];if(Ur(H))P[k]=H.referToSelf.callback(B),P[k].referToSelf=H.referToSelf,V[k]=!0,G=!1;else if(ut(H)){var re=ue(H.referTo.references,P,M);re?(P[k]=H.referTo.callback.apply(this,re),P[k].referTo=H.referTo,V[k]=!0,G=!1):Z=!0}}if(G&&Z)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return P}function Ie(b){var M=/\bthis(\(|\.signatures\b)/;Object.keys(b).forEach(function(B){var P=b[B];if(M.test(P.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ir(b,M){if(d.createCount++,Object.keys(M).length===0)throw new SyntaxError("No signatures provided");d.warnAgainstDeprecatedThis&&Ie(M);var B=[],P=[],V={},Z=[],G,k=function(){if(!Object.prototype.hasOwnProperty.call(M,G))return"continue";var qe=O(G);if(!qe)return"continue";B.forEach(function(Xr){if(Me(Xr,qe))throw new TypeError('Conflicting signatures "'+T(Xr)+'" and "'+T(qe)+'".')}),B.push(qe);var ta=P.length;P.push(M[G]);var ls=qe.map(R),Nt=void 0,Bt=r(ne(ls)),na;try{for(Bt.s();!(na=Bt.n()).done;){Nt=na.value;var ia=T(Nt);Z.push({params:Nt,name:ia,fn:ta}),Nt.every(function(Xr){return!Xr.hasConversion})&&(V[ia]=ta)}}catch(Xr){Bt.e(Xr)}finally{Bt.f()}};for(G in M)var H=k();Z.sort(le);var re=De(P,V,ct),se;for(se in V)Object.prototype.hasOwnProperty.call(V,se)&&(V[se]=re[V[se]]);for(var $=[],Ge=new Map,ke=0,Ze=Z;ke<Ze.length;ke++)se=Ze[ke],Ge.has(se.name)||(se.fn=re[se.fn],$.push(se),Ge.set(se.name,se));for(var Ne=$[0]&&$[0].params.length<=2&&!I($[0].params),We=$[1]&&$[1].params.length<=2&&!I($[1].params),Re=$[2]&&$[2].params.length<=2&&!I($[2].params),fr=$[3]&&$[3].params.length<=2&&!I($[3].params),Ye=$[4]&&$[4].params.length<=2&&!I($[4].params),$e=$[5]&&$[5].params.length<=2&&!I($[5].params),zr=Ne&&We&&Re&&fr&&Ye&&$e,je=0;je<$.length;++je)$[je].test=Y($[je].params);for(var kr=Ne?F($[0].params[0]):o,St=We?F($[1].params[0]):o,st=Re?F($[2].params[0]):o,ku=fr?F($[3].params[0]):o,qu=Ye?F($[4].params[0]):o,Vu=$e?F($[5].params[0]):o,Uu=Ne?F($[0].params[1]):o,Xu=We?F($[1].params[1]):o,Zu=Re?F($[2].params[1]):o,Hu=fr?F($[3].params[1]):o,Gu=Ye?F($[4].params[1]):o,Yu=$e?F($[5].params[1]):o,ft=0;ft<$.length;++ft)$[ft].implementation=me($[ft].params,$[ft].fn);var $u=Ne?$[0].implementation:c,Qu=We?$[1].implementation:c,Ju=Re?$[2].implementation:c,Ku=fr?$[3].implementation:c,Wu=Ye?$[4].implementation:c,ju=$e?$[5].implementation:c,es=Ne?$[0].params.length:-1,rs=We?$[1].params.length:-1,ts=Re?$[2].params.length:-1,ns=fr?$[3].params.length:-1,is=Ye?$[4].params.length:-1,as=$e?$[5].params.length:-1,os=zr?6:0,us=$.length,ss=$.map(function(or){return or.test}),fs=$.map(function(or){return or.implementation}),cs=function(){for(var qe=os;qe<us;qe++)if(ss[qe](arguments))return fs[qe].apply(this,arguments);return d.onMismatch(b,arguments,$)};function ct(or,qe){return arguments.length===es&&kr(or)&&Uu(qe)?$u.apply(this,arguments):arguments.length===rs&&St(or)&&Xu(qe)?Qu.apply(this,arguments):arguments.length===ts&&st(or)&&Zu(qe)?Ju.apply(this,arguments):arguments.length===ns&&ku(or)&&Hu(qe)?Ku.apply(this,arguments):arguments.length===is&&qu(or)&&Gu(qe)?Wu.apply(this,arguments):arguments.length===as&&Vu(or)&&Yu(qe)?ju.apply(this,arguments):cs.apply(this,arguments)}try{Object.defineProperty(ct,"name",{value:b})}catch{}return ct.signatures=V,ct._typedFunctionData={signatures:$,signatureMap:Ge},ct}function Xe(b,M,B){throw oe(b,M,B)}function ve(b){return ar(b,0,b.length-1)}function Se(b){return b[b.length-1]}function ar(b,M,B){return Array.prototype.slice.call(b,M,B)}function _n(b,M){for(var B=0;B<b.length;B++)if(M(b[B]))return b[B]}function Tt(b,M){return Array.prototype.concat.apply([],b.map(M))}function Mt(){var b=ve(arguments).map(function(B){return T(O(B))}),M=Se(arguments);if(typeof M!="function")throw new TypeError("Callback function expected as last argument");return Ft(b,M)}function Ft(b,M){return{referTo:{references:b,callback:M}}}function ot(b){if(typeof b!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:b}}}function ut(b){return b&&n(b.referTo)==="object"&&Array.isArray(b.referTo.references)&&typeof b.referTo.callback=="function"}function Ur(b){return b&&n(b.referToSelf)==="object"&&typeof b.referToSelf.callback=="function"}function ea(b,M){if(!b)return M;if(M&&M!==b){var B=new Error("Function names do not match (expected: "+b+", actual: "+M+")");throw B.data={actual:M,expected:b},B}return b}function Ou(b){var M;for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&(D(b[B])||typeof b[B].signature=="string")&&(M=ea(M,b[B].name));return M}function Pu(b,M){var B;for(B in M)if(Object.prototype.hasOwnProperty.call(M,B)){if(B in b&&M[B]!==b[B]){var P=new Error('Signature "'+B+'" is defined twice');throw P.data={signature:B,sourceFunction:M[B],destFunction:b[B]},P}b[B]=M[B]}}var zu=d;d=function(M){for(var B=typeof M=="string",P=B?1:0,V=B?M:"",Z={},G=P;G<arguments.length;++G){var k=arguments[G],H={},re=void 0;if(typeof k=="function"?(re=k.name,typeof k.signature=="string"?H[k.signature]=k:D(k)&&(H=k.signatures)):a(k)&&(H=k,B||(re=Ou(k))),Object.keys(H).length===0){var se=new TypeError("Argument to 'typed' at index "+G+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw se.data={index:G,argument:k},se}B||(V=ea(V,re)),Pu(Z,H)}return ir(V||"",Z)},d.create=f,d.createCount=zu.createCount,d.onMismatch=Xe,d.throwMismatchError=Xe,d.createError=oe,d.clear=g,d.clearConversions=A,d.addTypes=y,d._findType=x,d.referTo=Mt,d.referToSelf=ot,d.convert=C,d.findSignature=E,d.find=_,d.isTypedFunction=D,d.warnAgainstDeprecatedThis=!0,d.addType=function(b,M){var B="any";M!==!1&&m.has("Object")&&(B="Object"),d.addTypes([b],B)};function ra(b){if(!b||typeof b.from!="string"||typeof b.to!="string"||typeof b.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(b.to===b.from)throw new SyntaxError('Illegal to define conversion from "'+b.from+'" to itself.')}return d.addConversion=function(b){ra(b);var M=x(b.to);if(M.conversionsTo.every(function(B){return B.from!==b.from}))M.conversionsTo.push({from:b.from,convert:b.convert,index:p++});else throw new Error('There is already a conversion from "'+b.from+'" to "'+M.name+'"')},d.addConversions=function(b){b.forEach(d.addConversion)},d.removeConversion=function(b){ra(b);var M=x(b.to),B=_n(M.conversionsTo,function(V){return V.from===b.from});if(!B)throw new Error("Attempt to remove nonexistent conversion from "+b.from+" to "+b.to);if(B.convert!==b.convert)throw new Error("Conversion to remove does not match existing conversion");var P=M.conversionsTo.indexOf(B);M.conversionsTo.splice(P,1)},d.resolve=function(b,M){if(!D(b))throw new TypeError(h);for(var B=b._typedFunctionData.signatures,P=0;P<B.length;++P)if(B[P].test(M))return B[P];return null},d}var s=f();return s})});var So=br((Wn,Fo)=>{(function(r){"use strict";var e=Math.cosh||function(s){return Math.abs(s)<1e-9?1-s:(Math.exp(s)+Math.exp(-s))*.5},t=Math.sinh||function(s){return Math.abs(s)<1e-9?s:(Math.exp(s)-Math.exp(-s))*.5},n=function(s){var a=Math.PI/4;if(-a>s||s>a)return Math.cos(s)-1;var u=s*s;return u*(u*(u*(u*(u*(u*(u*(u/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},i=function(s,a){var u=Math.abs(s),l=Math.abs(a);return u<3e3&&l<3e3?Math.sqrt(u*u+l*l):(u<l?(u=l,l=s/a):l=a/s,u*Math.sqrt(1+l*l))},o=function(){throw SyntaxError("Invalid Param")};function c(s,a){var u=Math.abs(s),l=Math.abs(a);return s===0?Math.log(l):a===0?Math.log(u):u<3e3&&l<3e3?Math.log(s*s+a*a)*.5:(s=s/2,a=a/2,.5*Math.log(s*s+a*a)+Math.LN2)}var h=function(s,a){var u={re:0,im:0};if(s==null)u.re=u.im=0;else if(a!==void 0)u.re=s,u.im=a;else switch(typeof s){case"object":if("im"in s&&"re"in s)u.re=s.re,u.im=s.im;else if("abs"in s&&"arg"in s){if(!Number.isFinite(s.abs)&&Number.isFinite(s.arg))return f.INFINITY;u.re=s.abs*Math.cos(s.arg),u.im=s.abs*Math.sin(s.arg)}else if("r"in s&&"phi"in s){if(!Number.isFinite(s.r)&&Number.isFinite(s.phi))return f.INFINITY;u.re=s.r*Math.cos(s.phi),u.im=s.r*Math.sin(s.phi)}else s.length===2?(u.re=s[0],u.im=s[1]):o();break;case"string":u.im=u.re=0;var l=s.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,v=0;l===null&&o();for(var p=0;p<l.length;p++){var d=l[p];d===" "||d==="	"||d===`
`||(d==="+"?m++:d==="-"?v++:d==="i"||d==="I"?(m+v===0&&o(),l[p+1]!==" "&&!isNaN(l[p+1])?(u.im+=parseFloat((v%2?"-":"")+l[p+1]),p++):u.im+=parseFloat((v%2?"-":"")+"1"),m=v=0):((m+v===0||isNaN(d))&&o(),l[p+1]==="i"||l[p+1]==="I"?(u.im+=parseFloat((v%2?"-":"")+d),p++):u.re+=parseFloat((v%2?"-":"")+d),m=v=0))}m+v>0&&o();break;case"number":u.im=0,u.re=s;break;default:o()}return isNaN(u.re)||isNaN(u.im),u};function f(s,a){if(!(this instanceof f))return new f(s,a);var u=h(s,a);this.re=u.re,this.im=u.im}f.prototype={re:0,im:0,sign:function(){var s=this.abs();return new f(this.re/s,this.im/s)},add:function(s,a){var u=new f(s,a);return this.isInfinite()&&u.isInfinite()?f.NAN:this.isInfinite()||u.isInfinite()?f.INFINITY:new f(this.re+u.re,this.im+u.im)},sub:function(s,a){var u=new f(s,a);return this.isInfinite()&&u.isInfinite()?f.NAN:this.isInfinite()||u.isInfinite()?f.INFINITY:new f(this.re-u.re,this.im-u.im)},mul:function(s,a){var u=new f(s,a);return this.isInfinite()&&u.isZero()||this.isZero()&&u.isInfinite()?f.NAN:this.isInfinite()||u.isInfinite()?f.INFINITY:u.im===0&&this.im===0?new f(this.re*u.re,0):new f(this.re*u.re-this.im*u.im,this.re*u.im+this.im*u.re)},div:function(s,a){var u=new f(s,a);if(this.isZero()&&u.isZero()||this.isInfinite()&&u.isInfinite())return f.NAN;if(this.isInfinite()||u.isZero())return f.INFINITY;if(this.isZero()||u.isInfinite())return f.ZERO;s=this.re,a=this.im;var l=u.re,m=u.im,v,p;return m===0?new f(s/l,a/l):Math.abs(l)<Math.abs(m)?(p=l/m,v=l*p+m,new f((s*p+a)/v,(a*p-s)/v)):(p=m/l,v=m*p+l,new f((s+a*p)/v,(a-s*p)/v))},pow:function(s,a){var u=new f(s,a);if(s=this.re,a=this.im,u.isZero())return f.ONE;if(u.im===0){if(a===0&&s>0)return new f(Math.pow(s,u.re),0);if(s===0)switch((u.re%4+4)%4){case 0:return new f(Math.pow(a,u.re),0);case 1:return new f(0,Math.pow(a,u.re));case 2:return new f(-Math.pow(a,u.re),0);case 3:return new f(0,-Math.pow(a,u.re))}}if(s===0&&a===0&&u.re>0&&u.im>=0)return f.ZERO;var l=Math.atan2(a,s),m=c(s,a);return s=Math.exp(u.re*m-u.im*l),a=u.im*m+u.re*l,new f(s*Math.cos(a),s*Math.sin(a))},sqrt:function(){var s=this.re,a=this.im,u=this.abs(),l,m;if(s>=0){if(a===0)return new f(Math.sqrt(s),0);l=.5*Math.sqrt(2*(u+s))}else l=Math.abs(a)/Math.sqrt(2*(u-s));return s<=0?m=.5*Math.sqrt(2*(u-s)):m=Math.abs(a)/Math.sqrt(2*(u+s)),new f(l,a<0?-m:m)},exp:function(){var s=Math.exp(this.re);return this.im,new f(s*Math.cos(this.im),s*Math.sin(this.im))},expm1:function(){var s=this.re,a=this.im;return new f(Math.expm1(s)*Math.cos(a)+n(a),Math.exp(s)*Math.sin(a))},log:function(){var s=this.re,a=this.im;return a===0&&s>0,new f(c(s,a),Math.atan2(a,s))},abs:function(){return i(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var s=this.re,a=this.im;return new f(Math.sin(s)*e(a),Math.cos(s)*t(a))},cos:function(){var s=this.re,a=this.im;return new f(Math.cos(s)*e(a),-Math.sin(s)*t(a))},tan:function(){var s=2*this.re,a=2*this.im,u=Math.cos(s)+e(a);return new f(Math.sin(s)/u,t(a)/u)},cot:function(){var s=2*this.re,a=2*this.im,u=Math.cos(s)-e(a);return new f(-Math.sin(s)/u,t(a)/u)},sec:function(){var s=this.re,a=this.im,u=.5*e(2*a)+.5*Math.cos(2*s);return new f(Math.cos(s)*e(a)/u,Math.sin(s)*t(a)/u)},csc:function(){var s=this.re,a=this.im,u=.5*e(2*a)-.5*Math.cos(2*s);return new f(Math.sin(s)*e(a)/u,-Math.cos(s)*t(a)/u)},asin:function(){var s=this.re,a=this.im,u=new f(a*a-s*s+1,-2*s*a).sqrt(),l=new f(u.re-a,u.im+s).log();return new f(l.im,-l.re)},acos:function(){var s=this.re,a=this.im,u=new f(a*a-s*s+1,-2*s*a).sqrt(),l=new f(u.re-a,u.im+s).log();return new f(Math.PI/2-l.im,l.re)},atan:function(){var s=this.re,a=this.im;if(s===0){if(a===1)return new f(0,1/0);if(a===-1)return new f(0,-1/0)}var u=s*s+(1-a)*(1-a),l=new f((1-a*a-s*s)/u,-2*s/u).log();return new f(-.5*l.im,.5*l.re)},acot:function(){var s=this.re,a=this.im;if(a===0)return new f(Math.atan2(1,s),0);var u=s*s+a*a;return u!==0?new f(s/u,-a/u).atan():new f(s!==0?s/0:0,a!==0?-a/0:0).atan()},asec:function(){var s=this.re,a=this.im;if(s===0&&a===0)return new f(0,1/0);var u=s*s+a*a;return u!==0?new f(s/u,-a/u).acos():new f(s!==0?s/0:0,a!==0?-a/0:0).acos()},acsc:function(){var s=this.re,a=this.im;if(s===0&&a===0)return new f(Math.PI/2,1/0);var u=s*s+a*a;return u!==0?new f(s/u,-a/u).asin():new f(s!==0?s/0:0,a!==0?-a/0:0).asin()},sinh:function(){var s=this.re,a=this.im;return new f(t(s)*Math.cos(a),e(s)*Math.sin(a))},cosh:function(){var s=this.re,a=this.im;return new f(e(s)*Math.cos(a),t(s)*Math.sin(a))},tanh:function(){var s=2*this.re,a=2*this.im,u=e(s)+Math.cos(a);return new f(t(s)/u,Math.sin(a)/u)},coth:function(){var s=2*this.re,a=2*this.im,u=e(s)-Math.cos(a);return new f(t(s)/u,-Math.sin(a)/u)},csch:function(){var s=this.re,a=this.im,u=Math.cos(2*a)-e(2*s);return new f(-2*t(s)*Math.cos(a)/u,2*e(s)*Math.sin(a)/u)},sech:function(){var s=this.re,a=this.im,u=Math.cos(2*a)+e(2*s);return new f(2*e(s)*Math.cos(a)/u,-2*t(s)*Math.sin(a)/u)},asinh:function(){var s=this.im;this.im=-this.re,this.re=s;var a=this.asin();return this.re=-this.im,this.im=s,s=a.re,a.re=-a.im,a.im=s,a},acosh:function(){var s=this.acos();if(s.im<=0){var a=s.re;s.re=-s.im,s.im=a}else{var a=s.im;s.im=-s.re,s.re=a}return s},atanh:function(){var s=this.re,a=this.im,u=s>1&&a===0,l=1-s,m=1+s,v=l*l+a*a,p=v!==0?new f((m*l-a*a)/v,(a*l+m*a)/v):new f(s!==-1?s/0:0,a!==0?a/0:0),d=p.re;return p.re=c(p.re,p.im)/2,p.im=Math.atan2(p.im,d)/2,u&&(p.im=-p.im),p},acoth:function(){var s=this.re,a=this.im;if(s===0&&a===0)return new f(0,Math.PI/2);var u=s*s+a*a;return u!==0?new f(s/u,-a/u).atanh():new f(s!==0?s/0:0,a!==0?-a/0:0).atanh()},acsch:function(){var s=this.re,a=this.im;if(a===0)return new f(s!==0?Math.log(s+Math.sqrt(s*s+1)):1/0,0);var u=s*s+a*a;return u!==0?new f(s/u,-a/u).asinh():new f(s!==0?s/0:0,a!==0?-a/0:0).asinh()},asech:function(){var s=this.re,a=this.im;if(this.isZero())return f.INFINITY;var u=s*s+a*a;return u!==0?new f(s/u,-a/u).acosh():new f(s!==0?s/0:0,a!==0?-a/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var s=this.re,a=this.im,u=s*s+a*a;return new f(s/u,-a/u)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(s){return s=Math.pow(10,s||0),new f(Math.ceil(this.re*s)/s,Math.ceil(this.im*s)/s)},floor:function(s){return s=Math.pow(10,s||0),new f(Math.floor(this.re*s)/s,Math.floor(this.im*s)/s)},round:function(s){return s=Math.pow(10,s||0),new f(Math.round(this.re*s)/s,Math.round(this.im*s)/s)},equals:function(s,a){var u=new f(s,a);return Math.abs(u.re-this.re)<=f.EPSILON&&Math.abs(u.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var s=this.re,a=this.im,u="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(s)<f.EPSILON&&(s=0),Math.abs(a)<f.EPSILON&&(a=0),a===0?u+s:(s!==0?(u+=s,u+=" ",a<0?(a=-a,u+="-"):u+="+",u+=" "):a<0&&(a=-a,u+="-"),a!==1&&(u+=a),u+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return f}):typeof Wn=="object"?(Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,Fo.exports=f):r.Complex=f})(Wn)});var Bo=br((ei,No)=>{(function(r){"use strict";var e=2e3,t={s:1,n:0,d:1};function n(l,m){if(isNaN(l=parseInt(l,10)))throw u.InvalidParameter;return l*m}function i(l,m){if(m===0)throw u.DivisionByZero;var v=Object.create(u.prototype);v.s=l<0?-1:1,l=l<0?-l:l;var p=a(l,m);return v.n=l/p,v.d=m/p,v}function o(l){for(var m={},v=l,p=2,d=4;d<=v;){for(;v%p===0;)v/=p,m[p]=(m[p]||0)+1;d+=1+2*p++}return v!==l?v>1&&(m[v]=(m[v]||0)+1):m[l]=(m[l]||0)+1,m}var c=function(l,m){var v=0,p=1,d=1,x=0,y=0,g=0,A=1,w=1,D=0,E=1,_=1,C=1,T=1e7,S;if(l!=null)if(m!==void 0){if(v=l,p=m,d=v*p,v%1!==0||p%1!==0)throw u.NonIntegerParameter}else switch(typeof l){case"object":{if("d"in l&&"n"in l)v=l.n,p=l.d,"s"in l&&(v*=l.s);else if(0 in l)v=l[0],1 in l&&(p=l[1]);else throw u.InvalidParameter;d=v*p;break}case"number":{if(l<0&&(d=l,l=-l),l%1===0)v=l;else if(l>0){for(l>=1&&(w=Math.pow(10,Math.floor(1+Math.log(l)/Math.LN10)),l/=w);E<=T&&C<=T;)if(S=(D+_)/(E+C),l===S){E+C<=T?(v=D+_,p=E+C):C>E?(v=_,p=C):(v=D,p=E);break}else l>S?(D+=_,E+=C):(_+=D,C+=E),E>T?(v=_,p=C):(v=D,p=E);v*=w}else(isNaN(l)||isNaN(m))&&(p=v=NaN);break}case"string":{if(E=l.match(/\d+|./g),E===null)throw u.InvalidParameter;if(E[D]==="-"?(d=-1,D++):E[D]==="+"&&D++,E.length===D+1?y=n(E[D++],d):E[D+1]==="."||E[D]==="."?(E[D]!=="."&&(x=n(E[D++],d)),D++,(D+1===E.length||E[D+1]==="("&&E[D+3]===")"||E[D+1]==="'"&&E[D+3]==="'")&&(y=n(E[D],d),A=Math.pow(10,E[D].length),D++),(E[D]==="("&&E[D+2]===")"||E[D]==="'"&&E[D+2]==="'")&&(g=n(E[D+1],d),w=Math.pow(10,E[D+1].length)-1,D+=3)):E[D+1]==="/"||E[D+1]===":"?(y=n(E[D],d),A=n(E[D+2],1),D+=3):E[D+3]==="/"&&E[D+1]===" "&&(x=n(E[D],d),y=n(E[D+2],d),A=n(E[D+4],1),D+=5),E.length<=D){p=A*w,d=v=g+p*x+w*y;break}}default:throw u.InvalidParameter}if(p===0)throw u.DivisionByZero;t.s=d<0?-1:1,t.n=Math.abs(v),t.d=Math.abs(p)};function h(l,m,v){for(var p=1;m>0;l=l*l%v,m>>=1)m&1&&(p=p*l%v);return p}function f(l,m){for(;m%2===0;m/=2);for(;m%5===0;m/=5);if(m===1)return 0;for(var v=10%m,p=1;v!==1;p++)if(v=v*10%m,p>e)return 0;return p}function s(l,m,v){for(var p=1,d=h(10,v,m),x=0;x<300;x++){if(p===d)return x;p=p*10%m,d=d*10%m}return 0}function a(l,m){if(!l)return m;if(!m)return l;for(;;){if(l%=m,!l)return m;if(m%=l,!m)return l}}function u(l,m){if(c(l,m),this instanceof u)l=a(t.d,t.n),this.s=t.s,this.n=t.n/l,this.d=t.d/l;else return i(t.s*t.n,t.d)}u.DivisionByZero=new Error("Division by Zero"),u.InvalidParameter=new Error("Invalid argument"),u.NonIntegerParameter=new Error("Parameters must be integer"),u.prototype={s:1,n:0,d:1,abs:function(){return i(this.n,this.d)},neg:function(){return i(-this.s*this.n,this.d)},add:function(l,m){return c(l,m),i(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(l,m){return c(l,m),i(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(l,m){return c(l,m),i(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(l,m){return c(l,m),i(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return i(this.s*this.n,this.d)},mod:function(l,m){if(isNaN(this.n)||isNaN(this.d))return new u(NaN);if(l===void 0)return i(this.s*this.n%this.d,1);if(c(l,m),t.n===0&&this.d===0)throw u.DivisionByZero;return i(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d)},gcd:function(l,m){return c(l,m),i(a(t.n,this.n)*a(t.d,this.d),t.d*this.d)},lcm:function(l,m){return c(l,m),t.n===0&&this.n===0?i(0,1):i(t.n*this.n,a(t.n,this.n)*a(t.d,this.d))},ceil:function(l){return l=Math.pow(10,l||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):i(Math.ceil(l*this.s*this.n/this.d),l)},floor:function(l){return l=Math.pow(10,l||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):i(Math.floor(l*this.s*this.n/this.d),l)},round:function(l){return l=Math.pow(10,l||0),isNaN(this.n)||isNaN(this.d)?new u(NaN):i(Math.round(l*this.s*this.n/this.d),l)},inverse:function(){return i(this.s*this.d,this.n)},pow:function(l,m){if(c(l,m),t.d===1)return t.s<0?i(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):i(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var v=o(this.n),p=o(this.d),d=1,x=1;for(var y in v)if(y!=="1"){if(y==="0"){d=0;break}if(v[y]*=t.n,v[y]%t.d===0)v[y]/=t.d;else return null;d*=Math.pow(y,v[y])}for(var y in p)if(y!=="1"){if(p[y]*=t.n,p[y]%t.d===0)p[y]/=t.d;else return null;x*=Math.pow(y,p[y])}return t.s<0?i(x,d):i(d,x)},equals:function(l,m){return c(l,m),this.s*this.n*t.d===t.s*t.n*this.d},compare:function(l,m){c(l,m);var v=this.s*this.n*t.d-t.s*t.n*this.d;return(0<v)-(v<0)},simplify:function(l){if(isNaN(this.n)||isNaN(this.d))return this;l=l||.001;for(var m=this.abs(),v=m.toContinued(),p=1;p<v.length;p++){for(var d=i(v[p-1],1),x=p-2;x>=0;x--)d=d.inverse().add(v[x]);if(d.sub(m).abs().valueOf()<l)return d.mul(this.s)}return this},divisible:function(l,m){return c(l,m),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(l){var m,v="",p=this.n,d=this.d;return this.s<0&&(v+="-"),d===1?v+=p:(l&&(m=Math.floor(p/d))>0&&(v+=m,v+=" ",p%=d),v+=p,v+="/",v+=d),v},toLatex:function(l){var m,v="",p=this.n,d=this.d;return this.s<0&&(v+="-"),d===1?v+=p:(l&&(m=Math.floor(p/d))>0&&(v+=m,p%=d),v+="\\frac{",v+=p,v+="}{",v+=d,v+="}"),v},toContinued:function(){var l,m=this.n,v=this.d,p=[];if(isNaN(m)||isNaN(v))return p;do p.push(Math.floor(m/v)),l=m%v,m=v,v=l;while(m!==1);return p},toString:function(l){var m=this.n,v=this.d;if(isNaN(m)||isNaN(v))return"NaN";l=l||15;var p=f(m,v),d=s(m,v,p),x=this.s<0?"-":"";if(x+=m/v|0,m%=v,m*=10,m&&(x+="."),p){for(var y=d;y--;)x+=m/v|0,m%=v,m*=10;x+="(";for(var y=p;y--;)x+=m/v|0,m%=v,m*=10;x+=")"}else for(var y=l;m&&y--;)x+=m/v|0,m%=v,m*=10;return x}},typeof define=="function"&&define.amd?define([],function(){return u}):typeof ei=="object"?(Object.defineProperty(u,"__esModule",{value:!0}),u.default=u,u.Fraction=u,No.exports=u):r.Fraction=u})(ei)});var ap={};Ds(ap,{code:()=>Cn,interpret:()=>ip});var pa=lt(Mn());var Qe=class{constructor(e="INT"){this.base="INT";this.base=e}clone(){let e=new Qe;return e.base=this.base,e}toString(){return""+this.base}},Je=class{constructor(e=""){this.str="";this.tmp="";this.str=e}},mt=class{constructor(){this.type=new Qe;this.code=new Je;this.sym=null}};var Dr=class{constructor(e,t,n,i,o=[]){this.id="";this.kind="LOCAL";this.type=new Qe;this.scope=0;this.runtimeId="";this.subSymbols=[];this.functionOverloadSuccessor=null;this.value=null;this.id=e,this.kind=t,this.type=n,this.scope=i,this.subSymbols=o}toString(){let e="SYM";if(e+=',id="'+this.id+'"',e+=',kind="'+this.kind+'"',e+=',type="'+this.type.toString()+'"',e+=',scope="'+this.scope+'"',e+=',runtimeId="'+this.runtimeId+'"',this.subSymbols.length>0){e+=`,subSymbols=[
`;for(let t=0;t<this.subSymbols.length;t++)e+="  "+this.subSymbols[t].toString();e+="]"}return e+=`
`,e}};function Fn(r,e){if(e==="ID")return"ID";if(e==="BOOL")return"BOOL";if(e==="INT")return"INT";if(e==="REAL")return"REAL";if(e==="COMPLEX")return"COMPLEX";if(e==="VECTOR")return"VECTOR";if(e==="MATRIX")return"MATRIX";if(e==="TERM")return"TERM";if(e==="TERM_VAR")return"TERM_VAR";if(e==="SET_INT")return"INT_SET";if(e==="INT_LIST")return"INT_LIST";r.error("unknown base type "+e)}function ha(r){let e=new pa.Lexer;e.configureSingleLineComments("#"),e.configureMultiLineComments("",""),e.enableEmitNewlines(!1),e.enableEmitIndentation(!1),e.enableBackslashLineBreaks(!1),e.setTerminals(["->"]),e.pushSource("PROTOTYPES",r);let t=[];for(;e.isNotEND();){let n=e.ID(),i=[],o=[];if(e.isTER("<")){e.next();let m=0;for(;e.isNotTER(">");)m>0&&e.TER(","),i.push(e.ID()),e.TER(":"),o.push(Fn(e,e.ID())),m++;e.TER(">")}let c=[],h=[];e.TER("(");let f=0;for(;e.isNotTER(")");)f>0&&e.TER(","),c.push(e.ID()),e.TER(":"),h.push(Fn(e,e.ID())),f++;e.TER(")"),e.TER(":");let s=Fn(e,e.ID());e.TER("->");let a=e.ID();e.TER("."),a+="."+e.ID(),e.TER(";");let u=[];for(let m=0;m<i.length;m++){let v=new Dr(i[m],"DIMENSION",new Qe(o[m]),1,[]);u.push(v)}for(let m=0;m<c.length;m++){let v=new Dr(c[m],"PARAMETER",new Qe(h[m]),1,[]);u.push(v)}let l=new Dr(n,"FUNCTION",new Qe(s),0,u);l.runtimeId=a;for(let m=t.length-1;m>=0;m--)if(t[m].id===n){t[m].functionOverloadSuccessor=l;break}t.push(l)}return t}var Gr=class extends Error{constructor(e){super(e),this.name="VectorError"}},Oe=class{constructor(e){this.size=1;this.values=[];this.size=e,this.values=new Array(e).fill(0)}getSize(){return this.size}setValue(e,t){this.values[e]=t}getValue(e){return this.values[e]}static vector2list(e){return e.clone().values}clone(){let e=new Oe(this.size);return e.values=[...this.values],e}toString(){let e="[";for(let t=0;t<this.size;t++)t>0&&(e+=","),e+=this.getValue(t);return e+="]",e}static add(e,t){if(e.size!=t.size)throw new Gr("dimensions do not match");let n=e.clone();for(let i=0;i<t.size;i++)n.values[i]+=t.values[i];return n}static sub(e,t){if(e.size!=t.size)throw new Gr("dimensions do not match");let n=e.clone();for(let i=0;i<t.size;i++)n.values[i]-=t.values[i];return n}mul(e){let t=this.clone();for(let n=0;n<t.size;n++)t.values[n]*=e;return t}static dot(e,t){if(e.size!=t.size)throw new Gr("dimensions do not match");let n=0;for(let i=0;i<t.size;i++)n+=e.values[i]*t.values[i];return n}static cross(e,t){if(e.size!=3||t.size!=3)throw new Gr("vector length must be 3");let n=new Oe(3);return n.values[0]=e.values[1]*t.values[2]-e.values[2]*t.values[1],n.values[1]=e.values[2]*t.values[0]-e.values[0]*t.values[2],n.values[2]=e.values[0]*t.values[1]-e.values[1]*t.values[0],n}norm2(){let e=0;for(let t=0;t<this.size;t++)e+=this.values[t]*this.values[t];return Math.sqrt(e)}is_zero(e=1e-9){for(let t=0;t<this.size;t++)if(Math.abs(this.getValue(t))>e)return!1;return!0}};var Pt=class{constructor(e){this.parent=null;this.parent=e}_create(e,t){let n=new Oe(e),i=0;for(let o=0;o<e;o++)n.setValue(o,t[i++]);return n}_clone(e){return e.clone()}_getElement(e,t,n){if(t<0||t>=e.getSize())throw new Fe(n,"vector has "+e.getSize()+" elements. Cannot get element "+t);return e.getValue(t)}_setElement(e,t,n,i){if(t<0||t>=e.getSize())throw new Fe(i,"vector has "+e.getSize()+" element. Cannot get element "+t);e.setValue(t,n)}_addVectors(e,t,n){if(e.getSize()!=t.getSize())throw new Fe(n,"dimensions do not match");return Oe.add(e,t)}_subVectors(e,t,n){if(e.getSize()!=t.getSize())throw new Fe(n,"dimensions do not match");return Oe.sub(e,t)}_mulScalarVector(e,t){return t.mul(e)}_dotVectors(e,t,n){if(e.getSize()!=t.getSize())throw new Fe(n,"dimensions do not match");return Oe.dot(e,t)}_crossVectors(e,t,n){if(e.getSize()!=3||t.getSize()!=3)throw new Fe(n,"vector length must be 3");return Oe.cross(e,t)}_norm2vec(e){return e.norm2()}_zerosVector(e){let t=new Oe(e);for(let n=0;n<e;n++)t.setValue(n,0);return t}_randVector(e,t,n){let i=new Oe(e);for(let o=0;o<e;o++)i.setValue(o,this.parent.interpret_basic._randIntMinMax(t,n));return i}_randZVector(e,t,n){let i=new Oe(e);for(let o=0;o<e;o++)i.setValue(o,this.parent.interpret_basic._randIntMinMaxZ(t,n));return i}_isVectorZero(e){return e.is_zero(1e-9)}};function vt(){return vt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},vt.apply(this,arguments)}var Sn={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function we(r){return typeof r=="number"}function Pe(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function Nn(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function Bn(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function zt(r){return r&&r.constructor.prototype.isUnit===!0||!1}function er(r){return typeof r=="string"}var Ee=Array.isArray;function Ae(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Er(r){return Array.isArray(r)||Ae(r)}function kt(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function qt(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function ma(r){return r&&r.constructor.prototype.isRange===!0||!1}function Yr(r){return r&&r.constructor.prototype.isIndex===!0||!1}function va(r){return typeof r=="boolean"}function da(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function Da(r){return r&&r.constructor.prototype.isHelp===!0||!1}function xa(r){return typeof r=="function"}function ga(r){return r instanceof Date}function ya(r){return r instanceof RegExp}function Ea(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!Nn(r)&&!Bn(r))}function wa(r){return r===null}function Aa(r){return r===void 0}function Ca(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function _a(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function ba(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ta(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ma(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Fa(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function Sa(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Na(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ba(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ia(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ra(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function La(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Oa(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Pa(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function za(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function ka(r){return r&&r.constructor.prototype.isChain===!0||!1}function sr(r){var e=typeof r;return e==="object"?r===null?"null":Pe(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function ge(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return ge(t)});if(r instanceof Date)return new Date(r.valueOf());if(Pe(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return Cs(r,ge)}function Cs(r,e){var t={};for(var n in r)Qr(r,n)&&(t[n]=e(r[n]));return t}function qa(r,e){for(var t in e)Qr(e,t)&&(r[t]=e[t]);return r}function $r(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!$r(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!$r(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Qr(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Va(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=r[i];o!==void 0&&(t[i]=o)}return t}var Ua=["Matrix","Array"],Xa=["number","BigNumber","Fraction"];var pr=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Sn)};vt(pr,Sn,{MATRIX_OPTIONS:Ua,NUMBER_OPTIONS:Xa});var Un=lt(Za(),1);function pe(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}var Ha=Math.sign||function(r){return r>0?1:r<0?-1:0},Ga=Math.log2||function(e){return Math.log(e)/Math.LN2},Ya=Math.log10||function(e){return Math.log(e)/Math.LN10},$a=Math.log1p||function(r){return Math.log(r+1)},Qa=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Ja=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Ln(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!pe(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!pe(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),o="i".concat(t)}var c="";return r<0&&(r=-r,c="-"),"".concat(c).concat(i).concat(r.toString(e)).concat(o)}function dt(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var t="auto",n,i;if(e&&(e.notation&&(t=e.notation),we(e)?n=e:we(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return Ka(r,n);case"exponential":return Wa(r,n);case"engineering":return _s(r,n);case"bin":return Ln(r,2,i);case"oct":return Ln(r,8,i);case"hex":return Ln(r,16,i);case"auto":return bs(r,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],c=arguments[4];return o!=="."?o+c:c});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Vt(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),o=n.indexOf(".");i+=o!==-1?o-1:n.length-1;var c=n.replace(".","").replace(/^0*/,function(h){return i-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return c.length===0&&(c.push(0),i++),{sign:t,coefficients:c,exponent:i}}function _s(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Vt(r),n=Ut(t,e),i=n.exponent,o=n.coefficients,c=i%3===0?i:i<0?i-3-i%3:i-i%3;if(we(e))for(;e>o.length||i-c+1>o.length;)o.push(0);else for(var h=Math.abs(i-c)-(o.length-1),f=0;f<h;f++)o.push(0);for(var s=Math.abs(i-c),a=1;s>0;)a++,s--;var u=o.slice(a).join(""),l=we(e)&&u.length||u.match(/[1-9]/)?"."+u:"",m=o.slice(0,a).join("")+l+"e"+(i>=0?"+":"")+c.toString();return n.sign+m}function Ka(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Vt(r),n=typeof e=="number"?Ut(t,t.exponent+1+e):t,i=n.coefficients,o=n.exponent+1,c=o+(e||0);return i.length<c&&(i=i.concat(Jr(c-i.length))),o<0&&(i=Jr(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),n.sign+i.join("")}function Wa(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Vt(r),n=e?Ut(t,e):t,i=n.coefficients,o=n.exponent;i.length<e&&(i=i.concat(Jr(e-i.length)));var c=i.shift();return n.sign+c+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function bs(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=t&&t.lowerExp!==void 0?t.lowerExp:-3,i=t&&t.upperExp!==void 0?t.upperExp:5,o=Vt(r),c=e?Ut(o,e):o;if(c.exponent<n||c.exponent>=i)return Wa(r,e);var h=c.coefficients,f=c.exponent;h.length<e&&(h=h.concat(Jr(e-h.length))),h=h.concat(Jr(f-h.length+1+(h.length<e?e-h.length:0))),h=Jr(-f).concat(h);var s=f>0?f:0;return s<h.length-1&&h.splice(s+1,0,"."),c.sign+h.join("")}function Ut(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var o=e-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),t.exponent++,o++),o--,n[o]++}}return t}function Jr(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function ja(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Ts=Number.EPSILON||2220446049250313e-31;function lr(r,e,t){if(t==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var n=Math.abs(r-e);return n<Ts?!0:n<=Math.max(Math.abs(r),Math.abs(e))*t}return!1}function On(r,e,t){var n=r.constructor,i=new n(2),o="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!pe(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),o="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(o);case 8:return"".concat(r.toOctal()).concat(o);case 16:return"".concat(r.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function ro(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var t="auto",n,i;if(e!==void 0&&(e.notation&&(t=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(t){case"fixed":return Fs(r,n);case"exponential":return eo(r,n);case"engineering":return Ms(r,n);case"bin":return On(r,2,i);case"oct":return On(r,8,i);case"hex":return On(r,16,i);case"auto":{var o=e&&e.lowerExp!==void 0?e.lowerExp:-3,c=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var h,f=r.toSignificantDigits(n),s=f.e;return s>=o&&s<c?h=f.toFixed():h=eo(r,n),h.replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],u=arguments[4];return a!=="."?a+u:u})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ms(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),o=i.toPrecision(e);return o.indexOf("e")!==-1&&(o=i.toString()),o+"e"+(t>=0?"+":"")+n.toString()}function eo(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function Fs(r,e){return r.toFixed(e)}function _e(r,e){var t=Ss(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function Ss(r,e){if(typeof r=="number")return dt(r,e);if(Pe(r))return ro(r,e);if(Ns(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return to(r,e);if(er(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>'"'+n+'": '+_e(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function to(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=to(r[i],e);return t+="]",t}else return _e(r,e)}function Ns(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function ce(r,e,t){if(!(this instanceof ce))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}ce.prototype=new RangeError;ce.prototype.constructor=RangeError;ce.prototype.name="DimensionError";ce.prototype.isDimensionError=!0;function wr(r,e,t){if(!(this instanceof wr))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}wr.prototype=new RangeError;wr.prototype.constructor=RangeError;wr.prototype.name="IndexError";wr.prototype.isIndexError=!0;function Ke(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function no(r,e,t){var n,i=r.length;if(i!==e[t])throw new ce(i,e[t]);if(t<e.length-1){var o=t+1;for(n=0;n<i;n++){var c=r[n];if(!Array.isArray(c))throw new ce(e.length-1,e.length,"<");no(r[n],e,o)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new ce(e.length+1,e.length,">")}function zn(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new ce(r.length,0)}else no(r,e,0)}function Te(r,e){if(!we(r)||!pe(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new wr(r,e)}function Dt(r,e,t){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!we(i)||!pe(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(e)+")")});var n=t!==void 0?t:0;return Pn(r,e,0,n),r}function Pn(r,e,t,n){var i,o,c=r.length,h=e[t],f=Math.min(c,h);if(r.length=h,t<e.length-1){var s=t+1;for(i=0;i<f;i++)o=r[i],Array.isArray(o)||(o=[o],r[i]=o),Pn(o,e,s,n);for(i=f;i<h;i++)o=[],r[i]=o,Pn(o,e,s,n)}else{for(i=0;i<f;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=f;i<h;i++)r[i]=n}}function io(r,e){var t=Is(r),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new ce(0,n,"!=");e=xt(e,n);var i=ao(e);if(n!==i)throw new ce(i,n,"!=");try{return Bs(t,e)}catch(o){throw o instanceof ce?new ce(i,n,"!="):o}}function xt(r,e){var t=ao(r),n=r.slice(),i=-1,o=r.indexOf(i),c=r.indexOf(i,o+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var h=o>=0,f=e%t===0;if(h)if(f)n[o]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function ao(r){return r.reduce((e,t)=>e*t,1)}function Bs(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var c=t.length/o,h=0;h<c;h++)n.push(t.slice(h*o,(h+1)*o));t=n}return t}function Xt(r,e,t,n){var i=n||Ke(r);if(t)for(var o=0;o<t;o++)r=[r],i.unshift(1);for(r=oo(r,e,0);i.length<e;)i.push(1);return r}function oo(r,e,t){var n,i;if(Array.isArray(r)){var o=t+1;for(n=0,i=r.length;n<i;n++)r[n]=oo(r[n],e,o)}else for(var c=t;c<e;c++)r=[r];return r}function Is(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e}function Kr(r,e){for(var t,n=0,i=0;i<r.length;i++){var o=r[i],c=Array.isArray(o);if(i===0&&c&&(n=o.length),c&&o.length!==n)return;var h=c?Kr(o,e):e(o);if(t===void 0)t=h;else if(t!==h)return"mixed"}return t}function L(r,e,t,n){function i(o){var c=Va(o,e.map(Os));return Rs(r,e,o),t(c)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Rs(r,e,t){var n=e.filter(o=>!Ls(o)).every(o=>t[o]!==void 0);if(!n){var i=e.filter(o=>t[o]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function Ls(r){return r&&r[0]==="?"}function Os(r){return r&&r[0]==="?"?r.slice(1):r}function uo(r,e){if(lo(r)&&co(r,e))return r[e];throw typeof r[e]=="function"&&Ps(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function so(r,e,t){if(lo(r)&&co(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function fo(r,e){return e in r}function co(r,e){return!r||typeof r!="object"?!1:Qr(zs,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Ps(r,e){return r==null||typeof r[e]!="function"||Qr(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Qr(ks,e)?!0:!(e in Object.prototype||e in Function.prototype)}function lo(r){return typeof r=="object"&&r&&r.constructor===Object}var zs={length:!0,name:!0},ks={toString:!0,valueOf:!0,toLocaleString:!0};var kn=class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return uo(this.wrappedObject,e)}set(e,t){return so(this.wrappedObject,e,t),this}has(e){return fo(this.wrappedObject,e)}};function po(r){return r?r instanceof Map||r instanceof kn||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var ho=function(){return ho=Un.default.create,Un.default},qs=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Xn=L("typed",qs,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:o}=e,c=ho();return c.clear(),c.addTypes([{name:"number",test:we},{name:"Complex",test:Nn},{name:"BigNumber",test:Pe},{name:"Fraction",test:Bn},{name:"Unit",test:zt},{name:"identifier",test:h=>er&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(h)},{name:"string",test:er},{name:"Chain",test:ka},{name:"Array",test:Ee},{name:"Matrix",test:Ae},{name:"DenseMatrix",test:kt},{name:"SparseMatrix",test:qt},{name:"Range",test:ma},{name:"Index",test:Yr},{name:"boolean",test:va},{name:"ResultSet",test:da},{name:"Help",test:Da},{name:"function",test:xa},{name:"Date",test:ga},{name:"RegExp",test:ya},{name:"null",test:wa},{name:"undefined",test:Aa},{name:"AccessorNode",test:Ca},{name:"ArrayNode",test:_a},{name:"AssignmentNode",test:ba},{name:"BlockNode",test:Ta},{name:"ConditionalNode",test:Ma},{name:"ConstantNode",test:Fa},{name:"FunctionNode",test:Na},{name:"FunctionAssignmentNode",test:Sa},{name:"IndexNode",test:Ba},{name:"Node",test:Ia},{name:"ObjectNode",test:Ra},{name:"OperatorNode",test:La},{name:"ParenthesisNode",test:Oa},{name:"RangeNode",test:Pa},{name:"SymbolNode",test:za},{name:"Map",test:po},{name:"Object",test:Ea}]),c.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(t||qn(f),ja(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new t(f)}},{from:"number",to:"Complex",convert:function(f){return n||Zt(f),new n(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return n||Zt(f),new n(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return n||Zt(f),new n(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){o||Vn(f);var s=new o(f);if(s.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return s}},{from:"string",to:"number",convert:function(f){var s=Number(f);if(isNaN(s))throw new Error('Cannot convert "'+f+'" to a number');return s}},{from:"string",to:"BigNumber",convert:function(f){t||qn(f);try{return new t(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){o||Vn(f);try{return new o(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){n||Zt(f);try{return new n(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return t||qn(f),new t(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return o||Vn(f),new o(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||Vs(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),c.onMismatch=(h,f,s)=>{var a=c.createError(h,f,s);if(["wrongType","mismatch"].includes(a.data.category)&&f.length===1&&Er(f[0])&&s.some(l=>!l.params.includes(","))){var u=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw u.data=a.data,u}throw a},c.onMismatch=(h,f,s)=>{var a=c.createError(h,f,s);if(["wrongType","mismatch"].includes(a.data.category)&&f.length===1&&Er(f[0])&&s.some(l=>!l.params.includes(","))){var u=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw u.data=a.data,u}throw a},c});function qn(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function Zt(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Vs(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Vn(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var Wr=9e15,Nr=1e9,Zn="0123456789abcdef",Gt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Yt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Hn={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Wr,maxE:Wr,crypto:!1},xo,Ar,ie=!0,Qt="[DecimalError] ",Sr=Qt+"Invalid argument: ",go=Qt+"Precision limit exceeded",yo=Qt+"crypto unavailable",Eo="[object Decimal]",He=Math.floor,Be=Math.pow,Us=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Xs=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Zs=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wo=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mr=1e7,te=7,Hs=9007199254740991,Gs=Gt.length-1,Gn=Yt.length-1,z={toStringTag:Eo};z.absoluteValue=z.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),W(r)};z.ceil=function(){return W(new this.constructor(this),this.e+1,2)};z.clampedTo=z.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(Sr+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};z.comparedTo=z.cmp=function(r){var e,t,n,i,o=this,c=o.d,h=(r=new o.constructor(r)).d,f=o.s,s=r.s;if(!c||!h)return!f||!s?NaN:f!==s?f:c===h?0:!c^f<0?1:-1;if(!c[0]||!h[0])return c[0]?f:h[0]?-s:0;if(f!==s)return f;if(o.e!==r.e)return o.e>r.e^f<0?1:-1;for(n=c.length,i=h.length,e=0,t=n<i?n:i;e<t;++e)if(c[e]!==h[e])return c[e]>h[e]^f<0?1:-1;return n===i?0:n>i^f<0?1:-1};z.cosine=z.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+te,n.rounding=1,t=Ys(n,To(n,t)),n.precision=r,n.rounding=e,W(Ar==2||Ar==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};z.cubeRoot=z.cbrt=function(){var r,e,t,n,i,o,c,h,f,s,a=this,u=a.constructor;if(!a.isFinite()||a.isZero())return new u(a);for(ie=!1,o=a.s*Be(a.s*a,1/3),!o||Math.abs(o)==1/0?(t=Ve(a.d),r=a.e,(o=(r-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Be(t,1/3),r=He((r+1)/3)-(r%3==(r<0?-1:2)),o==1/0?t="5e"+r:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new u(t),n.s=a.s):n=new u(o.toString()),c=(r=u.precision)+3;;)if(h=n,f=h.times(h).times(h),s=f.plus(a),n=be(s.plus(a).times(h),s.plus(f),c+2,1),Ve(h.d).slice(0,c)===(t=Ve(n.d)).slice(0,c))if(t=t.slice(c-3,c+1),t=="9999"||!i&&t=="4999"){if(!i&&(W(h,r+1,0),h.times(h).times(h).eq(a))){n=h;break}c+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(W(n,r+1,1),e=!n.times(n).times(n).eq(a));break}return ie=!0,W(n,r,u.rounding,e)};z.decimalPlaces=z.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-He(this.e/te))*te,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};z.dividedBy=z.div=function(r){return be(this,new this.constructor(r))};z.dividedToIntegerBy=z.divToInt=function(r){var e=this,t=e.constructor;return W(be(e,new t(r),0,1,1),t.precision,t.rounding)};z.equals=z.eq=function(r){return this.cmp(r)===0};z.floor=function(){return W(new this.constructor(this),this.e+1,3)};z.greaterThan=z.gt=function(r){return this.cmp(r)>0};z.greaterThanOrEqualTo=z.gte=function(r){var e=this.cmp(r);return e==1||e===0};z.hyperbolicCosine=z.cosh=function(){var r,e,t,n,i,o=this,c=o.constructor,h=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return h;t=c.precision,n=c.rounding,c.precision=t+Math.max(o.e,o.sd())+4,c.rounding=1,i=o.d.length,i<32?(r=Math.ceil(i/3),e=(1/Kt(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),o=jr(c,1,o.times(e),new c(1),!0);for(var f,s=r,a=new c(8);s--;)f=o.times(o),o=h.minus(f.times(a.minus(f.times(a))));return W(o,c.precision=t,c.rounding=n,!0)};z.hyperbolicSine=z.sinh=function(){var r,e,t,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,t=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=jr(o,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/Kt(5,r)),i=jr(o,2,i,i,!0);for(var c,h=new o(5),f=new o(16),s=new o(20);r--;)c=i.times(i),i=i.times(h.plus(c.times(f.times(c).plus(s))))}return o.precision=e,o.rounding=t,W(i,e,t,!0)};z.hyperbolicTangent=z.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,be(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};z.inverseCosine=z.acos=function(){var r,e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,o=t.rounding;return n!==-1?n===0?e.isNeg()?hr(t,i,o):new t(0):new t(NaN):e.isZero()?hr(t,i+4,o).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=hr(t,i+4,o).times(.5),t.precision=i,t.rounding=o,r.minus(e))};z.inverseHyperbolicCosine=z.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,ie=!1,t=t.times(t).minus(1).sqrt().plus(t),ie=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};z.inverseHyperbolicSine=z.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,ie=!1,t=t.times(t).plus(1).sqrt().plus(t),ie=!0,n.precision=r,n.rounding=e,t.ln())};z.inverseHyperbolicTangent=z.atanh=function(){var r,e,t,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=o.precision,e=o.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?W(new o(i),r,e,!0):(o.precision=t=n-i.e,i=be(i.plus(1),new o(1).minus(i),t+r,1),o.precision=r+4,o.rounding=1,i=i.ln(),o.precision=r,o.rounding=e,i.times(.5))):new o(NaN)};z.inverseSine=z.asin=function(){var r,e,t,n,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),t=o.precision,n=o.rounding,e!==-1?e===0?(r=hr(o,t+4,n).times(.5),r.s=i.s,r):new o(NaN):(o.precision=t+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=n,i.times(2)))};z.inverseTangent=z.atan=function(){var r,e,t,n,i,o,c,h,f,s=this,a=s.constructor,u=a.precision,l=a.rounding;if(s.isFinite()){if(s.isZero())return new a(s);if(s.abs().eq(1)&&u+4<=Gn)return c=hr(a,u+4,l).times(.25),c.s=s.s,c}else{if(!s.s)return new a(NaN);if(u+4<=Gn)return c=hr(a,u+4,l).times(.5),c.s=s.s,c}for(a.precision=h=u+10,a.rounding=1,t=Math.min(28,h/te+2|0),r=t;r;--r)s=s.div(s.times(s).plus(1).sqrt().plus(1));for(ie=!1,e=Math.ceil(h/te),n=1,f=s.times(s),c=new a(s),i=s;r!==-1;)if(i=i.times(f),o=c.minus(i.div(n+=2)),i=i.times(f),c=o.plus(i.div(n+=2)),c.d[e]!==void 0)for(r=e;c.d[r]===o.d[r]&&r--;);return t&&(c=c.times(2<<t-1)),ie=!0,W(c,a.precision=u,a.rounding=l,!0)};z.isFinite=function(){return!!this.d};z.isInteger=z.isInt=function(){return!!this.d&&He(this.e/te)>this.d.length-2};z.isNaN=function(){return!this.s};z.isNegative=z.isNeg=function(){return this.s<0};z.isPositive=z.isPos=function(){return this.s>0};z.isZero=function(){return!!this.d&&this.d[0]===0};z.lessThan=z.lt=function(r){return this.cmp(r)<0};z.lessThanOrEqualTo=z.lte=function(r){return this.cmp(r)<1};z.logarithm=z.log=function(r){var e,t,n,i,o,c,h,f,s=this,a=s.constructor,u=a.precision,l=a.rounding,m=5;if(r==null)r=new a(10),e=!0;else{if(r=new a(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new a(NaN);e=r.eq(10)}if(t=s.d,s.s<0||!t||!t[0]||s.eq(1))return new a(t&&!t[0]?-1/0:s.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)o=!0;else{for(i=t[0];i%10===0;)i/=10;o=i!==1}if(ie=!1,h=u+m,c=Fr(s,h),n=e?$t(a,h+10):Fr(r,h),f=be(c,n,h,1),gt(f.d,i=u,l))do if(h+=10,c=Fr(s,h),n=e?$t(a,h+10):Fr(r,h),f=be(c,n,h,1),!o){+Ve(f.d).slice(i+1,i+15)+1==1e14&&(f=W(f,u+1,0));break}while(gt(f.d,i+=10,l));return ie=!0,W(f,u,l)};z.minus=z.sub=function(r){var e,t,n,i,o,c,h,f,s,a,u,l,m=this,v=m.constructor;if(r=new v(r),!m.d||!r.d)return!m.s||!r.s?r=new v(NaN):m.d?r.s=-r.s:r=new v(r.d||m.s!==r.s?m:NaN),r;if(m.s!=r.s)return r.s=-r.s,m.plus(r);if(s=m.d,l=r.d,h=v.precision,f=v.rounding,!s[0]||!l[0]){if(l[0])r.s=-r.s;else if(s[0])r=new v(m);else return new v(f===3?-0:0);return ie?W(r,h,f):r}if(t=He(r.e/te),a=He(m.e/te),s=s.slice(),o=a-t,o){for(u=o<0,u?(e=s,o=-o,c=l.length):(e=l,t=a,c=s.length),n=Math.max(Math.ceil(h/te),c)+2,o>n&&(o=n,e.length=1),e.reverse(),n=o;n--;)e.push(0);e.reverse()}else{for(n=s.length,c=l.length,u=n<c,u&&(c=n),n=0;n<c;n++)if(s[n]!=l[n]){u=s[n]<l[n];break}o=0}for(u&&(e=s,s=l,l=e,r.s=-r.s),c=s.length,n=l.length-c;n>0;--n)s[c++]=0;for(n=l.length;n>o;){if(s[--n]<l[n]){for(i=n;i&&s[--i]===0;)s[i]=mr-1;--s[i],s[n]+=mr}s[n]-=l[n]}for(;s[--c]===0;)s.pop();for(;s[0]===0;s.shift())--t;return s[0]?(r.d=s,r.e=Jt(s,t),ie?W(r,h,f):r):new v(f===3?-0:0)};z.modulo=z.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?W(new n(t),n.precision,n.rounding):(ie=!1,n.modulo==9?(e=be(t,r.abs(),0,3,1),e.s*=r.s):e=be(t,r,0,n.modulo,1),e=e.times(r),ie=!0,t.minus(e))};z.naturalExponential=z.exp=function(){return Yn(this)};z.naturalLogarithm=z.ln=function(){return Fr(this)};z.negated=z.neg=function(){var r=new this.constructor(this);return r.s=-r.s,W(r)};z.plus=z.add=function(r){var e,t,n,i,o,c,h,f,s,a,u=this,l=u.constructor;if(r=new l(r),!u.d||!r.d)return!u.s||!r.s?r=new l(NaN):u.d||(r=new l(r.d||u.s===r.s?u:NaN)),r;if(u.s!=r.s)return r.s=-r.s,u.minus(r);if(s=u.d,a=r.d,h=l.precision,f=l.rounding,!s[0]||!a[0])return a[0]||(r=new l(u)),ie?W(r,h,f):r;if(o=He(u.e/te),n=He(r.e/te),s=s.slice(),i=o-n,i){for(i<0?(t=s,i=-i,c=a.length):(t=a,n=o,c=s.length),o=Math.ceil(h/te),c=o>c?o+1:c+1,i>c&&(i=c,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(c=s.length,i=a.length,c-i<0&&(i=c,t=a,a=s,s=t),e=0;i;)e=(s[--i]=s[i]+a[i]+e)/mr|0,s[i]%=mr;for(e&&(s.unshift(e),++n),c=s.length;s[--c]==0;)s.pop();return r.d=s,r.e=Jt(s,n),ie?W(r,h,f):r};z.precision=z.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Sr+r);return t.d?(e=Ao(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};z.round=function(){var r=this,e=r.constructor;return W(new e(r),r.e+1,e.rounding)};z.sine=z.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+te,n.rounding=1,t=Qs(n,To(n,t)),n.precision=r,n.rounding=e,W(Ar>2?t.neg():t,r,e,!0)):new n(NaN)};z.squareRoot=z.sqrt=function(){var r,e,t,n,i,o,c=this,h=c.d,f=c.e,s=c.s,a=c.constructor;if(s!==1||!h||!h[0])return new a(!s||s<0&&(!h||h[0])?NaN:h?c:1/0);for(ie=!1,s=Math.sqrt(+c),s==0||s==1/0?(e=Ve(h),(e.length+f)%2==0&&(e+="0"),s=Math.sqrt(e),f=He((f+1)/2)-(f<0||f%2),s==1/0?e="5e"+f:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+f),n=new a(e)):n=new a(s.toString()),t=(f=a.precision)+3;;)if(o=n,n=o.plus(be(c,o,t+2,1)).times(.5),Ve(o.d).slice(0,t)===(e=Ve(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(W(o,f+1,0),o.times(o).eq(c))){n=o;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(W(n,f+1,1),r=!n.times(n).eq(c));break}return ie=!0,W(n,f,a.rounding,r)};z.tangent=z.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=be(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,W(Ar==2||Ar==4?t.neg():t,r,e,!0)):new n(NaN)};z.times=z.mul=function(r){var e,t,n,i,o,c,h,f,s,a=this,u=a.constructor,l=a.d,m=(r=new u(r)).d;if(r.s*=a.s,!l||!l[0]||!m||!m[0])return new u(!r.s||l&&!l[0]&&!m||m&&!m[0]&&!l?NaN:!l||!m?r.s/0:r.s*0);for(t=He(a.e/te)+He(r.e/te),f=l.length,s=m.length,f<s&&(o=l,l=m,m=o,c=f,f=s,s=c),o=[],c=f+s,n=c;n--;)o.push(0);for(n=s;--n>=0;){for(e=0,i=f+n;i>n;)h=o[i]+m[n]*l[i-n-1]+e,o[i--]=h%mr|0,e=h/mr|0;o[i]=(o[i]+e)%mr|0}for(;!o[--c];)o.pop();return e?++t:o.shift(),r.d=o,r.e=Jt(o,t),ie?W(r,u.precision,u.rounding):r};z.toBinary=function(r,e){return Qn(this,2,r,e)};z.toDecimalPlaces=z.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(rr(r,0,Nr),e===void 0?e=n.rounding:rr(e,0,8),W(t,r+t.e+1,e))};z.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=xr(n,!0):(rr(r,0,Nr),e===void 0?e=i.rounding:rr(e,0,8),n=W(new i(n),r+1,e),t=xr(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};z.toFixed=function(r,e){var t,n,i=this,o=i.constructor;return r===void 0?t=xr(i):(rr(r,0,Nr),e===void 0?e=o.rounding:rr(e,0,8),n=W(new o(i),r+i.e+1,e),t=xr(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};z.toFraction=function(r){var e,t,n,i,o,c,h,f,s,a,u,l,m=this,v=m.d,p=m.constructor;if(!v)return new p(m);if(s=t=new p(1),n=f=new p(0),e=new p(n),o=e.e=Ao(v)-m.e-1,c=o%te,e.d[0]=Be(10,c<0?te+c:c),r==null)r=o>0?e:s;else{if(h=new p(r),!h.isInt()||h.lt(s))throw Error(Sr+h);r=h.gt(e)?o>0?e:s:h}for(ie=!1,h=new p(Ve(v)),a=p.precision,p.precision=o=v.length*te*2;u=be(h,e,0,1,1),i=t.plus(u.times(n)),i.cmp(r)!=1;)t=n,n=i,i=s,s=f.plus(u.times(i)),f=i,i=e,e=h.minus(u.times(i)),h=i;return i=be(r.minus(t),n,0,1,1),f=f.plus(i.times(s)),t=t.plus(i.times(n)),f.s=s.s=m.s,l=be(s,n,o,1).minus(m).abs().cmp(be(f,t,o,1).minus(m).abs())<1?[s,n]:[f,t],p.precision=a,ie=!0,l};z.toHexadecimal=z.toHex=function(r,e){return Qn(this,16,r,e)};z.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:rr(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(ie=!1,t=be(t,r,0,e,1).times(r),ie=!0,W(t)):(r.s=t.s,t=r),t};z.toNumber=function(){return+this};z.toOctal=function(r,e){return Qn(this,8,r,e)};z.toPower=z.pow=function(r){var e,t,n,i,o,c,h=this,f=h.constructor,s=+(r=new f(r));if(!h.d||!r.d||!h.d[0]||!r.d[0])return new f(Be(+h,s));if(h=new f(h),h.eq(1))return h;if(n=f.precision,o=f.rounding,r.eq(1))return W(h,n,o);if(e=He(r.e/te),e>=r.d.length-1&&(t=s<0?-s:s)<=Hs)return i=Co(f,h,t,n),r.s<0?new f(1).div(i):W(i,n,o);if(c=h.s,c<0){if(e<r.d.length-1)return new f(NaN);if((r.d[e]&1)==0&&(c=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=c,h}return t=Be(+h,s),e=t==0||!isFinite(t)?He(s*(Math.log("0."+Ve(h.d))/Math.LN10+h.e+1)):new f(t+"").e,e>f.maxE+1||e<f.minE-1?new f(e>0?c/0:0):(ie=!1,f.rounding=h.s=1,t=Math.min(12,(e+"").length),i=Yn(r.times(Fr(h,n+t)),n),i.d&&(i=W(i,n+5,1),gt(i.d,n,o)&&(e=n+10,i=W(Yn(r.times(Fr(h,e+t)),e),e+5,1),+Ve(i.d).slice(n+1,n+15)+1==1e14&&(i=W(i,n+1,0)))),i.s=c,ie=!0,f.rounding=o,W(i,n,o))};z.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=xr(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(rr(r,1,Nr),e===void 0?e=i.rounding:rr(e,0,8),n=W(new i(n),r,e),t=xr(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};z.toSignificantDigits=z.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(rr(r,1,Nr),e===void 0?e=n.rounding:rr(e,0,8)),W(new n(t),r,e)};z.toString=function(){var r=this,e=r.constructor,t=xr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};z.truncated=z.trunc=function(){return W(new this.constructor(this),this.e+1,1)};z.valueOf=z.toJSON=function(){var r=this,e=r.constructor,t=xr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Ve(r){var e,t,n,i=r.length-1,o="",c=r[0];if(i>0){for(o+=c,e=1;e<i;e++)n=r[e]+"",t=te-n.length,t&&(o+=Mr(t)),o+=n;c=r[e],n=c+"",t=te-n.length,t&&(o+=Mr(t))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function rr(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Sr+r)}function gt(r,e,t,n){var i,o,c,h;for(o=r[0];o>=10;o/=10)--e;return--e<0?(e+=te,i=0):(i=Math.ceil((e+1)/te),e%=te),o=Be(10,te-e),h=r[i]%o|0,n==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),c=t<4&&h==99999||t>3&&h==49999||h==5e4||h==0):c=(t<4&&h+1==o||t>3&&h+1==o/2)&&(r[i+1]/o/100|0)==Be(10,e-2)-1||(h==o/2||h==0)&&(r[i+1]/o/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),c=(n||t<4)&&h==9999||!n&&t>3&&h==4999):c=((n||t<4)&&h+1==o||!n&&t>3&&h+1==o/2)&&(r[i+1]/o/1e3|0)==Be(10,e-3)-1,c}function Ht(r,e,t){for(var n,i=[0],o,c=0,h=r.length;c<h;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=Zn.indexOf(r.charAt(c++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function Ys(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/Kt(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=jr(r,1,e.times(i),new r(1));for(var o=t;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return r.precision-=t,e}var be=function(){function r(n,i,o){var c,h=0,f=n.length;for(n=n.slice();f--;)c=n[f]*i+h,n[f]=c%o|0,h=c/o|0;return h&&n.unshift(h),n}function e(n,i,o,c){var h,f;if(o!=c)f=o>c?1:-1;else for(h=f=0;h<o;h++)if(n[h]!=i[h]){f=n[h]>i[h]?1:-1;break}return f}function t(n,i,o,c){for(var h=0;o--;)n[o]-=h,h=n[o]<i[o]?1:0,n[o]=h*c+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,c,h,f){var s,a,u,l,m,v,p,d,x,y,g,A,w,D,E,_,C,T,S,R,q=n.constructor,O=n.s==i.s?1:-1,I=n.d,F=i.d;if(!I||!I[0]||!F||!F[0])return new q(!n.s||!i.s||(I?F&&I[0]==F[0]:!F)?NaN:I&&I[0]==0||!F?O*0:O/0);for(f?(m=1,a=n.e-i.e):(f=mr,m=te,a=He(n.e/m)-He(i.e/m)),S=F.length,C=I.length,x=new q(O),y=x.d=[],u=0;F[u]==(I[u]||0);u++);if(F[u]>(I[u]||0)&&a--,o==null?(D=o=q.precision,c=q.rounding):h?D=o+(n.e-i.e)+1:D=o,D<0)y.push(1),v=!0;else{if(D=D/m+2|0,u=0,S==1){for(l=0,F=F[0],D++;(u<C||l)&&D--;u++)E=l*f+(I[u]||0),y[u]=E/F|0,l=E%F|0;v=l||u<C}else{for(l=f/(F[0]+1)|0,l>1&&(F=r(F,l,f),I=r(I,l,f),S=F.length,C=I.length),_=S,g=I.slice(0,S),A=g.length;A<S;)g[A++]=0;R=F.slice(),R.unshift(0),T=F[0],F[1]>=f/2&&++T;do l=0,s=e(F,g,S,A),s<0?(w=g[0],S!=A&&(w=w*f+(g[1]||0)),l=w/T|0,l>1?(l>=f&&(l=f-1),p=r(F,l,f),d=p.length,A=g.length,s=e(p,g,d,A),s==1&&(l--,t(p,S<d?R:F,d,f))):(l==0&&(s=l=1),p=F.slice()),d=p.length,d<A&&p.unshift(0),t(g,p,A,f),s==-1&&(A=g.length,s=e(F,g,S,A),s<1&&(l++,t(g,S<A?R:F,A,f))),A=g.length):s===0&&(l++,g=[0]),y[u++]=l,s&&g[0]?g[A++]=I[_]||0:(g=[I[_]],A=1);while((_++<C||g[0]!==void 0)&&D--);v=g[0]!==void 0}y[0]||y.shift()}if(m==1)x.e=a,xo=v;else{for(u=1,l=y[0];l>=10;l/=10)u++;x.e=u+a*m-1,W(x,h?o+x.e+1:o,c,v)}return x}}();function W(r,e,t,n){var i,o,c,h,f,s,a,u,l,m=r.constructor;e:if(e!=null){if(u=r.d,!u)return r;for(i=1,h=u[0];h>=10;h/=10)i++;if(o=e-i,o<0)o+=te,c=e,a=u[l=0],f=a/Be(10,i-c-1)%10|0;else if(l=Math.ceil((o+1)/te),h=u.length,l>=h)if(n){for(;h++<=l;)u.push(0);a=f=0,i=1,o%=te,c=o-te+1}else break e;else{for(a=h=u[l],i=1;h>=10;h/=10)i++;o%=te,c=o-te+i,f=c<0?0:a/Be(10,i-c-1)%10|0}if(n=n||e<0||u[l+1]!==void 0||(c<0?a:a%Be(10,i-c-1)),s=t<4?(f||n)&&(t==0||t==(r.s<0?3:2)):f>5||f==5&&(t==4||n||t==6&&(o>0?c>0?a/Be(10,i-c):0:u[l-1])%10&1||t==(r.s<0?8:7)),e<1||!u[0])return u.length=0,s?(e-=r.e+1,u[0]=Be(10,(te-e%te)%te),r.e=-e||0):u[0]=r.e=0,r;if(o==0?(u.length=l,h=1,l--):(u.length=l+1,h=Be(10,te-o),u[l]=c>0?(a/Be(10,i-c)%Be(10,c)|0)*h:0),s)for(;;)if(l==0){for(o=1,c=u[0];c>=10;c/=10)o++;for(c=u[0]+=h,h=1;c>=10;c/=10)h++;o!=h&&(r.e++,u[0]==mr&&(u[0]=1));break}else{if(u[l]+=h,u[l]!=mr)break;u[l--]=0,h=1}for(o=u.length;u[--o]===0;)u.pop()}return ie&&(r.e>m.maxE?(r.d=null,r.e=NaN):r.e<m.minE&&(r.e=0,r.d=[0])),r}function xr(r,e,t){if(!r.isFinite())return bo(r);var n,i=r.e,o=Ve(r.d),c=o.length;return e?(t&&(n=t-c)>0?o=o.charAt(0)+"."+o.slice(1)+Mr(n):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(r.e<0?"e":"e+")+r.e):i<0?(o="0."+Mr(-i-1)+o,t&&(n=t-c)>0&&(o+=Mr(n))):i>=c?(o+=Mr(i+1-c),t&&(n=t-i-1)>0&&(o=o+"."+Mr(n))):((n=i+1)<c&&(o=o.slice(0,n)+"."+o.slice(n)),t&&(n=t-c)>0&&(i+1===c&&(o+="."),o+=Mr(n))),o}function Jt(r,e){var t=r[0];for(e*=te;t>=10;t/=10)e++;return e}function $t(r,e,t){if(e>Gs)throw ie=!0,t&&(r.precision=t),Error(go);return W(new r(Gt),e,1,!0)}function hr(r,e,t){if(e>Gn)throw Error(go);return W(new r(Yt),e,t,!0)}function Ao(r){var e=r.length-1,t=e*te+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Mr(r){for(var e="";r--;)e+="0";return e}function Co(r,e,t,n){var i,o=new r(1),c=Math.ceil(n/te+4);for(ie=!1;;){if(t%2&&(o=o.times(e),vo(o.d,c)&&(i=!0)),t=He(t/2),t===0){t=o.d.length-1,i&&o.d[t]===0&&++o.d[t];break}e=e.times(e),vo(e.d,c)}return ie=!0,o}function mo(r){return r.d[r.d.length-1]&1}function _o(r,e,t){for(var n,i=new r(e[0]),o=0;++o<e.length;)if(n=new r(e[o]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function Yn(r,e){var t,n,i,o,c,h,f,s=0,a=0,u=0,l=r.constructor,m=l.rounding,v=l.precision;if(!r.d||!r.d[0]||r.e>17)return new l(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:0/0);for(e==null?(ie=!1,f=v):f=e,h=new l(.03125);r.e>-2;)r=r.times(h),u+=5;for(n=Math.log(Be(2,u))/Math.LN10*2+5|0,f+=n,t=o=c=new l(1),l.precision=f;;){if(o=W(o.times(r),f,1),t=t.times(++a),h=c.plus(be(o,t,f,1)),Ve(h.d).slice(0,f)===Ve(c.d).slice(0,f)){for(i=u;i--;)c=W(c.times(c),f,1);if(e==null)if(s<3&&gt(c.d,f-n,m,s))l.precision=f+=10,t=o=h=new l(1),a=0,s++;else return W(c,l.precision=v,m,ie=!0);else return l.precision=v,c}c=h}}function Fr(r,e){var t,n,i,o,c,h,f,s,a,u,l,m=1,v=10,p=r,d=p.d,x=p.constructor,y=x.rounding,g=x.precision;if(p.s<0||!d||!d[0]||!p.e&&d[0]==1&&d.length==1)return new x(d&&!d[0]?-1/0:p.s!=1?NaN:d?0:p);if(e==null?(ie=!1,a=g):a=e,x.precision=a+=v,t=Ve(d),n=t.charAt(0),Math.abs(o=p.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)p=p.times(r),t=Ve(p.d),n=t.charAt(0),m++;o=p.e,n>1?(p=new x("0."+t),o++):p=new x(n+"."+t.slice(1))}else return s=$t(x,a+2,g).times(o+""),p=Fr(new x(n+"."+t.slice(1)),a-v).plus(s),x.precision=g,e==null?W(p,g,y,ie=!0):p;for(u=p,f=c=p=be(p.minus(1),p.plus(1),a,1),l=W(p.times(p),a,1),i=3;;){if(c=W(c.times(l),a,1),s=f.plus(be(c,new x(i),a,1)),Ve(s.d).slice(0,a)===Ve(f.d).slice(0,a))if(f=f.times(2),o!==0&&(f=f.plus($t(x,a+2,g).times(o+""))),f=be(f,new x(m),a,1),e==null)if(gt(f.d,a-v,y,h))x.precision=a+=v,s=c=p=be(u.minus(1),u.plus(1),a,1),l=W(p.times(p),a,1),i=h=1;else return W(f,x.precision=g,y,ie=!0);else return x.precision=g,f;f=s,i+=2}}function bo(r){return String(r.s*r.s/0)}function $n(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%te,t<0&&(n+=te),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=te;n<i;)r.d.push(+e.slice(n,n+=te));e=e.slice(n),n=te-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),ie&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function $s(r,e){var t,n,i,o,c,h,f,s,a;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),wo.test(e))return $n(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(Xs.test(e))t=16,e=e.toLowerCase();else if(Us.test(e))t=2;else if(Zs.test(e))t=8;else throw Error(Sr+e);for(o=e.search(/p/i),o>0?(f=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,n=r.constructor,c&&(e=e.replace(".",""),h=e.length,o=h-o,i=Co(n,new n(t),o,o*2)),s=Ht(e,t,mr),a=s.length-1,o=a;s[o]===0;--o)s.pop();return o<0?new n(r.s*0):(r.e=Jt(s,a),r.d=s,ie=!1,c&&(r=be(r,i,h*4)),f&&(r=r.times(Math.abs(f)<54?Be(2,f):yt.pow(2,f))),ie=!0,r)}function Qs(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:jr(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/Kt(5,t)),e=jr(r,2,e,e);for(var i,o=new r(5),c=new r(16),h=new r(20);t--;)i=e.times(e),e=e.times(o.plus(i.times(c.times(i).minus(h))));return e}function jr(r,e,t,n,i){var o,c,h,f,s=1,a=r.precision,u=Math.ceil(a/te);for(ie=!1,f=t.times(t),h=new r(n);;){if(c=be(h.times(f),new r(e++*e++),a,1),h=i?n.plus(c):n.minus(c),n=be(c.times(f),new r(e++*e++),a,1),c=h.plus(n),c.d[u]!==void 0){for(o=u;c.d[o]===h.d[o]&&o--;);if(o==-1)break}o=h,h=n,n=c,c=o,s++}return ie=!0,c.d.length=u+1,c}function Kt(r,e){for(var t=r;--e;)t*=r;return t}function To(r,e){var t,n=e.s<0,i=hr(r,r.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return Ar=n?4:1,e;if(t=e.divToInt(i),t.isZero())Ar=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(o))return Ar=mo(t)?n?2:3:n?4:1,e;Ar=mo(t)?n?1:4:n?3:2}return e.minus(i).abs()}function Qn(r,e,t,n){var i,o,c,h,f,s,a,u,l,m=r.constructor,v=t!==void 0;if(v?(rr(t,1,Nr),n===void 0?n=m.rounding:rr(n,0,8)):(t=m.precision,n=m.rounding),!r.isFinite())a=bo(r);else{for(a=xr(r),c=a.indexOf("."),v?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,c>=0&&(a=a.replace(".",""),l=new m(1),l.e=a.length-c,l.d=Ht(xr(l),10,i),l.e=l.d.length),u=Ht(a,10,i),o=f=u.length;u[--f]==0;)u.pop();if(!u[0])a=v?"0p+0":"0";else{if(c<0?o--:(r=new m(r),r.d=u,r.e=o,r=be(r,l,t,n,0,i),u=r.d,o=r.e,s=xo),c=u[t],h=i/2,s=s||u[t+1]!==void 0,s=n<4?(c!==void 0||s)&&(n===0||n===(r.s<0?3:2)):c>h||c===h&&(n===4||s||n===6&&u[t-1]&1||n===(r.s<0?8:7)),u.length=t,s)for(;++u[--t]>i-1;)u[t]=0,t||(++o,u.unshift(1));for(f=u.length;!u[f-1];--f);for(c=0,a="";c<f;c++)a+=Zn.charAt(u[c]);if(v){if(f>1)if(e==16||e==8){for(c=e==16?4:3,--f;f%c;f++)a+="0";for(u=Ht(a,i,e),f=u.length;!u[f-1];--f);for(c=1,a="1.";c<f;c++)a+=Zn.charAt(u[c])}else a=a.charAt(0)+"."+a.slice(1);a=a+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)a="0"+a;a="0."+a}else if(++o>f)for(o-=f;o--;)a+="0";else o<f&&(a=a.slice(0,o)+"."+a.slice(o))}a=(e==16?"0x":e==2?"0b":e==8?"0o":"")+a}return r.s<0?"-"+a:a}function vo(r,e){if(r.length>e)return r.length=e,!0}function Js(r){return new this(r).abs()}function Ks(r){return new this(r).acos()}function Ws(r){return new this(r).acosh()}function js(r,e){return new this(r).plus(e)}function ef(r){return new this(r).asin()}function rf(r){return new this(r).asinh()}function tf(r){return new this(r).atan()}function nf(r){return new this(r).atanh()}function af(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,o=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=hr(this,o,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?hr(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=hr(this,o,1).times(.5),t.s=r.s):e.s<0?(this.precision=o,this.rounding=1,t=this.atan(be(r,e,o,1)),e=hr(this,o,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(be(r,e,o,1)),t}function of(r){return new this(r).cbrt()}function uf(r){return W(r=new this(r),r.e+1,2)}function sf(r,e,t){return new this(r).clamp(e,t)}function ff(r){if(!r||typeof r!="object")throw Error(Qt+"Object expected");var e,t,n,i=r.defaults===!0,o=["precision",1,Nr,"rounding",0,8,"toExpNeg",-Wr,0,"toExpPos",0,Wr,"maxE",0,Wr,"minE",-Wr,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(t=o[e],i&&(this[t]=Hn[t]),(n=r[t])!==void 0)if(He(n)===n&&n>=o[e+1]&&n<=o[e+2])this[t]=n;else throw Error(Sr+t+": "+n);if(t="crypto",i&&(this[t]=Hn[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(yo);else this[t]=!1;else throw Error(Sr+t+": "+n);return this}function cf(r){return new this(r).cos()}function lf(r){return new this(r).cosh()}function Mo(r){var e,t,n;function i(o){var c,h,f,s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,Do(o)){s.s=o.s,ie?!o.d||o.e>i.maxE?(s.e=NaN,s.d=null):o.e<i.minE?(s.e=0,s.d=[0]):(s.e=o.e,s.d=o.d.slice()):(s.e=o.e,s.d=o.d?o.d.slice():o.d);return}if(f=typeof o,f==="number"){if(o===0){s.s=1/o<0?-1:1,s.e=0,s.d=[0];return}if(o<0?(o=-o,s.s=-1):s.s=1,o===~~o&&o<1e7){for(c=0,h=o;h>=10;h/=10)c++;ie?c>i.maxE?(s.e=NaN,s.d=null):c<i.minE?(s.e=0,s.d=[0]):(s.e=c,s.d=[o]):(s.e=c,s.d=[o]);return}else if(o*0!==0){o||(s.s=NaN),s.e=NaN,s.d=null;return}return $n(s,o.toString())}else if(f!=="string")throw Error(Sr+o);return(h=o.charCodeAt(0))===45?(o=o.slice(1),s.s=-1):(h===43&&(o=o.slice(1)),s.s=1),wo.test(o)?$n(s,o):$s(s,o)}if(i.prototype=z,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=ff,i.clone=Mo,i.isDecimal=Do,i.abs=Js,i.acos=Ks,i.acosh=Ws,i.add=js,i.asin=ef,i.asinh=rf,i.atan=tf,i.atanh=nf,i.atan2=af,i.cbrt=of,i.ceil=uf,i.clamp=sf,i.cos=cf,i.cosh=lf,i.div=pf,i.exp=hf,i.floor=mf,i.hypot=vf,i.ln=df,i.log=Df,i.log10=gf,i.log2=xf,i.max=yf,i.min=Ef,i.mod=wf,i.mul=Af,i.pow=Cf,i.random=_f,i.round=bf,i.sign=Tf,i.sin=Mf,i.sinh=Ff,i.sqrt=Sf,i.sub=Nf,i.sum=Bf,i.tan=If,i.tanh=Rf,i.trunc=Lf,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function pf(r,e){return new this(r).div(e)}function hf(r){return new this(r).exp()}function mf(r){return W(r=new this(r),r.e+1,3)}function vf(){var r,e,t=new this(0);for(ie=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return ie=!0,new this(1/0);t=e}return ie=!0,t.sqrt()}function Do(r){return r instanceof yt||r&&r.toStringTag===Eo||!1}function df(r){return new this(r).ln()}function Df(r,e){return new this(r).log(e)}function xf(r){return new this(r).log(2)}function gf(r){return new this(r).log(10)}function yf(){return _o(this,arguments,"lt")}function Ef(){return _o(this,arguments,"gt")}function wf(r,e){return new this(r).mod(e)}function Af(r,e){return new this(r).mul(e)}function Cf(r,e){return new this(r).pow(e)}function _f(r){var e,t,n,i,o=0,c=new this(1),h=[];if(r===void 0?r=this.precision:rr(r,1,Nr),n=Math.ceil(r/te),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));o<n;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:h[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);o<n;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(h.push(i%1e7),o+=4);o=n/4}else throw Error(yo);else for(;o<n;)h[o++]=Math.random()*1e7|0;for(n=h[--o],r%=te,n&&r&&(i=Be(10,te-r),h[o]=(n/i|0)*i);h[o]===0;o--)h.pop();if(o<0)t=0,h=[0];else{for(t=-1;h[0]===0;t-=te)h.shift();for(n=1,i=h[0];i>=10;i/=10)n++;n<te&&(t-=te-n)}return c.e=t,c.d=h,c}function bf(r){return W(r=new this(r),r.e+1,this.rounding)}function Tf(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Mf(r){return new this(r).sin()}function Ff(r){return new this(r).sinh()}function Sf(r){return new this(r).sqrt()}function Nf(r,e){return new this(r).sub(e)}function Bf(){var r=0,e=arguments,t=new this(e[r]);for(ie=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return ie=!0,W(t,this.precision,this.rounding)}function If(r){return new this(r).tan()}function Rf(r){return new this(r).tanh()}function Lf(r){return W(r=new this(r),r.e+1,1)}z[Symbol.for("nodejs.util.inspect.custom")]=z.toString;z[Symbol.toStringTag]="Decimal";var yt=z.constructor=Mo(Hn);Gt=new yt(Gt);Yt=new yt(Yt);var Jn=yt;var Of="BigNumber",Pf=["?on","config"],Kn=L(Of,Pf,r=>{var{on:e,config:t}=r,n=Jn.clone({precision:t.precision,modulo:Jn.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&n.config({precision:i.precision})}),n},{isClass:!0});var ze=lt(So(),1);var zf="Complex",kf=[],jn=L(zf,kf,()=>(Object.defineProperty(ze.default,"name",{value:"Complex"}),ze.default.prototype.constructor=ze.default,ze.default.prototype.type="Complex",ze.default.prototype.isComplex=!0,ze.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ze.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ze.default.prototype.format=function(r){var e="",t=this.im,n=this.re,i=dt(this.re,r),o=dt(this.im,r),c=we(r)?r:r?r.precision:null;if(c!==null){var h=Math.pow(10,-c);Math.abs(n/t)<h&&(n=0),Math.abs(t/n)<h&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=o+"i":t<0?t===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+o+"i",e},ze.default.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return(0,ze.default)(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(we(t)){if(zt(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),we(n))return new ze.default({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ze.default.prototype.valueOf=ze.default.prototype.toString,ze.default.fromJSON=function(r){return new ze.default(r)},ze.default.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},ze.default),{isClass:!0});var gr=lt(Bo(),1);var qf="Fraction",Vf=[],ri=L(qf,Vf,()=>(Object.defineProperty(gr.default,"name",{value:"Fraction"}),gr.default.prototype.constructor=gr.default,gr.default.prototype.type="Fraction",gr.default.prototype.isFraction=!0,gr.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},gr.default.fromJSON=function(r){return new gr.default(r)},gr.default),{isClass:!0});var Uf="Matrix",Xf=[],ti=L(Uf,Xf,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function Wt(r){return Object.keys(r.signatures||{}).reduce(function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var Zf="DenseMatrix",Hf=["Matrix"],ni=L(Zf,Hf,r=>{var{Matrix:e}=r;function t(a,u){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(u&&!er(u))throw new Error("Invalid datatype: "+u);if(Ae(a))a.type==="DenseMatrix"?(this._data=ge(a._data),this._size=ge(a._size),this._datatype=u||a._datatype):(this._data=a.toArray(),this._size=a.size(),this._datatype=u||a._datatype);else if(a&&Ee(a.data)&&Ee(a.size))this._data=a.data,this._size=a.size,zn(this._data,this._size),this._datatype=u||a.datatype;else if(Ee(a))this._data=s(a),this._size=Ke(this._data),zn(this._data,this._size),this._datatype=u;else{if(a)throw new TypeError("Unsupported type of data ("+sr(a)+")");this._data=[],this._size=[0],this._datatype=u}}t.prototype=new e,t.prototype.createDenseMatrix=function(a,u){return new t(a,u)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Kr(this._data,sr)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(a,u){return new t(a,u)},t.prototype.subset=function(a,u,l){switch(arguments.length){case 1:return n(this,a);case 2:case 3:return o(this,a,u,l);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(a){if(!Ee(a))throw new TypeError("Array expected");if(a.length!==this._size.length)throw new ce(a.length,this._size.length);for(var u=0;u<a.length;u++)Te(a[u],this._size[u]);for(var l=this._data,m=0,v=a.length;m<v;m++){var p=a[m];Te(p,l.length),l=l[p]}return l},t.prototype.set=function(a,u,l){if(!Ee(a))throw new TypeError("Array expected");if(a.length<this._size.length)throw new ce(a.length,this._size.length,"<");var m,v,p,d=a.map(function(y){return y+1});f(this,d,l);var x=this._data;for(m=0,v=a.length-1;m<v;m++)p=a[m],Te(p,x.length),x=x[p];return p=a[a.length-1],Te(p,x.length),x[p]=u,this};function n(a,u){if(!Yr(u))throw new TypeError("Invalid index");var l=u.isScalar();if(l)return a.get(u.min());var m=u.size();if(m.length!==a._size.length)throw new ce(m.length,a._size.length);for(var v=u.min(),p=u.max(),d=0,x=a._size.length;d<x;d++)Te(v[d],a._size[d]),Te(p[d],a._size[d]);return new t(i(a._data,u,m.length,0),a._datatype)}function i(a,u,l,m){var v=m===l-1,p=u.dimension(m);return v?p.map(function(d){return Te(d,a.length),a[d]}).valueOf():p.map(function(d){Te(d,a.length);var x=a[d];return i(x,u,l,m+1)}).valueOf()}function o(a,u,l,m){if(!u||u.isIndex!==!0)throw new TypeError("Invalid index");var v=u.size(),p=u.isScalar(),d;if(Ae(l)?(d=l.size(),l=l.valueOf()):d=Ke(l),p){if(d.length!==0)throw new TypeError("Scalar expected");a.set(u.min(),l,m)}else{if(v.length<a._size.length)throw new ce(v.length,a._size.length,"<");if(d.length<v.length){for(var x=0,y=0;v[x]===1&&d[x]===1;)x++;for(;v[x]===1;)y++,x++;l=Xt(l,v.length,y,d)}if(!$r(v,d))throw new ce(v,d,">");var g=u.max().map(function(D){return D+1});f(a,g,m);var A=v.length,w=0;c(a._data,u,l,A,w)}return a}function c(a,u,l,m,v){var p=v===m-1,d=u.dimension(v);p?d.forEach(function(x,y){Te(x),a[x]=l[y[0]]}):d.forEach(function(x,y){Te(x),c(a[x],u,l[y[0]],m,v+1)})}t.prototype.resize=function(a,u,l){if(!Er(a))throw new TypeError("Array or Matrix expected");var m=a.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),v=l?this.clone():this;return h(v,m,u)};function h(a,u,l){if(u.length===0){for(var m=a._data;Ee(m);)m=m[0];return m}return a._size=u.slice(0),a._data=Dt(a._data,a._size,l),a}t.prototype.reshape=function(a,u){var l=u?this.clone():this;l._data=io(l._data,a);var m=l._size.reduce((v,p)=>v*p);return l._size=xt(a,m),l};function f(a,u,l){for(var m=a._size.slice(0),v=!1;m.length<u.length;)m.push(0),v=!0;for(var p=0,d=u.length;p<d;p++)u[p]>m[p]&&(m[p]=u[p],v=!0);v&&h(a,m,l)}t.prototype.clone=function(){var a=new t({data:ge(this._data),size:ge(this._size),datatype:this._datatype});return a},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(a){var u=this,l=Wt(a),m=function d(x,y){return Ee(x)?x.map(function(g,A){return d(g,y.concat(A))}):l===1?a(x):l===2?a(x,y):a(x,y,u)},v=m(this._data,[]),p=this._datatype!==void 0?Kr(v,sr):void 0;return new t(v,p)},t.prototype.forEach=function(a){var u=this,l=function m(v,p){Ee(v)?v.forEach(function(d,x){m(d,p.concat(x))}):a(v,p,u)};l(this._data,[])},t.prototype[Symbol.iterator]=function*(){var a=function*u(l,m){if(Ee(l))for(var v=0;v<l.length;v++)yield*u(l[v],m.concat(v));else yield{value:l,index:m}};yield*a(this._data,[])},t.prototype.rows=function(){var a=[],u=this.size();if(u.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var l=this._data;for(var m of l)a.push(new t([m],this._datatype));return a},t.prototype.columns=function(){var a=this,u=[],l=this.size();if(l.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,v=function(x){var y=m.map(g=>[g[x]]);u.push(new t(y,a._datatype))},p=0;p<l[1];p++)v(p);return u},t.prototype.toArray=function(){return ge(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(a){return _e(this._data,a)},t.prototype.toString=function(){return _e(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(a){if(a){if(Pe(a)&&(a=a.toNumber()),!we(a)||!pe(a))throw new TypeError("The parameter k must be an integer number")}else a=0;for(var u=a>0?a:0,l=a<0?-a:0,m=this._size[0],v=this._size[1],p=Math.min(m-l,v-u),d=[],x=0;x<p;x++)d[x]=this._data[x+l][x+u];return new t({data:d,size:[p],datatype:this._datatype})},t.diagonal=function(a,u,l,m){if(!Ee(a))throw new TypeError("Array expected, size parameter");if(a.length!==2)throw new Error("Only two dimensions matrix are supported");if(a=a.map(function(E){if(Pe(E)&&(E=E.toNumber()),!we(E)||!pe(E)||E<1)throw new Error("Size values must be positive integers");return E}),l){if(Pe(l)&&(l=l.toNumber()),!we(l)||!pe(l))throw new TypeError("The parameter k must be an integer number")}else l=0;var v=l>0?l:0,p=l<0?-l:0,d=a[0],x=a[1],y=Math.min(d-p,x-v),g;if(Ee(u)){if(u.length!==y)throw new Error("Invalid value array length");g=function(_){return u[_]}}else if(Ae(u)){var A=u.size();if(A.length!==1||A[0]!==y)throw new Error("Invalid matrix length");g=function(_){return u.get([_])}}else g=function(){return u};m||(m=Pe(g(0))?g(0).mul(0):0);var w=[];if(a.length>0){w=Dt(w,a,m);for(var D=0;D<y;D++)w[D+p][D+v]=g(D)}return new t({data:w,size:[d,x]})},t.fromJSON=function(a){return new t(a)},t.prototype.swapRows=function(a,u){if(!we(a)||!pe(a)||!we(u)||!pe(u))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Te(a,this._size[0]),Te(u,this._size[0]),t._swapRows(a,u,this._data),this},t._swapRows=function(a,u,l){var m=l[a];l[a]=l[u],l[u]=m};function s(a){for(var u=0,l=a.length;u<l;u++){var m=a[u];Ee(m)?a[u]=s(m):m&&m.isMatrix===!0&&(a[u]=s(m.valueOf()))}return a}return t},{isClass:!0});function Io(r){var e=r.length,t=r[0].length,n,i,o=[];for(i=0;i<t;i++){var c=[];for(n=0;n<e;n++)c.push(r[n][i]);o.push(c)}return o}function en(r){for(var e=0;e<r.length;e++)if(Er(r[e]))return!0;return!1}function Et(r,e){Ae(r)&&(r=r.valueOf());for(var t=0,n=r.length;t<n;t++){var i=r[t];Array.isArray(i)?Et(i,e):e(i)}}function Ue(r,e,t){return r&&typeof r.map=="function"?r.map(function(n){return Ue(n,e,t)}):e(r)}function rn(r,e,t){var n=Array.isArray(r)?Ke(r):r.size();if(e<0||e>=n.length)throw new wr(e,n.length);return Ae(r)?r.create(jt(r.valueOf(),e,t)):jt(r,e,t)}function jt(r,e,t){var n,i,o,c;if(e<=0)if(Array.isArray(r[0])){for(c=Io(r),i=[],n=0;n<c.length;n++)i[n]=jt(c[n],e-1,t);return i}else{for(o=r[0],n=1;n<r.length;n++)o=t(o,r[n]);return o}else{for(i=[],n=0;n<r.length;n++)i[n]=jt(r[n],e-1,t);return i}}var tr="number",Cr="number, number";function ii(r){return Math.abs(r)}ii.signature=tr;function ai(r,e){return r+e}ai.signature=Cr;function Gf(r,e){return r-e}Gf.signature=Cr;function oi(r,e){return r*e}oi.signature=Cr;function Yf(r,e){return r/e}Yf.signature=Cr;function ui(r){return-r}ui.signature=tr;function $f(r){return r}$f.signature=tr;function Qf(r){return Qa(r)}Qf.signature=tr;function Jf(r){return r*r*r}Jf.signature=tr;function Kf(r){return Math.exp(r)}Kf.signature=tr;function Wf(r){return Ja(r)}Wf.signature=tr;function jf(r,e){if(!pe(r)||!pe(e))throw new Error("Parameters in function gcd must be integer numbers");for(var t;e!==0;)t=r%e,r=e,e=t;return r<0?-r:r}jf.signature=Cr;function ec(r,e){if(!pe(r)||!pe(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}ec.signature=Cr;function rc(r){return Ya(r)}rc.signature=tr;function tc(r){return Ga(r)}tc.signature=tr;function nc(r){return $a(r)}nc.signature=tr;function ic(r,e){if(e>0)return r-e*Math.floor(r/e);if(e===0)return r;throw new Error("Cannot calculate mod for a negative divisor")}ic.signature=Cr;function ac(r){return Ha(r)}ac.signature=tr;function oc(r){return Math.sqrt(r)}oc.signature=tr;function uc(r){return r*r}uc.signature=tr;function sc(r,e){var t,n,i,o=0,c=1,h=1,f=0;if(!pe(r)||!pe(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=o,o=c-n*o,c=t,t=h,h=f-n*h,f=t,r=e,e=i;var s;return r<0?s=[-r,-c,-f]:s=[r,r?c:0,f],s}sc.signature=Cr;function fc(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}fc.signature=Cr;function cc(r){return Math.abs(r)}cc.signature=tr;function tn(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return tn(r,t)*tn(t+1,e)}function si(r,e){if(!pe(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!pe(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,o=2,c=e<t?e:t,h=i;h<=r;++h)for(n*=h;o<=c&&n%o===0;)n/=o,++o;return o<=c&&(n/=tn(o,c)),n}si.signature="number, number";var wt="number";function lc(r){return pe(r)}lc.signature=wt;function pc(r){return r<0}pc.signature=wt;function hc(r){return r>0}hc.signature=wt;function fi(r){return r===0}fi.signature=wt;function mc(r){return Number.isNaN(r)}mc.signature=wt;var Ro="isZero",vc=["typed"],ci=L(Ro,vc,r=>{var{typed:e}=r;return e(Ro,{number:fi,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Ue(n,t))})});function Br(r,e,t){if(t==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var n=r.minus(e).abs();if(n.isZero())return!0;var i=r.constructor.max(r.abs(),e.abs());return n.lte(i.times(t))}return!1}function Lo(r,e,t){return lr(r.re,e.re,t)&&lr(r.im,e.im,t)}var Ir=L("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}});var nn="equalScalar",dc=["typed","config"],li=L(nn,dc,r=>{var{typed:e,config:t}=r,n=Ir({typed:e});return e(nn,{"boolean, boolean":function(o,c){return o===c},"number, number":function(o,c){return lr(o,c,t.epsilon)},"BigNumber, BigNumber":function(o,c){return o.eq(c)||Br(o,c,t.epsilon)},"Fraction, Fraction":function(o,c){return o.equals(c)},"Complex, Complex":function(o,c){return Lo(o,c,t.epsilon)}},n)}),K0=L(nn,["typed","config"],r=>{var{typed:e,config:t}=r;return e(nn,{"number, number":function(i,o){return lr(i,o,t.epsilon)}})});var Dc="SparseMatrix",xc=["typed","equalScalar","Matrix"],pi=L(Dc,xc,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(p,d){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!er(d))throw new Error("Invalid datatype: "+d);if(Ae(p))o(this,p,d);else if(p&&Ee(p.index)&&Ee(p.ptr)&&Ee(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=d||p.datatype;else if(Ee(p))c(this,p,d);else{if(p)throw new TypeError("Unsupported type of data ("+sr(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=d}}function o(p,d,x){d.type==="SparseMatrix"?(p._values=d._values?ge(d._values):void 0,p._index=ge(d._index),p._ptr=ge(d._ptr),p._size=ge(d._size),p._datatype=x||d._datatype):c(p,d.valueOf(),x||d._datatype)}function c(p,d,x){p._values=[],p._index=[],p._ptr=[],p._datatype=x;var y=d.length,g=0,A=t,w=0;if(er(x)&&(A=e.find(t,[x,x])||t,w=e.convert(0,x)),y>0){var D=0;do{p._ptr.push(p._index.length);for(var E=0;E<y;E++){var _=d[E];if(Ee(_)){if(D===0&&g<_.length&&(g=_.length),D<_.length){var C=_[D];A(C,w)||(p._values.push(C),p._index.push(E))}}else D===0&&g<1&&(g=1),A(_,w)||(p._values.push(_),p._index.push(E))}D++}while(D<g)}p._ptr.push(p._index.length),p._size=[y,g]}i.prototype=new n,i.prototype.createSparseMatrix=function(p,d){return new i(p,d)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Kr(this._values,sr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,d){return new i(p,d)},i.prototype.density=function(){var p=this._size[0],d=this._size[1];return p!==0&&d!==0?this._index.length/(p*d):0},i.prototype.subset=function(p,d,x){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,p);case 2:case 3:return f(this,p,d,x);default:throw new SyntaxError("Wrong number of arguments")}};function h(p,d){if(!Yr(d))throw new TypeError("Invalid index");var x=d.isScalar();if(x)return p.get(d.min());var y=d.size();if(y.length!==p._size.length)throw new ce(y.length,p._size.length);var g,A,w,D,E=d.min(),_=d.max();for(g=0,A=p._size.length;g<A;g++)Te(E[g],p._size[g]),Te(_[g],p._size[g]);var C=p._values,T=p._index,S=p._ptr,R=d.dimension(0),q=d.dimension(1),O=[],I=[];R.forEach(function(N,X){I[N]=X[0],O[N]=!0});var F=C?[]:void 0,Y=[],U=[];return q.forEach(function(N){for(U.push(Y.length),w=S[N],D=S[N+1];w<D;w++)g=T[w],O[g]===!0&&(Y.push(I[g]),F&&F.push(C[w]))}),U.push(Y.length),new i({values:F,index:Y,ptr:U,size:y,datatype:p._datatype})}function f(p,d,x,y){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var g=d.size(),A=d.isScalar(),w;if(Ae(x)?(w=x.size(),x=x.toArray()):w=Ke(x),A){if(w.length!==0)throw new TypeError("Scalar expected");p.set(d.min(),x,y)}else{if(g.length!==1&&g.length!==2)throw new ce(g.length,p._size.length,"<");if(w.length<g.length){for(var D=0,E=0;g[D]===1&&w[D]===1;)D++;for(;g[D]===1;)E++,D++;x=Xt(x,g.length,E,w)}if(!$r(g,w))throw new ce(g,w,">");if(g.length===1){var _=d.dimension(0);_.forEach(function(S,R){Te(S),p.set([S,0],x[R[0]],y)})}else{var C=d.dimension(0),T=d.dimension(1);C.forEach(function(S,R){Te(S),T.forEach(function(q,O){Te(q),p.set([S,q],x[R[0]][O[0]],y)})})}}return p}i.prototype.get=function(p){if(!Ee(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new ce(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var d=p[0],x=p[1];Te(d,this._size[0]),Te(x,this._size[1]);var y=s(d,this._ptr[x],this._ptr[x+1],this._index);return y<this._ptr[x+1]&&this._index[y]===d?this._values[y]:0},i.prototype.set=function(p,d,x){if(!Ee(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new ce(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var y=p[0],g=p[1],A=this._size[0],w=this._size[1],D=t,E=0;er(this._datatype)&&(D=e.find(t,[this._datatype,this._datatype])||t,E=e.convert(0,this._datatype)),(y>A-1||g>w-1)&&(l(this,Math.max(y+1,A),Math.max(g+1,w),x),A=this._size[0],w=this._size[1]),Te(y,A),Te(g,w);var _=s(y,this._ptr[g],this._ptr[g+1],this._index);return _<this._ptr[g+1]&&this._index[_]===y?D(d,E)?a(_,g,this._values,this._index,this._ptr):this._values[_]=d:u(_,y,g,d,this._values,this._index,this._ptr),this};function s(p,d,x,y){if(x-d===0)return x;for(var g=d;g<x;g++)if(y[g]===p)return g;return d}function a(p,d,x,y,g){x.splice(p,1),y.splice(p,1);for(var A=d+1;A<g.length;A++)g[A]--}function u(p,d,x,y,g,A,w){g.splice(p,0,y),A.splice(p,0,d);for(var D=x+1;D<w.length;D++)w[D]++}i.prototype.resize=function(p,d,x){if(!Er(p))throw new TypeError("Array or Matrix expected");var y=p.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(y.length!==2)throw new Error("Only two dimensions matrix are supported");y.forEach(function(A){if(!we(A)||!pe(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+_e(y)+")")});var g=x?this.clone():this;return l(g,y[0],y[1],d)};function l(p,d,x,y){var g=y||0,A=t,w=0;er(p._datatype)&&(A=e.find(t,[p._datatype,p._datatype])||t,w=e.convert(0,p._datatype),g=e.convert(g,p._datatype));var D=!A(g,w),E=p._size[0],_=p._size[1],C,T,S;if(x>_){for(T=_;T<x;T++)if(p._ptr[T]=p._values.length,D)for(C=0;C<E;C++)p._values.push(g),p._index.push(C);p._ptr[x]=p._values.length}else x<_&&(p._ptr.splice(x+1,_-x),p._values.splice(p._ptr[x],p._values.length),p._index.splice(p._ptr[x],p._index.length));if(_=x,d>E){if(D){var R=0;for(T=0;T<_;T++){p._ptr[T]=p._ptr[T]+R,S=p._ptr[T+1]+R;var q=0;for(C=E;C<d;C++,q++)p._values.splice(S+q,0,g),p._index.splice(S+q,0,C),R++}p._ptr[_]=p._values.length}}else if(d<E){var O=0;for(T=0;T<_;T++){p._ptr[T]=p._ptr[T]-O;var I=p._ptr[T],F=p._ptr[T+1]-O;for(S=I;S<F;S++)C=p._index[S],C>d-1&&(p._values.splice(S,1),p._index.splice(S,1),O++)}p._ptr[T]=p._values.length}return p._size[0]=d,p._size[1]=x,p}i.prototype.reshape=function(p,d){if(!Ee(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(N){if(!we(N)||!pe(N)||N<=-2||N===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+_e(p)+")")});var x=this._size[0]*this._size[1];p=xt(p,x);var y=p[0]*p[1];if(x!==y)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=d?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return g;for(var A=[],w=0;w<g._ptr.length;w++)for(var D=0;D<g._ptr[w+1]-g._ptr[w];D++)A.push(w);for(var E=g._values.slice(),_=g._index.slice(),C=0;C<g._index.length;C++){var T=_[C],S=A[C],R=T*g._size[1]+S;A[C]=R%p[1],_[C]=Math.floor(R/p[1])}g._values.length=0,g._index.length=0,g._ptr.length=p[1]+1,g._size=p.slice();for(var q=0;q<g._ptr.length;q++)g._ptr[q]=0;for(var O=0;O<E.length;O++){var I=_[O],F=A[O],Y=E[O],U=s(I,g._ptr[F],g._ptr[F+1],g._index);u(U,I,F,Y,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var p=new i({values:this._values?ge(this._values):void 0,index:ge(this._index),ptr:ge(this._ptr),size:ge(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,d){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var x=this,y=this._size[0],g=this._size[1],A=Wt(p),w=function(E,_,C){return A===1?p(E):A===2?p(E,[_,C]):p(E,[_,C],x)};return m(this,0,y-1,0,g-1,w,d)};function m(p,d,x,y,g,A,w){var D=[],E=[],_=[],C=t,T=0;er(p._datatype)&&(C=e.find(t,[p._datatype,p._datatype])||t,T=e.convert(0,p._datatype));for(var S=function(ee,K,ye){ee=A(ee,K,ye),C(ee,T)||(D.push(ee),E.push(K))},R=y;R<=g;R++){_.push(D.length);var q=p._ptr[R],O=p._ptr[R+1];if(w)for(var I=q;I<O;I++){var F=p._index[I];F>=d&&F<=x&&S(p._values[I],F-d,R-y)}else{for(var Y={},U=q;U<O;U++){var N=p._index[U];Y[N]=p._values[U]}for(var X=d;X<=x;X++){var Q=X in Y?Y[X]:0;S(Q,X-d,R-y)}}}return _.push(D.length),new i({values:D,index:E,ptr:_,size:[x-d+1,g-y+1]})}i.prototype.forEach=function(p,d){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var x=this,y=this._size[0],g=this._size[1],A=0;A<g;A++){var w=this._ptr[A],D=this._ptr[A+1];if(d)for(var E=w;E<D;E++){var _=this._index[E];p(this._values[E],[_,A],x)}else{for(var C={},T=w;T<D;T++){var S=this._index[T];C[S]=this._values[T]}for(var R=0;R<y;R++){var q=R in C?C[R]:0;p(q,[R,A],x)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],d=0;d<p;d++)for(var x=this._ptr[d],y=this._ptr[d+1],g=x;g<y;g++){var A=this._index[g];yield{value:this._values[g],index:[A,d]}}},i.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(p,d,x,y,g){var A=y[0],w=y[1],D=[],E,_;for(E=0;E<A;E++)for(D[E]=[],_=0;_<w;_++)D[E][_]=0;for(_=0;_<w;_++)for(var C=x[_],T=x[_+1],S=C;S<T;S++)E=d[S],D[E][_]=p?g?ge(p[S]):p[S]:1;return D}return i.prototype.format=function(p){for(var d=this._size[0],x=this._size[1],y=this.density(),g="Sparse Matrix ["+_e(d,p)+" x "+_e(x,p)+"] density: "+_e(y,p)+`
`,A=0;A<x;A++)for(var w=this._ptr[A],D=this._ptr[A+1],E=w;E<D;E++){var _=this._index[E];g+=`
    (`+_e(_,p)+", "+_e(A,p)+") ==> "+(this._values?_e(this._values[E],p):"X")}return g},i.prototype.toString=function(){return _e(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(Pe(p)&&(p=p.toNumber()),!we(p)||!pe(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var d=p>0?p:0,x=p<0?-p:0,y=this._size[0],g=this._size[1],A=Math.min(y-x,g-d),w=[],D=[],E=[];E[0]=0;for(var _=d;_<g&&w.length<A;_++)for(var C=this._ptr[_],T=this._ptr[_+1],S=C;S<T;S++){var R=this._index[S];if(R===_-d+x){w.push(this._values[S]),D[w.length-1]=R-x;break}}return E.push(w.length),new i({values:w,index:D,ptr:E,size:[A,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,d,x,y,g){if(!Ee(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(N){if(Pe(N)&&(N=N.toNumber()),!we(N)||!pe(N)||N<1)throw new Error("Size values must be positive integers");return N}),x){if(Pe(x)&&(x=x.toNumber()),!we(x)||!pe(x))throw new TypeError("The parameter k must be an integer number")}else x=0;var A=t,w=0;er(g)&&(A=e.find(t,[g,g])||t,w=e.convert(0,g));var D=x>0?x:0,E=x<0?-x:0,_=p[0],C=p[1],T=Math.min(_-E,C-D),S;if(Ee(d)){if(d.length!==T)throw new Error("Invalid value array length");S=function(X){return d[X]}}else if(Ae(d)){var R=d.size();if(R.length!==1||R[0]!==T)throw new Error("Invalid matrix length");S=function(X){return d.get([X])}}else S=function(){return d};for(var q=[],O=[],I=[],F=0;F<C;F++){I.push(q.length);var Y=F-D;if(Y>=0&&Y<T){var U=S(Y);A(U,w)||(O.push(Y+E),q.push(U))}}return I.push(q.length),new i({values:q,index:O,ptr:I,size:[_,C]})},i.prototype.swapRows=function(p,d){if(!we(p)||!pe(p)||!we(d)||!pe(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Te(p,this._size[0]),Te(d,this._size[0]),i._swapRows(p,d,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,d,x,y,g){for(var A=y[p],w=y[p+1],D=A;D<w;D++)g(x[D],d[D])},i._swapRows=function(p,d,x,y,g,A){for(var w=0;w<x;w++){var D=A[w],E=A[w+1],_=s(p,D,E,g),C=s(d,D,E,g);if(_<E&&C<E&&g[_]===p&&g[C]===d){if(y){var T=y[_];y[_]=y[C],y[C]=T}continue}if(_<E&&g[_]===p&&(C>=E||g[C]!==d)){var S=y?y[_]:void 0;g.splice(C,0,d),y&&y.splice(C,0,S),g.splice(C<=_?_+1:_,1),y&&y.splice(C<=_?_+1:_,1);continue}if(C<E&&g[C]===d&&(_>=E||g[_]!==p)){var R=y?y[C]:void 0;g.splice(_,0,p),y&&y.splice(_,0,R),g.splice(_<=C?C+1:C,1),y&&y.splice(_<=C?C+1:C,1)}}},i},{isClass:!0});var gc="number",yc=["typed"];function Ec(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function wc(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var o=e+t;if(isNaN(o))throw new SyntaxError('String "'+r.input+'" is no valid number');return o}var hi=L(gc,yc,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=Ec(i);if(o)return wc(o);var c=0,h=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);h&&(c=Number(h[2]),i=h[1]);var f=Number(i);if(isNaN(f))throw new SyntaxError('String "'+i+'" is no valid number');if(h){if(f>2**c-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));f>=2**(c-1)&&(f=f-2**c)}return f},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(n=>i=>Ue(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t});var Ac="bignumber",Cc=["typed","BigNumber"],mi=L(Ac,Cc,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var c=o[2],h=t(o[1]),f=new t(2).pow(Number(c));if(h.gt(f.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var s=new t(2).pow(Number(c)-1);return h.gte(s)?h.sub(f):h}return new t(i)},BigNumber:function(i){return i},Fraction:function(i){return new t(i.n).div(i.d).times(i.s)},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>Ue(i,n))})});var _c="complex",bc=["typed","Complex"],vi=L(_c,bc,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,o){return new t(i,o)},"BigNumber, BigNumber":function(i,o){return new t(i.toNumber(),o.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>Ue(i,n))})});var Tc="fraction",Mc=["typed","Fraction"],di=L(Tc,Mc,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,o){return new t(i,o)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},Fraction:function(i){return i},Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>Ue(i,n))})});var Oo="matrix",Fc=["typed","Matrix","DenseMatrix","SparseMatrix"],Di=L(Oo,Fc,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(Oo,{"":function(){return o([])},string:function(h){return o([],h)},"string, string":function(h,f){return o([],h,f)},Array:function(h){return o(h)},Matrix:function(h){return o(h,h.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(c,h,f){if(h==="dense"||h==="default"||h===void 0)return new n(c,f);if(h==="sparse")return new i(c,f);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}});var Po="unaryMinus",Sc=["typed"],xi=L(Po,Sc,r=>{var{typed:e}=r;return e(Po,{number:ui,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>Ue(n,t,!0))})});var zo="abs",Nc=["typed"],gi=L(zo,Nc,r=>{var{typed:e}=r;return e(zo,{number:ii,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf(t=>n=>Ue(n,t,!0))})});var ko="addScalar",Bc=["typed"],yi=L(ko,Bc,r=>{var{typed:e}=r;return e(ko,{"number, number":ai,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(t,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var Ic="matAlgo11xS0s",Rc=["typed","equalScalar"],qo=L(Ic,Rc,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,c,h){var f=i._values,s=i._index,a=i._ptr,u=i._size,l=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=u[0],v=u[1],p,d=t,x=0,y=c;typeof l=="string"&&(p=l,d=e.find(t,[p,p]),x=e.convert(0,p),o=e.convert(o,p),y=e.find(c,[p,p]));for(var g=[],A=[],w=[],D=0;D<v;D++){w[D]=A.length;for(var E=a[D],_=a[D+1],C=E;C<_;C++){var T=s[C],S=h?y(o,f[C]):y(f[C],o);d(S,x)||(A.push(T),g.push(S))}}return w[v]=A.length,i.createSparseMatrix({values:g,index:A,ptr:w,size:[m,v],datatype:p})}});var Lc="matAlgo12xSfs",Oc=["typed","DenseMatrix"],Rr=L(Lc,Oc,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,o,c,h){var f=i._values,s=i._index,a=i._ptr,u=i._size,l=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=u[0],v=u[1],p,d=c;typeof l=="string"&&(p=l,o=e.convert(o,p),d=e.find(c,[p,p]));for(var x=[],y=[],g=[],A=0;A<v;A++){for(var w=A+1,D=a[A],E=a[A+1],_=D;_<E;_++){var C=s[_];y[C]=f[_],g[C]=w}for(var T=0;T<m;T++)A===0&&(x[T]=[]),g[T]===w?x[T][A]=h?d(o,y[T]):d(y[T],o):x[T][A]=h?d(o,0):d(0,o)}return new t({data:x,size:[m,v],datatype:p})}});var Pc="matAlgo14xDs",zc=["typed"],an=L(Pc,zc,r=>{var{typed:e}=r;return function(i,o,c,h){var f=i._data,s=i._size,a=i._datatype,u,l=c;typeof a=="string"&&(u=a,o=e.convert(o,u),l=e.find(c,[u,u]));var m=s.length>0?t(l,0,s,s[0],f,o,h):[];return i.createDenseMatrix({data:m,size:ge(s),datatype:u})};function t(n,i,o,c,h,f,s){var a=[];if(i===o.length-1)for(var u=0;u<c;u++)a[u]=s?n(f,h[u]):n(h[u],f);else for(var l=0;l<c;l++)a[l]=t(n,i+1,o,o[i+1],h[l],f,s);return a}});var kc="matAlgo01xDSid",qc=["typed"],on=L(kc,qc,r=>{var{typed:e}=r;return function(n,i,o,c){var h=n._data,f=n._size,s=n._datatype,a=i._values,u=i._index,l=i._ptr,m=i._size,v=i._datatype;if(f.length!==m.length)throw new ce(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");if(!a)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=f[0],d=f[1],x=typeof s=="string"&&s===v?s:void 0,y=x?e.find(o,[x,x]):o,g,A,w=[];for(g=0;g<p;g++)w[g]=[];var D=[],E=[];for(A=0;A<d;A++){for(var _=A+1,C=l[A],T=l[A+1],S=C;S<T;S++)g=u[S],D[g]=c?y(a[S],h[g][A]):y(h[g][A],a[S]),E[g]=_;for(g=0;g<p;g++)E[g]===_?w[g][A]=D[g]:w[g][A]=h[g][A]}return n.createDenseMatrix({data:w,size:[p,d],datatype:x})}});var Vc="matAlgo04xSidSid",Uc=["typed","equalScalar"],Vo=L(Vc,Uc,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,c){var h=i._values,f=i._index,s=i._ptr,a=i._size,u=i._datatype,l=o._values,m=o._index,v=o._ptr,p=o._size,d=o._datatype;if(a.length!==p.length)throw new ce(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");var x=a[0],y=a[1],g,A=t,w=0,D=c;typeof u=="string"&&u===d&&(g=u,A=e.find(t,[g,g]),w=e.convert(0,g),D=e.find(c,[g,g]));var E=h&&l?[]:void 0,_=[],C=[],T=h&&l?[]:void 0,S=h&&l?[]:void 0,R=[],q=[],O,I,F,Y,U;for(I=0;I<y;I++){C[I]=_.length;var N=I+1;for(Y=s[I],U=s[I+1],F=Y;F<U;F++)O=f[F],_.push(O),R[O]=N,T&&(T[O]=h[F]);for(Y=v[I],U=v[I+1],F=Y;F<U;F++)if(O=m[F],R[O]===N){if(T){var X=D(T[O],l[F]);A(X,w)?R[O]=null:T[O]=X}}else _.push(O),q[O]=N,S&&(S[O]=l[F]);if(T&&S)for(F=C[I];F<_.length;)O=_[F],R[O]===N?(E[F]=T[O],F++):q[O]===N?(E[F]=S[O],F++):_.splice(F,1)}return C[y]=_.length,i.createSparseMatrix({values:E,index:_,ptr:C,size:[x,y],datatype:g})}});var Xc="matAlgo10xSids",Zc=["typed","DenseMatrix"],un=L(Xc,Zc,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,o,c,h){var f=i._values,s=i._index,a=i._ptr,u=i._size,l=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=u[0],v=u[1],p,d=c;typeof l=="string"&&(p=l,o=e.convert(o,p),d=e.find(c,[p,p]));for(var x=[],y=[],g=[],A=0;A<v;A++){for(var w=A+1,D=a[A],E=a[A+1],_=D;_<E;_++){var C=s[_];y[C]=f[_],g[C]=w}for(var T=0;T<m;T++)A===0&&(x[T]=[]),g[T]===w?x[T][A]=h?d(o,y[T]):d(y[T],o):x[T][A]=o}return new t({data:x,size:[m,v],datatype:p})}});var Hc="matAlgo13xDD",Gc=["typed"],Uo=L(Hc,Gc,r=>{var{typed:e}=r;return function(i,o,c){var h=i._data,f=i._size,s=i._datatype,a=o._data,u=o._size,l=o._datatype,m=[];if(f.length!==u.length)throw new ce(f.length,u.length);for(var v=0;v<f.length;v++){if(f[v]!==u[v])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+u+")");m[v]=f[v]}var p,d=c;typeof s=="string"&&s===l&&(p=s,d=e.find(c,[p,p]));var x=m.length>0?t(d,0,m,m[0],h,a):[];return i.createDenseMatrix({data:x,size:m,datatype:p})};function t(n,i,o,c,h,f){var s=[];if(i===o.length-1)for(var a=0;a<c;a++)s[a]=n(h[a],f[a]);else for(var u=0;u<c;u++)s[u]=t(n,i+1,o,o[i+1],h[u],f[u]);return s}});var Yc="matrixAlgorithmSuite",$c=["typed","matrix"],yr=L(Yc,$c,r=>{var{typed:e,matrix:t}=r,n=Uo({typed:e}),i=an({typed:e});return function(c){var h=c.elop,f=c.SD||c.DS,s;h?(s={"DenseMatrix, DenseMatrix":(m,v)=>n(m,v,h),"Array, Array":(m,v)=>n(t(m),t(v),h).valueOf(),"Array, DenseMatrix":(m,v)=>n(t(m),v,h),"DenseMatrix, Array":(m,v)=>n(m,t(v),h)},c.SS&&(s["SparseMatrix, SparseMatrix"]=(m,v)=>c.SS(m,v,h,!1)),c.DS&&(s["DenseMatrix, SparseMatrix"]=(m,v)=>c.DS(m,v,h,!1),s["Array, SparseMatrix"]=(m,v)=>c.DS(t(m),v,h,!1)),f&&(s["SparseMatrix, DenseMatrix"]=(m,v)=>f(v,m,h,!0),s["SparseMatrix, Array"]=(m,v)=>f(t(v),m,h,!0))):(s={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(v,p)=>n(v,p,m)),"Array, Array":e.referToSelf(m=>(v,p)=>n(t(v),t(p),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(v,p)=>n(t(v),p,m)),"DenseMatrix, Array":e.referToSelf(m=>(v,p)=>n(v,t(p),m))},c.SS&&(s["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(v,p)=>c.SS(v,p,m,!1))),c.DS&&(s["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(v,p)=>c.DS(v,p,m,!1)),s["Array, SparseMatrix"]=e.referToSelf(m=>(v,p)=>c.DS(t(v),p,m,!1))),f&&(s["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(v,p)=>f(p,v,m,!0)),s["SparseMatrix, Array"]=e.referToSelf(m=>(v,p)=>f(t(p),v,m,!0))));var a=c.scalar||"any",u=c.Ds||c.Ss;u&&(h?(s["DenseMatrix,"+a]=(m,v)=>i(m,v,h,!1),s[a+", DenseMatrix"]=(m,v)=>i(v,m,h,!0),s["Array,"+a]=(m,v)=>i(t(m),v,h,!1).valueOf(),s[a+", Array"]=(m,v)=>i(t(v),m,h,!0).valueOf()):(s["DenseMatrix,"+a]=e.referToSelf(m=>(v,p)=>i(v,p,m,!1)),s[a+", DenseMatrix"]=e.referToSelf(m=>(v,p)=>i(p,v,m,!0)),s["Array,"+a]=e.referToSelf(m=>(v,p)=>i(t(v),p,m,!1).valueOf()),s[a+", Array"]=e.referToSelf(m=>(v,p)=>i(t(p),v,m,!0).valueOf())));var l=c.sS!==void 0?c.sS:c.Ss;return h?(c.Ss&&(s["SparseMatrix,"+a]=(m,v)=>c.Ss(m,v,h,!1)),l&&(s[a+", SparseMatrix"]=(m,v)=>l(v,m,h,!0))):(c.Ss&&(s["SparseMatrix,"+a]=e.referToSelf(m=>(v,p)=>c.Ss(v,p,m,!1))),l&&(s[a+", SparseMatrix"]=e.referToSelf(m=>(v,p)=>l(p,v,m,!0)))),h&&h.signatures&&qa(s,h.signatures),s}});var Qc="matAlgo03xDSf",Jc=["typed"],Lr=L(Qc,Jc,r=>{var{typed:e}=r;return function(n,i,o,c){var h=n._data,f=n._size,s=n._datatype,a=i._values,u=i._index,l=i._ptr,m=i._size,v=i._datatype;if(f.length!==m.length)throw new ce(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");if(!a)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=f[0],d=f[1],x,y=0,g=o;typeof s=="string"&&s===v&&(x=s,y=e.convert(0,x),g=e.find(o,[x,x]));for(var A=[],w=0;w<p;w++)A[w]=[];for(var D=[],E=[],_=0;_<d;_++){for(var C=_+1,T=l[_],S=l[_+1],R=T;R<S;R++){var q=u[R];D[q]=c?g(a[R],h[q][_]):g(h[q][_],a[R]),E[q]=C}for(var O=0;O<p;O++)E[O]===C?A[O][_]=D[O]:A[O][_]=c?g(y,h[O][_]):g(h[O][_],y)}return n.createDenseMatrix({data:A,size:[p,d],datatype:x})}});var Kc="matAlgo05xSfSf",Wc=["typed","equalScalar"],Xo=L(Kc,Wc,r=>{var{typed:e,equalScalar:t}=r;return function(i,o,c){var h=i._values,f=i._index,s=i._ptr,a=i._size,u=i._datatype,l=o._values,m=o._index,v=o._ptr,p=o._size,d=o._datatype;if(a.length!==p.length)throw new ce(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");var x=a[0],y=a[1],g,A=t,w=0,D=c;typeof u=="string"&&u===d&&(g=u,A=e.find(t,[g,g]),w=e.convert(0,g),D=e.find(c,[g,g]));var E=h&&l?[]:void 0,_=[],C=[],T=E?[]:void 0,S=E?[]:void 0,R=[],q=[],O,I,F,Y;for(I=0;I<y;I++){C[I]=_.length;var U=I+1;for(F=s[I],Y=s[I+1];F<Y;F++)O=f[F],_.push(O),R[O]=U,T&&(T[O]=h[F]);for(F=v[I],Y=v[I+1];F<Y;F++)O=m[F],R[O]!==U&&_.push(O),q[O]=U,S&&(S[O]=l[F]);if(E)for(F=C[I];F<_.length;){O=_[F];var N=R[O],X=q[O];if(N===U||X===U){var Q=N===U?T[O]:w,oe=X===U?S[O]:w,ee=D(Q,oe);A(ee,w)?_.splice(F,1):(E.push(ee),F++)}}}return C[y]=_.length,i.createSparseMatrix({values:E,index:_,ptr:C,size:[x,y],datatype:g})}});var jc="multiplyScalar",el=["typed"],Ei=L(jc,el,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":oi,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})});var Zo="multiply",rl=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],wi=L(Zo,rl,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:o,dot:c}=r,h=qo({typed:e,equalScalar:o}),f=an({typed:e});function s(w,D){switch(w.length){case 1:switch(D.length){case 1:if(w[0]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+D[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+D.length+" dimensions)")}break;case 2:switch(D.length){case 1:if(w[1]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+D[0]+")");break;case 2:if(w[1]!==D[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+D[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+D.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function a(w,D,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return c(w,D)}function u(w,D){if(D.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return l(w,D)}function l(w,D){var E=w._data,_=w._size,C=w._datatype,T=D._data,S=D._size,R=D._datatype,q=_[0],O=S[1],I,F=n,Y=i;C&&R&&C===R&&typeof C=="string"&&(I=C,F=e.find(n,[I,I]),Y=e.find(i,[I,I]));for(var U=[],N=0;N<O;N++){for(var X=Y(E[0],T[0][N]),Q=1;Q<q;Q++)X=F(X,Y(E[Q],T[Q][N]));U[N]=X}return w.createDenseMatrix({data:U,size:[O],datatype:I})}var m=e("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":y}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":d,"DenseMatrix, SparseMatrix":x,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":A});function p(w,D){var E=w._data,_=w._size,C=w._datatype,T=D._data,S=D._datatype,R=_[0],q=_[1],O,I=n,F=i;C&&S&&C===S&&typeof C=="string"&&(O=C,I=e.find(n,[O,O]),F=e.find(i,[O,O]));for(var Y=[],U=0;U<R;U++){for(var N=E[U],X=F(N[0],T[0]),Q=1;Q<q;Q++)X=I(X,F(N[Q],T[Q]));Y[U]=X}return w.createDenseMatrix({data:Y,size:[R],datatype:O})}function d(w,D){var E=w._data,_=w._size,C=w._datatype,T=D._data,S=D._size,R=D._datatype,q=_[0],O=_[1],I=S[1],F,Y=n,U=i;C&&R&&C===R&&typeof C=="string"&&(F=C,Y=e.find(n,[F,F]),U=e.find(i,[F,F]));for(var N=[],X=0;X<q;X++){var Q=E[X];N[X]=[];for(var oe=0;oe<I;oe++){for(var ee=U(Q[0],T[0][oe]),K=1;K<O;K++)ee=Y(ee,U(Q[K],T[K][oe]));N[X][oe]=ee}}return w.createDenseMatrix({data:N,size:[q,I],datatype:F})}function x(w,D){var E=w._data,_=w._size,C=w._datatype,T=D._values,S=D._index,R=D._ptr,q=D._size,O=D._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var I=_[0],F=q[1],Y,U=n,N=i,X=o,Q=0;C&&O&&C===O&&typeof C=="string"&&(Y=C,U=e.find(n,[Y,Y]),N=e.find(i,[Y,Y]),X=e.find(o,[Y,Y]),Q=e.convert(0,Y));for(var oe=[],ee=[],K=[],ye=D.createSparseMatrix({values:oe,index:ee,ptr:K,size:[I,F],datatype:Y}),le=0;le<F;le++){K[le]=ee.length;var ae=R[le],me=R[le+1];if(me>ae)for(var he=0,ne=0;ne<I;ne++){for(var Me=ne+1,Ce=void 0,ue=ae;ue<me;ue++){var De=S[ue];he!==Me?(Ce=N(E[ne][De],T[ue]),he=Me):Ce=U(Ce,N(E[ne][De],T[ue]))}he===Me&&!X(Ce,Q)&&(ee.push(ne),oe.push(Ce))}}return K[F]=ee.length,ye}function y(w,D){var E=w._values,_=w._index,C=w._ptr,T=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var S=D._data,R=D._datatype,q=w._size[0],O=D._size[0],I=[],F=[],Y=[],U,N=n,X=i,Q=o,oe=0;T&&R&&T===R&&typeof T=="string"&&(U=T,N=e.find(n,[U,U]),X=e.find(i,[U,U]),Q=e.find(o,[U,U]),oe=e.convert(0,U));var ee=[],K=[];Y[0]=0;for(var ye=0;ye<O;ye++){var le=S[ye];if(!Q(le,oe))for(var ae=C[ye],me=C[ye+1],he=ae;he<me;he++){var ne=_[he];K[ne]?ee[ne]=N(ee[ne],X(le,E[he])):(K[ne]=!0,F.push(ne),ee[ne]=X(le,E[he]))}}for(var Me=F.length,Ce=0;Ce<Me;Ce++){var ue=F[Ce];I[Ce]=ee[ue]}return Y[1]=F.length,w.createSparseMatrix({values:I,index:F,ptr:Y,size:[q,1],datatype:U})}function g(w,D){var E=w._values,_=w._index,C=w._ptr,T=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var S=D._data,R=D._datatype,q=w._size[0],O=D._size[0],I=D._size[1],F,Y=n,U=i,N=o,X=0;T&&R&&T===R&&typeof T=="string"&&(F=T,Y=e.find(n,[F,F]),U=e.find(i,[F,F]),N=e.find(o,[F,F]),X=e.convert(0,F));for(var Q=[],oe=[],ee=[],K=w.createSparseMatrix({values:Q,index:oe,ptr:ee,size:[q,I],datatype:F}),ye=[],le=[],ae=0;ae<I;ae++){ee[ae]=oe.length;for(var me=ae+1,he=0;he<O;he++){var ne=S[he][ae];if(!N(ne,X))for(var Me=C[he],Ce=C[he+1],ue=Me;ue<Ce;ue++){var De=_[ue];le[De]!==me?(le[De]=me,oe.push(De),ye[De]=U(ne,E[ue])):ye[De]=Y(ye[De],U(ne,E[ue]))}}for(var Ie=ee[ae],ir=oe.length,Xe=Ie;Xe<ir;Xe++){var ve=oe[Xe];Q[Xe]=ye[ve]}}return ee[I]=oe.length,K}function A(w,D){var E=w._values,_=w._index,C=w._ptr,T=w._datatype,S=D._values,R=D._index,q=D._ptr,O=D._datatype,I=w._size[0],F=D._size[1],Y=E&&S,U,N=n,X=i;T&&O&&T===O&&typeof T=="string"&&(U=T,N=e.find(n,[U,U]),X=e.find(i,[U,U]));for(var Q=Y?[]:void 0,oe=[],ee=[],K=w.createSparseMatrix({values:Q,index:oe,ptr:ee,size:[I,F],datatype:U}),ye=Y?[]:void 0,le=[],ae,me,he,ne,Me,Ce,ue,De,Ie=0;Ie<F;Ie++){ee[Ie]=oe.length;var ir=Ie+1;for(Me=q[Ie],Ce=q[Ie+1],ne=Me;ne<Ce;ne++)if(De=R[ne],Y)for(me=C[De],he=C[De+1],ae=me;ae<he;ae++)ue=_[ae],le[ue]!==ir?(le[ue]=ir,oe.push(ue),ye[ue]=X(S[ne],E[ae])):ye[ue]=N(ye[ue],X(S[ne],E[ae]));else for(me=C[De],he=C[De+1],ae=me;ae<he;ae++)ue=_[ae],le[ue]!==ir&&(le[ue]=ir,oe.push(ue));if(Y)for(var Xe=ee[Ie],ve=oe.length,Se=Xe;Se<ve;Se++){var ar=oe[Se];Q[Se]=ye[ar]}}return ee[F]=oe.length,K}return e(Zo,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(D,E)=>{s(Ke(D),Ke(E));var _=w(t(D),t(E));return Ae(_)?_.valueOf():_}),"Matrix, Matrix":function(D,E){var _=D.size(),C=E.size();return s(_,C),_.length===1?C.length===1?a(D,E,_[0]):u(D,E):C.length===1?m(D,E):v(D,E)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(D,E)=>w(D,t(E))),"Array, Matrix":e.referToSelf(w=>(D,E)=>w(t(D,E.storage()),E)),"SparseMatrix, any":function(D,E){return h(D,E,i,!1)},"DenseMatrix, any":function(D,E){return f(D,E,i,!1)},"any, SparseMatrix":function(D,E){return h(E,D,i,!0)},"any, DenseMatrix":function(D,E){return f(E,D,i,!0)},"Array, any":function(D,E){return f(t(D),E,i,!1).valueOf()},"any, Array":function(D,E){return f(t(E),D,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(D,E,_)=>{for(var C=w(D,E),T=0;T<_.length;T++)C=w(C,_[T]);return C})})});var Ho="subtract",tl=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],Ai=L(Ho,tl,r=>{var{typed:e,matrix:t,equalScalar:n,addScalar:i,unaryMinus:o,DenseMatrix:c}=r,h=on({typed:e}),f=Lr({typed:e}),s=Xo({typed:e,equalScalar:n}),a=un({typed:e,DenseMatrix:c}),u=Rr({typed:e,DenseMatrix:c}),l=yr({typed:e,matrix:t});return e(Ho,{"number, number":(m,v)=>m-v,"Complex, Complex":(m,v)=>m.sub(v),"BigNumber, BigNumber":(m,v)=>m.minus(v),"Fraction, Fraction":(m,v)=>m.sub(v),"Unit, Unit":e.referToSelf(m=>(v,p)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(p.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(p))throw new Error("Units do not match");var d=v.clone();return d.value=e.find(m,[d.valueType(),p.valueType()])(d.value,p.value),d.fixPrefix=!1,d})},l({SS:s,DS:h,SD:f,Ss:u,sS:a}))});var nl="matAlgo07xSSf",il=["typed","DenseMatrix"],et=L(nl,il,r=>{var{typed:e,DenseMatrix:t}=r;return function(o,c,h){var f=o._size,s=o._datatype,a=c._size,u=c._datatype;if(f.length!==a.length)throw new ce(f.length,a.length);if(f[0]!==a[0]||f[1]!==a[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+a+")");var l=f[0],m=f[1],v,p=0,d=h;typeof s=="string"&&s===u&&(v=s,p=e.convert(0,v),d=e.find(h,[v,v]));var x,y,g=[];for(x=0;x<l;x++)g[x]=[];var A=[],w=[],D=[],E=[];for(y=0;y<m;y++){var _=y+1;for(n(o,y,D,A,_),n(c,y,E,w,_),x=0;x<l;x++){var C=D[x]===_?A[x]:p,T=E[x]===_?w[x]:p;g[x][y]=d(C,T)}}return new t({data:g,size:[l,m],datatype:v})};function n(i,o,c,h,f){for(var s=i._values,a=i._index,u=i._ptr,l=u[o],m=u[o+1];l<m;l++){var v=a[l];c[v]=f,h[v]=s[l]}}});var Go="conj",al=["typed"],Ci=L(Go,al,r=>{var{typed:e}=r;return e(Go,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>n=>Ue(n,t))})});function Yo(){throw new Error('No "bignumber" implementation available')}function $o(){throw new Error('No "fraction" implementation available')}function Qo(){throw new Error('No "matrix" implementation available')}var Jo="size",ol=["typed","config","?matrix"],_i=L(Jo,ol,r=>{var{typed:e,config:t,matrix:n}=r;return e(Jo,{Matrix:function(o){return o.create(o.size())},Array:Ke,string:function(o){return t.matrix==="Array"?[o.length]:n([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return t.matrix==="Array"?[]:n?n([]):Qo()}})});var Ko="transpose",ul=["typed","matrix"],bi=L(Ko,ul,r=>{var{typed:e,matrix:t}=r;return e(Ko,{Array:c=>n(t(c)).valueOf(),Matrix:n,any:ge});function n(c){var h=c.size(),f;switch(h.length){case 1:f=c.clone();break;case 2:{var s=h[0],a=h[1];if(a===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+_e(h)+")");switch(c.storage()){case"dense":f=i(c,s,a);break;case"sparse":f=o(c,s,a);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+_e(h)+")")}return f}function i(c,h,f){for(var s=c._data,a=[],u,l=0;l<f;l++){u=a[l]=[];for(var m=0;m<h;m++)u[m]=ge(s[m][l])}return c.createDenseMatrix({data:a,size:[f,h],datatype:c._datatype})}function o(c,h,f){for(var s=c._values,a=c._index,u=c._ptr,l=s?[]:void 0,m=[],v=[],p=[],d=0;d<h;d++)p[d]=0;var x,y,g;for(x=0,y=a.length;x<y;x++)p[a[x]]++;for(var A=0,w=0;w<h;w++)v.push(A),A+=p[w],p[w]=v[w];for(v.push(A),g=0;g<f;g++)for(var D=u[g],E=u[g+1],_=D;_<E;_++){var C=p[a[_]]++;m[C]=g,s&&(l[C]=ge(s[_]))}return c.createSparseMatrix({values:l,index:m,ptr:v,size:[f,h],datatype:c._datatype})}});var Wo="zeros",sl=["typed","config","matrix","BigNumber"],Ti=L(Wo,sl,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(Wo,{"":function(){return t.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(s){var a=s[s.length-1];if(typeof a=="string"){var u=s.pop();return o(s,u)}else return t.matrix==="Array"?o(s):o(s,"default")},Array:o,Matrix:function(s){var a=s.storage();return o(s.valueOf(),a)},"Array | Matrix, string":function(s,a){return o(s.valueOf(),a)}});function o(f,s){var a=c(f),u=a?new i(0):0;if(h(f),s){var l=n(s);return f.length>0?l.resize(f,u):l}else{var m=[];return f.length>0?Dt(m,f,u):m}}function c(f){var s=!1;return f.forEach(function(a,u,l){Pe(a)&&(s=!0,l[u]=a.toNumber())}),s}function h(f){f.forEach(function(s){if(typeof s!="number"||!pe(s)||s<0)throw new Error("Parameters in function zeros must be positive integers")})}});function rt(r,e,t){var n;return String(r).indexOf("Unexpected type")!==-1?(n=arguments.length>2?" (type: "+sr(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).indexOf("complex numbers")!==-1?(n=arguments.length>2?" (type: "+sr(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var fl="numeric",cl=["number","?bignumber","?fraction"],Mi=L(fl,cl,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:c=>e(c),BigNumber:t?c=>t(c):Yo,Fraction:n?c=>n(c):$o};return function(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",s=arguments.length>2?arguments[2]:void 0;if(s!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var a=sr(h);if(!(a in i))throw new TypeError("Cannot convert "+h+' of type "'+a+'"; valid input types are '+Object.keys(i).join(", "));if(!(f in o))throw new TypeError("Cannot convert "+h+' to type "'+f+'"; valid output types are '+Object.keys(o).join(", "));return f===a?h:o[f](h)}});var jo="divideScalar",ll=["typed","numeric"],Fi=L(jo,ll,r=>{var{typed:e,numeric:t}=r;return e(jo,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})});function tt(r){var{DenseMatrix:e}=r;return function(n,i,o){var c=n.size();if(c.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+_e(c)+")");var h=c[0],f=c[1];if(h!==f)throw new RangeError("Matrix must be square (size: "+_e(c)+")");var s=[];if(Ae(i)){var a=i.size(),u=i._data;if(a.length===1){if(a[0]!==h)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var l=0;l<h;l++)s[l]=[u[l]];return new e({data:s,size:[h,1],datatype:i._datatype})}if(a.length===2){if(a[0]!==h||a[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(kt(i)){if(o){s=[];for(var m=0;m<h;m++)s[m]=[u[m][0]];return new e({data:s,size:[h,1],datatype:i._datatype})}return i}if(qt(i)){for(var v=0;v<h;v++)s[v]=[0];for(var p=i._values,d=i._index,x=i._ptr,y=x[1],g=x[0];g<y;g++){var A=d[g];s[A][0]=p[g]}return new e({data:s,size:[h,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Ee(i)){var w=Ke(i);if(w.length===1){if(w[0]!==h)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var D=0;D<h;D++)s[D]=[i[D]];return new e({data:s,size:[h,1]})}if(w.length===2){if(w[0]!==h||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<h;E++)s[E]=[i[E][0]];return new e({data:s,size:[h,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var eu="lsolve",pl=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Si=L(eu,pl,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:c,DenseMatrix:h}=r,f=tt({DenseMatrix:h});return e(eu,{"SparseMatrix, Array | Matrix":function(l,m){return a(l,m)},"DenseMatrix, Array | Matrix":function(l,m){return s(l,m)},"Array, Array | Matrix":function(l,m){var v=t(l),p=s(v,m);return p.valueOf()}});function s(u,l){l=f(u,l,!0);for(var m=l._data,v=u._size[0],p=u._size[1],d=[],x=u._data,y=0;y<p;y++){var g=m[y][0]||0,A=void 0;if(c(g,0))A=0;else{var w=x[y][y];if(c(w,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(g,w);for(var D=y+1;D<v;D++)m[D]=[o(m[D][0]||0,i(A,x[D][y]))]}d[y]=[A]}return new h({data:d,size:[v,1]})}function a(u,l){l=f(u,l,!0);for(var m=l._data,v=u._size[0],p=u._size[1],d=u._values,x=u._index,y=u._ptr,g=[],A=0;A<p;A++){var w=m[A][0]||0;if(c(w,0))g[A]=[0];else{for(var D=0,E=[],_=[],C=y[A],T=y[A+1],S=C;S<T;S++){var R=x[S];R===A?D=d[S]:R>A&&(E.push(d[S]),_.push(R))}if(c(D,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var q=n(w,D),O=0,I=_.length;O<I;O++){var F=_[O];m[F]=[o(m[F][0]||0,i(q,E[O]))]}g[A]=[q]}}return new h({data:g,size:[v,1]})}});var ru="usolve",hl=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Ni=L(ru,hl,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:c,DenseMatrix:h}=r,f=tt({DenseMatrix:h});return e(ru,{"SparseMatrix, Array | Matrix":function(l,m){return a(l,m)},"DenseMatrix, Array | Matrix":function(l,m){return s(l,m)},"Array, Array | Matrix":function(l,m){var v=t(l),p=s(v,m);return p.valueOf()}});function s(u,l){l=f(u,l,!0);for(var m=l._data,v=u._size[0],p=u._size[1],d=[],x=u._data,y=p-1;y>=0;y--){var g=m[y][0]||0,A=void 0;if(c(g,0))A=0;else{var w=x[y][y];if(c(w,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(g,w);for(var D=y-1;D>=0;D--)m[D]=[o(m[D][0]||0,i(A,x[D][y]))]}d[y]=[A]}return new h({data:d,size:[v,1]})}function a(u,l){l=f(u,l,!0);for(var m=l._data,v=u._size[0],p=u._size[1],d=u._values,x=u._index,y=u._ptr,g=[],A=p-1;A>=0;A--){var w=m[A][0]||0;if(c(w,0))g[A]=[0];else{for(var D=0,E=[],_=[],C=y[A],T=y[A+1],S=T-1;S>=C;S--){var R=x[S];R===A?D=d[S]:R<A&&(E.push(d[S]),_.push(R))}if(c(D,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var q=n(w,D),O=0,I=_.length;O<I;O++){var F=_[O];m[F]=[o(m[F][0],i(q,E[O]))]}g[A]=[q]}}return new h({data:g,size:[v,1]})}});var sn="smaller",ml=["typed","config","matrix","DenseMatrix"],Bi=L(sn,ml,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Lr({typed:e}),c=et({typed:e,DenseMatrix:i}),h=Rr({typed:e,DenseMatrix:i}),f=yr({typed:e,matrix:n}),s=Ir({typed:e});return e(sn,vl({typed:e,config:t}),{"boolean, boolean":(a,u)=>a<u,"BigNumber, BigNumber":function(u,l){return u.lt(l)&&!Br(u,l,t.epsilon)},"Fraction, Fraction":(a,u)=>a.compare(u)===-1,"Complex, Complex":function(u,l){throw new TypeError("No ordering relation is defined for complex numbers")}},s,f({SS:c,DS:o,Ss:h}))}),vl=L(sn,["typed","config"],r=>{var{typed:e,config:t}=r;return e(sn,{"number, number":function(i,o){return i<o&&!lr(i,o,t.epsilon)}})});var fn="larger",dl=["typed","config","matrix","DenseMatrix"],Ii=L(fn,dl,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Lr({typed:e}),c=et({typed:e,DenseMatrix:i}),h=Rr({typed:e,DenseMatrix:i}),f=yr({typed:e,matrix:n}),s=Ir({typed:e});return e(fn,Dl({typed:e,config:t}),{"boolean, boolean":(a,u)=>a>u,"BigNumber, BigNumber":function(u,l){return u.gt(l)&&!Br(u,l,t.epsilon)},"Fraction, Fraction":(a,u)=>a.compare(u)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},s,f({SS:c,DS:o,Ss:h}))}),Dl=L(fn,["typed","config"],r=>{var{typed:e,config:t}=r;return e(fn,{"number, number":function(i,o){return i>o&&!lr(i,o,t.epsilon)}})});var cn="largerEq",xl=["typed","config","matrix","DenseMatrix"],Ri=L(cn,xl,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i}=r,o=Lr({typed:e}),c=et({typed:e,DenseMatrix:i}),h=Rr({typed:e,DenseMatrix:i}),f=yr({typed:e,matrix:n}),s=Ir({typed:e});return e(cn,gl({typed:e,config:t}),{"boolean, boolean":(a,u)=>a>=u,"BigNumber, BigNumber":function(u,l){return u.gte(l)||Br(u,l,t.epsilon)},"Fraction, Fraction":(a,u)=>a.compare(u)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},s,f({SS:c,DS:o,Ss:h}))}),gl=L(cn,["typed","config"],r=>{var{typed:e,config:t}=r;return e(cn,{"number, number":function(i,o){return i>=o||lr(i,o,t.epsilon)}})});var tu="max",yl=["typed","config","numeric","larger"],Li=L(tu,yl,r=>{var{typed:e,config:t,numeric:n,larger:i}=r;return e(tu,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(f,s){return rn(f,s.valueOf(),o)},"...":function(f){if(en(f))throw new TypeError("Scalar values expected in function max");return c(f)}});function o(h,f){try{return i(h,f)?h:f}catch(s){throw rt(s,"max",f)}}function c(h){var f;if(Et(h,function(s){try{isNaN(s)&&typeof s=="number"?f=NaN:(f===void 0||i(s,f))&&(f=s)}catch(a){throw rt(a,"max",s)}}),f===void 0)throw new Error("Cannot calculate max of an empty array");return typeof f=="string"&&(f=n(f,t.number)),f}});var nu="min",El=["typed","config","numeric","smaller"],Oi=L(nu,El,r=>{var{typed:e,config:t,numeric:n,smaller:i}=r;return e(nu,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(f,s){return rn(f,s.valueOf(),o)},"...":function(f){if(en(f))throw new TypeError("Scalar values expected in function min");return c(f)}});function o(h,f){try{return i(h,f)?h:f}catch(s){throw rt(s,"min",f)}}function c(h){var f;if(Et(h,function(s){try{isNaN(s)&&typeof s=="number"?f=NaN:(f===void 0||i(s,f))&&(f=s)}catch(a){throw rt(a,"min",s)}}),f===void 0)throw new Error("Cannot calculate min of an empty array");return typeof f=="string"&&(f=n(f,t.number)),f}});var wl="FibonacciHeap",Al=["smaller","larger"],Pi=L(wl,Al,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(a,u){var l={key:a,value:u,degree:0};if(this._minimum){var m=this._minimum;l.left=m,l.right=m.right,m.right=l,l.right.left=l,e(a,m.key)&&(this._minimum=l)}else l.left=l,l.right=l,this._minimum=l;return this._size++,l},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var a=this._minimum;if(a===null)return a;for(var u=this._minimum,l=a.degree,m=a.child;l>0;){var v=m.right;m.left.right=m.right,m.right.left=m.left,m.left=u,m.right=u.right,u.right=m,m.right.left=m,m.parent=null,m=v,l--}return a.left.right=a.right,a.right.left=a.left,a===a.right?u=null:(u=a.right,u=s(u,this._size)),this._size--,this._minimum=u,a},i.prototype.remove=function(a){this._minimum=o(this._minimum,a,-1),this.extractMinimum()};function o(a,u,l){u.key=l;var m=u.parent;return m&&e(u.key,m.key)&&(c(a,u,m),h(a,m)),e(u.key,a.key)&&(a=u),a}function c(a,u,l){u.left.right=u.right,u.right.left=u.left,l.degree--,l.child===u&&(l.child=u.right),l.degree===0&&(l.child=null),u.left=a,u.right=a.right,a.right=u,u.right.left=u,u.parent=null,u.mark=!1}function h(a,u){var l=u.parent;!l||(u.mark?(c(a,u,l),h(l)):u.mark=!0)}var f=function(u,l){u.left.right=u.right,u.right.left=u.left,u.parent=l,l.child?(u.left=l.child,u.right=l.child.right,l.child.right=u,u.right.left=u):(l.child=u,u.right=u,u.left=u),l.degree++,u.mark=!1};function s(a,u){var l=Math.floor(Math.log(u)*n)+1,m=new Array(l),v=0,p=a;if(p)for(v++,p=p.right;p!==a;)v++,p=p.right;for(var d;v>0;){for(var x=p.degree,y=p.right;d=m[x],!!d;){if(t(p.key,d.key)){var g=d;d=p,p=g}f(d,p),m[x]=null,x++}m[x]=p,p=y,v--}a=null;for(var A=0;A<l;A++)d=m[A],d&&(a?(d.left.right=d.right,d.right.left=d.left,d.left=a,d.right=a.right,a.right=d,d.right.left=d,e(d.key,a.key)&&(a=d)):a=d);return a}return i},{isClass:!0});var Cl="Spa",_l=["addScalar","equalScalar","FibonacciHeap"],zi=L(Cl,_l,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,c){if(this._values[o])this._values[o].value=c;else{var h=this._heap.insert(o,c);this._values[o]=h}},i.prototype.get=function(o){var c=this._values[o];return c?c.value:0},i.prototype.accumulate=function(o,c){var h=this._values[o];h?h.value=e(h.value,c):(h=this._heap.insert(o,c),this._values[o]=h)},i.prototype.forEach=function(o,c,h){var f=this._heap,s=this._values,a=[],u=f.extractMinimum();for(u&&a.push(u);u&&u.key<=c;)u.key>=o&&(t(u.value,0)||h(u.key,u.value,this)),u=f.extractMinimum(),u&&a.push(u);for(var l=0;l<a.length;l++){var m=a[l];u=f.insert(m.key,m.value),s[u.key]=u}},i.prototype.swap=function(o,c){var h=this._values[o],f=this._values[c];if(!h&&f)h=this._heap.insert(o,f.value),this._heap.remove(f),this._values[o]=h,this._values[c]=void 0;else if(h&&!f)f=this._heap.insert(c,h.value),this._heap.remove(h),this._values[c]=f,this._values[o]=void 0;else if(h&&f){var s=h.value;h.value=f.value,f.value=s}},i},{isClass:!0});var iu="add",bl=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],ki=L(iu,bl,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:o,SparseMatrix:c}=r,h=on({typed:e}),f=Vo({typed:e,equalScalar:i}),s=un({typed:e,DenseMatrix:o}),a=yr({typed:e,matrix:t});return e(iu,{"any, any":n,"any, any, ...any":e.referToSelf(u=>(l,m,v)=>{for(var p=u(l,m),d=0;d<v.length;d++)p=u(p,v[d]);return p})},a({elop:n,DS:h,SS:f,Ss:s}))});var au="dot",Tl=["typed","addScalar","multiplyScalar","conj","size"],qi=L(au,Tl,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:o}=r;return e(au,{"Array | DenseMatrix, Array | DenseMatrix":h,"SparseMatrix, SparseMatrix":f});function c(a,u){var l=s(a),m=s(u),v,p;if(l.length===1)v=l[0];else if(l.length===2&&l[1]===1)v=l[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+l.join(", ")+")");if(m.length===1)p=m[0];else if(m.length===2&&m[1]===1)p=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(v!==p)throw new RangeError("Vectors must have equal length ("+v+" != "+p+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function h(a,u){var l=c(a,u),m=Ae(a)?a._data:a,v=Ae(a)?a._datatype:void 0,p=Ae(u)?u._data:u,d=Ae(u)?u._datatype:void 0,x=s(a).length===2,y=s(u).length===2,g=t,A=n;if(v&&d&&v===d&&typeof v=="string"){var w=v;g=e.find(t,[w,w]),A=e.find(n,[w,w])}if(!x&&!y){for(var D=A(i(m[0]),p[0]),E=1;E<l;E++)D=g(D,A(i(m[E]),p[E]));return D}if(!x&&y){for(var _=A(i(m[0]),p[0][0]),C=1;C<l;C++)_=g(_,A(i(m[C]),p[C][0]));return _}if(x&&!y){for(var T=A(i(m[0][0]),p[0]),S=1;S<l;S++)T=g(T,A(i(m[S][0]),p[S]));return T}if(x&&y){for(var R=A(i(m[0][0]),p[0][0]),q=1;q<l;q++)R=g(R,A(i(m[q][0]),p[q][0]));return R}}function f(a,u){c(a,u);for(var l=a._index,m=a._values,v=u._index,p=u._values,d=0,x=t,y=n,g=0,A=0;g<l.length&&A<v.length;){var w=l[g],D=v[A];if(w<D){g++;continue}if(w>D){A++;continue}w===D&&(d=x(d,y(m[g],p[A])),g++,A++)}return d}function s(a){return Ae(a)?a.size():o(a)}});var ou="lup",Ml=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Vi=L(ou,Ml,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:o,multiplyScalar:c,subtract:h,larger:f,equalScalar:s,unaryMinus:a,DenseMatrix:u,SparseMatrix:l,Spa:m}=r;return e(ou,{DenseMatrix:function(x){return v(x)},SparseMatrix:function(x){return p(x)},Array:function(x){var y=t(x),g=v(y);return{L:g.L.valueOf(),U:g.U.valueOf(),p:g.p}}});function v(d){var x=d._size[0],y=d._size[1],g=Math.min(x,y),A=ge(d._data),w=[],D=[x,g],E=[],_=[g,y],C,T,S,R=[];for(C=0;C<x;C++)R[C]=C;for(T=0;T<y;T++){if(T>0)for(C=0;C<x;C++){var q=Math.min(C,T),O=0;for(S=0;S<q;S++)O=i(O,c(A[C][S],A[S][T]));A[C][T]=h(A[C][T],O)}var I=T,F=0,Y=0;for(C=T;C<x;C++){var U=A[C][T],N=n(U);f(N,F)&&(I=C,F=N,Y=U)}if(T!==I&&(R[T]=[R[I],R[I]=R[T]][0],u._swapRows(T,I,A)),T<x)for(C=T+1;C<x;C++){var X=A[C][T];s(X,0)||(A[C][T]=o(A[C][T],Y))}}for(T=0;T<y;T++)for(C=0;C<x;C++){if(T===0&&(C<y&&(E[C]=[]),w[C]=[]),C<T){C<y&&(E[C][T]=A[C][T]),T<x&&(w[C][T]=0);continue}if(C===T){C<y&&(E[C][T]=A[C][T]),T<x&&(w[C][T]=1);continue}C<y&&(E[C][T]=0),T<x&&(w[C][T]=A[C][T])}var Q=new u({data:w,size:D}),oe=new u({data:E,size:_}),ee=[];for(C=0,g=R.length;C<g;C++)ee[R[C]]=C;return{L:Q,U:oe,p:ee,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(d){var x=d._size[0],y=d._size[1],g=Math.min(x,y),A=d._values,w=d._index,D=d._ptr,E=[],_=[],C=[],T=[x,g],S=[],R=[],q=[],O=[g,y],I,F,Y,U=[],N=[];for(I=0;I<x;I++)U[I]=I,N[I]=I;var X=function(ee,K){var ye=N[ee],le=N[K];U[ye]=K,U[le]=ee,N[ee]=le,N[K]=ye},Q=function(){var ee=new m;F<x&&(C.push(E.length),E.push(1),_.push(F)),q.push(S.length);var K=D[F],ye=D[F+1];for(Y=K;Y<ye;Y++)I=w[Y],ee.set(U[I],A[Y]);F>0&&ee.forEach(0,F-1,function(he,ne){l._forEachRow(he,E,_,C,function(Me,Ce){Me>he&&ee.accumulate(Me,a(c(Ce,ne)))})});var le=F,ae=ee.get(F),me=n(ae);ee.forEach(F+1,x-1,function(he,ne){var Me=n(ne);f(Me,me)&&(le=he,me=Me,ae=ne)}),F!==le&&(l._swapRows(F,le,T[1],E,_,C),l._swapRows(F,le,O[1],S,R,q),ee.swap(F,le),X(F,le)),ee.forEach(0,x-1,function(he,ne){he<=F?(S.push(ne),R.push(he)):(ne=o(ne,ae),s(ne,0)||(E.push(ne),_.push(he)))})};for(F=0;F<y;F++)Q();return q.push(S.length),C.push(E.length),{L:new l({values:E,index:_,ptr:C,size:T}),U:new l({values:S,index:R,ptr:q,size:O}),p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function uu(r,e,t,n){for(var i=r._values,o=r._index,c=r._ptr,h=r._size,f=r._datatype,s=h[0],a=h[1],u=n&&r._values?[]:null,l=[],m=[],v=0,p=0;p<a;p++){m[p]=v;for(var d=t?t[p]:p,x=c[d],y=c[d+1],g=x;g<y;g++){var A=e?e[o[g]]:o[g];l[v]=A,u&&(u[v]=i[g]),v++}}return m[a]=v,r.createSparseMatrix({values:u,index:l,ptr:m,size:[s,a],datatype:f})}function ln(r,e,t,n,i,o,c){var h=0;for(t[c]=r;h>=0;){var f=t[c+h],s=t[n+f];s===-1?(h--,o[e++]=f):(t[n+f]=t[i+s],++h,t[c+h]=s)}return e}function su(r,e){if(!r)return null;var t=0,n,i=[],o=[],c=0,h=e,f=2*e;for(n=0;n<e;n++)o[c+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(o[h+n]=o[c+r[n]],o[c+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=ln(n,t,o,c,h,i,f));return i}function fu(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,o=i[0],c=i[1],h=[],f=[],s=0,a=c,u,l;if(e)for(u=0;u<o;u++)f[a+u]=-1;for(var m=0;m<c;m++){h[m]=-1,f[s+m]=-1;for(var v=n[m],p=n[m+1],d=v;d<p;d++){var x=t[d];for(u=e?f[a+x]:x;u!==-1&&u<m;u=l)l=f[s+u],f[s+u]=m,l===-1&&(h[u]=m);e&&(f[a+x]=m)}}return h}function cu(r,e,t){for(var n=r._values,i=r._index,o=r._ptr,c=r._size,h=c[1],f=0,s=0;s<h;s++){var a=o[s];for(o[s]=f;a<o[s+1];a++)e(i[a],s,n?n[a]:1,t)&&(i[f]=i[a],n&&(n[f]=n[a]),f++)}return o[h]=f,i.splice(f,i.length-f),n&&n.splice(f,n.length-f),f}function vr(r){return-r-2}var Fl="csAmd",Sl=["add","multiply","transpose"],lu=L(Fl,Sl,r=>{var{add:e,multiply:t,transpose:n}=r;return function(a,u){if(!u||a<=0||a>3)return null;var l=u._size,m=l[0],v=l[1],p=0,d=Math.max(16,10*Math.sqrt(v));d=Math.min(v-2,d);var x=i(a,u,m,v,d);cu(x,f,null);for(var y=x._index,g=x._ptr,A=g[v],w=[],D=[],E=0,_=v+1,C=2*(v+1),T=3*(v+1),S=4*(v+1),R=5*(v+1),q=6*(v+1),O=7*(v+1),I=w,F=o(v,g,D,E,T,I,C,O,_,q,S,R),Y=c(v,g,D,R,S,q,d,_,T,I,C),U=0,N,X,Q,oe,ee,K,ye,le,ae,me,he,ne,Me,Ce,ue,De;Y<v;){for(Q=-1;U<v&&(Q=D[T+U])===-1;U++);D[C+Q]!==-1&&(I[D[C+Q]]=-1),D[T+U]=D[C+Q];var Ie=D[S+Q],ir=D[_+Q];Y+=ir;var Xe=0;D[_+Q]=-ir;var ve=g[Q],Se=Ie===0?ve:A,ar=Se;for(oe=1;oe<=Ie+1;oe++){for(oe>Ie?(K=Q,ye=ve,le=D[E+Q]-Ie):(K=y[ve++],ye=g[K],le=D[E+K]),ee=1;ee<=le;ee++)N=y[ye++],!((ae=D[_+N])<=0)&&(Xe+=ae,D[_+N]=-ae,y[ar++]=N,D[C+N]!==-1&&(I[D[C+N]]=I[N]),I[N]!==-1?D[C+I[N]]=D[C+N]:D[T+D[R+N]]=D[C+N]);K!==Q&&(g[K]=vr(Q),D[q+K]=0)}for(Ie!==0&&(A=ar),D[R+Q]=Xe,g[Q]=Se,D[E+Q]=ar-Se,D[S+Q]=-2,F=h(F,p,D,q,v),me=Se;me<ar;me++)if(N=y[me],!((he=D[S+N])<=0)){ae=-D[_+N];var _n=F-ae;for(ve=g[N],ne=g[N]+he-1;ve<=ne;ve++)K=y[ve],D[q+K]>=F?D[q+K]-=ae:D[q+K]!==0&&(D[q+K]=D[R+K]+_n)}for(me=Se;me<ar;me++){for(N=y[me],ne=g[N],Me=ne+D[S+N]-1,Ce=ne,ue=0,De=0,ve=ne;ve<=Me;ve++)if(K=y[ve],D[q+K]!==0){var Tt=D[q+K]-F;Tt>0?(De+=Tt,y[Ce++]=K,ue+=K):(g[K]=vr(Q),D[q+K]=0)}D[S+N]=Ce-ne+1;var Mt=Ce,Ft=ne+D[E+N];for(ve=Me+1;ve<Ft;ve++){X=y[ve];var ot=D[_+X];ot<=0||(De+=ot,y[Ce++]=X,ue+=X)}De===0?(g[N]=vr(Q),ae=-D[_+N],Xe-=ae,ir+=ae,Y+=ae,D[_+N]=0,D[S+N]=-1):(D[R+N]=Math.min(D[R+N],De),y[Ce]=y[Mt],y[Mt]=y[ne],y[ne]=Q,D[E+N]=Ce-ne+1,ue=(ue<0?-ue:ue)%v,D[C+N]=D[O+ue],D[O+ue]=N,I[N]=ue)}for(D[R+Q]=Xe,p=Math.max(p,Xe),F=h(F+p,p,D,q,v),me=Se;me<ar;me++)if(N=y[me],!(D[_+N]>=0))for(ue=I[N],N=D[O+ue],D[O+ue]=-1;N!==-1&&D[C+N]!==-1;N=D[C+N],F++){for(le=D[E+N],he=D[S+N],ve=g[N]+1;ve<=g[N]+le-1;ve++)D[q+y[ve]]=F;var ut=N;for(X=D[C+N];X!==-1;){var Ur=D[E+X]===le&&D[S+X]===he;for(ve=g[X]+1;Ur&&ve<=g[X]+le-1;ve++)D[q+y[ve]]!==F&&(Ur=0);Ur?(g[X]=vr(N),D[_+N]+=D[_+X],D[_+X]=0,D[S+X]=-1,X=D[C+X],D[C+ut]=X):(ut=X,X=D[C+X])}}for(ve=Se,me=Se;me<ar;me++)N=y[me],!((ae=-D[_+N])<=0)&&(D[_+N]=ae,De=D[R+N]+Xe-ae,De=Math.min(De,v-Y-ae),D[T+De]!==-1&&(I[D[T+De]]=N),D[C+N]=D[T+De],I[N]=-1,D[T+De]=N,U=Math.min(U,De),D[R+N]=De,y[ve++]=N);D[_+Q]=ir,(D[E+Q]=ve-Se)===0&&(g[Q]=-1,D[q+Q]=0),Ie!==0&&(A=ve)}for(N=0;N<v;N++)g[N]=vr(g[N]);for(X=0;X<=v;X++)D[T+X]=-1;for(X=v;X>=0;X--)D[_+X]>0||(D[C+X]=D[T+g[X]],D[T+g[X]]=X);for(K=v;K>=0;K--)D[_+K]<=0||g[K]!==-1&&(D[C+K]=D[T+g[K]],D[T+g[K]]=K);for(Q=0,N=0;N<=v;N++)g[N]===-1&&(Q=ln(N,Q,D,T,C,w,q));return w.splice(w.length-1,1),w};function i(s,a,u,l,m){var v=n(a);if(s===1&&l===u)return e(a,v);if(s===2){for(var p=v._index,d=v._ptr,x=0,y=0;y<u;y++){var g=d[y];if(d[y]=x,!(d[y+1]-g>m))for(var A=d[y+1];g<A;g++)p[x++]=p[g]}return d[u]=x,a=n(v),t(v,a)}return t(v,a)}function o(s,a,u,l,m,v,p,d,x,y,g,A){for(var w=0;w<s;w++)u[l+w]=a[w+1]-a[w];u[l+s]=0;for(var D=0;D<=s;D++)u[m+D]=-1,v[D]=-1,u[p+D]=-1,u[d+D]=-1,u[x+D]=1,u[y+D]=1,u[g+D]=0,u[A+D]=u[l+D];var E=h(0,0,u,y,s);return u[g+s]=-2,a[s]=-1,u[y+s]=0,E}function c(s,a,u,l,m,v,p,d,x,y,g){for(var A=0,w=0;w<s;w++){var D=u[l+w];if(D===0)u[m+w]=-2,A++,a[w]=-1,u[v+w]=0;else if(D>p)u[d+w]=0,u[m+w]=-1,A++,a[w]=vr(s),u[d+s]++;else{var E=u[x+D];E!==-1&&(y[E]=w),u[g+w]=u[x+D],u[x+D]=w}}return A}function h(s,a,u,l,m){if(s<2||s+a<0){for(var v=0;v<m;v++)u[l+v]!==0&&(u[l+v]=1);s=2}return s}function f(s,a){return s!==a}});function pu(r,e,t,n,i,o,c){var h,f,s=0,a;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var u=t[o+r];if(t[o+r]=e,u===-1)s=1,a=r;else{for(s=2,a=u;a!==t[c+a];a=t[c+a]);for(h=u;h!==a;h=f)f=t[c+h],t[c+h]=a}return{jleaf:s,q:a}}var Nl="csCounts",Bl=["transpose"],hu=L(Nl,Bl,r=>{var{transpose:e}=r;return function(t,n,i,o){if(!t||!n||!i)return null;var c=t._size,h=c[0],f=c[1],s,a,u,l,m,v,p,d=4*f+(o?f+h+1:0),x=[],y=0,g=f,A=2*f,w=3*f,D=4*f,E=5*f+1;for(u=0;u<d;u++)x[u]=-1;var _=[],C=e(t),T=C._index,S=C._ptr;for(u=0;u<f;u++)for(a=i[u],_[a]=x[w+a]===-1?1:0;a!==-1&&x[w+a]===-1;a=n[a])x[w+a]=u;if(o){for(u=0;u<f;u++)x[i[u]]=u;for(s=0;s<h;s++){for(u=f,v=S[s],p=S[s+1],m=v;m<p;m++)u=Math.min(u,x[T[m]]);x[E+s]=x[D+u],x[D+u]=s}}for(s=0;s<f;s++)x[y+s]=s;for(u=0;u<f;u++){for(a=i[u],n[a]!==-1&&_[n[a]]--,l=o?x[D+u]:a;l!==-1;l=o?x[E+l]:-1)for(m=S[l];m<S[l+1];m++){s=T[m];var R=pu(s,a,x,w,g,A,y);R.jleaf>=1&&_[a]++,R.jleaf===2&&_[R.q]--}n[a]!==-1&&(x[y+a]=n[a])}for(a=0;a<f;a++)n[a]!==-1&&(_[n[a]]+=_[a]);return _}});var Il="csSqr",Rl=["add","multiply","transpose"],mu=L(Il,Rl,r=>{var{add:e,multiply:t,transpose:n}=r,i=lu({add:e,multiply:t,transpose:n}),o=hu({transpose:n});return function(f,s,a){var u=s._ptr,l=s._size,m=l[1],v,p={};if(p.q=i(f,s),f&&!p.q)return null;if(a){var d=f?uu(s,null,p.q,0):s;p.parent=fu(d,1);var x=su(p.parent,m);if(p.cp=o(d,p.parent,x,1),d&&p.parent&&p.cp&&c(d,p))for(p.unz=0,v=0;v<m;v++)p.unz+=p.cp[v]}else p.unz=4*u[m]+m,p.lnz=p.unz;return p};function c(h,f){var s=h._ptr,a=h._index,u=h._size,l=u[0],m=u[1];f.pinv=[],f.leftmost=[];var v=f.parent,p=f.pinv,d=f.leftmost,x=[],y=0,g=l,A=l+m,w=l+2*m,D,E,_,C,T;for(E=0;E<m;E++)x[g+E]=-1,x[A+E]=-1,x[w+E]=0;for(D=0;D<l;D++)d[D]=-1;for(E=m-1;E>=0;E--)for(C=s[E],T=s[E+1],_=C;_<T;_++)d[a[_]]=E;for(D=l-1;D>=0;D--)p[D]=-1,E=d[D],E!==-1&&(x[w+E]++===0&&(x[A+E]=D),x[y+D]=x[g+E],x[g+E]=D);for(f.lnz=0,f.m2=l,E=0;E<m;E++)if(D=x[g+E],f.lnz++,D<0&&(D=f.m2++),p[D]=E,!(--w[E]<=0)){f.lnz+=x[w+E];var S=v[E];S!==-1&&(x[w+S]===0&&(x[A+S]=x[A+E]),x[y+x[A+E]]=x[g+S],x[g+S]=x[y+D],x[w+S]+=x[w+E])}for(D=0;D<l;D++)p[D]<0&&(p[D]=E++);return!0}});function At(r,e){return r[e]<0}function pn(r,e){r[e]=vr(r[e])}function Ui(r){return r<0?vr(r):r}function vu(r,e,t,n,i){var o=e._index,c=e._ptr,h=e._size,f=h[1],s,a,u,l=0;for(n[0]=r;l>=0;){r=n[l];var m=i?i[r]:r;At(c,r)||(pn(c,r),n[f+l]=m<0?0:Ui(c[m]));var v=1;for(a=n[f+l],u=m<0?0:Ui(c[m+1]);a<u;a++)if(s=o[a],!At(c,s)){n[f+l]=a,n[++l]=s,v=0;break}v&&(l--,n[--t]=r)}return t}function du(r,e,t,n,i){var o=r._ptr,c=r._size,h=e._index,f=e._ptr,s=c[1],a,u,l,m=s;for(u=f[t],l=f[t+1],a=u;a<l;a++){var v=h[a];At(o,v)||(m=vu(v,r,m,n,i))}for(a=m;a<s;a++)pn(o,n[a]);return m}var Ll="csSpsolve",Ol=["divideScalar","multiply","subtract"],Du=L(Ll,Ol,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(o,c,h,f,s,a,u){var l=o._values,m=o._index,v=o._ptr,p=o._size,d=p[1],x=c._values,y=c._index,g=c._ptr,A,w,D,E,_=du(o,c,h,f,a);for(A=_;A<d;A++)s[f[A]]=0;for(w=g[h],D=g[h+1],A=w;A<D;A++)s[y[A]]=x[A];for(var C=_;C<d;C++){var T=f[C],S=a?a[T]:T;if(!(S<0))for(w=v[S],D=v[S+1],s[T]=e(s[T],l[u?w:D-1]),A=u?w+1:w,E=u?D:D-1;A<E;A++){var R=m[A];s[R]=n(s[R],t(l[A],s[T]))}}return _}});var Pl="csLu",zl=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],xu=L(Pl,zl,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:o,largerEq:c,SparseMatrix:h}=r,f=Du({divideScalar:t,multiply:n,subtract:i});return function(a,u,l){if(!a)return null;var m=a._size,v=m[1],p,d=100,x=100;u&&(p=u.q,d=u.lnz||d,x=u.unz||x);var y=[],g=[],A=[],w=new h({values:y,index:g,ptr:A,size:[v,v]}),D=[],E=[],_=[],C=new h({values:D,index:E,ptr:_,size:[v,v]}),T=[],S,R,q=[],O=[];for(S=0;S<v;S++)q[S]=0,T[S]=-1,A[S+1]=0;d=0,x=0;for(var I=0;I<v;I++){A[I]=d,_[I]=x;var F=p?p[I]:I,Y=f(w,a,F,O,q,T,1),U=-1,N=-1;for(R=Y;R<v;R++)if(S=O[R],T[S]<0){var X=e(q[S]);o(X,N)&&(N=X,U=S)}else E[x]=T[S],D[x++]=q[S];if(U===-1||N<=0)return null;T[F]<0&&c(e(q[F]),n(N,l))&&(U=F);var Q=q[U];for(E[x]=I,D[x++]=Q,T[U]=I,g[d]=U,y[d++]=1,R=Y;R<v;R++)S=O[R],T[S]<0&&(g[d]=S,y[d++]=t(q[S],Q)),q[S]=0}for(A[v]=d,_[v]=x,R=0;R<d;R++)g[R]=T[g[R]];return y.splice(d,y.length-d),g.splice(d,g.length-d),D.splice(x,D.length-x),E.splice(x,E.length-x),{L:w,U:C,pinv:T}}});var gu="slu",kl=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Xi=L(gu,kl,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:o,divideScalar:c,subtract:h,larger:f,largerEq:s,SparseMatrix:a}=r,u=mu({add:n,multiply:i,transpose:o}),l=xu({abs:t,divideScalar:c,multiply:i,subtract:h,larger:f,largerEq:s,SparseMatrix:a});return e(gu,{"SparseMatrix, number, number":function(v,p,d){if(!pe(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(d<0||d>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var x=u(p,v,!1),y=l(v,x,d);return{L:y.L,U:y.U,p:y.pinv,q:x.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function Zi(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var yu="lusolve",ql=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Hi=L(yu,ql,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:o,lsolve:c,DenseMatrix:h}=r,f=tt({DenseMatrix:h});return e(yu,{"Array, Array | Matrix":function(l,m){l=t(l);var v=n(l),p=a(v.L,v.U,v.p,null,m);return p.valueOf()},"DenseMatrix, Array | Matrix":function(l,m){var v=n(l);return a(v.L,v.U,v.p,null,m)},"SparseMatrix, Array | Matrix":function(l,m){var v=n(l);return a(v.L,v.U,v.p,null,m)},"SparseMatrix, Array | Matrix, number, number":function(l,m,v,p){var d=i(l,v,p);return a(d.L,d.U,d.p,d.q,m)},"Object, Array | Matrix":function(l,m){return a(l.L,l.U,l.p,l.q,m)}});function s(u){if(Ae(u))return u;if(Ee(u))return t(u);throw new TypeError("Invalid Matrix LU decomposition")}function a(u,l,m,v,p){u=s(u),l=s(l),m&&(p=f(u,p,!0),p._data=Zi(m,p._data));var d=c(u,p),x=o(l,d);return v&&(x._data=Zi(v,x._data)),x}});var Eu="det",Vl=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],Gi=L(Eu,Vl,r=>{var{typed:e,matrix:t,subtract:n,multiply:i,divideScalar:o,isZero:c,unaryMinus:h}=r;return e(Eu,{any:function(a){return ge(a)},"Array | Matrix":function(a){var u;switch(Ae(a)?u=a.size():Array.isArray(a)?(a=t(a),u=a.size()):u=[],u.length){case 0:return ge(a);case 1:if(u[0]===1)return ge(a.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+_e(u)+")");case 2:{var l=u[0],m=u[1];if(l===m)return f(a.clone().valueOf(),l,m);throw new RangeError("Matrix must be square (size: "+_e(u)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_e(u)+")")}}});function f(s,a,u){if(a===1)return ge(s[0][0]);if(a===2)return n(i(s[0][0],s[1][1]),i(s[1][0],s[0][1]));for(var l=!1,m=new Array(a).fill(0).map((E,_)=>_),v=0;v<a;v++){var p=m[v];if(c(s[p][v])){var d=void 0;for(d=v+1;d<a;d++)if(!c(s[m[d]][v])){p=m[d],m[d]=m[v],m[v]=p,l=!l;break}if(d===a)return s[p][v]}for(var x=s[p][v],y=v===0?1:s[m[v-1]][v-1],g=v+1;g<a;g++)for(var A=m[g],w=v+1;w<a;w++)s[A][w]=o(n(i(s[A][w],x),i(s[A][v],s[p][w])),y)}var D=s[m[a-1]][a-1];return l?h(D):D}});var wu="combinations",Ul=["typed"],Yi=L(wu,Ul,r=>{var{typed:e}=r;return e(wu,{"number, number":si,"BigNumber, BigNumber":function(n,i){var o=n.constructor,c,h,f=n.minus(i),s=new o(1);if(!Au(n)||!Au(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(c=s,i.lt(f))for(h=s;h.lte(f);h=h.plus(s))c=c.times(i.plus(h)).dividedBy(h);else for(h=s;h.lte(i);h=h.plus(s))c=c.times(f.plus(h)).dividedBy(h);return c}})});function Au(r){return r.isInteger()&&r.gte(0)}var $i=Kn({config:pr}),Cu=jn({});var _u=ri({});var Qi=ti({});var dr=ni({Matrix:Qi});var de=Xn({BigNumber:$i,Complex:Cu,DenseMatrix:dr,Fraction:_u});var bu=gi({typed:de});var nt=yi({typed:de});var Xl=mi({BigNumber:$i,typed:de});var Tu=Yi({typed:de}),Mu=vi({Complex:Cu,typed:de}),Zl=Ci({typed:de});var Or=li({config:pr,typed:de});var Hl=ci({typed:de});var Ct=Ei({typed:de});var Gl=hi({typed:de});var hn=pi({Matrix:Qi,equalScalar:Or,typed:de});var Ji=xi({typed:de});var Yl=di({Fraction:_u,typed:de});var nr=Di({DenseMatrix:dr,Matrix:Qi,SparseMatrix:hn,typed:de});var Ki=Mi({bignumber:Xl,fraction:Yl,number:Gl});var $l=_i({matrix:nr,config:pr,typed:de}),Fu=Bi({DenseMatrix:dr,config:pr,matrix:nr,typed:de});var _r=Ai({DenseMatrix:dr,addScalar:nt,equalScalar:Or,matrix:nr,typed:de,unaryMinus:Ji});var Wi=bi({matrix:nr,typed:de});var Su=Ti({BigNumber:$i,config:pr,matrix:nr,typed:de});var _t=Fi({numeric:Ki,typed:de});var Ql=Ri({DenseMatrix:dr,config:pr,matrix:nr,typed:de});var Jl=Si({DenseMatrix:dr,divideScalar:_t,equalScalar:Or,matrix:nr,multiplyScalar:Ct,subtract:_r,typed:de});var Nu=Oi({config:pr,numeric:Ki,smaller:Fu,typed:de});var Kl=Ni({DenseMatrix:dr,divideScalar:_t,equalScalar:Or,matrix:nr,multiplyScalar:Ct,subtract:_r,typed:de});var bt=ki({DenseMatrix:dr,SparseMatrix:hn,addScalar:nt,equalScalar:Or,matrix:nr,typed:de});var Wl=qi({addScalar:nt,conj:Zl,multiplyScalar:Ct,size:$l,typed:de});var mn=Ii({DenseMatrix:dr,config:pr,matrix:nr,typed:de});var it=wi({addScalar:nt,dot:Wl,equalScalar:Or,matrix:nr,multiplyScalar:Ct,typed:de});var jl=Xi({SparseMatrix:hn,abs:bu,add:bt,divideScalar:_t,larger:mn,largerEq:Ql,multiply:it,subtract:_r,transpose:Wi,typed:de});var ji=Gi({divideScalar:_t,isZero:Hl,matrix:nr,multiply:it,subtract:_r,typed:de,unaryMinus:Ji});var ep=Pi({larger:mn,smaller:Fu});var Bu=Li({config:pr,larger:mn,numeric:Ki,typed:de});var rp=zi({FibonacciHeap:ep,addScalar:nt,equalScalar:Or});var tp=Vi({DenseMatrix:dr,Spa:rp,SparseMatrix:hn,abs:bu,addScalar:nt,divideScalar:_t,equalScalar:Or,larger:mn,matrix:nr,multiplyScalar:Ct,subtract:_r,typed:de,unaryMinus:Ji});var Iu=Hi({DenseMatrix:dr,lsolve:Jl,lup:tp,matrix:nr,slu:jl,typed:de,usolve:Kl});var xe=class{constructor(e,t){this.rows=1;this.cols=1;this.values=[];this.rows=e,this.cols=t,this.values=new Array(e*t).fill(0)}getRows(){return this.rows}getCols(){return this.cols}setValue(e,t,n){this.values[e*this.cols+t]=n}getValue(e,t){return this.values[e*this.cols+t]}getCol(e){let t=new Oe(this.rows);for(let n=0;n<this.rows;n++)t.setValue(n,this.getValue(n,e));return t}clone(){let e=new xe(this.rows,this.cols);return e.values=[...this.values],e}toString(){let e="[";for(let t=0;t<this.rows;t++){t>0&&(e+=","),e+="[";for(let n=0;n<this.cols;n++)n>0&&(e+=","),e+=this.getValue(t,n);e+="]"}return e+="]",e}static mathjs2matrix(e){let t=new xe(e.size()[0],e.size()[1]),n=t.getRows(),i=t.getCols();for(let o=0;o<n;o++)for(let c=0;c<i;c++)t.setValue(o,c,e.get([o,c]));return t}static matrix2mathjs(e){let t=Su(e.rows,e.cols);for(let n=0;n<e.rows;n++)for(let i=0;i<e.cols;i++)t.set([n,i],e.getValue(n,i));return t}is_zero(e=1e-9){for(let t=0;t<this.rows;t++)for(let n=0;n<this.cols;n++)if(Math.abs(this.getValue(t,n))>e)return!1;return!0}};var dn=class{constructor(e){this.parent=null;this.parent=e}_create(e,t,n){let i=new xe(e,t),o=0;for(let c=0;c<e;c++)for(let h=0;h<t;h++)i.setValue(c,h,n[o++]);return i}_clone(e){return e.clone()}_getElement(e,t,n,i){if(t<0||t>=e.getRows())throw new Fe(i,"matrix has "+e.getRows()+" rows. Cannot get row "+t);if(n<0||n>=e.getCols())throw new Fe(i,"matrix has "+e.getCols()+" columns. Cannot get column "+n);return e.getValue(t,n)}_setElement(e,t,n,i,o){if(t<0||t>=e.getRows())throw new Fe(o,"matrix has "+e.getRows()+" rows. Cannot get row "+t);if(n<0||n>=e.getCols())throw new Fe(o,"matrix has "+e.getCols()+" columns. Cannot get column "+n);e.setValue(t,n,i)}_addMatrices(e,t,n){let i;try{i=bt(xe.matrix2mathjs(e),xe.matrix2mathjs(t))}catch{throw new Fe(n,"dimensions do not match")}return xe.mathjs2matrix(i)}_subMatrices(e,t,n){let i;try{i=_r(xe.matrix2mathjs(e),xe.matrix2mathjs(t))}catch{throw new Fe(n,"dimensions do not match")}return xe.mathjs2matrix(i)}_mulScalarMatrix(e,t){let n=it(e,xe.matrix2mathjs(t));return xe.mathjs2matrix(n)}_mulMatrixScalar(e,t){let n=it(xe.matrix2mathjs(e),t);return xe.mathjs2matrix(n)}_mulMatrices(e,t,n){let i;try{i=it(xe.matrix2mathjs(e),xe.matrix2mathjs(t))}catch{throw new Fe(n,"dimensions do not match")}return xe.mathjs2matrix(i)}_randMatrix(e,t,n,i){let o=new xe(e,t);for(let c=0;c<e;c++)for(let h=0;h<t;h++)o.setValue(c,h,this.parent.interpret_basic._randIntMinMax(n,i));return o}_randZMatrix(e,t,n,i){let o=new xe(e,t);for(let c=0;c<e;c++)for(let h=0;h<t;h++)o.setValue(c,h,this.parent.interpret_basic._randIntMinMaxZ(n,i));return o}_det(e,t){try{return ji(xe.matrix2mathjs(e))}catch{throw new Fe(t,"matrix is not square")}}_minMatrix(e){return Nu(xe.matrix2mathjs(e))}_maxMatrix(e){return Bu(xe.matrix2mathjs(e))}_zeros(e,t){let n=new xe(e,t);for(let i=0;i<e;i++)for(let o=0;o<t;o++)n.setValue(i,o,0);return n}_ones(e,t){let n=new xe(e,t);for(let i=0;i<e;i++)for(let o=0;o<t;o++)n.setValue(i,o,1);return n}_transposeMatrix(e){return xe.mathjs2matrix(Wi(xe.matrix2mathjs(e)))}_triu(e){let t=e.clone();for(let n=0;n<t.getRows();n++)for(let i=0;i<t.getCols();i++)n>i&&t.setValue(n,i,0);return t}_linsolve(e,t){return xe.mathjs2matrix(Iu(xe.matrix2mathjs(e),Oe.vector2list(t))).getCol(0)}_isMatrixZero(e){return e.is_zero(1e-9)}_isMatrixInvertible(e){let t=ji(xe.matrix2mathjs(e));return Math.abs(t)>1e-9}};var Pr=class{constructor(e=0,t=0){this.real=e,this.imag=t}static mathjs2complex(e){return new Pr(e.re,e.im)}static complex2mathjs(e){return Mu(e.real,e.imag)}toMathJs(){return Pr.complex2mathjs(this)}};var Dn=class{constructor(e){this.parent=null;this.parent=e}_addComplex(e,t){return Pr.mathjs2complex(bt(e.toMathJs(),t.toMathJs()))}_subComplex(e,t){return Pr.mathjs2complex(_r(e.toMathJs(),t.toMathJs()))}_absComplex(e){return 0}};var xn=class{constructor(e){this.parent=null;this.parent=e}_add(e,t){return e+t}_unaryMinus(e){return-e}_unaryNot(e){return!e}_sub(e,t){return e-t}_mul(e,t){return e*t}_div(e,t){return e/t}_pow(e,t){return Math.pow(e,t)}_randIntMax(e){return Math.floor(Math.random()*e)}_randIntMaxZ(e){let t=0;for(;t==0;)t=this._randIntMax(e);return t}_randIntMinMax(e,t){return Math.floor(Math.random()*(t-e)+e)}_randIntMinMaxZ(e,t){let n=0;for(;n==0;)n=this._randIntMinMax(e,t);return n}_sin(e){return Math.sin(e)}_cos(e){return Math.cos(e)}_tan(e){return Math.tan(e)}_asin(e){return Math.asin(e)}_acos(e){return Math.acos(e)}_atan(e){return Math.atan(e)}_exp(e){return Math.exp(e)}_sqrt(e){return Math.sqrt(e)}_abs(e){return Math.abs(e)}_floor(e){return Math.floor(e)}_ceil(e){return Math.ceil(e)}_round(e){return Math.round(e)}_sign(e){return e==0?0:e<0?-1:1}_maxInt(e){return Math.max(...e)}_fac(e){let t=1;for(let n=1;n<=e;n++)t*=n;return t}_binomial(e,t){return Tu(e,t)}};var at=class extends Error{constructor(e){super(e),this.name="TermError"}},J=class{constructor(e="",t=[]){this.op="";this.value="";this.o=[];this.op=e,this.o=t}static Op(e,t){let n=new J;return n.op=e,n.o=t,n}static Const(e){let t=new J;return t.op="#",t.value=e,t}static Var(e){let t=new J;return t.op="$",t.value=e,t}clone(){let e=new J;e.op=this.op,e.value=this.value;for(let t of this.o)e.o.push(t.clone());return e}eval(e={}){let t;switch(this.op){case"+":t=0;for(let n of this.o)t+=n.eval(e);break;case"*":t=1;for(let n of this.o)t*=n.eval(e);break;case"-":t=0;for(let n of this.o)t-=n.eval(e);break;case".-":t=-this.o[0].eval(e);break;case"^":t=Math.pow(this.o[0].eval(e),this.o[1].eval(e));break;case"#":t=this.value;break;case"sin":t=Math.sin(this.o[0].eval(e));break;case"cos":t=Math.cos(this.o[0].eval(e));break;case"tan":t=Math.tan(this.o[0].eval(e));break;case"asin":t=Math.asin(this.o[0].eval(e));break;case"atan":t=Math.atan(this.o[0].eval(e));break;case"exp":t=Math.exp(this.o[0].eval(e));break;case"$":if(this.value in e)return e[this.value];throw new at('eval(..): unset variable "'+this.value+'"');default:throw new at('eval(..): unimplemented operator "'+this.op+'"')}return t}diff(e){let t=null,n,i;switch(this.op){case".-":t=J.Op(".-",[this.o[0].diff(e)]);break;case"+":t=J.Op("+",[]);for(let o of this.o)t.o.push(o.diff(e));break;case"*":n=this.o[0],i=this.o.length==2?this.o[1]:J.Op("*",this.o.slice(1)),t=J.Op("+",[J.Op("*",[n.diff(e),i.clone()]),J.Op("*",[n.clone(),i.diff(e)])]);break;case"^":if(this.o[1].op!=="#")throw new at("diff(..): u^v: operator ^ only implemented for constant v");t=J.Op("*",[this.o[0].diff(e),this.o[1].clone(),J.Op("^",[this.o[0].clone(),J.Const(this.o[1].value-1)])]);break;case"exp":t=J.Op("*",[this.o[0].diff(e),J.Op("exp",[this.o[0].clone()])]);break;case"sin":t=J.Op("*",[this.o[0].diff(e),J.Op("cos",[this.o[0].clone()])]);break;case"cos":t=J.Op(".-",[J.Op("*",[this.o[0].diff(e),J.Op("cos",[this.o[0].clone()])])]);break;case"$":t=J.Const(this.value===e?1:0);break;case"#":t=J.Const(0);break;default:throw new at('diff(..): unimplemented operator "'+this.op+'"')}return t}integrate(e,t,n,i=1e-12){let o=0;for(let c=t;c<=n;c+=i)o+=this.eval({varId:c});return o/i}optimize(){let e=this.clone();for(let t=0;t<e.o.length;t++)e.o[t]=e.o[t].optimize();if(this.op==="*"){for(let t of e.o)if(t.op==="#"&&t.value==0)return J.Const(0)}try{let t=e.eval();return J.Const(t)}catch{}return e}setVariableValue(e,t){this.op==="$"&&(this.op="#",this.value=t);for(let n of this.o)n.setVariableValue(e,t)}getVariableIDs(){let e=new Set;this.op==="$"&&e.add(this.value);for(let t of this.o)e=new Set([...e,...t.getVariableIDs()]);return e}toString(){let e="";switch(this.op){case"#":case"$":e=""+this.value;break;case".-":e+="-("+this.o[0].toString()+")";break;default:if(this.op.length>2){e+=this.op+"(";for(let t=0;t<this.o.length;t++)t>0&&(e+=","),e+=this.o[t].toString();e+=")"}else{e+="(";for(let t=0;t<this.o.length;t++)t>0&&(e+=this.op),e+=this.o[t].toString();e+=")"}break}return e}};var gn=class{constructor(e){this.parent=null;this.parent=e}var(e){return J.Var(e)}_eval(e,t,n){let i=0;try{i=e.eval(t)}catch(o){throw new Fe(n,o.message)}return i}_numberToTerm(e){return J.Const(e)}_addTermReal(e,t){return J.Op("+",[e,J.Const(t)])}_addRealTerm(e,t){return J.Op("+",[J.Const(e),t])}_addTermTerm(e,t){return J.Op("+",[e,t])}_subTermReal(e,t){return J.Op("-",[e,J.Const(t)])}_subRealTerm(e,t){return J.Op("-",[J.Const(e),t])}_subTermTerm(e,t){return J.Op("-",[e,t])}_mulTermReal(e,t){return J.Op("*",[e,J.Const(t)])}_mulRealTerm(e,t){return J.Op("*",[J.Const(e),t])}_mulTermTerm(e,t){return J.Op("*",[e,t])}_divTermReal(e,t){return J.Op("/",[e,J.Const(t)])}_divRealTerm(e,t){return J.Op("/",[J.Const(e),t])}_divTermTerm(e,t){return J.Op("/",[e,t])}_powTermReal(e,t){return J.Op("^",[e,J.Const(t)])}_powRealTerm(e,t){return J.Op("^",[J.Const(e),t])}_powTermTerm(e,t){return J.Op("^",[e,t])}_sinTerm(e){return J.Op("sin",[e])}_cosTerm(e){return J.Op("cos",[e])}_tanTerm(e){return J.Op("tan",[e])}_expTerm(e){return J.Op("exp",[e])}_diffTerm(e,t){return e.diff(t.toString())}};var yn=class{constructor(e=[]){this.elements=[];this.elements=e}toString(){let e="{";return e+=this.elements.sort().join(","),e+="}",e}};var En=class{constructor(e){this.parent=null;this.parent=e}_createSet(e){let t=new yn;return t.elements=e,t}_lenSet(e){return e.elements.length}};var Fe=class extends Error{constructor(e,t){super(""+e+":"+t),this.name="RunError"}},wn=class{constructor(){this.interpret_vector=null;this.interpret_matrix=null;this.interpret_complex=null;this.interpret_basic=null;this.interpret_term=null;this.interpret_set=null;this.interpret_vector=new Pt(this),this.interpret_matrix=new dn(this),this.interpret_complex=new Dn(this),this.interpret_basic=new xn(this),this.interpret_term=new gn(this),this.interpret_set=new En(this)}interpret(e,t){e+="return [";let n=0;for(let o of t)o.type.base!="TERM_VAR"&&(n>0&&(e+=", "),e+=o.id,n++);e+="];";let i=new Function("runtime",e);try{let o=i(this);for(let c=0;c<t.length;c++){let h=t[c];switch(h.type.base){case"BOOL":h.value=o[c];break;case"INT":case"REAL":h.value=o[c];break;case"VECTOR":h.value=o[c];break;case"MATRIX":h.value=o[c];break;case"TERM":h.value=o[c];break;case"INT_SET":h.value=o[c];break;default:throw new Fe("-1","interpret(..): unimplemented type "+h.type)}}}catch(o){throw new Fe("-1","interpret(..) failed: "+o)}}};var Lu=lt(Mn());var Ru=`

_add(x:INT,y:INT):INT -> interpret_basic._add;
_add(x:INT,y:REAL):REAL -> interpret_basic._add;
_add(x:REAL,y:INT):REAL -> interpret_basic._add;
_add(x:REAL,y:REAL):REAL -> interpret_basic._add;
_unaryMinus(x:INT):INT -> interpret_basic._unaryMinus;
_unaryMinus(x:REAL):REAL -> interpret_basic._unaryMinus;
_unaryNot(x:BOOL):BOOL -> interpret_basic._unaryNot;
_sub(x:INT,y:INT):INT -> interpret_basic._sub;
_sub(X:INT,y:REAL):REAL -> interpret_basic._sub;
_sub(x:REAL,y:INT):REAL -> interpret_basic._sub;
_sub(x:REAL,y:REAL):REAL -> interpret_basic._sub;
_mul(x:INT,y:INT):INT -> interpret_basic._mul;
_mul(x:INT,y:REAL):REAL -> interpret_basic._mul;
_mul(x:REAL,y:INT):REAL -> interpret_basic._mul;
_mul(x:REAL,y:REAL):REAL -> interpret_basic._mul;
_div(x:INT,y:INT):REAL -> interpret_basic._div;
_div(x:INT,y:REAL):REAL -> interpret_basic._div;
_div(x:REAL,y:INT):REAL -> interpret_basic._div;
_div(x:REAL,y:REAL):REAL -> interpret_basic._div;
_pow(x:INT,y:INT):INT -> interpret_basic._pow;
_pow(x:INT,y:REAL):REAL -> interpret_basic._pow;
_pow(x:REAL,y:INT):REAL -> interpret_basic._pow;
_pow(x:REAL,y:REAL):REAL -> interpret_basic._pow;
rand(max:INT): INT -> interpret_basic._randIntMax;
rand(min:INT,max:INT): INT -> interpret_basic._randIntMinMax;
randZ(min:INT,max:INT): INT -> interpret_basic._randIntMinMaxZ;
sin(x:INT): REAL -> interpret_basic._sin;
sin(x:REAL): REAL -> interpret_basic._sin;
cos(x:INT): REAL -> interpret_basic._cos;
cos(x:REAL): REAL -> interpret_basic._cos;
tan(x:INT): REAL -> interpret_basic._tan;
tan(x:REAL): REAL -> interpret_basic._tan;
asin(x:INT): REAL -> interpret_basic._asin;
asin(x:REAL): REAL -> interpret_basic._asin;
acos(x:INT): REAL -> interpret_basic._acos;
acos(x:REAL): REAL -> interpret_basic._acos;
atan(x:INT): REAL -> interpret_basic._atan;
atan(x:REAL): REAL -> interpret_basic._atan;
exp(x:INT):REAL -> interpret_basic._exp;
exp(x:REAL):REAL -> interpret_basic._exp;
sqrt(x:REAL): REAL -> interpret_basic._sqrt;
abs(x:INT):INT -> interpret_basic._abs;
abs(x:REAL):REAL -> interpret_basic._abs;
floor(x:INT): INT -> interpret_basic._floor;
floor(x:REAL): INT -> interpret_basic._floor;
ceil(x:INT): INT -> interpret_basic._ceil;
ceil(x:REAL): INT -> interpret_basic._ceil;
round(x:INT): INT -> interpret_basic._round;
round(x:REAL): INT -> interpret_basic._round;
sign(x:INT): INT -> interpret_basic._sign;
sign(x:REAL): INT -> interpret_basic._sign;
max(list:INT_LIST): INT -> interpret_basic._maxInt;
fac(x:INT): INT -> interpret_basic._fac;
binomial(n:INT,k:INT): INT -> interpret_basic._binomial;
set(elements:INT_LIST): SET_INT -> interpret_set._createSet;
len(s:SET_INT): INT -> interpret_set._lenSet;
_add(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._addComplex;
_sub(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._subComplex;
exp(x:COMPLEX):COMPLEX -> interpret_complex._expComplex;
sqrt(x:COMPLEX): COMPLEX -> interpret_complex._sqrtComplex;
abs(x:COMPLEX): REAL -> interpret_complex._absComplex;
_add(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._addVectors;
_sub(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._subVectors;
_mul(x:INT,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
_mul(x:REAL,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
dot(x:VECTOR, y:VECTOR): REAL -> interpret_vector._dotVectors;
cross(x:VECTOR, y:VECTOR): VECTOR -> interpret_vector._crossVectors;
norm2(x:VECTOR): REAL -> interpret_vector._norm2vec;
zeros<size:INT>(): VECTOR -> interpret_vector._zerosVector;
rand<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randVector;
randZ<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randZVector;
is_zero(x:VECTOR): BOOL -> interpret_vector._isVectorZero;
_add(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._addMatrices;
_sub(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._subMatrices;
_mul(x:INT,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x:REAL,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x: MATRIX, y: INT): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x: MATRIX, y: REAL): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._mulMatrices;
rand<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randMatrix;
randZ<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randZMatrix;
det(x:MATRIX): REAL -> interpret_matrix._det;
min(x:MATRIX): REAL -> interpret_matrix._minMatrix;
max(x:MATRIX): REAL -> interpret_matrix._maxMatrix;
zeros<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._zeros;
ones<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._ones;
transpose(x:MATRIX): MATRIX -> interpret_matrix._transposeMatrix;
triu(x:MATRIX): MATRIX -> interpret_matrix._triu;
linsolve(A:MATRIX,b:VECTOR): VECTOR -> interpret_matrix._linsolve;
is_zero(x:MATRIX): BOOL -> interpret_matrix._isMatrixZero;
is_invertible(x:MATRIX): BOOL -> interpret_matrix._isMatrixInvertible;
_numberToTerm(x:INT):TERM -> interpret_term._numberToTerm;
_add(x:TERM,y:INT):TERM -> interpret_term._addTermReal;
_add(x:TERM,y:REAL):TERM -> interpret_term._addTermReal;
_add(x:INT,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:REAL,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:TERM,y:TERM):TERM -> interpret_term._addTermTerm;
_sub(x:TERM,y:INT):TERM -> interpret_term._subTermReal;
_sub(x:TERM,y:REAL):TERM -> interpret_term._subTermReal;
_sub(x:INT,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:REAL,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:TERM,y:TERM):TERM -> interpret_term._subTermTerm;
_mul(x:TERM,y:INT):TERM -> interpret_term._mulTermReal;
_mul(x:TERM,y:REAL):TERM -> interpret_term._mulTermReal;
_mul(x:INT,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:REAL,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:TERM,y:TERM):TERM -> interpret_term._mulTermTerm;
_div(x:TERM,y:INT):TERM -> interpret_term._divTermReal;
_div(x:TERM,y:REAL):TERM -> interpret_term._divTermReal;
_div(x:INT,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:REAL,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:TERM,y:TERM):TERM -> interpret_term._divTermTerm;
_pow(x:TERM,y:INT):TERM -> interpret_term._powTermReal;
_pow(x:TERM,y:REAL):TERM -> interpret_term._powTermReal;
_pow(x:INT,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:REAL,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:TERM,y:TERM):TERM -> interpret_term._powTermTerm;
sin(x:TERM): TERM -> interpret_term._sinTerm;
cos(x:TERM): TERM -> interpret_term._cosTerm;
tan(x:TERM): TERM -> interpret_term._tanTerm;
exp(x:TERM): TERM -> interpret_term._expTerm;
diff(x:TERM, varId:TERM): TERM -> interpret_term._diffTerm;

`;var An=class{constructor(){this.lexer=null;this.symTab=[];this.loopLevel=0;this.scope=0}getSymbol(e){for(let t of this.symTab)if(t.id===e)return t;return null}removeSymTabEntry(e){let t=[];for(let n of this.symTab)n!==e&&t.push(n);this.symTab=t}getLocalSymbols(){let e=[];for(let t of this.symTab)if(t.kind==="LOCAL"){if(t.type.base==="TERM_VAR")continue;e.push(t)}return e}parse(e){return this.loopLevel=0,this.scope=0,this.symTab=ha(Ru),this.lexer=new Lu.Lexer,this.lexer.configureSingleLineComments("//"),this.lexer.configureMultiLineComments("/*","*/"),this.lexer.enableEmitNewlines(!1),this.lexer.enableEmitIndentation(!1),this.lexer.enableBackslashLineBreaks(!1),this.lexer.pushSource("FILE",e),this.lexer.setTerminals(["&&","||","==","!=",">=","<=","++","--"]),this.parseProgram().str}parseProgram(){let e=new Je;for(;this.lexer.isNotEND();){let t=this.parseStatement();e.str+=t.str}return e}parseStatement(){if(this.lexer.isTER("let"))return this.parseDeclaration();if(this.lexer.isTER("if"))return this.parseIf();if(this.lexer.isTER("do"))return this.parseDo();if(this.lexer.isTER("while"))return this.parseWhile();if(this.lexer.isTER("function"))return this.parseFunction();if(this.lexer.isTER("return"))return this.parseReturn();if(this.lexer.isTER("break"))return this.parseBreak();if(this.lexer.isTER("continue"))return this.parseContinue();{let e=this.parseExpression();return this.lexer.EOS(),new Je(e.code.str+";")}}parseDeclaration(){let e=new Je;this.lexer.TER("let");let t=[];if(t.push(this.lexer.ID()),this.lexer.isTER("(")){let n=t[0];this.lexer.next();let i=[];for(i.push(this.lexer.ID());this.lexer.isTER(",");)this.lexer.next(),i.push(this.lexer.ID());for(let f of i){let s=new Qe("TERM_VAR"),a=new Dr(f,"LOCAL",s,this.scope,[]);this.symTab.push(a)}this.lexer.TER(")"),this.lexer.TER("=");let o=this.parseExpression();if(o.type.base!=="TERM")switch(o.type.base){case"INT":case"REAL":o.code.str="runtime.interpret_term._numberToTerm("+o.code.str+")",o.type.base="TERM";break;default:this.lexer.error("right-hand side is not a term")}e.str+="let "+n+" = "+o.code.str+";";for(let f=0;f<i.length;f++)this.symTab.pop();let c=[];for(let f of i)c.push(new Dr(f,"PARAMETER",new Qe("TERM_VAR"),this.scope+1,[]));let h=new Dr(n,"LOCAL",new Qe("TERM"),this.scope,c);this.symTab.push(h),this.lexer.EOS()}else{let n=!1;for(;this.lexer.isTER(":")||this.lexer.isTER("/");)this.lexer.isTER("/")&&(n=!0),this.lexer.isTER(":")&&n==!0&&this.lexer.error('cannot mix ":" and "/"'),this.lexer.next(),t.push(this.lexer.ID());this.lexer.TER("=");let i=this.parseExpression();for(let o of t){let c=new Dr(o,"LOCAL",i.type,this.scope,[]);this.symTab.push(c)}if(n){i.type.base!=="INT"&&this.lexer.error('declaration operator "/" is unimplemented for type '+i.type.base),e.str+="let ";for(let o=0;o<t.length;o++){let c=t[o];o>0&&(e.str+=", "),e.str+=c}e.str+=`;
`;for(let o=0;o<t.length;o++){let c=t[o];if(o==0)e.str+=c+" = "+i.code.str+`;
`;else{e.str+="do { "+c+" = "+i.code.str+"; } while (";let h="";for(let f=0;f<o;f++)h.length>0&&(h+=" || "),h+=c+" == "+t[f];e.str+=h,e.str+=`);
`}}}else for(let o of t)e.str+="let "+o+" = "+i.code.str+";";this.lexer.EOS()}return e}parseExpression(){let e=this.parseOr();for(;this.lexer.isTER("=");){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parseOr();e.code.tmp.includes("setElement")?(n.type.base!=="INT"&&n.type.base!=="REAL"&&this.lexer.error("element must be of type INT or REAL."),e.code.str=e.code.tmp.replace("\xA7RHS\xA7",n.code.str),e.type.base="VOID"):(e.type.base==="INT"||e.type.base==="REAL")&&(n.type.base==="INT"||n.type.base==="REAL")?(e.type.base="INT",e.code.str=e.code.str+" "+t+" "+n.code.str):e.type.base==="VECTOR"&&n.type.base==="VECTOR"?(e.type.base="VECTOR",e.code.str=e.code.str+" "+t+" runtime.interpret_vector._clone("+n.code.str+")"):e.type.base==="MATRIX"&&n.type.base==="MATRIX"?(e.type.base="MATRIX",e.code.str=e.code.str+" "+t+" runtime.interpret_matrix._clone("+n.code.str+")"):this.lexer.errorTypesInBinaryOperation(t,e.type.base,n.type.base)}return e}parseOr(){let e=this.parseAnd();for(;this.lexer.isTER("||");){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parseAnd();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+t+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(t,e.type.base,n.type.base)}return e}parseAnd(){let e=this.parseEqual();for(;this.lexer.isTER("&&");){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parseEqual();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+t+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(t,e.type.base,n.type.base)}return e}parseEqual(){let e=this.parseRelational();if(this.lexer.isTER("==")||this.lexer.isTER("!=")){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parseRelational();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+t+" "+n.code.str):e.type.base=="INT"&&n.type.base=="INT"?(e.type.base="BOOL",e.code.str=e.code.str+" "+t+" "+n.code.str):(e.type.base=="INT"||e.type.base=="REAL")&&(n.type.base=="INT"||n.type.base=="REAL")?(e.type.base="BOOL",e.code.str=t=="=="?"(Math.abs(("+e.code.str+") - ("+n.code.str+")) <= 1e-9)":"(Math.abs(("+e.code.str+") - ("+n.code.str+")) > 1e-9)"):this.lexer.errorTypesInBinaryOperation(t,e.type.base,n.type.base)}return e}parseRelational(){let e=this.parseAdd();if(this.lexer.isTER("<=")||this.lexer.isTER(">=")||this.lexer.isTER("<")||this.lexer.isTER(">")){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parseAdd();(e.type.base=="INT"||e.type.base=="REAL")&&(n.type.base=="INT"||n.type.base=="REAL")?(e.type.base="BOOL",e.code.str=e.code.str+" "+t+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(t,e.type.base,n.type.base)}return e}parseAdd(){let e=this.parseMul();for(;this.lexer.isTER("+")||this.lexer.isTER("-");){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parseMul();e=this.call(this.getSymbol(t==="+"?"_add":"_sub"),[],[e,n])}return e}parseMul(){let e=this.parsePow();for(;this.lexer.isTER("*")||this.lexer.isTER("/");){let t=this.lexer.getToken().token;this.lexer.next();let n=this.parsePow();e=this.call(this.getSymbol(t==="*"?"_mul":"_div"),[],[e,n])}return e}parsePow(){let e=this.parseUnary();if(this.lexer.isTER("^")){this.lexer.next();let t=this.parseUnary();e=this.call(this.getSymbol("_pow"),[],[e,t])}return e}parseUnary(){let e=this.parseUnaryExpression();return e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isNotTER("(")&&this.lexer.isNotTER("<")&&this.lexer.errorExpected(["(","<"]),(this.lexer.isTER("++")||this.lexer.isTER("--")||e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isTER("<")||this.lexer.isTER("(")||this.lexer.isTER("["))&&(e=this.parseUnaryPostfix(e)),e}parseUnaryExpression(){let e=new mt;if(this.lexer.isTER("true"))e.code.str=" true ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isTER("false"))e.code.str=" false ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isINT())e.code.str=" "+this.lexer.INT()+" ",e.type.base="INT";else if(this.lexer.isREAL())e.code.str=" "+this.lexer.REAL()+" ",e.type.base="REAL";else if(this.lexer.isTER("(")){this.lexer.next();let t=this.parseExpression();this.lexer.TER(")"),e.code.str=" ( "+t.code.str+" ) ",e.type=t.type}else if(this.lexer.isTER("[")){this.lexer.next();let t=0,n=-1,i=-1,o=[];for(;this.lexer.isNotTER("]");){t>0&&this.lexer.TER(",");let f=this.parseMatrixRow();t==0?i=f.length:i!=f.length&&this.lexer.error("inconsistent number of matrix columns");for(let s of f)o.push(s);t++}n=t,this.lexer.TER("]");let c="[",h=0;for(let f of o)h>0&&(c+=", "),c+=f.code.str,h++;c+="]",e.code.str="runtime.interpret_matrix._create("+n+", "+i+", "+c+")",e.type.base="MATRIX"}else if(this.lexer.isID()){let t=this.lexer.ID();e.sym=this.getSymbol(t),e.sym==null&&this.lexer.errorUnknownSymbol(t),e.sym.type.base==="TERM_VAR"?(e.type=new Qe("TERM"),e.code.str='runtime.interpret_term.var("'+t+'")'):(e.type=e.sym.type.clone(),e.code.str=" "+t)}else if(this.lexer.isTER("-")){this.lexer.next();let t=this.parseUnary();e=this.call(this.getSymbol("_unaryMinus"),[],[t])}else if(this.lexer.isTER("!")){this.lexer.next();let t=this.parseUnary();e=this.call(this.getSymbol("_unaryNot"),[],[t])}else this.lexer.errorExpected(["INT","IMAG","REAL","(","ID"]);return e}parseMatrixRow(){this.lexer.TER("[");let e=0,t=[];for(;this.lexer.isNotTER("]");){e>0&&this.lexer.TER(",");let n=this.parseExpression();n.type.base!=="INT"&&n.type.base!=="REAL"&&this.lexer.error("matrix element must be of type INT or REAL."),t.push(n),e++}return this.lexer.TER("]"),t}parseUnaryPostfix(e){if(this.lexer.isTER("++"))this.lexer.next(),e.code.str+=" ++ ";else if(this.lexer.isTER("--"))this.lexer.next(),e.code.str+=" -- ";else if(this.lexer.isTER("<")||this.lexer.isTER("(")){let t=[],n=[];if(this.lexer.isTER("<")){this.lexer.next();let i=0;for(;this.lexer.isNotTER(">");)i>0&&this.lexer.TER(","),t.push(this.parseUnary()),i++;this.lexer.TER(">")}if(this.lexer.TER("("),e.sym==null&&this.lexer.errorNotAFunction(),e.sym.kind=="FUNCTION"||e.sym.kind=="LOCAL"&&e.sym.type.base==="TERM"){let i=0;for(;this.lexer.isNotTER(")");)i>0&&this.lexer.TER(","),n.push(this.parseExpression()),i++;this.lexer.TER(")")}else this.lexer.errorNotAFunction();if(e.sym.kind=="FUNCTION")e=this.call(e.sym,t,n);else{e.sym.subSymbols.length!=n.length&&this.lexer.error("invalid parameters for function "+e.sym.id);let i="{";for(let o=0;o<n.length;o++)n[o].type.base!=="INT"&&n[o].type.base!=="REAL"&&this.lexer.error("parameters for function must be of type INT or REAL."),o>0&&(i+=", "),i+=e.sym.subSymbols[o].id+": "+n[o].code.str;i+="}",e.code.str="runtime.interpret_term._eval("+e.sym.id+", "+i+", "+this.getTokenPosStr()+")",e.type=new Qe("REAL")}}else if(this.lexer.isTER("[")){this.lexer.next();let t=[],n=0;for(;this.lexer.isNotTER("]");)n>0&&this.lexer.TER(","),t.push(this.parseExpression()),n++;if(this.lexer.TER("]"),e.type.base==="VECTOR")t.length!=1&&this.lexer.error("expected one index"),t[0].type.base!=="INT"&&this.lexer.error("index is not of type integer"),e.type.base="REAL",e.code.str="runtime.interpret_vector._getElement("+e.sym.id+", "+t[0].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_vector._setElement("+e.sym.id+", "+t[0].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")";else if(e.type.base==="MATRIX"){t.length!=2&&this.lexer.error("expected two indices");for(let i=0;i<t.length;i++)t[i].type.base!=="INT"&&this.lexer.error("index "+(i+1)+" is not of type integer");e.type.base="REAL",e.code.str="runtime.interpret_matrix._getElement("+e.sym.id+", "+t[0].code.str+", "+t[1].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_matrix._setElement("+e.sym.id+", "+t[0].code.str+", "+t[1].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")"}else this.lexer.error("can only index a matrix or a vector")}else this.lexer.errorExpected(["++","--","(","["]);return e}call(e,t,n){let i=new mt;i.sym=e,i.type=e.type.clone();let o=e;for(;o!=null;){let c=[],h=[];for(let f of o.subSymbols)f.kind=="DIMENSION"?c.push(f):f.kind==="PARAMETER"&&h.push(f);if(c.length==t.length&&h.length==n.length||h.length==1&&h[0].type.base=="INT_LIST"){let f=h.length==1&&h[0].type.base=="INT_LIST",s=!0;for(let a=0;a<c.length;a++)if(c[a].type.base!==t[a].type.base){s=!1;break}if(f){for(let a=0;a<n.length;a++)if(n[a].type.base!="INT"){s=!1;break}}else for(let a=0;a<h.length;a++)if(h[a].type.base!==n[a].type.base){s=!1;break}if(s){i.type=o.type.clone(),i.code.str="runtime."+o.runtimeId+"(";let a=0;for(let u=0;u<c.length;u++)a>0&&(i.code.str+=", "),i.code.str+=t[u].code.str,a++;if(f){a>0&&(i.code.str+=", "),i.code.str+="[";for(let u=0;u<n.length;u++)u>0&&(i.code.str+=","),i.code.str+=n[u].code.str;i.code.str+="]",a++}else for(let u=0;u<h.length;u++)a>0&&(i.code.str+=", "),i.code.str+=n[u].code.str,a++;a>0&&(i.code.str+=", "),i.code.str+=this.getTokenPosStr(),a++,i.code.str+=")",i.sym=null;break}}o=o.functionOverloadSuccessor}if(o==null){let c="";for(let h of n)c.length>0&&(c+=", "),c+=h.type.toString();this.lexer.error('no matching function prototype for calling "'+i.sym.id+'" with types ('+c+")")}return i}parseIf(){let e=new Je;this.lexer.TER("if"),this.lexer.TER("(");let t=this.parseExpression();t.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),e.str="if ("+t.code.str+")";let n=this.parseBlock();if(e.str+=n.str,this.lexer.isTER("else")){this.lexer.next(),e.str+=" else ";let i=this.parseBlock();e.str+=i.str}return e}parseBlock(){let e=new Je;if(this.lexer.isTER("{")){for(this.lexer.next(),e.str+="{";this.lexer.isNotTER("}");)e.str+=this.parseStatement().str;return this.lexer.TER("}"),e.str+="}",e}else return this.parseStatement()}parseDo(){this.lexer.TER("do"),this.loopLevel++;let e=this.parseBlock();this.loopLevel--,this.lexer.TER("while"),this.lexer.TER("(");let t=this.parseExpression();return t.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.lexer.EOS(),new Je(" do "+e.str+" while( "+t.code.str+" ); ")}parseWhile(){this.lexer.TER("while"),this.lexer.TER("(");let e=this.parseExpression();e.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.loopLevel++;let t=this.parseBlock();return this.loopLevel--,new Je(" while( "+e.code.str+" ) "+t.str)}parseFunction(){this.lexer.TER("function");let e=this.lexer.ID();this.lexer.TER("(");let t=0;for(;this.lexer.isNotTER(")");){t>0&&this.lexer.TER(",");let i=this.lexer.ID();t++}return this.lexer.TER(")"),this.parseBlock()}parseReturn(){if(this.lexer.TER("return"),this.lexer.isEOS()==!1){let e=this.parseExpression();return this.lexer.EOS(),new Je(" return "+e.code)}else return this.lexer.EOS(),new Je(" return ")}parseBreak(){return this.lexer.TER("break"),this.loopLevel==0&&this.lexer.error("break not allowed outside loop"),this.lexer.EOS(),new Je(" break ")}parseContinue(){return this.lexer.TER("continue"),this.loopLevel==0&&this.lexer.error("continue not allowed outside loop"),this.lexer.EOS(),new Je(" continue ")}getTokenPosStr(){return"'"+this.lexer.getToken().row+":"+this.lexer.getToken().col+"'"}};var Cn="";function ip(r,e=!1){let t=new An;Cn=t.parse(r);let n=t.getLocalSymbols();return e&&console.log(Cn),new wn().interpret(Cn,n),n}return xs(ap);})();
/*!
 *  decimal.js v10.4.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
