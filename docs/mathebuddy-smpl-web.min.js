"use strict";var mathebuddySMPL=(()=>{var Ds=Object.create;var Rt=Object.defineProperty;var xs=Object.getOwnPropertyDescriptor;var gs=Object.getOwnPropertyNames;var ys=Object.getPrototypeOf,Es=Object.prototype.hasOwnProperty;var _r=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ws=(t,e)=>{for(var r in e)Rt(t,r,{get:e[r],enumerable:!0})},sa=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of gs(e))!Es.call(t,i)&&i!==r&&Rt(t,i,{get:()=>e[i],enumerable:!(n=xs(e,i))||n.enumerable});return t};var mt=(t,e,r)=>(r=t!=null?Ds(ys(t)):{},sa(e||!t||!t.__esModule?Rt(r,"default",{value:t,enumerable:!0}):r,t)),As=t=>sa(Rt({},"__esModule",{value:!0}),t);var ca=_r(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.getStr=cr.setLanguage=cr.LanguageText=cr.Language=void 0;var Ot;(function(t){t[t.EN=0]="EN",t[t.DE=1]="DE"})(Ot=cr.Language||(cr.Language={}));var ur;(function(t){t[t.EXPECTED=0]="EXPECTED",t[t.EXPECTED_ONE_OF=1]="EXPECTED_ONE_OF",t[t.CONDITION_NOT_BOOLEAN=2]="CONDITION_NOT_BOOLEAN",t[t.UNKNOWN_SYMBOL=3]="UNKNOWN_SYMBOL",t[t.SYMBOL_IS_NOT_A_FUNCTION=4]="SYMBOL_IS_NOT_A_FUNCTION",t[t.BIN_OP_INCOMPATIBLE_TYPES=5]="BIN_OP_INCOMPATIBLE_TYPES"})(ur=cr.LanguageText||(cr.LanguageText={}));function bs(t){fa=t}cr.setLanguage=bs;function Cs(t){return Fn[t+"_"+fa]}cr.getStr=Cs;var fa=Ot.EN,Fn={};function Yr(t,e){Fn[t+"_"+Ot.EN]=e}function $r(t,e){Fn[t+"_"+Ot.DE]=e}Yr(ur.EXPECTED,"expected");$r(ur.EXPECTED,"erwarte");Yr(ur.EXPECTED_ONE_OF,"expected one of");$r(ur.EXPECTED_ONE_OF,"erwarte Token aus Liste");Yr(ur.CONDITION_NOT_BOOLEAN,"condition must be boolean");$r(ur.CONDITION_NOT_BOOLEAN,"Bedingung muss Boolsch sein");Yr(ur.UNKNOWN_SYMBOL,"unknown symbol");$r(ur.UNKNOWN_SYMBOL,"unbekanntes Symbol");Yr(ur.SYMBOL_IS_NOT_A_FUNCTION,"symbol is not a function");$r(ur.SYMBOL_IS_NOT_A_FUNCTION,"Symbol ist keine Funktion");Yr(ur.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP is incompatible for types $T1 and $T2");$r(ur.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP ist inkompatibel mit den Typen $T1 und $T2")});var la=_r(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.LexerState=void 0;var ht=class{constructor(){this.i=0,this.n=-1,this.row=1,this.col=1,this.indent=0,this.lastIndent=0,this.stack=[]}copy(){let e=new ht;e.i=this.i,e.n=this.n,e.row=this.row,e.col=this.col,e.indent=this.indent,e.lastIndent=this.lastIndent;for(let r=0;r<this.stack.length;r++)e.stack.push(this.stack[r].copy());return e}};Lt.LexerState=ht});var ma=_r(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.LexerToken=qr.LexerTokenType=void 0;var pa;(function(t){t.DEL="DEL",t.TER="TER",t.INT="INT",t.BIGINT="BIGINT",t.REAL="REAL",t.HEX="HEX",t.STR="STR",t.ID="ID",t.END="END"})(pa=qr.LexerTokenType||(qr.LexerTokenType={}));var vt=class{constructor(){this.token="",this.type=pa.TER,this.value=0,this.valueBigint=0n,this.fileID="",this.row=0,this.col=0}toString(){let e=this.token;e=e.replace(/\n/g,"\\n"),e=e.replace(/\t/g,"\\t");let r=this.fileID+":"+this.row+":"+this.col;return r+=': "'+e+'" ('+this.type+")",r}copy(){let e=new vt;return e.token=this.token,e.type=this.type,e.value=this.value,e.fileID=this.fileID,e.row=this.row,e.col=this.col,e}};qr.LexerToken=vt});var ha=_r(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Lexer=Tr.ParseError=Tr.LexerFile=void 0;var ce=ca(),_s=la(),j=ma(),zt=class{constructor(){this.stateBackup=null,this.tokenBackup=null,this.id="",this.sourceCode=""}};Tr.LexerFile=zt;var Le=class extends Error{constructor(e){super(e),this.name="ParseError"}};Tr.ParseError=Le;var Sn=class{constructor(){this.terminals=new Set,this.fileStack=[],this.token=null,this.lastToken=null,this.state=null,this.singleLineCommentStart="//",this.multiLineCommentStart="/*",this.multilineCommentEnd="*/",this.emitNewline=!1,this.emitHex=!0,this.emitInt=!0,this.emitReal=!0,this.emitBigint=!0,this.emitDoubleQuotes=!0,this.emitIndentation=!1,this.lexerFilePositionPrefix="!>",this.allowBackslashLineBreaks=!1,this.putTrailingSemicolon=[],this.multicharDelimiters=[]}configureSingleLineComments(e="//"){this.singleLineCommentStart=e}configureMultiLineComments(e="/*",r="*/"){this.multiLineCommentStart=e,this.multilineCommentEnd=r}configureLexerFilePositionPrefix(e="!>"){this.lexerFilePositionPrefix=e}enableEmitNewlines(e){this.emitNewline=e}enableEmitHex(e){this.emitHex=e}enableEmitInt(e){this.emitInt=e}enableEmitReal(e){this.emitReal=e}enableEmitBigint(e){this.emitBigint=e}enableEmitDoubleQuotes(e){this.emitDoubleQuotes=e}enableEmitIndentation(e){this.emitIndentation=e}enableBackslashLineBreaks(e){this.allowBackslashLineBreaks=e}isEND(){return this.token.type===j.LexerTokenType.END}isNotEND(){return this.token.type!==j.LexerTokenType.END}END(){if(this.token.type===j.LexerTokenType.END)this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" END")}isID(){return this.token.type===j.LexerTokenType.ID}ID(){let e="";if(this.token.type===j.LexerTokenType.ID)e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" ID");return e}isLID(){return this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase()}LID(){let e="";if(this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase())e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" LowerCaseID");return e}isUID(){return this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase()}UID(){let e="";if(this.token.type===j.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase())e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" UpperCaseID");return e}isINT(){return this.token.type===j.LexerTokenType.INT}INT(){let e=0;if(this.token.type===j.LexerTokenType.INT)e=this.token.value,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" INT");return e}isBIGINT(){return this.token.type===j.LexerTokenType.BIGINT}BIGINT(){let e=0n;if(this.token.type===j.LexerTokenType.BIGINT)e=this.token.valueBigint,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" BIGINT");return e}isREAL(){return this.token.type===j.LexerTokenType.REAL}REAL(){let e=0;if(this.token.type===j.LexerTokenType.REAL)e=this.token.value,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" REAL");return e}isHEX(){return this.token.type===j.LexerTokenType.HEX}HEX(){let e="";if(this.token.type===j.LexerTokenType.HEX)e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" HEX");return e}isSTR(){return this.token.type===j.LexerTokenType.STR}STR(){let e="";if(this.token.type===j.LexerTokenType.STR)e=this.token.token,this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" STR");return e}isTER(e){return this.token.type===j.LexerTokenType.DEL&&this.token.token===e||this.token.type===j.LexerTokenType.ID&&this.token.token===e}isNotTER(e){return this.isTER(e)==!1&&this.token.type!=j.LexerTokenType.END}TER(e){if(this.token.type===j.LexerTokenType.DEL&&this.token.token===e||this.token.type===j.LexerTokenType.ID&&this.token.token===e)this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+' "'+e+'"')}isEOS(){return this.token.token===";"}EOS(){if(this.token.token===";")this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+' ";"')}isINDENT(){return this.token.type==j.LexerTokenType.DEL&&this.token.token==="	+"}isNotINDENT(){return!(this.token.type===j.LexerTokenType.DEL&&this.token.token==="	+")}INDENT(){if(this.token.type==j.LexerTokenType.DEL&&this.token.token==="	+")this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" INDENT")}isOUTDENT(){return this.token.type==j.LexerTokenType.DEL&&this.token.token==="	-"}isNotOUTDENT(){return this.token.type===j.LexerTokenType.END?!1:!(this.token.type===j.LexerTokenType.DEL&&this.token.token==="	-")}OUTDENT(){if(this.token.type==j.LexerTokenType.DEL&&this.token.token==="	-")this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" OUTDENT")}isNEWLINE(){return this.isOUTDENT()||this.token.type==j.LexerTokenType.DEL&&this.token.token===`
`}isNotNEWLINE(){return!this.isOUTDENT()&&!(this.token.type===j.LexerTokenType.DEL&&this.token.token===`
`)}NEWLINE(){if(!this.isOUTDENT())if(this.token.type==j.LexerTokenType.DEL&&this.token.token===`
`)this.next();else throw new Le(this.err_pos()+(0,ce.getStr)(ce.LanguageText.EXPECTED)+" NEWLINE")}error(e,r=null){throw new Le(this.err_pos(r)+e)}errorExpected(e){let r=(0,ce.getStr)(ce.LanguageText.EXPECTED_ONE_OF)+" ";for(let n=0;n<e.length;n++)n>0&&(r+=", "),r+=e[n];r+=".",this.error(r)}errorConditionNotBoolean(){this.error((0,ce.getStr)(ce.LanguageText.CONDITION_NOT_BOOLEAN))}errorUnknownSymbol(e){this.error((0,ce.getStr)(ce.LanguageText.UNKNOWN_SYMBOL)+" "+e)}errorNotAFunction(){this.error((0,ce.getStr)(ce.LanguageText.SYMBOL_IS_NOT_A_FUNCTION))}errorTypesInBinaryOperation(e,r,n){this.error((0,ce.getStr)(ce.LanguageText.BIN_OP_INCOMPATIBLE_TYPES).replace("$OP",e).replace("$T1",r).replace("$T2",n))}err_pos(e=null){return e==null&&(e=this.token),e.fileID+":"+e.row+":"+e.col+": "}addPutTrailingSemicolon(e,r=""){let n=new j.LexerToken;n.type=e,n.token=r,this.putTrailingSemicolon.push(n)}setTerminals(e){this.terminals.clear(),this.multicharDelimiters=[];for(let r of e)r.length!=0&&(r[0]>="A"&&r[0]<="Z"||r[0]>="a"&&r[0]<="z"||r[0]=="_"?this.terminals.add(r):this.multicharDelimiters.push(r));this.multicharDelimiters.sort(function(r,n){return n.length-r.length})}getTerminals(){return Array.from(this.terminals)}getMulticharDelimiters(){return this.multicharDelimiters}getToken(){return this.token}next(){this.lastToken=this.token;let e=this.fileStack.slice(-1)[0].sourceCode,r=this.fileStack.slice(-1)[0].id,n=this.state;if(n.stack.length>0){this.token=n.stack[0],n.stack.shift();return}this.token=new j.LexerToken,this.token.fileID=r,n.indent=-1;let i=!1;for(;;)if(n.i<n.n&&e[n.i]===`
`)n.indent=0,i=this.nextTokenLinefeed(n);else if(n.i<n.n&&e[n.i]===" ")n.i++,n.col++,n.indent>=0&&n.indent++;else if(n.i<n.n&&e[n.i]==="	")n.i++,n.col+=4,n.indent>=0&&(n.indent+=4);else if(this.allowBackslashLineBreaks&&n.i<n.n&&e[n.i]==="\\")for(n.i++;n.i<n.n;){if(e[n.i]==" ")n.col++;else if(e[n.i]=="	")n.col+=4;else if(e[n.i]==`
`)n.row++,n.col=1;else break;n.i++}else if(this.singleLineCommentStart.length>0&&this.isNext(this.singleLineCommentStart)){if(this.emitIndentation&&n.indent>=0)break;let l=this.singleLineCommentStart.length;for(n.i+=l,n.col+=l;n.i<n.n&&e[n.i]!=`
`;)n.i++,n.col++;n.i<n.n&&e[n.i]===`
`&&(i=this.nextTokenLinefeed(n)),n.indent=0}else if(this.multiLineCommentStart.length>0&&this.isNext(this.multiLineCommentStart)){if(this.emitIndentation&&n.indent>=0)break;let l=this.multiLineCommentStart.length;for(n.i+=l,n.col+=l;n.i<n.n&&!this.isNext(this.multilineCommentEnd);)e[n.i]===`
`?(n.row++,n.col=1,n.indent=0):n.col++,n.i++;l=this.multilineCommentEnd.length,n.i+=l,n.col+=l}else if(this.lexerFilePositionPrefix.length>0&&e.substring(n.i).startsWith(this.lexerFilePositionPrefix)){n.i+=this.lexerFilePositionPrefix.length;let l="";for(;n.i<n.n&&e[n.i]!==":";)l+=e[n.i],n.i++;n.i++,this.fileStack.slice(-1)[0].id=l,this.token.fileID=l;let m="";for(;n.i<n.n&&e[n.i]!==":";)m+=e[n.i],n.i++;n.i++,this.token.row=parseInt(m);let f="";for(;n.i<n.n&&e[n.i]!==":";)f+=e[n.i],n.i++;n.i++,this.token.col=parseInt(f)}else break;if(this.emitIndentation&&n.indent>=0){let l=n.indent-n.lastIndent;if(n.lastIndent=n.indent,l!=0)if(l%4==0){let m=l>0,f=Math.floor(Math.abs(l)/4);for(let u=0;u<f;u++)this.token=new j.LexerToken,this.token.fileID=r,this.token.row=n.row,m?this.token.col=n.col-l+4*u:this.token.col=n.col,this.token.type=j.LexerTokenType.DEL,this.token.token=m?"	+":"	-",n.stack.push(this.token);this.token=n.stack[0],n.stack.shift();return}else{this.token.row=n.row,this.token.col=n.col-l,this.token.type=j.LexerTokenType.TER,this.token.token="	err";return}}if(i)return;let o=n.copy();if(this.token.row=n.row,this.token.col=n.col,n.indent=0,n.i>=n.n){this.token.token="$end",this.token.type=j.LexerTokenType.END;return}if(this.token.type=j.LexerTokenType.ID,this.token.token="",n.i<n.n&&(e[n.i]>="A"&&e[n.i]<="Z"||e[n.i]>="a"&&e[n.i]<="z"||e[n.i]==="_"))for(this.token.token+=e[n.i],n.i++,n.col++;n.i<n.n&&(e[n.i]>="A"&&e[n.i]<="Z"||e[n.i]>="a"&&e[n.i]<="z"||e[n.i]>="0"&&e[n.i]<="9"||e[n.i]==="_");)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0){this.terminals.has(this.token.token)&&(this.token.type=j.LexerTokenType.TER),this.state=n;return}if(n=o.copy(),this.emitDoubleQuotes&&(this.token.type=j.LexerTokenType.STR,n.i<n.n&&e[n.i]==='"')){for(this.token.token="",n.i++,n.col++;n.i<n.n&&e[n.i]!='"'&&e[n.i]!=`
`;)this.token.token+=e[n.i],n.i++,n.col++;if(n.i<n.n&&e[n.i]==='"'){n.i++,n.col++,this.state=n;return}}if(n=o.copy(),this.emitHex&&(this.token.type=j.LexerTokenType.HEX,this.token.token="",n.i<n.n&&e[n.i]==="0"&&(n.i++,n.col++,n.i<n.n&&e[n.i]==="x"))){n.i++,n.col++;let l=0;for(;n.i<n.n&&(e[n.i]>="0"&&e[n.i]<="9"||e[n.i]>="A"&&e[n.i]<="F"||e[n.i]>="a"&&e[n.i]<="f");)this.token.token+=e[n.i],n.i++,n.col++,l++;if(l>0){this.token.token="0x"+this.token.token,this.token.value=parseInt(this.token.token,16),this.token.valueBigint=BigInt(this.token.token),this.state=n;return}}if(n=o.copy(),this.emitInt){if(this.token.type=j.LexerTokenType.INT,this.token.token="",n.i<n.n&&e[n.i]==="0")this.token.token="0",n.i++,n.col++;else if(n.i<n.n&&e[n.i]>="1"&&e[n.i]<="9")for(this.token.token=e[n.i],n.i++,n.col++;n.i<n.n&&e[n.i]>="0"&&e[n.i]<="9";)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0&&this.emitBigint&&n.i<n.n&&e[n.i]==="n")n.i++,n.col++,this.token.type=j.LexerTokenType.BIGINT;else if(this.token.token.length>0&&this.emitReal&&n.i<n.n&&e[n.i]===".")for(this.token.type=j.LexerTokenType.REAL,this.token.token+=".",n.i++,n.col++;n.i<n.n&&e[n.i]>="0"&&e[n.i]<="9";)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0){this.token.type===j.LexerTokenType.INT?this.token.value=parseInt(this.token.token):this.token.type===j.LexerTokenType.BIGINT?this.token.valueBigint=BigInt(this.token.token):this.token.value=parseFloat(this.token.token),this.state=n;return}}this.token.type=j.LexerTokenType.DEL,this.token.token="";for(let l=0;l<this.multicharDelimiters.length;l++){let m=this.multicharDelimiters[l],f=!0;n=o.copy();for(let u=0;u<m.length;u++){let a=m[u];if(n.i<n.n&&e[n.i]===a)n.i++,n.col++;else{f=!1;break}}if(f){this.state=n,this.token.token=m;return}}n=o.copy(),this.token.type=j.LexerTokenType.DEL,this.token.token="",n.i<n.n&&(this.token.token=e[n.i],n.i++,n.col++,this.state=n)}nextTokenLinefeed(e){let r=!1;if(this.emitNewline)this.token.row=e.row,this.token.col=e.col,this.token.token=`
`,this.token.type=j.LexerTokenType.DEL;else if(this.putTrailingSemicolon.length>0){let n=!1;for(let i of this.putTrailingSemicolon)if(i.type===this.lastToken.type&&(i.type===j.LexerTokenType.DEL?n=i.token===this.lastToken.token:n=!0,n))break;n&&(r=!0,this.token.row=e.row,this.token.col=e.col,this.token.token=";",this.token.type=j.LexerTokenType.DEL)}return e.row++,e.col=1,e.indent=0,e.i++,this.emitNewline||r}isNext(e){let r=this.fileStack.slice(-1)[0].sourceCode,n=this.state,i=e.length;if(n.i+i>=n.n)return!1;for(let o=0;o<i;o++){let l=e[o];if(r[n.i+o]!=l)return!1}return!0}pushSource(e,r){this.fileStack.length>0&&(this.fileStack.slice(-1)[0].stateBackup=this.state.copy(),this.fileStack.slice(-1)[0].tokenBackup=this.token.copy());let n=new zt;n.id=e,n.sourceCode=r,this.fileStack.push(n),this.state=new _s.LexerState,this.state.n=r.length,this.next()}popSource(){this.fileStack.pop(),this.fileStack.length>0&&(this.state=this.fileStack.slice(-1)[0].stateBackup,this.token=this.fileStack.slice(-1)[0].tokenBackup)}backupState(){return{state:this.state.copy(),token:this.token.copy()}}replayState(e){this.state=e.state,this.token=e.token}};Tr.Lexer=Sn});var Nn=_r(Vr=>{"use strict";var Ts=Vr&&Vr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ms=Vr&&Vr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ts(e,t,r)};Object.defineProperty(Vr,"__esModule",{value:!0});Ms(ha(),Vr)});var Ya=_r((Ln,zn)=>{(function(t,e){typeof Ln=="object"&&typeof zn<"u"?zn.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.typed=e())})(Ln,function(){"use strict";function t(a,s){var c=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=e(a))||s&&a&&typeof a.length=="number"){c&&(a=c);var h=0,v=function(){};return{s:v,n:function(){return h>=a.length?{done:!0}:{done:!1,value:a[h++]}},e:function(g){throw g},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,D=!1,x;return{s:function(){c=c.call(a)},n:function(){var g=c.next();return p=g.done,g},e:function(g){D=!0,x=g},f:function(){try{!p&&c.return!=null&&c.return()}finally{if(D)throw x}}}}function e(a,s){if(!!a){if(typeof a=="string")return r(a,s);var c=Object.prototype.toString.call(a).slice(8,-1);if(c==="Object"&&a.constructor&&(c=a.constructor.name),c==="Map"||c==="Set")return Array.from(a);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return r(a,s)}}function r(a,s){(s==null||s>a.length)&&(s=a.length);for(var c=0,h=new Array(s);c<s;c++)h[c]=a[c];return h}function n(a){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},n(a)}function i(){return!0}function o(){return!1}function l(){}var m="Argument is not a typed-function.";function f(){function a(_){return n(_)==="object"&&_!==null&&_.constructor===Object}var s=[{name:"number",test:function(M){return typeof M=="number"}},{name:"string",test:function(M){return typeof M=="string"}},{name:"boolean",test:function(M){return typeof M=="boolean"}},{name:"Function",test:function(M){return typeof M=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(M){return M instanceof Date}},{name:"RegExp",test:function(M){return M instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(M){return M===null}},{name:"undefined",test:function(M){return M===void 0}}],c={name:"any",test:i,isAny:!0},h,v,p=0,D={createCount:0};function x(_){var M=h.get(_);if(M)return M;var B='Unknown type "'+_+'"',z=_.toLowerCase(),V,Z=t(v),G;try{for(Z.s();!(G=Z.n()).done;)if(V=G.value,V.toLowerCase()===z){B+='. Did you mean "'+V+'" ?';break}}catch(k){Z.e(k)}finally{Z.f()}throw new TypeError(B)}function y(_){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",B=M?x(M).index:v.length,z=[],V=0;V<_.length;++V){if(!_[V]||typeof _[V].name!="string"||typeof _[V].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var Z=_[V].name;if(h.has(Z))throw new TypeError('Duplicate type name "'+Z+'"');z.push(Z),h.set(Z,{name:Z,test:_[V].test,isAny:_[V].isAny,index:B+V,conversionsTo:[]})}var G=v.slice(B);v=v.slice(0,B).concat(z).concat(G);for(var k=B+z.length;k<v.length;++k)h.get(v[k]).index=k}function g(){h=new Map,v=[],p=0,y([c],!1)}g(),y(s);function A(){var _,M=t(v),B;try{for(M.s();!(B=M.n()).done;)_=B.value,h.get(_).conversionsTo=[]}catch(z){M.e(z)}finally{M.f()}p=0}function w(_){var M=v.filter(function(B){var z=h.get(B);return!z.isAny&&z.test(_)});return M.length?M:["any"]}function d(_){return _&&typeof _=="function"&&"_typedFunctionData"in _}function E(_,M,B){if(!d(_))throw new TypeError(m);var z=B&&B.exact,V=Array.isArray(M)?M.join(","):M,Z=L(V),G=T(Z);if(!z||G in _.signatures){var k=_._typedFunctionData.signatureMap.get(G);if(k)return k}var H=Z.length,re;if(z){re=[];var fe;for(fe in _.signatures)re.push(_._typedFunctionData.signatureMap.get(fe))}else re=_._typedFunctionData.signatures;for(var $=0;$<H;++$){var $e=Z[$],ke=[],He=void 0,Be=t(re),je;try{for(Be.s();!(je=Be.n()).done;){He=je.value;var Oe=U(He.params,$);if(!(!Oe||$e.restParam&&!Oe.restParam)){if(!Oe.hasAny){var fr=function(){var er=q(Oe);if($e.types.some(function(kr){return!er.has(kr.name)}))return"continue"}();if(fr==="continue")continue}ke.push(He)}}}catch(er){Be.e(er)}finally{Be.f()}if(re=ke,re.length===0)break}var Qe,Je=t(re),Pr;try{for(Je.s();!(Pr=Je.n()).done;)if(Qe=Pr.value,Qe.params.length<=H)return Qe}catch(er){Je.e(er)}finally{Je.f()}throw new TypeError("Signature not found (signature: "+(_.name||"unnamed")+"("+T(Z,", ")+"))")}function C(_,M,B){return E(_,M,B).implementation}function b(_,M){var B=x(M);if(B.test(_))return _;var z=B.conversionsTo;if(z.length===0)throw new Error("There are no conversions to "+M+" defined.");for(var V=0;V<z.length;V++){var Z=x(z[V].from);if(Z.test(_))return z[V].convert(_)}throw new Error("Cannot convert "+_+" to "+M)}function T(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return _.map(function(B){return B.name}).join(M)}function S(_){var M=_.indexOf("...")===0,B=M?_.length>3?_.slice(3):"any":_,z=B.split("|").map(function(k){return x(k.trim())}),V=!1,Z=M?"...":"",G=z.map(function(k){return V=k.isAny||V,Z+=k.name+"|",{name:k.name,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:null,conversionIndex:-1}});return{types:G,name:Z.slice(0,-1),hasAny:V,hasConversion:!1,restParam:M}}function R(_){var M=_.types.map(function(G){return G.name}),B=ae(M),z=_.hasAny,V=_.name,Z=B.map(function(G){var k=x(G.from);return z=k.isAny||z,V+="|"+G.from,{name:G.from,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:G,conversionIndex:G.index}});return{types:_.types.concat(Z),name:V,hasAny:z,hasConversion:Z.length>0,restParam:_.restParam}}function q(_){return _.typeSet||(_.typeSet=new Set,_.types.forEach(function(M){return _.typeSet.add(M.name)})),_.typeSet}function L(_){var M=[];if(typeof _!="string")throw new TypeError("Signatures must be strings");var B=_.trim();if(B==="")return M;for(var z=B.split(","),V=0;V<z.length;++V){var Z=S(z[V].trim());if(Z.restParam&&V!==z.length-1)throw new SyntaxError('Unexpected rest parameter "'+z[V]+'": only allowed for the last parameter');if(Z.types.length===0)return null;M.push(Z)}return M}function I(_){var M=Ne(_);return M?M.restParam:!1}function F(_){if(!_||_.types.length===0)return i;if(_.types.length===1)return x(_.types[0].name).test;if(_.types.length===2){var M=x(_.types[0].name).test,B=x(_.types[1].name).test;return function(Z){return M(Z)||B(Z)}}else{var z=_.types.map(function(V){return x(V.name).test});return function(Z){for(var G=0;G<z.length;G++)if(z[G](Z))return!0;return!1}}}function Y(_){var M,B,z;if(I(_)){M=De(_).map(F);var V=M.length,Z=F(Ne(_)),G=function(H){for(var re=V;re<H.length;re++)if(!Z(H[re]))return!1;return!0};return function(H){for(var re=0;re<M.length;re++)if(!M[re](H[re]))return!1;return G(H)&&H.length>=V+1}}else return _.length===0?function(H){return H.length===0}:_.length===1?(B=F(_[0]),function(H){return B(H[0])&&H.length===1}):_.length===2?(B=F(_[0]),z=F(_[1]),function(H){return B(H[0])&&z(H[1])&&H.length===2}):(M=_.map(F),function(H){for(var re=0;re<M.length;re++)if(!M[re](H[re]))return!1;return H.length===M.length})}function U(_,M){return M<_.length?_[M]:I(_)?Ne(_):null}function N(_,M){var B=U(_,M);return B?q(B):new Set}function X(_){return _.conversion===null||_.conversion===void 0}function Q(_,M){var B=new Set;return _.forEach(function(z){var V=N(z.params,M),Z,G=t(V),k;try{for(G.s();!(k=G.n()).done;)Z=k.value,B.add(Z)}catch(H){G.e(H)}finally{G.f()}}),B.has("any")?["any"]:Array.from(B)}function oe(_,M,B){var z,V,Z=_||"unnamed",G=B,k,H=function(){var Be=[];if(G.forEach(function(Oe){var fr=U(Oe.params,k),Qe=F(fr);(k<Oe.params.length||I(Oe.params))&&Qe(M[k])&&Be.push(Oe)}),Be.length===0){if(V=Q(G,k),V.length>0){var je=w(M[k]);return z=new TypeError("Unexpected type of argument in function "+Z+" (expected: "+V.join(" or ")+", actual: "+je.join(" | ")+", index: "+k+")"),z.data={category:"wrongType",fn:Z,index:k,actual:je,expected:V},{v:z}}}else G=Be};for(k=0;k<M.length;k++){var re=H();if(n(re)==="object")return re.v}var fe=G.map(function(He){return I(He.params)?1/0:He.params.length});if(M.length<Math.min.apply(null,fe))return V=Q(G,k),z=new TypeError("Too few arguments in function "+Z+" (expected: "+V.join(" or ")+", index: "+M.length+")"),z.data={category:"tooFewArgs",fn:Z,index:M.length,expected:V},z;var $=Math.max.apply(null,fe);if(M.length>$)return z=new TypeError("Too many arguments in function "+Z+" (expected: "+$+", actual: "+M.length+")"),z.data={category:"tooManyArgs",fn:Z,index:M.length,expectedLength:$},z;for(var $e=[],ke=0;ke<M.length;++ke)$e.push(w(M[ke]).join("|"));return z=new TypeError('Arguments of type "'+$e.join(", ")+'" do not match any of the defined signatures of function '+Z+"."),z.data={category:"mismatch",actual:$e},z}function ee(_){for(var M=v.length+1,B=0;B<_.types.length;B++)X(_.types[B])&&(M=Math.min(M,_.types[B].typeIndex));return M}function K(_){for(var M=p+1,B=0;B<_.types.length;B++)X(_.types[B])||(M=Math.min(M,_.types[B].conversionIndex));return M}function we(_,M){if(_.hasAny){if(!M.hasAny)return 1}else if(M.hasAny)return-1;if(_.restParam){if(!M.restParam)return 1}else if(M.restParam)return-1;if(_.hasConversion){if(!M.hasConversion)return 1}else if(M.hasConversion)return-1;var B=ee(_)-ee(M);if(B<0)return-1;if(B>0)return 1;var z=K(_)-K(M);return z<0?-1:z>0?1:0}function pe(_,M){var B=_.params,z=M.params,V=Ne(B),Z=Ne(z),G=I(B),k=I(z);if(G&&V.hasAny){if(!k||!Z.hasAny)return 1}else if(k&&Z.hasAny)return-1;var H=0,re=0,fe,$=t(B),$e;try{for($.s();!($e=$.n()).done;)fe=$e.value,fe.hasAny&&++H,fe.hasConversion&&++re}catch(ct){$.e(ct)}finally{$.f()}var ke=0,He=0,Be=t(z),je;try{for(Be.s();!(je=Be.n()).done;)fe=je.value,fe.hasAny&&++ke,fe.hasConversion&&++He}catch(ct){Be.e(ct)}finally{Be.f()}if(H!==ke)return H-ke;if(G&&V.hasConversion){if(!k||!Z.hasConversion)return 1}else if(k&&Z.hasConversion)return-1;if(re!==He)return re-He;if(G){if(!k)return 1}else if(k)return-1;var Oe=(B.length-z.length)*(G?-1:1);if(Oe!==0)return Oe;for(var fr=[],Qe=0,Je=0;Je<B.length;++Je){var Pr=we(B[Je],z[Je]);fr.push(Pr),Qe+=Pr}if(Qe!==0)return Qe;for(var er,kr=0,Nt=fr;kr<Nt.length;kr++)if(er=Nt[kr],er!==0)return er;return 0}function ae(_){if(_.length===0)return[];var M=_.map(x);_.length>1&&M.sort(function(H,re){return H.index-re.index});var B=M[0].conversionsTo;if(_.length===1)return B;B=B.concat([]);for(var z=new Set(_),V=1;V<M.length;++V){var Z=void 0,G=t(M[V].conversionsTo),k;try{for(G.s();!(k=G.n()).done;)Z=k.value,z.has(Z.from)||(B.push(Z),z.add(Z.from))}catch(H){G.e(H)}finally{G.f()}}return B}function de(_,M){var B=M;if(_.some(function(k){return k.hasConversion})){var z=I(_),V=_.map(me);B=function(){for(var H=[],re=z?arguments.length-1:arguments.length,fe=0;fe<re;fe++)H[fe]=V[fe](arguments[fe]);return z&&(H[re]=arguments[re].map(V[re])),M.apply(this,H)}}var Z=B;if(I(_)){var G=_.length-1;Z=function(){return B.apply(this,ar(arguments,0,G).concat([ar(arguments,G)]))}}return Z}function me(_){var M,B,z,V,Z=[],G=[];switch(_.types.forEach(function(k){k.conversion&&(Z.push(x(k.conversion.from).test),G.push(k.conversion.convert))}),G.length){case 0:return function(H){return H};case 1:return M=Z[0],z=G[0],function(H){return M(H)?z(H):H};case 2:return M=Z[0],B=Z[1],z=G[0],V=G[1],function(H){return M(H)?z(H):B(H)?V(H):H};default:return function(H){for(var re=0;re<G.length;re++)if(Z[re](H))return G[re](H);return H}}}function ne(_){function M(B,z,V){if(z<B.length){var Z=B[z],G=[];if(Z.restParam){var k=Z.types.filter(X);k.length<Z.types.length&&G.push({types:k,name:"..."+k.map(function(H){return H.name}).join("|"),hasAny:k.some(function(H){return H.isAny}),hasConversion:!1,restParam:!0}),G.push(Z)}else G=Z.types.map(function(H){return{types:[H],name:H.name,hasAny:H.isAny,hasConversion:H.conversion,restParam:!1}});return Mt(G,function(H){return M(B,z+1,V.concat([H]))})}else return[V]}return M(_,0,[])}function Se(_,M){for(var B=Math.max(_.length,M.length),z=0;z<B;z++){var V=N(_,z),Z=N(M,z),G=!1,k=void 0,H=t(Z),re;try{for(H.s();!(re=H.n()).done;)if(k=re.value,V.has(k)){G=!0;break}}catch(He){H.e(He)}finally{H.f()}if(!G)return!1}var fe=_.length,$=M.length,$e=I(_),ke=I(M);return $e?ke?fe===$:$>=fe:ke?fe>=$:fe===$}function Ce(_){return _.map(function(M){return Hr(M)?st(M.referToSelf.callback):ft(M)?St(M.referTo.references,M.referTo.callback):M})}function ue(_,M,B){var z=[],V,Z=t(_),G;try{for(Z.s();!(G=Z.n()).done;){V=G.value;var k=B[V];if(typeof k!="number")throw new TypeError('No definition for referenced signature "'+V+'"');if(k=M[k],typeof k!="function")return!1;z.push(k)}}catch(H){Z.e(H)}finally{Z.f()}return z}function xe(_,M,B){for(var z=Ce(_),V=new Array(z.length).fill(!1),Z=!0;Z;){Z=!1;for(var G=!0,k=0;k<z.length;++k)if(!V[k]){var H=z[k];if(Hr(H))z[k]=H.referToSelf.callback(B),z[k].referToSelf=H.referToSelf,V[k]=!0,G=!1;else if(ft(H)){var re=ue(H.referTo.references,z,M);re?(z[k]=H.referTo.callback.apply(this,re),z[k].referTo=H.referTo,V[k]=!0,G=!1):Z=!0}}if(G&&Z)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return z}function Re(_){var M=/\bthis(\(|\.signatures\b)/;Object.keys(_).forEach(function(B){var z=_[B];if(M.test(z.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ir(_,M){if(D.createCount++,Object.keys(M).length===0)throw new SyntaxError("No signatures provided");D.warnAgainstDeprecatedThis&&Re(M);var B=[],z=[],V={},Z=[],G,k=function(){if(!Object.prototype.hasOwnProperty.call(M,G))return"continue";var qe=L(G);if(!qe)return"continue";B.forEach(function(Gr){if(Se(Gr,qe))throw new TypeError('Conflicting signatures "'+T(Gr)+'" and "'+T(qe)+'".')}),B.push(qe);var aa=z.length;z.push(M[G]);var ds=qe.map(R),Bt=void 0,It=t(ne(ds)),oa;try{for(It.s();!(oa=It.n()).done;){Bt=oa.value;var ua=T(Bt);Z.push({params:Bt,name:ua,fn:aa}),Bt.every(function(Gr){return!Gr.hasConversion})&&(V[ua]=aa)}}catch(Gr){It.e(Gr)}finally{It.f()}};for(G in M)var H=k();Z.sort(pe);var re=xe(z,V,pt),fe;for(fe in V)Object.prototype.hasOwnProperty.call(V,fe)&&(V[fe]=re[V[fe]]);for(var $=[],$e=new Map,ke=0,He=Z;ke<He.length;ke++)fe=He[ke],$e.has(fe.name)||(fe.fn=re[fe.fn],$.push(fe),$e.set(fe.name,fe));for(var Be=$[0]&&$[0].params.length<=2&&!I($[0].params),je=$[1]&&$[1].params.length<=2&&!I($[1].params),Oe=$[2]&&$[2].params.length<=2&&!I($[2].params),fr=$[3]&&$[3].params.length<=2&&!I($[3].params),Qe=$[4]&&$[4].params.length<=2&&!I($[4].params),Je=$[5]&&$[5].params.length<=2&&!I($[5].params),Pr=Be&&je&&Oe&&fr&&Qe&&Je,er=0;er<$.length;++er)$[er].test=Y($[er].params);for(var kr=Be?F($[0].params[0]):o,Nt=je?F($[1].params[0]):o,ct=Oe?F($[2].params[0]):o,Zu=fr?F($[3].params[0]):o,Hu=Qe?F($[4].params[0]):o,Gu=Je?F($[5].params[0]):o,Yu=Be?F($[0].params[1]):o,$u=je?F($[1].params[1]):o,Qu=Oe?F($[2].params[1]):o,Ju=fr?F($[3].params[1]):o,Ku=Qe?F($[4].params[1]):o,Wu=Je?F($[5].params[1]):o,lt=0;lt<$.length;++lt)$[lt].implementation=de($[lt].params,$[lt].fn);var ju=Be?$[0].implementation:l,es=je?$[1].implementation:l,rs=Oe?$[2].implementation:l,ts=fr?$[3].implementation:l,ns=Qe?$[4].implementation:l,is=Je?$[5].implementation:l,as=Be?$[0].params.length:-1,os=je?$[1].params.length:-1,us=Oe?$[2].params.length:-1,ss=fr?$[3].params.length:-1,fs=Qe?$[4].params.length:-1,cs=Je?$[5].params.length:-1,ls=Pr?6:0,ps=$.length,ms=$.map(function(or){return or.test}),hs=$.map(function(or){return or.implementation}),vs=function(){for(var qe=ls;qe<ps;qe++)if(ms[qe](arguments))return hs[qe].apply(this,arguments);return D.onMismatch(_,arguments,$)};function pt(or,qe){return arguments.length===as&&kr(or)&&Yu(qe)?ju.apply(this,arguments):arguments.length===os&&Nt(or)&&$u(qe)?es.apply(this,arguments):arguments.length===us&&ct(or)&&Qu(qe)?rs.apply(this,arguments):arguments.length===ss&&Zu(or)&&Ju(qe)?ts.apply(this,arguments):arguments.length===fs&&Hu(or)&&Ku(qe)?ns.apply(this,arguments):arguments.length===cs&&Gu(or)&&Wu(qe)?is.apply(this,arguments):vs.apply(this,arguments)}try{Object.defineProperty(pt,"name",{value:_})}catch{}return pt.signatures=V,pt._typedFunctionData={signatures:$,signatureMap:$e},pt}function Ze(_,M,B){throw oe(_,M,B)}function De(_){return ar(_,0,_.length-1)}function Ne(_){return _[_.length-1]}function ar(_,M,B){return Array.prototype.slice.call(_,M,B)}function Mn(_,M){for(var B=0;B<_.length;B++)if(M(_[B]))return _[B]}function Mt(_,M){return Array.prototype.concat.apply([],_.map(M))}function Ft(){var _=De(arguments).map(function(B){return T(L(B))}),M=Ne(arguments);if(typeof M!="function")throw new TypeError("Callback function expected as last argument");return St(_,M)}function St(_,M){return{referTo:{references:_,callback:M}}}function st(_){if(typeof _!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:_}}}function ft(_){return _&&n(_.referTo)==="object"&&Array.isArray(_.referTo.references)&&typeof _.referTo.callback=="function"}function Hr(_){return _&&n(_.referToSelf)==="object"&&typeof _.referToSelf.callback=="function"}function na(_,M){if(!_)return M;if(M&&M!==_){var B=new Error("Function names do not match (expected: "+_+", actual: "+M+")");throw B.data={actual:M,expected:_},B}return _}function Vu(_){var M;for(var B in _)Object.prototype.hasOwnProperty.call(_,B)&&(d(_[B])||typeof _[B].signature=="string")&&(M=na(M,_[B].name));return M}function Uu(_,M){var B;for(B in M)if(Object.prototype.hasOwnProperty.call(M,B)){if(B in _&&M[B]!==_[B]){var z=new Error('Signature "'+B+'" is defined twice');throw z.data={signature:B,sourceFunction:M[B],destFunction:_[B]},z}_[B]=M[B]}}var Xu=D;D=function(M){for(var B=typeof M=="string",z=B?1:0,V=B?M:"",Z={},G=z;G<arguments.length;++G){var k=arguments[G],H={},re=void 0;if(typeof k=="function"?(re=k.name,typeof k.signature=="string"?H[k.signature]=k:d(k)&&(H=k.signatures)):a(k)&&(H=k,B||(re=Vu(k))),Object.keys(H).length===0){var fe=new TypeError("Argument to 'typed' at index "+G+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw fe.data={index:G,argument:k},fe}B||(V=na(V,re)),Uu(Z,H)}return ir(V||"",Z)},D.create=f,D.createCount=Xu.createCount,D.onMismatch=Ze,D.throwMismatchError=Ze,D.createError=oe,D.clear=g,D.clearConversions=A,D.addTypes=y,D._findType=x,D.referTo=Ft,D.referToSelf=st,D.convert=b,D.findSignature=E,D.find=C,D.isTypedFunction=d,D.warnAgainstDeprecatedThis=!0,D.addType=function(_,M){var B="any";M!==!1&&h.has("Object")&&(B="Object"),D.addTypes([_],B)};function ia(_){if(!_||typeof _.from!="string"||typeof _.to!="string"||typeof _.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(_.to===_.from)throw new SyntaxError('Illegal to define conversion from "'+_.from+'" to itself.')}return D.addConversion=function(_){ia(_);var M=x(_.to);if(M.conversionsTo.every(function(B){return B.from!==_.from}))M.conversionsTo.push({from:_.from,convert:_.convert,index:p++});else throw new Error('There is already a conversion from "'+_.from+'" to "'+M.name+'"')},D.addConversions=function(_){_.forEach(D.addConversion)},D.removeConversion=function(_){ia(_);var M=x(_.to),B=Mn(M.conversionsTo,function(V){return V.from===_.from});if(!B)throw new Error("Attempt to remove nonexistent conversion from "+_.from+" to "+_.to);if(B.convert!==_.convert)throw new Error("Conversion to remove does not match existing conversion");var z=M.conversionsTo.indexOf(B);M.conversionsTo.splice(z,1)},D.resolve=function(_,M){if(!d(_))throw new TypeError(m);for(var B=_._typedFunctionData.signatures,z=0;z<B.length;++z)if(B[z].test(M))return B[z];return null},D}var u=f();return u})});var Io=_r((ri,Bo)=>{(function(t){"use strict";var e=Math.cosh||function(u){return Math.abs(u)<1e-9?1-u:(Math.exp(u)+Math.exp(-u))*.5},r=Math.sinh||function(u){return Math.abs(u)<1e-9?u:(Math.exp(u)-Math.exp(-u))*.5},n=function(u){var a=Math.PI/4;if(-a>u||u>a)return Math.cos(u)-1;var s=u*u;return s*(s*(s*(s*(s*(s*(s*(s/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},i=function(u,a){var s=Math.abs(u),c=Math.abs(a);return s<3e3&&c<3e3?Math.sqrt(s*s+c*c):(s<c?(s=c,c=u/a):c=a/u,s*Math.sqrt(1+c*c))},o=function(){throw SyntaxError("Invalid Param")};function l(u,a){var s=Math.abs(u),c=Math.abs(a);return u===0?Math.log(c):a===0?Math.log(s):s<3e3&&c<3e3?Math.log(u*u+a*a)*.5:(u=u/2,a=a/2,.5*Math.log(u*u+a*a)+Math.LN2)}var m=function(u,a){var s={re:0,im:0};if(u==null)s.re=s.im=0;else if(a!==void 0)s.re=u,s.im=a;else switch(typeof u){case"object":if("im"in u&&"re"in u)s.re=u.re,s.im=u.im;else if("abs"in u&&"arg"in u){if(!Number.isFinite(u.abs)&&Number.isFinite(u.arg))return f.INFINITY;s.re=u.abs*Math.cos(u.arg),s.im=u.abs*Math.sin(u.arg)}else if("r"in u&&"phi"in u){if(!Number.isFinite(u.r)&&Number.isFinite(u.phi))return f.INFINITY;s.re=u.r*Math.cos(u.phi),s.im=u.r*Math.sin(u.phi)}else u.length===2?(s.re=u[0],s.im=u[1]):o();break;case"string":s.im=s.re=0;var c=u.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),h=1,v=0;c===null&&o();for(var p=0;p<c.length;p++){var D=c[p];D===" "||D==="	"||D===`
`||(D==="+"?h++:D==="-"?v++:D==="i"||D==="I"?(h+v===0&&o(),c[p+1]!==" "&&!isNaN(c[p+1])?(s.im+=parseFloat((v%2?"-":"")+c[p+1]),p++):s.im+=parseFloat((v%2?"-":"")+"1"),h=v=0):((h+v===0||isNaN(D))&&o(),c[p+1]==="i"||c[p+1]==="I"?(s.im+=parseFloat((v%2?"-":"")+D),p++):s.re+=parseFloat((v%2?"-":"")+D),h=v=0))}h+v>0&&o();break;case"number":s.im=0,s.re=u;break;default:o()}return isNaN(s.re)||isNaN(s.im),s};function f(u,a){if(!(this instanceof f))return new f(u,a);var s=m(u,a);this.re=s.re,this.im=s.im}f.prototype={re:0,im:0,sign:function(){var u=this.abs();return new f(this.re/u,this.im/u)},add:function(u,a){var s=new f(u,a);return this.isInfinite()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:new f(this.re+s.re,this.im+s.im)},sub:function(u,a){var s=new f(u,a);return this.isInfinite()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:new f(this.re-s.re,this.im-s.im)},mul:function(u,a){var s=new f(u,a);return this.isInfinite()&&s.isZero()||this.isZero()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:s.im===0&&this.im===0?new f(this.re*s.re,0):new f(this.re*s.re-this.im*s.im,this.re*s.im+this.im*s.re)},div:function(u,a){var s=new f(u,a);if(this.isZero()&&s.isZero()||this.isInfinite()&&s.isInfinite())return f.NAN;if(this.isInfinite()||s.isZero())return f.INFINITY;if(this.isZero()||s.isInfinite())return f.ZERO;u=this.re,a=this.im;var c=s.re,h=s.im,v,p;return h===0?new f(u/c,a/c):Math.abs(c)<Math.abs(h)?(p=c/h,v=c*p+h,new f((u*p+a)/v,(a*p-u)/v)):(p=h/c,v=h*p+c,new f((u+a*p)/v,(a-u*p)/v))},pow:function(u,a){var s=new f(u,a);if(u=this.re,a=this.im,s.isZero())return f.ONE;if(s.im===0){if(a===0&&u>0)return new f(Math.pow(u,s.re),0);if(u===0)switch((s.re%4+4)%4){case 0:return new f(Math.pow(a,s.re),0);case 1:return new f(0,Math.pow(a,s.re));case 2:return new f(-Math.pow(a,s.re),0);case 3:return new f(0,-Math.pow(a,s.re))}}if(u===0&&a===0&&s.re>0&&s.im>=0)return f.ZERO;var c=Math.atan2(a,u),h=l(u,a);return u=Math.exp(s.re*h-s.im*c),a=s.im*h+s.re*c,new f(u*Math.cos(a),u*Math.sin(a))},sqrt:function(){var u=this.re,a=this.im,s=this.abs(),c,h;if(u>=0){if(a===0)return new f(Math.sqrt(u),0);c=.5*Math.sqrt(2*(s+u))}else c=Math.abs(a)/Math.sqrt(2*(s-u));return u<=0?h=.5*Math.sqrt(2*(s-u)):h=Math.abs(a)/Math.sqrt(2*(s+u)),new f(c,a<0?-h:h)},exp:function(){var u=Math.exp(this.re);return this.im,new f(u*Math.cos(this.im),u*Math.sin(this.im))},expm1:function(){var u=this.re,a=this.im;return new f(Math.expm1(u)*Math.cos(a)+n(a),Math.exp(u)*Math.sin(a))},log:function(){var u=this.re,a=this.im;return a===0&&u>0,new f(l(u,a),Math.atan2(a,u))},abs:function(){return i(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var u=this.re,a=this.im;return new f(Math.sin(u)*e(a),Math.cos(u)*r(a))},cos:function(){var u=this.re,a=this.im;return new f(Math.cos(u)*e(a),-Math.sin(u)*r(a))},tan:function(){var u=2*this.re,a=2*this.im,s=Math.cos(u)+e(a);return new f(Math.sin(u)/s,r(a)/s)},cot:function(){var u=2*this.re,a=2*this.im,s=Math.cos(u)-e(a);return new f(-Math.sin(u)/s,r(a)/s)},sec:function(){var u=this.re,a=this.im,s=.5*e(2*a)+.5*Math.cos(2*u);return new f(Math.cos(u)*e(a)/s,Math.sin(u)*r(a)/s)},csc:function(){var u=this.re,a=this.im,s=.5*e(2*a)-.5*Math.cos(2*u);return new f(Math.sin(u)*e(a)/s,-Math.cos(u)*r(a)/s)},asin:function(){var u=this.re,a=this.im,s=new f(a*a-u*u+1,-2*u*a).sqrt(),c=new f(s.re-a,s.im+u).log();return new f(c.im,-c.re)},acos:function(){var u=this.re,a=this.im,s=new f(a*a-u*u+1,-2*u*a).sqrt(),c=new f(s.re-a,s.im+u).log();return new f(Math.PI/2-c.im,c.re)},atan:function(){var u=this.re,a=this.im;if(u===0){if(a===1)return new f(0,1/0);if(a===-1)return new f(0,-1/0)}var s=u*u+(1-a)*(1-a),c=new f((1-a*a-u*u)/s,-2*u/s).log();return new f(-.5*c.im,.5*c.re)},acot:function(){var u=this.re,a=this.im;if(a===0)return new f(Math.atan2(1,u),0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).atan():new f(u!==0?u/0:0,a!==0?-a/0:0).atan()},asec:function(){var u=this.re,a=this.im;if(u===0&&a===0)return new f(0,1/0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).acos():new f(u!==0?u/0:0,a!==0?-a/0:0).acos()},acsc:function(){var u=this.re,a=this.im;if(u===0&&a===0)return new f(Math.PI/2,1/0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).asin():new f(u!==0?u/0:0,a!==0?-a/0:0).asin()},sinh:function(){var u=this.re,a=this.im;return new f(r(u)*Math.cos(a),e(u)*Math.sin(a))},cosh:function(){var u=this.re,a=this.im;return new f(e(u)*Math.cos(a),r(u)*Math.sin(a))},tanh:function(){var u=2*this.re,a=2*this.im,s=e(u)+Math.cos(a);return new f(r(u)/s,Math.sin(a)/s)},coth:function(){var u=2*this.re,a=2*this.im,s=e(u)-Math.cos(a);return new f(r(u)/s,-Math.sin(a)/s)},csch:function(){var u=this.re,a=this.im,s=Math.cos(2*a)-e(2*u);return new f(-2*r(u)*Math.cos(a)/s,2*e(u)*Math.sin(a)/s)},sech:function(){var u=this.re,a=this.im,s=Math.cos(2*a)+e(2*u);return new f(2*e(u)*Math.cos(a)/s,-2*r(u)*Math.sin(a)/s)},asinh:function(){var u=this.im;this.im=-this.re,this.re=u;var a=this.asin();return this.re=-this.im,this.im=u,u=a.re,a.re=-a.im,a.im=u,a},acosh:function(){var u=this.acos();if(u.im<=0){var a=u.re;u.re=-u.im,u.im=a}else{var a=u.im;u.im=-u.re,u.re=a}return u},atanh:function(){var u=this.re,a=this.im,s=u>1&&a===0,c=1-u,h=1+u,v=c*c+a*a,p=v!==0?new f((h*c-a*a)/v,(a*c+h*a)/v):new f(u!==-1?u/0:0,a!==0?a/0:0),D=p.re;return p.re=l(p.re,p.im)/2,p.im=Math.atan2(p.im,D)/2,s&&(p.im=-p.im),p},acoth:function(){var u=this.re,a=this.im;if(u===0&&a===0)return new f(0,Math.PI/2);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).atanh():new f(u!==0?u/0:0,a!==0?-a/0:0).atanh()},acsch:function(){var u=this.re,a=this.im;if(a===0)return new f(u!==0?Math.log(u+Math.sqrt(u*u+1)):1/0,0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).asinh():new f(u!==0?u/0:0,a!==0?-a/0:0).asinh()},asech:function(){var u=this.re,a=this.im;if(this.isZero())return f.INFINITY;var s=u*u+a*a;return s!==0?new f(u/s,-a/s).acosh():new f(u!==0?u/0:0,a!==0?-a/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var u=this.re,a=this.im,s=u*u+a*a;return new f(u/s,-a/s)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(u){return u=Math.pow(10,u||0),new f(Math.ceil(this.re*u)/u,Math.ceil(this.im*u)/u)},floor:function(u){return u=Math.pow(10,u||0),new f(Math.floor(this.re*u)/u,Math.floor(this.im*u)/u)},round:function(u){return u=Math.pow(10,u||0),new f(Math.round(this.re*u)/u,Math.round(this.im*u)/u)},equals:function(u,a){var s=new f(u,a);return Math.abs(s.re-this.re)<=f.EPSILON&&Math.abs(s.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var u=this.re,a=this.im,s="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(u)<f.EPSILON&&(u=0),Math.abs(a)<f.EPSILON&&(a=0),a===0?s+u:(u!==0?(s+=u,s+=" ",a<0?(a=-a,s+="-"):s+="+",s+=" "):a<0&&(a=-a,s+="-"),a!==1&&(s+=a),s+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return f}):typeof ri=="object"?(Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,Bo.exports=f):t.Complex=f})(ri)});var Oo=_r((ni,Ro)=>{(function(t){"use strict";var e=2e3,r={s:1,n:0,d:1};function n(c,h){if(isNaN(c=parseInt(c,10)))throw s.InvalidParameter;return c*h}function i(c,h){if(h===0)throw s.DivisionByZero;var v=Object.create(s.prototype);v.s=c<0?-1:1,c=c<0?-c:c;var p=a(c,h);return v.n=c/p,v.d=h/p,v}function o(c){for(var h={},v=c,p=2,D=4;D<=v;){for(;v%p===0;)v/=p,h[p]=(h[p]||0)+1;D+=1+2*p++}return v!==c?v>1&&(h[v]=(h[v]||0)+1):h[c]=(h[c]||0)+1,h}var l=function(c,h){var v=0,p=1,D=1,x=0,y=0,g=0,A=1,w=1,d=0,E=1,C=1,b=1,T=1e7,S;if(c!=null)if(h!==void 0){if(v=c,p=h,D=v*p,v%1!==0||p%1!==0)throw s.NonIntegerParameter}else switch(typeof c){case"object":{if("d"in c&&"n"in c)v=c.n,p=c.d,"s"in c&&(v*=c.s);else if(0 in c)v=c[0],1 in c&&(p=c[1]);else throw s.InvalidParameter;D=v*p;break}case"number":{if(c<0&&(D=c,c=-c),c%1===0)v=c;else if(c>0){for(c>=1&&(w=Math.pow(10,Math.floor(1+Math.log(c)/Math.LN10)),c/=w);E<=T&&b<=T;)if(S=(d+C)/(E+b),c===S){E+b<=T?(v=d+C,p=E+b):b>E?(v=C,p=b):(v=d,p=E);break}else c>S?(d+=C,E+=b):(C+=d,b+=E),E>T?(v=C,p=b):(v=d,p=E);v*=w}else(isNaN(c)||isNaN(h))&&(p=v=NaN);break}case"string":{if(E=c.match(/\d+|./g),E===null)throw s.InvalidParameter;if(E[d]==="-"?(D=-1,d++):E[d]==="+"&&d++,E.length===d+1?y=n(E[d++],D):E[d+1]==="."||E[d]==="."?(E[d]!=="."&&(x=n(E[d++],D)),d++,(d+1===E.length||E[d+1]==="("&&E[d+3]===")"||E[d+1]==="'"&&E[d+3]==="'")&&(y=n(E[d],D),A=Math.pow(10,E[d].length),d++),(E[d]==="("&&E[d+2]===")"||E[d]==="'"&&E[d+2]==="'")&&(g=n(E[d+1],D),w=Math.pow(10,E[d+1].length)-1,d+=3)):E[d+1]==="/"||E[d+1]===":"?(y=n(E[d],D),A=n(E[d+2],1),d+=3):E[d+3]==="/"&&E[d+1]===" "&&(x=n(E[d],D),y=n(E[d+2],D),A=n(E[d+4],1),d+=5),E.length<=d){p=A*w,D=v=g+p*x+w*y;break}}default:throw s.InvalidParameter}if(p===0)throw s.DivisionByZero;r.s=D<0?-1:1,r.n=Math.abs(v),r.d=Math.abs(p)};function m(c,h,v){for(var p=1;h>0;c=c*c%v,h>>=1)h&1&&(p=p*c%v);return p}function f(c,h){for(;h%2===0;h/=2);for(;h%5===0;h/=5);if(h===1)return 0;for(var v=10%h,p=1;v!==1;p++)if(v=v*10%h,p>e)return 0;return p}function u(c,h,v){for(var p=1,D=m(10,v,h),x=0;x<300;x++){if(p===D)return x;p=p*10%h,D=D*10%h}return 0}function a(c,h){if(!c)return h;if(!h)return c;for(;;){if(c%=h,!c)return h;if(h%=c,!h)return c}}function s(c,h){if(l(c,h),this instanceof s)c=a(r.d,r.n),this.s=r.s,this.n=r.n/c,this.d=r.d/c;else return i(r.s*r.n,r.d)}s.DivisionByZero=new Error("Division by Zero"),s.InvalidParameter=new Error("Invalid argument"),s.NonIntegerParameter=new Error("Parameters must be integer"),s.prototype={s:1,n:0,d:1,abs:function(){return i(this.n,this.d)},neg:function(){return i(-this.s*this.n,this.d)},add:function(c,h){return l(c,h),i(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(c,h){return l(c,h),i(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(c,h){return l(c,h),i(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(c,h){return l(c,h),i(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return i(this.s*this.n,this.d)},mod:function(c,h){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(c===void 0)return i(this.s*this.n%this.d,1);if(l(c,h),r.n===0&&this.d===0)throw s.DivisionByZero;return i(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(c,h){return l(c,h),i(a(r.n,this.n)*a(r.d,this.d),r.d*this.d)},lcm:function(c,h){return l(c,h),r.n===0&&this.n===0?i(0,1):i(r.n*this.n,a(r.n,this.n)*a(r.d,this.d))},ceil:function(c){return c=Math.pow(10,c||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.ceil(c*this.s*this.n/this.d),c)},floor:function(c){return c=Math.pow(10,c||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.floor(c*this.s*this.n/this.d),c)},round:function(c){return c=Math.pow(10,c||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.round(c*this.s*this.n/this.d),c)},inverse:function(){return i(this.s*this.d,this.n)},pow:function(c,h){if(l(c,h),r.d===1)return r.s<0?i(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):i(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var v=o(this.n),p=o(this.d),D=1,x=1;for(var y in v)if(y!=="1"){if(y==="0"){D=0;break}if(v[y]*=r.n,v[y]%r.d===0)v[y]/=r.d;else return null;D*=Math.pow(y,v[y])}for(var y in p)if(y!=="1"){if(p[y]*=r.n,p[y]%r.d===0)p[y]/=r.d;else return null;x*=Math.pow(y,p[y])}return r.s<0?i(x,D):i(D,x)},equals:function(c,h){return l(c,h),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(c,h){l(c,h);var v=this.s*this.n*r.d-r.s*r.n*this.d;return(0<v)-(v<0)},simplify:function(c){if(isNaN(this.n)||isNaN(this.d))return this;c=c||.001;for(var h=this.abs(),v=h.toContinued(),p=1;p<v.length;p++){for(var D=i(v[p-1],1),x=p-2;x>=0;x--)D=D.inverse().add(v[x]);if(D.sub(h).abs().valueOf()<c)return D.mul(this.s)}return this},divisible:function(c,h){return l(c,h),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(c){var h,v="",p=this.n,D=this.d;return this.s<0&&(v+="-"),D===1?v+=p:(c&&(h=Math.floor(p/D))>0&&(v+=h,v+=" ",p%=D),v+=p,v+="/",v+=D),v},toLatex:function(c){var h,v="",p=this.n,D=this.d;return this.s<0&&(v+="-"),D===1?v+=p:(c&&(h=Math.floor(p/D))>0&&(v+=h,p%=D),v+="\\frac{",v+=p,v+="}{",v+=D,v+="}"),v},toContinued:function(){var c,h=this.n,v=this.d,p=[];if(isNaN(h)||isNaN(v))return p;do p.push(Math.floor(h/v)),c=h%v,h=v,v=c;while(h!==1);return p},toString:function(c){var h=this.n,v=this.d;if(isNaN(h)||isNaN(v))return"NaN";c=c||15;var p=f(h,v),D=u(h,v,p),x=this.s<0?"-":"";if(x+=h/v|0,h%=v,h*=10,h&&(x+="."),p){for(var y=D;y--;)x+=h/v|0,h%=v,h*=10;x+="(";for(var y=p;y--;)x+=h/v|0,h%=v,h*=10;x+=")"}else for(var y=c;h&&y--;)x+=h/v|0,h%=v,h*=10;return x}},typeof define=="function"&&define.amd?define([],function(){return s}):typeof ni=="object"?(Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,Ro.exports=s):t.Fraction=s})(ni)});var mp={};ws(mp,{code:()=>Tn,interpret:()=>pp});var va=mt(Nn());var Ke=class{constructor(e="INT"){this.base="INT";this.base=e}clone(){let e=new Ke;return e.base=this.base,e}toString(){return""+this.base}},We=class{constructor(e=""){this.str="";this.tmp="";this.str=e}},dt=class{constructor(){this.type=new Ke;this.code=new We;this.sym=null}};var Dr=class{constructor(e,r,n,i,o=[]){this.id="";this.kind="LOCAL";this.type=new Ke;this.scope=0;this.runtimeId="";this.subSymbols=[];this.functionOverloadSuccessor=null;this.value=null;this.id=e,this.kind=r,this.type=n,this.scope=i,this.subSymbols=o}toString(){let e="SYM";if(e+=',id="'+this.id+'"',e+=',kind="'+this.kind+'"',e+=',type="'+this.type.toString()+'"',e+=',scope="'+this.scope+'"',e+=',runtimeId="'+this.runtimeId+'"',this.subSymbols.length>0){e+=`,subSymbols=[
`;for(let r=0;r<this.subSymbols.length;r++)e+="  "+this.subSymbols[r].toString();e+="]"}return e+=`
`,e}};function Bn(t,e){if(e==="ID")return"ID";if(e==="BOOL")return"BOOL";if(e==="INT")return"INT";if(e==="REAL")return"REAL";if(e==="COMPLEX")return"COMPLEX";if(e==="VECTOR")return"VECTOR";if(e==="MATRIX")return"MATRIX";if(e==="TERM")return"TERM";if(e==="TERM_VAR")return"TERM_VAR";if(e==="SET_INT")return"INT_SET";if(e==="INT_LIST")return"INT_LIST";if(e==="VECTOR_LIST")return"VECTOR_LIST";t.error("unknown base type "+e)}function da(t){let e=new va.Lexer;e.configureSingleLineComments("#"),e.configureMultiLineComments("",""),e.enableEmitNewlines(!1),e.enableEmitIndentation(!1),e.enableBackslashLineBreaks(!1),e.setTerminals(["->"]),e.pushSource("PROTOTYPES",t);let r=[];for(;e.isNotEND();){let n=e.ID(),i=[],o=[];if(e.isTER("<")){e.next();let h=0;for(;e.isNotTER(">");)h>0&&e.TER(","),i.push(e.ID()),e.TER(":"),o.push(Bn(e,e.ID())),h++;e.TER(">")}let l=[],m=[];e.TER("(");let f=0;for(;e.isNotTER(")");)f>0&&e.TER(","),l.push(e.ID()),e.TER(":"),m.push(Bn(e,e.ID())),f++;e.TER(")"),e.TER(":");let u=Bn(e,e.ID());e.TER("->");let a=e.ID();e.TER("."),a+="."+e.ID(),e.TER(";");let s=[];for(let h=0;h<i.length;h++){let v=new Dr(i[h],"DIMENSION",new Ke(o[h]),1,[]);s.push(v)}for(let h=0;h<l.length;h++){let v=new Dr(l[h],"PARAMETER",new Ke(m[h]),1,[]);s.push(v)}let c=new Dr(n,"FUNCTION",new Ke(u),0,s);c.runtimeId=a;for(let h=r.length-1;h>=0;h--)if(r[h].id===n){r[h].functionOverloadSuccessor=c;break}r.push(c)}return r}var Qr=class extends Error{constructor(e){super(e),this.name="VectorError"}},ze=class{constructor(e){this.size=1;this.values=[];this.size=e,this.values=new Array(e).fill(0)}getSize(){return this.size}setValue(e,r){this.values[e]=r}getValue(e){return this.values[e]}static vector2list(e){return e.clone().values}clone(){let e=new ze(this.size);return e.values=[...this.values],e}toString(){let e="[";for(let r=0;r<this.size;r++)r>0&&(e+=","),e+=this.getValue(r);return e+="]",e}static add(e,r){if(e.size!=r.size)throw new Qr("dimensions do not match");let n=e.clone();for(let i=0;i<r.size;i++)n.values[i]+=r.values[i];return n}static sub(e,r){if(e.size!=r.size)throw new Qr("dimensions do not match");let n=e.clone();for(let i=0;i<r.size;i++)n.values[i]-=r.values[i];return n}mul(e){let r=this.clone();for(let n=0;n<r.size;n++)r.values[n]*=e;return r}static dot(e,r){if(e.size!=r.size)throw new Qr("dimensions do not match");let n=0;for(let i=0;i<r.size;i++)n+=e.values[i]*r.values[i];return n}static cross(e,r){if(e.size!=3||r.size!=3)throw new Qr("vector length must be 3");let n=new ze(3);return n.values[0]=e.values[1]*r.values[2]-e.values[2]*r.values[1],n.values[1]=e.values[2]*r.values[0]-e.values[0]*r.values[2],n.values[2]=e.values[0]*r.values[1]-e.values[1]*r.values[0],n}norm2(){let e=0;for(let r=0;r<this.size;r++)e+=this.values[r]*this.values[r];return Math.sqrt(e)}is_zero(e=1e-9){for(let r=0;r<this.size;r++)if(Math.abs(this.getValue(r))>e)return!1;return!0}};var Pt=class{constructor(e){this.parent=null;this.parent=e}_create(e,r){let n=new ze(e),i=0;for(let o=0;o<e;o++)n.setValue(o,r[i++]);return n}_clone(e){return e.clone()}_getElement(e,r,n){if(r<0||r>=e.getSize())throw new Te(n,"vector has "+e.getSize()+" elements. Cannot get element "+r);return e.getValue(r)}_setElement(e,r,n,i){if(r<0||r>=e.getSize())throw new Te(i,"vector has "+e.getSize()+" element. Cannot get element "+r);e.setValue(r,n)}_addVectors(e,r,n){if(e.getSize()!=r.getSize())throw new Te(n,"dimensions do not match");return ze.add(e,r)}_subVectors(e,r,n){if(e.getSize()!=r.getSize())throw new Te(n,"dimensions do not match");return ze.sub(e,r)}_mulScalarVector(e,r){return r.mul(e)}_dotVectors(e,r,n){if(e.getSize()!=r.getSize())throw new Te(n,"dimensions do not match");return ze.dot(e,r)}_crossVectors(e,r,n){if(e.getSize()!=3||r.getSize()!=3)throw new Te(n,"vector length must be 3");return ze.cross(e,r)}_norm2vec(e){return e.norm2()}_zerosVector(e){let r=new ze(e);for(let n=0;n<e;n++)r.setValue(n,0);return r}_randVector(e,r,n){let i=new ze(e);for(let o=0;o<e;o++)i.setValue(o,this.parent.interpret_basic._randIntMinMax(r,n));return i}_randZVector(e,r,n){let i=new ze(e);for(let o=0;o<e;o++)i.setValue(o,this.parent.interpret_basic._randIntMinMaxZ(r,n));return i}_isVectorZero(e){return e.is_zero(1e-9)}};function Dt(){return Dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dt.apply(this,arguments)}var In={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function be(t){return typeof t=="number"}function Fe(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Rn(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function On(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function kt(t){return t&&t.constructor.prototype.isUnit===!0||!1}function rr(t){return typeof t=="string"}var Ae=Array.isArray;function ge(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Er(t){return Array.isArray(t)||ge(t)}function qt(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Vt(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Da(t){return t&&t.constructor.prototype.isRange===!0||!1}function Jr(t){return t&&t.constructor.prototype.isIndex===!0||!1}function xa(t){return typeof t=="boolean"}function ga(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function ya(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Ea(t){return typeof t=="function"}function wa(t){return t instanceof Date}function Aa(t){return t instanceof RegExp}function ba(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Rn(t)&&!On(t))}function Ca(t){return t===null}function _a(t){return t===void 0}function Ta(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ma(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fa(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Sa(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Na(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ba(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ia(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ra(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Oa(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function La(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function za(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Pa(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ka(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function qa(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Va(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ua(t){return t&&t.constructor.prototype.isChain===!0||!1}function sr(t){var e=typeof t;return e==="object"?t===null?"null":Fe(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function ye(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return ye(r)});if(t instanceof Date)return new Date(t.valueOf());if(Fe(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Fs(t,ye)}function Fs(t,e){var r={};for(var n in t)Wr(t,n)&&(r[n]=e(t[n]));return r}function Xa(t,e){for(var r in e)Wr(e,r)&&(t[r]=e[r]);return t}function Kr(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Kr(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Kr(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function Wr(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Za(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],o=t[i];o!==void 0&&(r[i]=o)}return r}var Ha=["Matrix","Array"],Ga=["number","BigNumber","Fraction"];var lr=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(In)};Dt(lr,In,{MATRIX_OPTIONS:Ha,NUMBER_OPTIONS:Ga});var Hn=mt(Ya(),1);function se(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}var $a=Math.sign||function(t){return t>0?1:t<0?-1:0},Qa=Math.log2||function(e){return Math.log(e)/Math.LN2},Ja=Math.log10||function(e){return Math.log(e)/Math.LN10},Ka=Math.log1p||function(t){return Math.log(t+1)},Wa=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},ja=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Pn(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!se(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!se(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),o="i".concat(r)}var l="";return t<0&&(t=-t,l="-"),"".concat(l).concat(i).concat(t.toString(e)).concat(o)}function xt(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),be(e)?n=e:be(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return eo(t,n);case"exponential":return ro(t,n);case"engineering":return Ss(t,n);case"bin":return Pn(t,2,i);case"oct":return Pn(t,8,i);case"hex":return Pn(t,16,i);case"auto":return Ns(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],l=arguments[4];return o!=="."?o+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ut(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),o=n.indexOf(".");i+=o!==-1?o-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(m){return i-=m.length,""}).replace(/0*$/,"").split("").map(function(m){return parseInt(m)});return l.length===0&&(l.push(0),i++),{sign:r,coefficients:l,exponent:i}}function Ss(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Ut(t),n=Xt(r,e),i=n.exponent,o=n.coefficients,l=i%3===0?i:i<0?i-3-i%3:i-i%3;if(be(e))for(;e>o.length||i-l+1>o.length;)o.push(0);else for(var m=Math.abs(i-l)-(o.length-1),f=0;f<m;f++)o.push(0);for(var u=Math.abs(i-l),a=1;u>0;)a++,u--;var s=o.slice(a).join(""),c=be(e)&&s.length||s.match(/[1-9]/)?"."+s:"",h=o.slice(0,a).join("")+c+"e"+(i>=0?"+":"")+l.toString();return n.sign+h}function eo(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Ut(t),n=typeof e=="number"?Xt(r,r.exponent+1+e):r,i=n.coefficients,o=n.exponent+1,l=o+(e||0);return i.length<l&&(i=i.concat(jr(l-i.length))),o<0&&(i=jr(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),n.sign+i.join("")}function ro(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Ut(t),n=e?Xt(r,e):r,i=n.coefficients,o=n.exponent;i.length<e&&(i=i.concat(jr(e-i.length)));var l=i.shift();return n.sign+l+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function Ns(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,o=Ut(t),l=e?Xt(o,e):o;if(l.exponent<n||l.exponent>=i)return ro(t,e);var m=l.coefficients,f=l.exponent;m.length<e&&(m=m.concat(jr(e-m.length))),m=m.concat(jr(f-m.length+1+(m.length<e?e-m.length:0))),m=jr(-f).concat(m);var u=f>0?f:0;return u<m.length-1&&m.splice(u+1,0,"."),l.sign+m.join("")}function Xt(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var o=e-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),r.exponent++,o++),o--,n[o]++}}return r}function jr(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function to(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Bs=Number.EPSILON||2220446049250313e-31;function pr(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<Bs?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function kn(t,e,r){var n=t.constructor,i=new n(2),o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!se(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),o="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function io(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Rs(t,n);case"exponential":return no(t,n);case"engineering":return Is(t,n);case"bin":return kn(t,2,i);case"oct":return kn(t,8,i);case"hex":return kn(t,16,i);case"auto":{var o=e&&e.lowerExp!==void 0?e.lowerExp:-3,l=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var m,f=t.toSignificantDigits(n),u=f.e;return u>=o&&u<l?m=f.toFixed():m=no(t,n),m.replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Is(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),o=i.toPrecision(e);return o.indexOf("e")!==-1&&(o=i.toString()),o+"e"+(r>=0?"+":"")+n.toString()}function no(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Rs(t,e){return t.toFixed(e)}function Ee(t,e){var r=Os(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Os(t,e){if(typeof t=="number")return xt(t,e);if(Fe(t))return io(t,e);if(Ls(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return ao(t,e);if(rr(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+Ee(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function ao(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=ao(t[i],e);return r+="]",r}else return Ee(t,e)}function Ls(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function le(t,e,r){if(!(this instanceof le))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}le.prototype=new RangeError;le.prototype.constructor=RangeError;le.prototype.name="DimensionError";le.prototype.isDimensionError=!0;function wr(t,e,r){if(!(this instanceof wr))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}wr.prototype=new RangeError;wr.prototype.constructor=RangeError;wr.prototype.name="IndexError";wr.prototype.isIndexError=!0;function Ve(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function oo(t,e,r){var n,i=t.length;if(i!==e[r])throw new le(i,e[r]);if(r<e.length-1){var o=r+1;for(n=0;n<i;n++){var l=t[n];if(!Array.isArray(l))throw new le(e.length-1,e.length,"<");oo(t[n],e,o)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new le(e.length+1,e.length,">")}function Vn(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new le(t.length,0)}else oo(t,e,0)}function Me(t,e){if(!be(t)||!se(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new wr(t,e)}function Ur(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!be(i)||!se(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ee(e)+")")});var n=r!==void 0?r:0;return qn(t,e,0,n),t}function qn(t,e,r,n){var i,o,l=t.length,m=e[r],f=Math.min(l,m);if(t.length=m,r<e.length-1){var u=r+1;for(i=0;i<f;i++)o=t[i],Array.isArray(o)||(o=[o],t[i]=o),qn(o,e,u,n);for(i=f;i<m;i++)o=[],t[i]=o,qn(o,e,u,n)}else{for(i=0;i<f;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=f;i<m;i++)t[i]=n}}function uo(t,e){var r=Ps(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new le(0,n,"!=");e=gt(e,n);var i=so(e);if(n!==i)throw new le(i,n,"!=");try{return zs(r,e)}catch(o){throw o instanceof le?new le(i,n,"!="):o}}function gt(t,e){var r=so(t),n=t.slice(),i=-1,o=t.indexOf(i),l=t.indexOf(i,o+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var m=o>=0,f=e%r===0;if(m)if(f)n[o]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function so(t){return t.reduce((e,r)=>e*r,1)}function zs(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var l=r.length/o,m=0;m<l;m++)n.push(r.slice(m*o,(m+1)*o));r=n}return r}function Zt(t,e,r,n){var i=n||Ve(t);if(r)for(var o=0;o<r;o++)t=[t],i.unshift(1);for(t=fo(t,e,0);i.length<e;)i.push(1);return t}function fo(t,e,r){var n,i;if(Array.isArray(t)){var o=r+1;for(n=0,i=t.length;n<i;n++)t[n]=fo(t[n],e,o)}else for(var l=r;l<e;l++)t=[t];return t}function Ps(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function et(t,e){for(var r,n=0,i=0;i<t.length;i++){var o=t[i],l=Array.isArray(o);if(i===0&&l&&(n=o.length),l&&o.length!==n)return;var m=l?et(o,e):e(o);if(r===void 0)r=m;else if(r!==m)return"mixed"}return r}function O(t,e,r,n){function i(o){var l=Za(o,e.map(Vs));return ks(t,e,o),r(l)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function ks(t,e,r){var n=e.filter(o=>!qs(o)).every(o=>r[o]!==void 0);if(!n){var i=e.filter(o=>r[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function qs(t){return t&&t[0]==="?"}function Vs(t){return t&&t[0]==="?"?t.slice(1):t}function co(t,e){if(ho(t)&&mo(t,e))return t[e];throw typeof t[e]=="function"&&Us(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function lo(t,e,r){if(ho(t)&&mo(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function po(t,e){return e in t}function mo(t,e){return!t||typeof t!="object"?!1:Wr(Xs,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Us(t,e){return t==null||typeof t[e]!="function"||Wr(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Wr(Zs,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ho(t){return typeof t=="object"&&t&&t.constructor===Object}var Xs={length:!0,name:!0},Zs={toString:!0,valueOf:!0,toLocaleString:!0};var Un=class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return co(this.wrappedObject,e)}set(e,r){return lo(this.wrappedObject,e,r),this}has(e){return po(this.wrappedObject,e)}};function vo(t){return t?t instanceof Map||t instanceof Un||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Do=function(){return Do=Hn.default.create,Hn.default},Hs=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Gn=O("typed",Hs,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:o}=e,l=Do();return l.clear(),l.addTypes([{name:"number",test:be},{name:"Complex",test:Rn},{name:"BigNumber",test:Fe},{name:"Fraction",test:On},{name:"Unit",test:kt},{name:"identifier",test:m=>rr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(m)},{name:"string",test:rr},{name:"Chain",test:Ua},{name:"Array",test:Ae},{name:"Matrix",test:ge},{name:"DenseMatrix",test:qt},{name:"SparseMatrix",test:Vt},{name:"Range",test:Da},{name:"Index",test:Jr},{name:"boolean",test:xa},{name:"ResultSet",test:ga},{name:"Help",test:ya},{name:"function",test:Ea},{name:"Date",test:wa},{name:"RegExp",test:Aa},{name:"null",test:Ca},{name:"undefined",test:_a},{name:"AccessorNode",test:Ta},{name:"ArrayNode",test:Ma},{name:"AssignmentNode",test:Fa},{name:"BlockNode",test:Sa},{name:"ConditionalNode",test:Na},{name:"ConstantNode",test:Ba},{name:"FunctionNode",test:Ra},{name:"FunctionAssignmentNode",test:Ia},{name:"IndexNode",test:Oa},{name:"Node",test:La},{name:"ObjectNode",test:za},{name:"OperatorNode",test:Pa},{name:"ParenthesisNode",test:ka},{name:"RangeNode",test:qa},{name:"SymbolNode",test:Va},{name:"Map",test:vo},{name:"Object",test:ba}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||Xn(f),to(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return n||Ht(f),new n(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return n||Ht(f),new n(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return n||Ht(f),new n(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){o||Zn(f);var u=new o(f);if(u.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(f){var u=Number(f);if(isNaN(u))throw new Error('Cannot convert "'+f+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(f){r||Xn(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){o||Zn(f);try{return new o(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){n||Ht(f);try{return new n(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||Xn(f),new r(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return o||Zn(f),new o(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||Gs(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),l.onMismatch=(m,f,u)=>{var a=l.createError(m,f,u);if(["wrongType","mismatch"].includes(a.data.category)&&f.length===1&&Er(f[0])&&u.some(c=>!c.params.includes(","))){var s=new TypeError("Function '".concat(m,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(m,")'."));throw s.data=a.data,s}throw a},l.onMismatch=(m,f,u)=>{var a=l.createError(m,f,u);if(["wrongType","mismatch"].includes(a.data.category)&&f.length===1&&Er(f[0])&&u.some(c=>!c.params.includes(","))){var s=new TypeError("Function '".concat(m,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(m,")'."));throw s.data=a.data,s}throw a},l});function Xn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Ht(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Gs(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Zn(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var rt=9e15,Nr=1e9,Yn="0123456789abcdef",Yt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$t="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",$n={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-rt,maxE:rt,crypto:!1},Eo,Ar,ie=!0,Jt="[DecimalError] ",Sr=Jt+"Invalid argument: ",wo=Jt+"Precision limit exceeded",Ao=Jt+"crypto unavailable",bo="[object Decimal]",Ge=Math.floor,Ie=Math.pow,Ys=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$s=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Qs=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Co=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vr=1e7,te=7,Js=9007199254740991,Ks=Yt.length-1,Qn=$t.length-1,P={toStringTag:bo};P.absoluteValue=P.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),W(t)};P.ceil=function(){return W(new this.constructor(this),this.e+1,2)};P.clampedTo=P.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Sr+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};P.comparedTo=P.cmp=function(t){var e,r,n,i,o=this,l=o.d,m=(t=new o.constructor(t)).d,f=o.s,u=t.s;if(!l||!m)return!f||!u?NaN:f!==u?f:l===m?0:!l^f<0?1:-1;if(!l[0]||!m[0])return l[0]?f:m[0]?-u:0;if(f!==u)return f;if(o.e!==t.e)return o.e>t.e^f<0?1:-1;for(n=l.length,i=m.length,e=0,r=n<i?n:i;e<r;++e)if(l[e]!==m[e])return l[e]>m[e]^f<0?1:-1;return n===i?0:n>i^f<0?1:-1};P.cosine=P.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+te,n.rounding=1,r=Ws(n,So(n,r)),n.precision=t,n.rounding=e,W(Ar==2||Ar==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};P.cubeRoot=P.cbrt=function(){var t,e,r,n,i,o,l,m,f,u,a=this,s=a.constructor;if(!a.isFinite()||a.isZero())return new s(a);for(ie=!1,o=a.s*Ie(a.s*a,1/3),!o||Math.abs(o)==1/0?(r=Ue(a.d),t=a.e,(o=(t-r.length+1)%3)&&(r+=o==1||o==-2?"0":"00"),o=Ie(r,1/3),t=Ge((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?r="5e"+t:(r=o.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new s(r),n.s=a.s):n=new s(o.toString()),l=(t=s.precision)+3;;)if(m=n,f=m.times(m).times(m),u=f.plus(a),n=_e(u.plus(a).times(m),u.plus(f),l+2,1),Ue(m.d).slice(0,l)===(r=Ue(n.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!i&&r=="4999"){if(!i&&(W(m,t+1,0),m.times(m).times(m).eq(a))){n=m;break}l+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(W(n,t+1,1),e=!n.times(n).times(n).eq(a));break}return ie=!0,W(n,t,s.rounding,e)};P.decimalPlaces=P.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Ge(this.e/te))*te,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};P.dividedBy=P.div=function(t){return _e(this,new this.constructor(t))};P.dividedToIntegerBy=P.divToInt=function(t){var e=this,r=e.constructor;return W(_e(e,new r(t),0,1,1),r.precision,r.rounding)};P.equals=P.eq=function(t){return this.cmp(t)===0};P.floor=function(){return W(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(t){return this.cmp(t)>0};P.greaterThanOrEqualTo=P.gte=function(t){var e=this.cmp(t);return e==1||e===0};P.hyperbolicCosine=P.cosh=function(){var t,e,r,n,i,o=this,l=o.constructor,m=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return m;r=l.precision,n=l.rounding,l.precision=r+Math.max(o.e,o.sd())+4,l.rounding=1,i=o.d.length,i<32?(t=Math.ceil(i/3),e=(1/Wt(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=tt(l,1,o.times(e),new l(1),!0);for(var f,u=t,a=new l(8);u--;)f=o.times(o),o=m.minus(f.times(a.minus(f.times(a))));return W(o,l.precision=r,l.rounding=n,!0)};P.hyperbolicSine=P.sinh=function(){var t,e,r,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,r=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=tt(o,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/Wt(5,t)),i=tt(o,2,i,i,!0);for(var l,m=new o(5),f=new o(16),u=new o(20);t--;)l=i.times(i),i=i.times(m.plus(l.times(f.times(l).plus(u))))}return o.precision=e,o.rounding=r,W(i,e,r,!0)};P.hyperbolicTangent=P.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,_e(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};P.inverseCosine=P.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,o=r.rounding;return n!==-1?n===0?e.isNeg()?hr(r,i,o):new r(0):new r(NaN):e.isZero()?hr(r,i+4,o).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=hr(r,i+4,o).times(.5),r.precision=i,r.rounding=o,t.minus(e))};P.inverseHyperbolicCosine=P.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ie=!1,r=r.times(r).minus(1).sqrt().plus(r),ie=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};P.inverseHyperbolicSine=P.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ie=!1,r=r.times(r).plus(1).sqrt().plus(r),ie=!0,n.precision=t,n.rounding=e,r.ln())};P.inverseHyperbolicTangent=P.atanh=function(){var t,e,r,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?W(new o(i),t,e,!0):(o.precision=r=n-i.e,i=_e(i.plus(1),new o(1).minus(i),r+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)};P.inverseSine=P.asin=function(){var t,e,r,n,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),r=o.precision,n=o.rounding,e!==-1?e===0?(t=hr(o,r+4,n).times(.5),t.s=i.s,t):new o(NaN):(o.precision=r+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=n,i.times(2)))};P.inverseTangent=P.atan=function(){var t,e,r,n,i,o,l,m,f,u=this,a=u.constructor,s=a.precision,c=a.rounding;if(u.isFinite()){if(u.isZero())return new a(u);if(u.abs().eq(1)&&s+4<=Qn)return l=hr(a,s+4,c).times(.25),l.s=u.s,l}else{if(!u.s)return new a(NaN);if(s+4<=Qn)return l=hr(a,s+4,c).times(.5),l.s=u.s,l}for(a.precision=m=s+10,a.rounding=1,r=Math.min(28,m/te+2|0),t=r;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ie=!1,e=Math.ceil(m/te),n=1,f=u.times(u),l=new a(u),i=u;t!==-1;)if(i=i.times(f),o=l.minus(i.div(n+=2)),i=i.times(f),l=o.plus(i.div(n+=2)),l.d[e]!==void 0)for(t=e;l.d[t]===o.d[t]&&t--;);return r&&(l=l.times(2<<r-1)),ie=!0,W(l,a.precision=s,a.rounding=c,!0)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&Ge(this.e/te)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(t){return this.cmp(t)<0};P.lessThanOrEqualTo=P.lte=function(t){return this.cmp(t)<1};P.logarithm=P.log=function(t){var e,r,n,i,o,l,m,f,u=this,a=u.constructor,s=a.precision,c=a.rounding,h=5;if(t==null)t=new a(10),e=!0;else{if(t=new a(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new a(NaN);e=t.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new a(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)o=!0;else{for(i=r[0];i%10===0;)i/=10;o=i!==1}if(ie=!1,m=s+h,l=Fr(u,m),n=e?Qt(a,m+10):Fr(t,m),f=_e(l,n,m,1),yt(f.d,i=s,c))do if(m+=10,l=Fr(u,m),n=e?Qt(a,m+10):Fr(t,m),f=_e(l,n,m,1),!o){+Ue(f.d).slice(i+1,i+15)+1==1e14&&(f=W(f,s+1,0));break}while(yt(f.d,i+=10,c));return ie=!0,W(f,s,c)};P.minus=P.sub=function(t){var e,r,n,i,o,l,m,f,u,a,s,c,h=this,v=h.constructor;if(t=new v(t),!h.d||!t.d)return!h.s||!t.s?t=new v(NaN):h.d?t.s=-t.s:t=new v(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(u=h.d,c=t.d,m=v.precision,f=v.rounding,!u[0]||!c[0]){if(c[0])t.s=-t.s;else if(u[0])t=new v(h);else return new v(f===3?-0:0);return ie?W(t,m,f):t}if(r=Ge(t.e/te),a=Ge(h.e/te),u=u.slice(),o=a-r,o){for(s=o<0,s?(e=u,o=-o,l=c.length):(e=c,r=a,l=u.length),n=Math.max(Math.ceil(m/te),l)+2,o>n&&(o=n,e.length=1),e.reverse(),n=o;n--;)e.push(0);e.reverse()}else{for(n=u.length,l=c.length,s=n<l,s&&(l=n),n=0;n<l;n++)if(u[n]!=c[n]){s=u[n]<c[n];break}o=0}for(s&&(e=u,u=c,c=e,t.s=-t.s),l=u.length,n=c.length-l;n>0;--n)u[l++]=0;for(n=c.length;n>o;){if(u[--n]<c[n]){for(i=n;i&&u[--i]===0;)u[i]=vr-1;--u[i],u[n]+=vr}u[n]-=c[n]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=Kt(u,r),ie?W(t,m,f):t):new v(f===3?-0:0)};P.modulo=P.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?W(new n(r),n.precision,n.rounding):(ie=!1,n.modulo==9?(e=_e(r,t.abs(),0,3,1),e.s*=t.s):e=_e(r,t,0,n.modulo,1),e=e.times(t),ie=!0,r.minus(e))};P.naturalExponential=P.exp=function(){return Jn(this)};P.naturalLogarithm=P.ln=function(){return Fr(this)};P.negated=P.neg=function(){var t=new this.constructor(this);return t.s=-t.s,W(t)};P.plus=P.add=function(t){var e,r,n,i,o,l,m,f,u,a,s=this,c=s.constructor;if(t=new c(t),!s.d||!t.d)return!s.s||!t.s?t=new c(NaN):s.d||(t=new c(t.d||s.s===t.s?s:NaN)),t;if(s.s!=t.s)return t.s=-t.s,s.minus(t);if(u=s.d,a=t.d,m=c.precision,f=c.rounding,!u[0]||!a[0])return a[0]||(t=new c(s)),ie?W(t,m,f):t;if(o=Ge(s.e/te),n=Ge(t.e/te),u=u.slice(),i=o-n,i){for(i<0?(r=u,i=-i,l=a.length):(r=a,n=o,l=u.length),o=Math.ceil(m/te),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=u.length,i=a.length,l-i<0&&(i=l,r=a,a=u,u=r),e=0;i;)e=(u[--i]=u[i]+a[i]+e)/vr|0,u[i]%=vr;for(e&&(u.unshift(e),++n),l=u.length;u[--l]==0;)u.pop();return t.d=u,t.e=Kt(u,n),ie?W(t,m,f):t};P.precision=P.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sr+t);return r.d?(e=_o(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};P.round=function(){var t=this,e=t.constructor;return W(new e(t),t.e+1,e.rounding)};P.sine=P.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+te,n.rounding=1,r=ef(n,So(n,r)),n.precision=t,n.rounding=e,W(Ar>2?r.neg():r,t,e,!0)):new n(NaN)};P.squareRoot=P.sqrt=function(){var t,e,r,n,i,o,l=this,m=l.d,f=l.e,u=l.s,a=l.constructor;if(u!==1||!m||!m[0])return new a(!u||u<0&&(!m||m[0])?NaN:m?l:1/0);for(ie=!1,u=Math.sqrt(+l),u==0||u==1/0?(e=Ue(m),(e.length+f)%2==0&&(e+="0"),u=Math.sqrt(e),f=Ge((f+1)/2)-(f<0||f%2),u==1/0?e="5e"+f:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+f),n=new a(e)):n=new a(u.toString()),r=(f=a.precision)+3;;)if(o=n,n=o.plus(_e(l,o,r+2,1)).times(.5),Ue(o.d).slice(0,r)===(e=Ue(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(W(o,f+1,0),o.times(o).eq(l))){n=o;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(W(n,f+1,1),t=!n.times(n).eq(l));break}return ie=!0,W(n,f,a.rounding,t)};P.tangent=P.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=_e(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,W(Ar==2||Ar==4?r.neg():r,t,e,!0)):new n(NaN)};P.times=P.mul=function(t){var e,r,n,i,o,l,m,f,u,a=this,s=a.constructor,c=a.d,h=(t=new s(t)).d;if(t.s*=a.s,!c||!c[0]||!h||!h[0])return new s(!t.s||c&&!c[0]&&!h||h&&!h[0]&&!c?NaN:!c||!h?t.s/0:t.s*0);for(r=Ge(a.e/te)+Ge(t.e/te),f=c.length,u=h.length,f<u&&(o=c,c=h,h=o,l=f,f=u,u=l),o=[],l=f+u,n=l;n--;)o.push(0);for(n=u;--n>=0;){for(e=0,i=f+n;i>n;)m=o[i]+h[n]*c[i-n-1]+e,o[i--]=m%vr|0,e=m/vr|0;o[i]=(o[i]+e)%vr|0}for(;!o[--l];)o.pop();return e?++r:o.shift(),t.d=o,t.e=Kt(o,r),ie?W(t,s.precision,s.rounding):t};P.toBinary=function(t,e){return Wn(this,2,t,e)};P.toDecimalPlaces=P.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(tr(t,0,Nr),e===void 0?e=n.rounding:tr(e,0,8),W(r,t+r.e+1,e))};P.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=xr(n,!0):(tr(t,0,Nr),e===void 0?e=i.rounding:tr(e,0,8),n=W(new i(n),t+1,e),r=xr(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};P.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?r=xr(i):(tr(t,0,Nr),e===void 0?e=o.rounding:tr(e,0,8),n=W(new o(i),t+i.e+1,e),r=xr(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};P.toFraction=function(t){var e,r,n,i,o,l,m,f,u,a,s,c,h=this,v=h.d,p=h.constructor;if(!v)return new p(h);if(u=r=new p(1),n=f=new p(0),e=new p(n),o=e.e=_o(v)-h.e-1,l=o%te,e.d[0]=Ie(10,l<0?te+l:l),t==null)t=o>0?e:u;else{if(m=new p(t),!m.isInt()||m.lt(u))throw Error(Sr+m);t=m.gt(e)?o>0?e:u:m}for(ie=!1,m=new p(Ue(v)),a=p.precision,p.precision=o=v.length*te*2;s=_e(m,e,0,1,1),i=r.plus(s.times(n)),i.cmp(t)!=1;)r=n,n=i,i=u,u=f.plus(s.times(i)),f=i,i=e,e=m.minus(s.times(i)),m=i;return i=_e(t.minus(r),n,0,1,1),f=f.plus(i.times(u)),r=r.plus(i.times(n)),f.s=u.s=h.s,c=_e(u,n,o,1).minus(h).abs().cmp(_e(f,r,o,1).minus(h).abs())<1?[u,n]:[f,r],p.precision=a,ie=!0,c};P.toHexadecimal=P.toHex=function(t,e){return Wn(this,16,t,e)};P.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:tr(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ie=!1,r=_e(r,t,0,e,1).times(t),ie=!0,W(r)):(t.s=r.s,r=t),r};P.toNumber=function(){return+this};P.toOctal=function(t,e){return Wn(this,8,t,e)};P.toPower=P.pow=function(t){var e,r,n,i,o,l,m=this,f=m.constructor,u=+(t=new f(t));if(!m.d||!t.d||!m.d[0]||!t.d[0])return new f(Ie(+m,u));if(m=new f(m),m.eq(1))return m;if(n=f.precision,o=f.rounding,t.eq(1))return W(m,n,o);if(e=Ge(t.e/te),e>=t.d.length-1&&(r=u<0?-u:u)<=Js)return i=To(f,m,r,n),t.s<0?new f(1).div(i):W(i,n,o);if(l=m.s,l<0){if(e<t.d.length-1)return new f(NaN);if((t.d[e]&1)==0&&(l=1),m.e==0&&m.d[0]==1&&m.d.length==1)return m.s=l,m}return r=Ie(+m,u),e=r==0||!isFinite(r)?Ge(u*(Math.log("0."+Ue(m.d))/Math.LN10+m.e+1)):new f(r+"").e,e>f.maxE+1||e<f.minE-1?new f(e>0?l/0:0):(ie=!1,f.rounding=m.s=1,r=Math.min(12,(e+"").length),i=Jn(t.times(Fr(m,n+r)),n),i.d&&(i=W(i,n+5,1),yt(i.d,n,o)&&(e=n+10,i=W(Jn(t.times(Fr(m,e+r)),e),e+5,1),+Ue(i.d).slice(n+1,n+15)+1==1e14&&(i=W(i,n+1,0)))),i.s=l,ie=!0,f.rounding=o,W(i,n,o))};P.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=xr(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(tr(t,1,Nr),e===void 0?e=i.rounding:tr(e,0,8),n=W(new i(n),t,e),r=xr(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};P.toSignificantDigits=P.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(tr(t,1,Nr),e===void 0?e=n.rounding:tr(e,0,8)),W(new n(r),t,e)};P.toString=function(){var t=this,e=t.constructor,r=xr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};P.truncated=P.trunc=function(){return W(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var t=this,e=t.constructor,r=xr(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ue(t){var e,r,n,i=t.length-1,o="",l=t[0];if(i>0){for(o+=l,e=1;e<i;e++)n=t[e]+"",r=te-n.length,r&&(o+=Mr(r)),o+=n;l=t[e],n=l+"",r=te-n.length,r&&(o+=Mr(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function tr(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Sr+t)}function yt(t,e,r,n){var i,o,l,m;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=te,i=0):(i=Math.ceil((e+1)/te),e%=te),o=Ie(10,te-e),m=t[i]%o|0,n==null?e<3?(e==0?m=m/100|0:e==1&&(m=m/10|0),l=r<4&&m==99999||r>3&&m==49999||m==5e4||m==0):l=(r<4&&m+1==o||r>3&&m+1==o/2)&&(t[i+1]/o/100|0)==Ie(10,e-2)-1||(m==o/2||m==0)&&(t[i+1]/o/100|0)==0:e<4?(e==0?m=m/1e3|0:e==1?m=m/100|0:e==2&&(m=m/10|0),l=(n||r<4)&&m==9999||!n&&r>3&&m==4999):l=((n||r<4)&&m+1==o||!n&&r>3&&m+1==o/2)&&(t[i+1]/o/1e3|0)==Ie(10,e-3)-1,l}function Gt(t,e,r){for(var n,i=[0],o,l=0,m=t.length;l<m;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=Yn.indexOf(t.charAt(l++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function Ws(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/Wt(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=tt(t,1,e.times(i),new t(1));for(var o=r;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return t.precision-=r,e}var _e=function(){function t(n,i,o){var l,m=0,f=n.length;for(n=n.slice();f--;)l=n[f]*i+m,n[f]=l%o|0,m=l/o|0;return m&&n.unshift(m),n}function e(n,i,o,l){var m,f;if(o!=l)f=o>l?1:-1;else for(m=f=0;m<o;m++)if(n[m]!=i[m]){f=n[m]>i[m]?1:-1;break}return f}function r(n,i,o,l){for(var m=0;o--;)n[o]-=m,m=n[o]<i[o]?1:0,n[o]=m*l+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,l,m,f){var u,a,s,c,h,v,p,D,x,y,g,A,w,d,E,C,b,T,S,R,q=n.constructor,L=n.s==i.s?1:-1,I=n.d,F=i.d;if(!I||!I[0]||!F||!F[0])return new q(!n.s||!i.s||(I?F&&I[0]==F[0]:!F)?NaN:I&&I[0]==0||!F?L*0:L/0);for(f?(h=1,a=n.e-i.e):(f=vr,h=te,a=Ge(n.e/h)-Ge(i.e/h)),S=F.length,b=I.length,x=new q(L),y=x.d=[],s=0;F[s]==(I[s]||0);s++);if(F[s]>(I[s]||0)&&a--,o==null?(d=o=q.precision,l=q.rounding):m?d=o+(n.e-i.e)+1:d=o,d<0)y.push(1),v=!0;else{if(d=d/h+2|0,s=0,S==1){for(c=0,F=F[0],d++;(s<b||c)&&d--;s++)E=c*f+(I[s]||0),y[s]=E/F|0,c=E%F|0;v=c||s<b}else{for(c=f/(F[0]+1)|0,c>1&&(F=t(F,c,f),I=t(I,c,f),S=F.length,b=I.length),C=S,g=I.slice(0,S),A=g.length;A<S;)g[A++]=0;R=F.slice(),R.unshift(0),T=F[0],F[1]>=f/2&&++T;do c=0,u=e(F,g,S,A),u<0?(w=g[0],S!=A&&(w=w*f+(g[1]||0)),c=w/T|0,c>1?(c>=f&&(c=f-1),p=t(F,c,f),D=p.length,A=g.length,u=e(p,g,D,A),u==1&&(c--,r(p,S<D?R:F,D,f))):(c==0&&(u=c=1),p=F.slice()),D=p.length,D<A&&p.unshift(0),r(g,p,A,f),u==-1&&(A=g.length,u=e(F,g,S,A),u<1&&(c++,r(g,S<A?R:F,A,f))),A=g.length):u===0&&(c++,g=[0]),y[s++]=c,u&&g[0]?g[A++]=I[C]||0:(g=[I[C]],A=1);while((C++<b||g[0]!==void 0)&&d--);v=g[0]!==void 0}y[0]||y.shift()}if(h==1)x.e=a,Eo=v;else{for(s=1,c=y[0];c>=10;c/=10)s++;x.e=s+a*h-1,W(x,m?o+x.e+1:o,l,v)}return x}}();function W(t,e,r,n){var i,o,l,m,f,u,a,s,c,h=t.constructor;e:if(e!=null){if(s=t.d,!s)return t;for(i=1,m=s[0];m>=10;m/=10)i++;if(o=e-i,o<0)o+=te,l=e,a=s[c=0],f=a/Ie(10,i-l-1)%10|0;else if(c=Math.ceil((o+1)/te),m=s.length,c>=m)if(n){for(;m++<=c;)s.push(0);a=f=0,i=1,o%=te,l=o-te+1}else break e;else{for(a=m=s[c],i=1;m>=10;m/=10)i++;o%=te,l=o-te+i,f=l<0?0:a/Ie(10,i-l-1)%10|0}if(n=n||e<0||s[c+1]!==void 0||(l<0?a:a%Ie(10,i-l-1)),u=r<4?(f||n)&&(r==0||r==(t.s<0?3:2)):f>5||f==5&&(r==4||n||r==6&&(o>0?l>0?a/Ie(10,i-l):0:s[c-1])%10&1||r==(t.s<0?8:7)),e<1||!s[0])return s.length=0,u?(e-=t.e+1,s[0]=Ie(10,(te-e%te)%te),t.e=-e||0):s[0]=t.e=0,t;if(o==0?(s.length=c,m=1,c--):(s.length=c+1,m=Ie(10,te-o),s[c]=l>0?(a/Ie(10,i-l)%Ie(10,l)|0)*m:0),u)for(;;)if(c==0){for(o=1,l=s[0];l>=10;l/=10)o++;for(l=s[0]+=m,m=1;l>=10;l/=10)m++;o!=m&&(t.e++,s[0]==vr&&(s[0]=1));break}else{if(s[c]+=m,s[c]!=vr)break;s[c--]=0,m=1}for(o=s.length;s[--o]===0;)s.pop()}return ie&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function xr(t,e,r){if(!t.isFinite())return Fo(t);var n,i=t.e,o=Ue(t.d),l=o.length;return e?(r&&(n=r-l)>0?o=o.charAt(0)+"."+o.slice(1)+Mr(n):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+Mr(-i-1)+o,r&&(n=r-l)>0&&(o+=Mr(n))):i>=l?(o+=Mr(i+1-l),r&&(n=r-i-1)>0&&(o=o+"."+Mr(n))):((n=i+1)<l&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-l)>0&&(i+1===l&&(o+="."),o+=Mr(n))),o}function Kt(t,e){var r=t[0];for(e*=te;r>=10;r/=10)e++;return e}function Qt(t,e,r){if(e>Ks)throw ie=!0,r&&(t.precision=r),Error(wo);return W(new t(Yt),e,1,!0)}function hr(t,e,r){if(e>Qn)throw Error(wo);return W(new t($t),e,r,!0)}function _o(t){var e=t.length-1,r=e*te+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Mr(t){for(var e="";t--;)e+="0";return e}function To(t,e,r,n){var i,o=new t(1),l=Math.ceil(n/te+4);for(ie=!1;;){if(r%2&&(o=o.times(e),go(o.d,l)&&(i=!0)),r=Ge(r/2),r===0){r=o.d.length-1,i&&o.d[r]===0&&++o.d[r];break}e=e.times(e),go(e.d,l)}return ie=!0,o}function xo(t){return t.d[t.d.length-1]&1}function Mo(t,e,r){for(var n,i=new t(e[0]),o=0;++o<e.length;)if(n=new t(e[o]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function Jn(t,e){var r,n,i,o,l,m,f,u=0,a=0,s=0,c=t.constructor,h=c.rounding,v=c.precision;if(!t.d||!t.d[0]||t.e>17)return new c(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ie=!1,f=v):f=e,m=new c(.03125);t.e>-2;)t=t.times(m),s+=5;for(n=Math.log(Ie(2,s))/Math.LN10*2+5|0,f+=n,r=o=l=new c(1),c.precision=f;;){if(o=W(o.times(t),f,1),r=r.times(++a),m=l.plus(_e(o,r,f,1)),Ue(m.d).slice(0,f)===Ue(l.d).slice(0,f)){for(i=s;i--;)l=W(l.times(l),f,1);if(e==null)if(u<3&&yt(l.d,f-n,h,u))c.precision=f+=10,r=o=m=new c(1),a=0,u++;else return W(l,c.precision=v,h,ie=!0);else return c.precision=v,l}l=m}}function Fr(t,e){var r,n,i,o,l,m,f,u,a,s,c,h=1,v=10,p=t,D=p.d,x=p.constructor,y=x.rounding,g=x.precision;if(p.s<0||!D||!D[0]||!p.e&&D[0]==1&&D.length==1)return new x(D&&!D[0]?-1/0:p.s!=1?NaN:D?0:p);if(e==null?(ie=!1,a=g):a=e,x.precision=a+=v,r=Ue(D),n=r.charAt(0),Math.abs(o=p.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Ue(p.d),n=r.charAt(0),h++;o=p.e,n>1?(p=new x("0."+r),o++):p=new x(n+"."+r.slice(1))}else return u=Qt(x,a+2,g).times(o+""),p=Fr(new x(n+"."+r.slice(1)),a-v).plus(u),x.precision=g,e==null?W(p,g,y,ie=!0):p;for(s=p,f=l=p=_e(p.minus(1),p.plus(1),a,1),c=W(p.times(p),a,1),i=3;;){if(l=W(l.times(c),a,1),u=f.plus(_e(l,new x(i),a,1)),Ue(u.d).slice(0,a)===Ue(f.d).slice(0,a))if(f=f.times(2),o!==0&&(f=f.plus(Qt(x,a+2,g).times(o+""))),f=_e(f,new x(h),a,1),e==null)if(yt(f.d,a-v,y,m))x.precision=a+=v,u=l=p=_e(s.minus(1),s.plus(1),a,1),c=W(p.times(p),a,1),i=m=1;else return W(f,x.precision=g,y,ie=!0);else return x.precision=g,f;f=u,i+=2}}function Fo(t){return String(t.s*t.s/0)}function Kn(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%te,r<0&&(n+=te),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=te;n<i;)t.d.push(+e.slice(n,n+=te));e=e.slice(n),n=te-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ie&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function js(t,e){var r,n,i,o,l,m,f,u,a;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Co.test(e))return Kn(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if($s.test(e))r=16,e=e.toLowerCase();else if(Ys.test(e))r=2;else if(Qs.test(e))r=8;else throw Error(Sr+e);for(o=e.search(/p/i),o>0?(f=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,n=t.constructor,l&&(e=e.replace(".",""),m=e.length,o=m-o,i=To(n,new n(r),o,o*2)),u=Gt(e,r,vr),a=u.length-1,o=a;u[o]===0;--o)u.pop();return o<0?new n(t.s*0):(t.e=Kt(u,a),t.d=u,ie=!1,l&&(t=_e(t,i,m*4)),f&&(t=t.times(Math.abs(f)<54?Ie(2,f):Et.pow(2,f))),ie=!0,t)}function ef(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:tt(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Wt(5,r)),e=tt(t,2,e,e);for(var i,o=new t(5),l=new t(16),m=new t(20);r--;)i=e.times(e),e=e.times(o.plus(i.times(l.times(i).minus(m))));return e}function tt(t,e,r,n,i){var o,l,m,f,u=1,a=t.precision,s=Math.ceil(a/te);for(ie=!1,f=r.times(r),m=new t(n);;){if(l=_e(m.times(f),new t(e++*e++),a,1),m=i?n.plus(l):n.minus(l),n=_e(l.times(f),new t(e++*e++),a,1),l=m.plus(n),l.d[s]!==void 0){for(o=s;l.d[o]===m.d[o]&&o--;);if(o==-1)break}o=m,m=n,n=l,l=o,u++}return ie=!0,l.d.length=s+1,l}function Wt(t,e){for(var r=t;--e;)r*=t;return r}function So(t,e){var r,n=e.s<0,i=hr(t,t.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return Ar=n?4:1,e;if(r=e.divToInt(i),r.isZero())Ar=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(o))return Ar=xo(r)?n?2:3:n?4:1,e;Ar=xo(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Wn(t,e,r,n){var i,o,l,m,f,u,a,s,c,h=t.constructor,v=r!==void 0;if(v?(tr(r,1,Nr),n===void 0?n=h.rounding:tr(n,0,8)):(r=h.precision,n=h.rounding),!t.isFinite())a=Fo(t);else{for(a=xr(t),l=a.indexOf("."),v?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,l>=0&&(a=a.replace(".",""),c=new h(1),c.e=a.length-l,c.d=Gt(xr(c),10,i),c.e=c.d.length),s=Gt(a,10,i),o=f=s.length;s[--f]==0;)s.pop();if(!s[0])a=v?"0p+0":"0";else{if(l<0?o--:(t=new h(t),t.d=s,t.e=o,t=_e(t,c,r,n,0,i),s=t.d,o=t.e,u=Eo),l=s[r],m=i/2,u=u||s[r+1]!==void 0,u=n<4?(l!==void 0||u)&&(n===0||n===(t.s<0?3:2)):l>m||l===m&&(n===4||u||n===6&&s[r-1]&1||n===(t.s<0?8:7)),s.length=r,u)for(;++s[--r]>i-1;)s[r]=0,r||(++o,s.unshift(1));for(f=s.length;!s[f-1];--f);for(l=0,a="";l<f;l++)a+=Yn.charAt(s[l]);if(v){if(f>1)if(e==16||e==8){for(l=e==16?4:3,--f;f%l;f++)a+="0";for(s=Gt(a,i,e),f=s.length;!s[f-1];--f);for(l=1,a="1.";l<f;l++)a+=Yn.charAt(s[l])}else a=a.charAt(0)+"."+a.slice(1);a=a+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)a="0"+a;a="0."+a}else if(++o>f)for(o-=f;o--;)a+="0";else o<f&&(a=a.slice(0,o)+"."+a.slice(o))}a=(e==16?"0x":e==2?"0b":e==8?"0o":"")+a}return t.s<0?"-"+a:a}function go(t,e){if(t.length>e)return t.length=e,!0}function rf(t){return new this(t).abs()}function tf(t){return new this(t).acos()}function nf(t){return new this(t).acosh()}function af(t,e){return new this(t).plus(e)}function of(t){return new this(t).asin()}function uf(t){return new this(t).asinh()}function sf(t){return new this(t).atan()}function ff(t){return new this(t).atanh()}function cf(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,o=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=hr(this,o,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?hr(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=hr(this,o,1).times(.5),r.s=t.s):e.s<0?(this.precision=o,this.rounding=1,r=this.atan(_e(t,e,o,1)),e=hr(this,o,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(_e(t,e,o,1)),r}function lf(t){return new this(t).cbrt()}function pf(t){return W(t=new this(t),t.e+1,2)}function mf(t,e,r){return new this(t).clamp(e,r)}function hf(t){if(!t||typeof t!="object")throw Error(Jt+"Object expected");var e,r,n,i=t.defaults===!0,o=["precision",1,Nr,"rounding",0,8,"toExpNeg",-rt,0,"toExpPos",0,rt,"maxE",0,rt,"minE",-rt,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(r=o[e],i&&(this[r]=$n[r]),(n=t[r])!==void 0)if(Ge(n)===n&&n>=o[e+1]&&n<=o[e+2])this[r]=n;else throw Error(Sr+r+": "+n);if(r="crypto",i&&(this[r]=$n[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Ao);else this[r]=!1;else throw Error(Sr+r+": "+n);return this}function vf(t){return new this(t).cos()}function df(t){return new this(t).cosh()}function No(t){var e,r,n;function i(o){var l,m,f,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,yo(o)){u.s=o.s,ie?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(f=typeof o,f==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(l=0,m=o;m>=10;m/=10)l++;ie?l>i.maxE?(u.e=NaN,u.d=null):l<i.minE?(u.e=0,u.d=[0]):(u.e=l,u.d=[o]):(u.e=l,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return Kn(u,o.toString())}else if(f!=="string")throw Error(Sr+o);return(m=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(m===43&&(o=o.slice(1)),u.s=1),Co.test(o)?Kn(u,o):js(u,o)}if(i.prototype=P,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=hf,i.clone=No,i.isDecimal=yo,i.abs=rf,i.acos=tf,i.acosh=nf,i.add=af,i.asin=of,i.asinh=uf,i.atan=sf,i.atanh=ff,i.atan2=cf,i.cbrt=lf,i.ceil=pf,i.clamp=mf,i.cos=vf,i.cosh=df,i.div=Df,i.exp=xf,i.floor=gf,i.hypot=yf,i.ln=Ef,i.log=wf,i.log10=bf,i.log2=Af,i.max=Cf,i.min=_f,i.mod=Tf,i.mul=Mf,i.pow=Ff,i.random=Sf,i.round=Nf,i.sign=Bf,i.sin=If,i.sinh=Rf,i.sqrt=Of,i.sub=Lf,i.sum=zf,i.tan=Pf,i.tanh=kf,i.trunc=qf,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Df(t,e){return new this(t).div(e)}function xf(t){return new this(t).exp()}function gf(t){return W(t=new this(t),t.e+1,3)}function yf(){var t,e,r=new this(0);for(ie=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ie=!0,new this(1/0);r=e}return ie=!0,r.sqrt()}function yo(t){return t instanceof Et||t&&t.toStringTag===bo||!1}function Ef(t){return new this(t).ln()}function wf(t,e){return new this(t).log(e)}function Af(t){return new this(t).log(2)}function bf(t){return new this(t).log(10)}function Cf(){return Mo(this,arguments,"lt")}function _f(){return Mo(this,arguments,"gt")}function Tf(t,e){return new this(t).mod(e)}function Mf(t,e){return new this(t).mul(e)}function Ff(t,e){return new this(t).pow(e)}function Sf(t){var e,r,n,i,o=0,l=new this(1),m=[];if(t===void 0?t=this.precision:tr(t,1,Nr),n=Math.ceil(t/te),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));o<n;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:m[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);o<n;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(m.push(i%1e7),o+=4);o=n/4}else throw Error(Ao);else for(;o<n;)m[o++]=Math.random()*1e7|0;for(n=m[--o],t%=te,n&&t&&(i=Ie(10,te-t),m[o]=(n/i|0)*i);m[o]===0;o--)m.pop();if(o<0)r=0,m=[0];else{for(r=-1;m[0]===0;r-=te)m.shift();for(n=1,i=m[0];i>=10;i/=10)n++;n<te&&(r-=te-n)}return l.e=r,l.d=m,l}function Nf(t){return W(t=new this(t),t.e+1,this.rounding)}function Bf(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function If(t){return new this(t).sin()}function Rf(t){return new this(t).sinh()}function Of(t){return new this(t).sqrt()}function Lf(t,e){return new this(t).sub(e)}function zf(){var t=0,e=arguments,r=new this(e[t]);for(ie=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ie=!0,W(r,this.precision,this.rounding)}function Pf(t){return new this(t).tan()}function kf(t){return new this(t).tanh()}function qf(t){return W(t=new this(t),t.e+1,1)}P[Symbol.for("nodejs.util.inspect.custom")]=P.toString;P[Symbol.toStringTag]="Decimal";var Et=P.constructor=No($n);Yt=new Et(Yt);$t=new Et($t);var jn=Et;var Vf="BigNumber",Uf=["?on","config"],ei=O(Vf,Uf,t=>{var{on:e,config:r}=t,n=jn.clone({precision:r.precision,modulo:jn.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&n.config({precision:i.precision})}),n},{isClass:!0});var Pe=mt(Io(),1);var Xf="Complex",Zf=[],ti=O(Xf,Zf,()=>(Object.defineProperty(Pe.default,"name",{value:"Complex"}),Pe.default.prototype.constructor=Pe.default,Pe.default.prototype.type="Complex",Pe.default.prototype.isComplex=!0,Pe.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Pe.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Pe.default.prototype.format=function(t){var e="",r=this.im,n=this.re,i=xt(this.re,t),o=xt(this.im,t),l=be(t)?t:t?t.precision:null;if(l!==null){var m=Math.pow(10,-l);Math.abs(n/r)<m&&(n=0),Math.abs(r/n)<m&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=o+"i":r<0?r===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+o+"i",e},Pe.default.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return(0,Pe.default)(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(be(r)){if(kt(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),be(n))return new Pe.default({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Pe.default.prototype.valueOf=Pe.default.prototype.toString,Pe.default.fromJSON=function(t){return new Pe.default(t)},Pe.default.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Pe.default),{isClass:!0});var gr=mt(Oo(),1);var Hf="Fraction",Gf=[],ii=O(Hf,Gf,()=>(Object.defineProperty(gr.default,"name",{value:"Fraction"}),gr.default.prototype.constructor=gr.default,gr.default.prototype.type="Fraction",gr.default.prototype.isFraction=!0,gr.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},gr.default.fromJSON=function(t){return new gr.default(t)},gr.default),{isClass:!0});var Yf="Matrix",$f=[],ai=O(Yf,$f,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function jt(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var Qf="DenseMatrix",Jf=["Matrix"],oi=O(Qf,Jf,t=>{var{Matrix:e}=t;function r(a,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!rr(s))throw new Error("Invalid datatype: "+s);if(ge(a))a.type==="DenseMatrix"?(this._data=ye(a._data),this._size=ye(a._size),this._datatype=s||a._datatype):(this._data=a.toArray(),this._size=a.size(),this._datatype=s||a._datatype);else if(a&&Ae(a.data)&&Ae(a.size))this._data=a.data,this._size=a.size,Vn(this._data,this._size),this._datatype=s||a.datatype;else if(Ae(a))this._data=u(a),this._size=Ve(this._data),Vn(this._data,this._size),this._datatype=s;else{if(a)throw new TypeError("Unsupported type of data ("+sr(a)+")");this._data=[],this._size=[0],this._datatype=s}}r.prototype=new e,r.prototype.createDenseMatrix=function(a,s){return new r(a,s)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return et(this._data,sr)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(a,s){return new r(a,s)},r.prototype.subset=function(a,s,c){switch(arguments.length){case 1:return n(this,a);case 2:case 3:return o(this,a,s,c);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(a){if(!Ae(a))throw new TypeError("Array expected");if(a.length!==this._size.length)throw new le(a.length,this._size.length);for(var s=0;s<a.length;s++)Me(a[s],this._size[s]);for(var c=this._data,h=0,v=a.length;h<v;h++){var p=a[h];Me(p,c.length),c=c[p]}return c},r.prototype.set=function(a,s,c){if(!Ae(a))throw new TypeError("Array expected");if(a.length<this._size.length)throw new le(a.length,this._size.length,"<");var h,v,p,D=a.map(function(y){return y+1});f(this,D,c);var x=this._data;for(h=0,v=a.length-1;h<v;h++)p=a[h],Me(p,x.length),x=x[p];return p=a[a.length-1],Me(p,x.length),x[p]=s,this};function n(a,s){if(!Jr(s))throw new TypeError("Invalid index");var c=s.isScalar();if(c)return a.get(s.min());var h=s.size();if(h.length!==a._size.length)throw new le(h.length,a._size.length);for(var v=s.min(),p=s.max(),D=0,x=a._size.length;D<x;D++)Me(v[D],a._size[D]),Me(p[D],a._size[D]);return new r(i(a._data,s,h.length,0),a._datatype)}function i(a,s,c,h){var v=h===c-1,p=s.dimension(h);return v?p.map(function(D){return Me(D,a.length),a[D]}).valueOf():p.map(function(D){Me(D,a.length);var x=a[D];return i(x,s,c,h+1)}).valueOf()}function o(a,s,c,h){if(!s||s.isIndex!==!0)throw new TypeError("Invalid index");var v=s.size(),p=s.isScalar(),D;if(ge(c)?(D=c.size(),c=c.valueOf()):D=Ve(c),p){if(D.length!==0)throw new TypeError("Scalar expected");a.set(s.min(),c,h)}else{if(v.length<a._size.length)throw new le(v.length,a._size.length,"<");if(D.length<v.length){for(var x=0,y=0;v[x]===1&&D[x]===1;)x++;for(;v[x]===1;)y++,x++;c=Zt(c,v.length,y,D)}if(!Kr(v,D))throw new le(v,D,">");var g=s.max().map(function(d){return d+1});f(a,g,h);var A=v.length,w=0;l(a._data,s,c,A,w)}return a}function l(a,s,c,h,v){var p=v===h-1,D=s.dimension(v);p?D.forEach(function(x,y){Me(x),a[x]=c[y[0]]}):D.forEach(function(x,y){Me(x),l(a[x],s,c[y[0]],h,v+1)})}r.prototype.resize=function(a,s,c){if(!Er(a))throw new TypeError("Array or Matrix expected");var h=a.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),v=c?this.clone():this;return m(v,h,s)};function m(a,s,c){if(s.length===0){for(var h=a._data;Ae(h);)h=h[0];return h}return a._size=s.slice(0),a._data=Ur(a._data,a._size,c),a}r.prototype.reshape=function(a,s){var c=s?this.clone():this;c._data=uo(c._data,a);var h=c._size.reduce((v,p)=>v*p);return c._size=gt(a,h),c};function f(a,s,c){for(var h=a._size.slice(0),v=!1;h.length<s.length;)h.push(0),v=!0;for(var p=0,D=s.length;p<D;p++)s[p]>h[p]&&(h[p]=s[p],v=!0);v&&m(a,h,c)}r.prototype.clone=function(){var a=new r({data:ye(this._data),size:ye(this._size),datatype:this._datatype});return a},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(a){var s=this,c=jt(a),h=function D(x,y){return Ae(x)?x.map(function(g,A){return D(g,y.concat(A))}):c===1?a(x):c===2?a(x,y):a(x,y,s)},v=h(this._data,[]),p=this._datatype!==void 0?et(v,sr):void 0;return new r(v,p)},r.prototype.forEach=function(a){var s=this,c=function h(v,p){Ae(v)?v.forEach(function(D,x){h(D,p.concat(x))}):a(v,p,s)};c(this._data,[])},r.prototype[Symbol.iterator]=function*(){var a=function*s(c,h){if(Ae(c))for(var v=0;v<c.length;v++)yield*s(c[v],h.concat(v));else yield{value:c,index:h}};yield*a(this._data,[])},r.prototype.rows=function(){var a=[],s=this.size();if(s.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var c=this._data;for(var h of c)a.push(new r([h],this._datatype));return a},r.prototype.columns=function(){var a=this,s=[],c=this.size();if(c.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,v=function(x){var y=h.map(g=>[g[x]]);s.push(new r(y,a._datatype))},p=0;p<c[1];p++)v(p);return s},r.prototype.toArray=function(){return ye(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(a){return Ee(this._data,a)},r.prototype.toString=function(){return Ee(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(a){if(a){if(Fe(a)&&(a=a.toNumber()),!be(a)||!se(a))throw new TypeError("The parameter k must be an integer number")}else a=0;for(var s=a>0?a:0,c=a<0?-a:0,h=this._size[0],v=this._size[1],p=Math.min(h-c,v-s),D=[],x=0;x<p;x++)D[x]=this._data[x+c][x+s];return new r({data:D,size:[p],datatype:this._datatype})},r.diagonal=function(a,s,c,h){if(!Ae(a))throw new TypeError("Array expected, size parameter");if(a.length!==2)throw new Error("Only two dimensions matrix are supported");if(a=a.map(function(E){if(Fe(E)&&(E=E.toNumber()),!be(E)||!se(E)||E<1)throw new Error("Size values must be positive integers");return E}),c){if(Fe(c)&&(c=c.toNumber()),!be(c)||!se(c))throw new TypeError("The parameter k must be an integer number")}else c=0;var v=c>0?c:0,p=c<0?-c:0,D=a[0],x=a[1],y=Math.min(D-p,x-v),g;if(Ae(s)){if(s.length!==y)throw new Error("Invalid value array length");g=function(C){return s[C]}}else if(ge(s)){var A=s.size();if(A.length!==1||A[0]!==y)throw new Error("Invalid matrix length");g=function(C){return s.get([C])}}else g=function(){return s};h||(h=Fe(g(0))?g(0).mul(0):0);var w=[];if(a.length>0){w=Ur(w,a,h);for(var d=0;d<y;d++)w[d+p][d+v]=g(d)}return new r({data:w,size:[D,x]})},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(a,s){if(!be(a)||!se(a)||!be(s)||!se(s))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Me(a,this._size[0]),Me(s,this._size[0]),r._swapRows(a,s,this._data),this},r._swapRows=function(a,s,c){var h=c[a];c[a]=c[s],c[s]=h};function u(a){for(var s=0,c=a.length;s<c;s++){var h=a[s];Ae(h)?a[s]=u(h):h&&h.isMatrix===!0&&(a[s]=u(h.valueOf()))}return a}return r},{isClass:!0});function Lo(t){var e=t.length,r=t[0].length,n,i,o=[];for(i=0;i<r;i++){var l=[];for(n=0;n<e;n++)l.push(t[n][i]);o.push(l)}return o}function rn(t){for(var e=0;e<t.length;e++)if(Er(t[e]))return!0;return!1}function wt(t,e){ge(t)&&(t=t.valueOf());for(var r=0,n=t.length;r<n;r++){var i=t[r];Array.isArray(i)?wt(i,e):e(i)}}function Xe(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return Xe(n,e,r)}):e(t)}function tn(t,e,r){var n=Array.isArray(t)?Ve(t):t.size();if(e<0||e>=n.length)throw new wr(e,n.length);return ge(t)?t.create(en(t.valueOf(),e,r)):en(t,e,r)}function en(t,e,r){var n,i,o,l;if(e<=0)if(Array.isArray(t[0])){for(l=Lo(t),i=[],n=0;n<l.length;n++)i[n]=en(l[n],e-1,r);return i}else{for(o=t[0],n=1;n<t.length;n++)o=r(o,t[n]);return o}else{for(i=[],n=0;n<t.length;n++)i[n]=en(t[n],e-1,r);return i}}var nr="number",br="number, number";function ui(t){return Math.abs(t)}ui.signature=nr;function si(t,e){return t+e}si.signature=br;function Kf(t,e){return t-e}Kf.signature=br;function fi(t,e){return t*e}fi.signature=br;function Wf(t,e){return t/e}Wf.signature=br;function ci(t){return-t}ci.signature=nr;function jf(t){return t}jf.signature=nr;function ec(t){return Wa(t)}ec.signature=nr;function rc(t){return t*t*t}rc.signature=nr;function tc(t){return Math.exp(t)}tc.signature=nr;function nc(t){return ja(t)}nc.signature=nr;function ic(t,e){if(!se(t)||!se(e))throw new Error("Parameters in function gcd must be integer numbers");for(var r;e!==0;)r=t%e,t=e,e=r;return t<0?-t:t}ic.signature=br;function ac(t,e){if(!se(t)||!se(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}ac.signature=br;function oc(t){return Ja(t)}oc.signature=nr;function uc(t){return Qa(t)}uc.signature=nr;function sc(t){return Ka(t)}sc.signature=nr;function fc(t,e){if(e>0)return t-e*Math.floor(t/e);if(e===0)return t;throw new Error("Cannot calculate mod for a negative divisor")}fc.signature=br;function cc(t){return $a(t)}cc.signature=nr;function lc(t){return Math.sqrt(t)}lc.signature=nr;function pc(t){return t*t}pc.signature=nr;function mc(t,e){var r,n,i,o=0,l=1,m=1,f=0;if(!se(t)||!se(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),i=t-n*e,r=o,o=l-n*o,l=r,r=m,m=f-n*m,f=r,t=e,e=i;var u;return t<0?u=[-t,-l,-f]:u=[t,t?l:0,f],u}mc.signature=br;function hc(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}hc.signature=br;function vc(t){return Math.abs(t)}vc.signature=nr;function nn(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return nn(t,r)*nn(r+1,e)}function li(t,e){if(!se(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!se(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,i=e<r?r+1:e+1,o=2,l=e<r?e:r,m=i;m<=t;++m)for(n*=m;o<=l&&n%o===0;)n/=o,++o;return o<=l&&(n/=nn(o,l)),n}li.signature="number, number";var At="number";function dc(t){return se(t)}dc.signature=At;function Dc(t){return t<0}Dc.signature=At;function xc(t){return t>0}xc.signature=At;function pi(t){return t===0}pi.signature=At;function gc(t){return Number.isNaN(t)}gc.signature=At;var zo="isZero",yc=["typed"],mi=O(zo,yc,t=>{var{typed:e}=t;return e(zo,{number:pi,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>Xe(n,r))})});function Br(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function Po(t,e,r){return pr(t.re,e.re,r)&&pr(t.im,e.im,r)}var Ir=O("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}});var an="equalScalar",Ec=["typed","config"],hi=O(an,Ec,t=>{var{typed:e,config:r}=t,n=Ir({typed:e});return e(an,{"boolean, boolean":function(o,l){return o===l},"number, number":function(o,l){return pr(o,l,r.epsilon)},"BigNumber, BigNumber":function(o,l){return o.eq(l)||Br(o,l,r.epsilon)},"Fraction, Fraction":function(o,l){return o.equals(l)},"Complex, Complex":function(o,l){return Po(o,l,r.epsilon)}},n)}),a0=O(an,["typed","config"],t=>{var{typed:e,config:r}=t;return e(an,{"number, number":function(i,o){return pr(i,o,r.epsilon)}})});var wc="SparseMatrix",Ac=["typed","equalScalar","Matrix"],vi=O(wc,Ac,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(p,D){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(D&&!rr(D))throw new Error("Invalid datatype: "+D);if(ge(p))o(this,p,D);else if(p&&Ae(p.index)&&Ae(p.ptr)&&Ae(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=D||p.datatype;else if(Ae(p))l(this,p,D);else{if(p)throw new TypeError("Unsupported type of data ("+sr(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=D}}function o(p,D,x){D.type==="SparseMatrix"?(p._values=D._values?ye(D._values):void 0,p._index=ye(D._index),p._ptr=ye(D._ptr),p._size=ye(D._size),p._datatype=x||D._datatype):l(p,D.valueOf(),x||D._datatype)}function l(p,D,x){p._values=[],p._index=[],p._ptr=[],p._datatype=x;var y=D.length,g=0,A=r,w=0;if(rr(x)&&(A=e.find(r,[x,x])||r,w=e.convert(0,x)),y>0){var d=0;do{p._ptr.push(p._index.length);for(var E=0;E<y;E++){var C=D[E];if(Ae(C)){if(d===0&&g<C.length&&(g=C.length),d<C.length){var b=C[d];A(b,w)||(p._values.push(b),p._index.push(E))}}else d===0&&g<1&&(g=1),A(C,w)||(p._values.push(C),p._index.push(E))}d++}while(d<g)}p._ptr.push(p._index.length),p._size=[y,g]}i.prototype=new n,i.prototype.createSparseMatrix=function(p,D){return new i(p,D)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return et(this._values,sr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,D){return new i(p,D)},i.prototype.density=function(){var p=this._size[0],D=this._size[1];return p!==0&&D!==0?this._index.length/(p*D):0},i.prototype.subset=function(p,D,x){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return m(this,p);case 2:case 3:return f(this,p,D,x);default:throw new SyntaxError("Wrong number of arguments")}};function m(p,D){if(!Jr(D))throw new TypeError("Invalid index");var x=D.isScalar();if(x)return p.get(D.min());var y=D.size();if(y.length!==p._size.length)throw new le(y.length,p._size.length);var g,A,w,d,E=D.min(),C=D.max();for(g=0,A=p._size.length;g<A;g++)Me(E[g],p._size[g]),Me(C[g],p._size[g]);var b=p._values,T=p._index,S=p._ptr,R=D.dimension(0),q=D.dimension(1),L=[],I=[];R.forEach(function(N,X){I[N]=X[0],L[N]=!0});var F=b?[]:void 0,Y=[],U=[];return q.forEach(function(N){for(U.push(Y.length),w=S[N],d=S[N+1];w<d;w++)g=T[w],L[g]===!0&&(Y.push(I[g]),F&&F.push(b[w]))}),U.push(Y.length),new i({values:F,index:Y,ptr:U,size:y,datatype:p._datatype})}function f(p,D,x,y){if(!D||D.isIndex!==!0)throw new TypeError("Invalid index");var g=D.size(),A=D.isScalar(),w;if(ge(x)?(w=x.size(),x=x.toArray()):w=Ve(x),A){if(w.length!==0)throw new TypeError("Scalar expected");p.set(D.min(),x,y)}else{if(g.length!==1&&g.length!==2)throw new le(g.length,p._size.length,"<");if(w.length<g.length){for(var d=0,E=0;g[d]===1&&w[d]===1;)d++;for(;g[d]===1;)E++,d++;x=Zt(x,g.length,E,w)}if(!Kr(g,w))throw new le(g,w,">");if(g.length===1){var C=D.dimension(0);C.forEach(function(S,R){Me(S),p.set([S,0],x[R[0]],y)})}else{var b=D.dimension(0),T=D.dimension(1);b.forEach(function(S,R){Me(S),T.forEach(function(q,L){Me(q),p.set([S,q],x[R[0]][L[0]],y)})})}}return p}i.prototype.get=function(p){if(!Ae(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new le(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var D=p[0],x=p[1];Me(D,this._size[0]),Me(x,this._size[1]);var y=u(D,this._ptr[x],this._ptr[x+1],this._index);return y<this._ptr[x+1]&&this._index[y]===D?this._values[y]:0},i.prototype.set=function(p,D,x){if(!Ae(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new le(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var y=p[0],g=p[1],A=this._size[0],w=this._size[1],d=r,E=0;rr(this._datatype)&&(d=e.find(r,[this._datatype,this._datatype])||r,E=e.convert(0,this._datatype)),(y>A-1||g>w-1)&&(c(this,Math.max(y+1,A),Math.max(g+1,w),x),A=this._size[0],w=this._size[1]),Me(y,A),Me(g,w);var C=u(y,this._ptr[g],this._ptr[g+1],this._index);return C<this._ptr[g+1]&&this._index[C]===y?d(D,E)?a(C,g,this._values,this._index,this._ptr):this._values[C]=D:s(C,y,g,D,this._values,this._index,this._ptr),this};function u(p,D,x,y){if(x-D===0)return x;for(var g=D;g<x;g++)if(y[g]===p)return g;return D}function a(p,D,x,y,g){x.splice(p,1),y.splice(p,1);for(var A=D+1;A<g.length;A++)g[A]--}function s(p,D,x,y,g,A,w){g.splice(p,0,y),A.splice(p,0,D);for(var d=x+1;d<w.length;d++)w[d]++}i.prototype.resize=function(p,D,x){if(!Er(p))throw new TypeError("Array or Matrix expected");var y=p.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(y.length!==2)throw new Error("Only two dimensions matrix are supported");y.forEach(function(A){if(!be(A)||!se(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ee(y)+")")});var g=x?this.clone():this;return c(g,y[0],y[1],D)};function c(p,D,x,y){var g=y||0,A=r,w=0;rr(p._datatype)&&(A=e.find(r,[p._datatype,p._datatype])||r,w=e.convert(0,p._datatype),g=e.convert(g,p._datatype));var d=!A(g,w),E=p._size[0],C=p._size[1],b,T,S;if(x>C){for(T=C;T<x;T++)if(p._ptr[T]=p._values.length,d)for(b=0;b<E;b++)p._values.push(g),p._index.push(b);p._ptr[x]=p._values.length}else x<C&&(p._ptr.splice(x+1,C-x),p._values.splice(p._ptr[x],p._values.length),p._index.splice(p._ptr[x],p._index.length));if(C=x,D>E){if(d){var R=0;for(T=0;T<C;T++){p._ptr[T]=p._ptr[T]+R,S=p._ptr[T+1]+R;var q=0;for(b=E;b<D;b++,q++)p._values.splice(S+q,0,g),p._index.splice(S+q,0,b),R++}p._ptr[C]=p._values.length}}else if(D<E){var L=0;for(T=0;T<C;T++){p._ptr[T]=p._ptr[T]-L;var I=p._ptr[T],F=p._ptr[T+1]-L;for(S=I;S<F;S++)b=p._index[S],b>D-1&&(p._values.splice(S,1),p._index.splice(S,1),L++)}p._ptr[T]=p._values.length}return p._size[0]=D,p._size[1]=x,p}i.prototype.reshape=function(p,D){if(!Ae(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(N){if(!be(N)||!se(N)||N<=-2||N===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ee(p)+")")});var x=this._size[0]*this._size[1];p=gt(p,x);var y=p[0]*p[1];if(x!==y)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=D?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return g;for(var A=[],w=0;w<g._ptr.length;w++)for(var d=0;d<g._ptr[w+1]-g._ptr[w];d++)A.push(w);for(var E=g._values.slice(),C=g._index.slice(),b=0;b<g._index.length;b++){var T=C[b],S=A[b],R=T*g._size[1]+S;A[b]=R%p[1],C[b]=Math.floor(R/p[1])}g._values.length=0,g._index.length=0,g._ptr.length=p[1]+1,g._size=p.slice();for(var q=0;q<g._ptr.length;q++)g._ptr[q]=0;for(var L=0;L<E.length;L++){var I=C[L],F=A[L],Y=E[L],U=u(I,g._ptr[F],g._ptr[F+1],g._index);s(U,I,F,Y,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var p=new i({values:this._values?ye(this._values):void 0,index:ye(this._index),ptr:ye(this._ptr),size:ye(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,D){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var x=this,y=this._size[0],g=this._size[1],A=jt(p),w=function(E,C,b){return A===1?p(E):A===2?p(E,[C,b]):p(E,[C,b],x)};return h(this,0,y-1,0,g-1,w,D)};function h(p,D,x,y,g,A,w){var d=[],E=[],C=[],b=r,T=0;rr(p._datatype)&&(b=e.find(r,[p._datatype,p._datatype])||r,T=e.convert(0,p._datatype));for(var S=function(ee,K,we){ee=A(ee,K,we),b(ee,T)||(d.push(ee),E.push(K))},R=y;R<=g;R++){C.push(d.length);var q=p._ptr[R],L=p._ptr[R+1];if(w)for(var I=q;I<L;I++){var F=p._index[I];F>=D&&F<=x&&S(p._values[I],F-D,R-y)}else{for(var Y={},U=q;U<L;U++){var N=p._index[U];Y[N]=p._values[U]}for(var X=D;X<=x;X++){var Q=X in Y?Y[X]:0;S(Q,X-D,R-y)}}}return C.push(d.length),new i({values:d,index:E,ptr:C,size:[x-D+1,g-y+1]})}i.prototype.forEach=function(p,D){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var x=this,y=this._size[0],g=this._size[1],A=0;A<g;A++){var w=this._ptr[A],d=this._ptr[A+1];if(D)for(var E=w;E<d;E++){var C=this._index[E];p(this._values[E],[C,A],x)}else{for(var b={},T=w;T<d;T++){var S=this._index[T];b[S]=this._values[T]}for(var R=0;R<y;R++){var q=R in b?b[R]:0;p(q,[R,A],x)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],D=0;D<p;D++)for(var x=this._ptr[D],y=this._ptr[D+1],g=x;g<y;g++){var A=this._index[g];yield{value:this._values[g],index:[A,D]}}},i.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(p,D,x,y,g){var A=y[0],w=y[1],d=[],E,C;for(E=0;E<A;E++)for(d[E]=[],C=0;C<w;C++)d[E][C]=0;for(C=0;C<w;C++)for(var b=x[C],T=x[C+1],S=b;S<T;S++)E=D[S],d[E][C]=p?g?ye(p[S]):p[S]:1;return d}return i.prototype.format=function(p){for(var D=this._size[0],x=this._size[1],y=this.density(),g="Sparse Matrix ["+Ee(D,p)+" x "+Ee(x,p)+"] density: "+Ee(y,p)+`
`,A=0;A<x;A++)for(var w=this._ptr[A],d=this._ptr[A+1],E=w;E<d;E++){var C=this._index[E];g+=`
    (`+Ee(C,p)+", "+Ee(A,p)+") ==> "+(this._values?Ee(this._values[E],p):"X")}return g},i.prototype.toString=function(){return Ee(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(Fe(p)&&(p=p.toNumber()),!be(p)||!se(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var D=p>0?p:0,x=p<0?-p:0,y=this._size[0],g=this._size[1],A=Math.min(y-x,g-D),w=[],d=[],E=[];E[0]=0;for(var C=D;C<g&&w.length<A;C++)for(var b=this._ptr[C],T=this._ptr[C+1],S=b;S<T;S++){var R=this._index[S];if(R===C-D+x){w.push(this._values[S]),d[w.length-1]=R-x;break}}return E.push(w.length),new i({values:w,index:d,ptr:E,size:[A,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,D,x,y,g){if(!Ae(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(N){if(Fe(N)&&(N=N.toNumber()),!be(N)||!se(N)||N<1)throw new Error("Size values must be positive integers");return N}),x){if(Fe(x)&&(x=x.toNumber()),!be(x)||!se(x))throw new TypeError("The parameter k must be an integer number")}else x=0;var A=r,w=0;rr(g)&&(A=e.find(r,[g,g])||r,w=e.convert(0,g));var d=x>0?x:0,E=x<0?-x:0,C=p[0],b=p[1],T=Math.min(C-E,b-d),S;if(Ae(D)){if(D.length!==T)throw new Error("Invalid value array length");S=function(X){return D[X]}}else if(ge(D)){var R=D.size();if(R.length!==1||R[0]!==T)throw new Error("Invalid matrix length");S=function(X){return D.get([X])}}else S=function(){return D};for(var q=[],L=[],I=[],F=0;F<b;F++){I.push(q.length);var Y=F-d;if(Y>=0&&Y<T){var U=S(Y);A(U,w)||(L.push(Y+E),q.push(U))}}return I.push(q.length),new i({values:q,index:L,ptr:I,size:[C,b]})},i.prototype.swapRows=function(p,D){if(!be(p)||!se(p)||!be(D)||!se(D))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Me(p,this._size[0]),Me(D,this._size[0]),i._swapRows(p,D,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,D,x,y,g){for(var A=y[p],w=y[p+1],d=A;d<w;d++)g(x[d],D[d])},i._swapRows=function(p,D,x,y,g,A){for(var w=0;w<x;w++){var d=A[w],E=A[w+1],C=u(p,d,E,g),b=u(D,d,E,g);if(C<E&&b<E&&g[C]===p&&g[b]===D){if(y){var T=y[C];y[C]=y[b],y[b]=T}continue}if(C<E&&g[C]===p&&(b>=E||g[b]!==D)){var S=y?y[C]:void 0;g.splice(b,0,D),y&&y.splice(b,0,S),g.splice(b<=C?C+1:C,1),y&&y.splice(b<=C?C+1:C,1);continue}if(b<E&&g[b]===D&&(C>=E||g[C]!==p)){var R=y?y[b]:void 0;g.splice(C,0,p),y&&y.splice(C,0,R),g.splice(C<=b?b+1:b,1),y&&y.splice(C<=b?b+1:b,1)}}},i},{isClass:!0});var bc="number",Cc=["typed"];function _c(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:i}}else return null}function Tc(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var i=parseInt(t.fractionalPart[n],t.radix);r+=i/Math.pow(t.radix,n+1)}var o=e+r;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is no valid number');return o}var di=O(bc,Cc,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=_c(i);if(o)return Tc(o);var l=0,m=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);m&&(l=Number(m[2]),i=m[1]);var f=Number(i);if(isNaN(f))throw new SyntaxError('String "'+i+'" is no valid number');if(m){if(f>2**l-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));f>=2**(l-1)&&(f=f-2**l)}return f},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(n=>i=>Xe(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r});var Mc="bignumber",Fc=["typed","BigNumber"],Di=O(Mc,Fc,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var l=o[2],m=r(o[1]),f=new r(2).pow(Number(l));if(m.gt(f.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new r(2).pow(Number(l)-1);return m.gte(u)?m.sub(f):m}return new r(i)},BigNumber:function(i){return i},Fraction:function(i){return new r(i.n).div(i.d).times(i.s)},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(n=>i=>Xe(i,n))})});var Sc="complex",Nc=["typed","Complex"],xi=O(Sc,Nc,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(i){return new r(i,0)},"number, number":function(i,o){return new r(i,o)},"BigNumber, BigNumber":function(i,o){return new r(i.toNumber(),o.toNumber())},Fraction:function(i){return new r(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return r(i)},null:function(i){return r(0)},Object:function(i){if("re"in i&&"im"in i)return new r(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new r(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>Xe(i,n))})});var Bc="fraction",Ic=["typed","Fraction"],gi=O(Bc,Ic,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,o){return new r(i,o)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},Fraction:function(i){return i},Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>Xe(i,n))})});var ko="matrix",Rc=["typed","Matrix","DenseMatrix","SparseMatrix"],yi=O(ko,Rc,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(ko,{"":function(){return o([])},string:function(m){return o([],m)},"string, string":function(m,f){return o([],m,f)},Array:function(m){return o(m)},Matrix:function(m){return o(m,m.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(l,m,f){if(m==="dense"||m==="default"||m===void 0)return new n(l,f);if(m==="sparse")return new i(l,f);throw new TypeError("Unknown matrix type "+JSON.stringify(m)+".")}});var qo="unaryMinus",Oc=["typed"],Ei=O(qo,Oc,t=>{var{typed:e}=t;return e(qo,{number:ci,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>Xe(n,r,!0))})});var Vo="abs",Lc=["typed"],wi=O(Vo,Lc,t=>{var{typed:e}=t;return e(Vo,{number:ui,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),"Array | Matrix":e.referToSelf(r=>n=>Xe(n,r,!0))})});var Uo="addScalar",zc=["typed"],Ai=O(Uo,zc,t=>{var{typed:e}=t;return e(Uo,{"number, number":si,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(r,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var Pc="matAlgo11xS0s",kc=["typed","equalScalar"],Xo=O(Pc,kc,t=>{var{typed:e,equalScalar:r}=t;return function(i,o,l,m){var f=i._values,u=i._index,a=i._ptr,s=i._size,c=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],p,D=r,x=0,y=l;typeof c=="string"&&(p=c,D=e.find(r,[p,p]),x=e.convert(0,p),o=e.convert(o,p),y=e.find(l,[p,p]));for(var g=[],A=[],w=[],d=0;d<v;d++){w[d]=A.length;for(var E=a[d],C=a[d+1],b=E;b<C;b++){var T=u[b],S=m?y(o,f[b]):y(f[b],o);D(S,x)||(A.push(T),g.push(S))}}return w[v]=A.length,i.createSparseMatrix({values:g,index:A,ptr:w,size:[h,v],datatype:p})}});var qc="matAlgo12xSfs",Vc=["typed","DenseMatrix"],Rr=O(qc,Vc,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,o,l,m){var f=i._values,u=i._index,a=i._ptr,s=i._size,c=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],p,D=l;typeof c=="string"&&(p=c,o=e.convert(o,p),D=e.find(l,[p,p]));for(var x=[],y=[],g=[],A=0;A<v;A++){for(var w=A+1,d=a[A],E=a[A+1],C=d;C<E;C++){var b=u[C];y[b]=f[C],g[b]=w}for(var T=0;T<h;T++)A===0&&(x[T]=[]),g[T]===w?x[T][A]=m?D(o,y[T]):D(y[T],o):x[T][A]=m?D(o,0):D(0,o)}return new r({data:x,size:[h,v],datatype:p})}});var Uc="matAlgo14xDs",Xc=["typed"],on=O(Uc,Xc,t=>{var{typed:e}=t;return function(i,o,l,m){var f=i._data,u=i._size,a=i._datatype,s,c=l;typeof a=="string"&&(s=a,o=e.convert(o,s),c=e.find(l,[s,s]));var h=u.length>0?r(c,0,u,u[0],f,o,m):[];return i.createDenseMatrix({data:h,size:ye(u),datatype:s})};function r(n,i,o,l,m,f,u){var a=[];if(i===o.length-1)for(var s=0;s<l;s++)a[s]=u?n(f,m[s]):n(m[s],f);else for(var c=0;c<l;c++)a[c]=r(n,i+1,o,o[i+1],m[c],f,u);return a}});var Zc="matAlgo01xDSid",Hc=["typed"],un=O(Zc,Hc,t=>{var{typed:e}=t;return function(n,i,o,l){var m=n._data,f=n._size,u=n._datatype,a=i._values,s=i._index,c=i._ptr,h=i._size,v=i._datatype;if(f.length!==h.length)throw new le(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");if(!a)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=f[0],D=f[1],x=typeof u=="string"&&u===v?u:void 0,y=x?e.find(o,[x,x]):o,g,A,w=[];for(g=0;g<p;g++)w[g]=[];var d=[],E=[];for(A=0;A<D;A++){for(var C=A+1,b=c[A],T=c[A+1],S=b;S<T;S++)g=s[S],d[g]=l?y(a[S],m[g][A]):y(m[g][A],a[S]),E[g]=C;for(g=0;g<p;g++)E[g]===C?w[g][A]=d[g]:w[g][A]=m[g][A]}return n.createDenseMatrix({data:w,size:[p,D],datatype:x})}});var Gc="matAlgo04xSidSid",Yc=["typed","equalScalar"],Zo=O(Gc,Yc,t=>{var{typed:e,equalScalar:r}=t;return function(i,o,l){var m=i._values,f=i._index,u=i._ptr,a=i._size,s=i._datatype,c=o._values,h=o._index,v=o._ptr,p=o._size,D=o._datatype;if(a.length!==p.length)throw new le(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");var x=a[0],y=a[1],g,A=r,w=0,d=l;typeof s=="string"&&s===D&&(g=s,A=e.find(r,[g,g]),w=e.convert(0,g),d=e.find(l,[g,g]));var E=m&&c?[]:void 0,C=[],b=[],T=m&&c?[]:void 0,S=m&&c?[]:void 0,R=[],q=[],L,I,F,Y,U;for(I=0;I<y;I++){b[I]=C.length;var N=I+1;for(Y=u[I],U=u[I+1],F=Y;F<U;F++)L=f[F],C.push(L),R[L]=N,T&&(T[L]=m[F]);for(Y=v[I],U=v[I+1],F=Y;F<U;F++)if(L=h[F],R[L]===N){if(T){var X=d(T[L],c[F]);A(X,w)?R[L]=null:T[L]=X}}else C.push(L),q[L]=N,S&&(S[L]=c[F]);if(T&&S)for(F=b[I];F<C.length;)L=C[F],R[L]===N?(E[F]=T[L],F++):q[L]===N?(E[F]=S[L],F++):C.splice(F,1)}return b[y]=C.length,i.createSparseMatrix({values:E,index:C,ptr:b,size:[x,y],datatype:g})}});var $c="matAlgo10xSids",Qc=["typed","DenseMatrix"],sn=O($c,Qc,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,o,l,m){var f=i._values,u=i._index,a=i._ptr,s=i._size,c=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],p,D=l;typeof c=="string"&&(p=c,o=e.convert(o,p),D=e.find(l,[p,p]));for(var x=[],y=[],g=[],A=0;A<v;A++){for(var w=A+1,d=a[A],E=a[A+1],C=d;C<E;C++){var b=u[C];y[b]=f[C],g[b]=w}for(var T=0;T<h;T++)A===0&&(x[T]=[]),g[T]===w?x[T][A]=m?D(o,y[T]):D(y[T],o):x[T][A]=o}return new r({data:x,size:[h,v],datatype:p})}});var Jc="matAlgo13xDD",Kc=["typed"],Ho=O(Jc,Kc,t=>{var{typed:e}=t;return function(i,o,l){var m=i._data,f=i._size,u=i._datatype,a=o._data,s=o._size,c=o._datatype,h=[];if(f.length!==s.length)throw new le(f.length,s.length);for(var v=0;v<f.length;v++){if(f[v]!==s[v])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+s+")");h[v]=f[v]}var p,D=l;typeof u=="string"&&u===c&&(p=u,D=e.find(l,[p,p]));var x=h.length>0?r(D,0,h,h[0],m,a):[];return i.createDenseMatrix({data:x,size:h,datatype:p})};function r(n,i,o,l,m,f){var u=[];if(i===o.length-1)for(var a=0;a<l;a++)u[a]=n(m[a],f[a]);else for(var s=0;s<l;s++)u[s]=r(n,i+1,o,o[i+1],m[s],f[s]);return u}});var Wc="matrixAlgorithmSuite",jc=["typed","matrix"],yr=O(Wc,jc,t=>{var{typed:e,matrix:r}=t,n=Ho({typed:e}),i=on({typed:e});return function(l){var m=l.elop,f=l.SD||l.DS,u;m?(u={"DenseMatrix, DenseMatrix":(h,v)=>n(h,v,m),"Array, Array":(h,v)=>n(r(h),r(v),m).valueOf(),"Array, DenseMatrix":(h,v)=>n(r(h),v,m),"DenseMatrix, Array":(h,v)=>n(h,r(v),m)},l.SS&&(u["SparseMatrix, SparseMatrix"]=(h,v)=>l.SS(h,v,m,!1)),l.DS&&(u["DenseMatrix, SparseMatrix"]=(h,v)=>l.DS(h,v,m,!1),u["Array, SparseMatrix"]=(h,v)=>l.DS(r(h),v,m,!1)),f&&(u["SparseMatrix, DenseMatrix"]=(h,v)=>f(v,h,m,!0),u["SparseMatrix, Array"]=(h,v)=>f(r(v),h,m,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(v,p)=>n(v,p,h)),"Array, Array":e.referToSelf(h=>(v,p)=>n(r(v),r(p),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(v,p)=>n(r(v),p,h)),"DenseMatrix, Array":e.referToSelf(h=>(v,p)=>n(v,r(p),h))},l.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(v,p)=>l.SS(v,p,h,!1))),l.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(v,p)=>l.DS(v,p,h,!1)),u["Array, SparseMatrix"]=e.referToSelf(h=>(v,p)=>l.DS(r(v),p,h,!1))),f&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(v,p)=>f(p,v,h,!0)),u["SparseMatrix, Array"]=e.referToSelf(h=>(v,p)=>f(r(p),v,h,!0))));var a=l.scalar||"any",s=l.Ds||l.Ss;s&&(m?(u["DenseMatrix,"+a]=(h,v)=>i(h,v,m,!1),u[a+", DenseMatrix"]=(h,v)=>i(v,h,m,!0),u["Array,"+a]=(h,v)=>i(r(h),v,m,!1).valueOf(),u[a+", Array"]=(h,v)=>i(r(v),h,m,!0).valueOf()):(u["DenseMatrix,"+a]=e.referToSelf(h=>(v,p)=>i(v,p,h,!1)),u[a+", DenseMatrix"]=e.referToSelf(h=>(v,p)=>i(p,v,h,!0)),u["Array,"+a]=e.referToSelf(h=>(v,p)=>i(r(v),p,h,!1).valueOf()),u[a+", Array"]=e.referToSelf(h=>(v,p)=>i(r(p),v,h,!0).valueOf())));var c=l.sS!==void 0?l.sS:l.Ss;return m?(l.Ss&&(u["SparseMatrix,"+a]=(h,v)=>l.Ss(h,v,m,!1)),c&&(u[a+", SparseMatrix"]=(h,v)=>c(v,h,m,!0))):(l.Ss&&(u["SparseMatrix,"+a]=e.referToSelf(h=>(v,p)=>l.Ss(v,p,h,!1))),c&&(u[a+", SparseMatrix"]=e.referToSelf(h=>(v,p)=>c(p,v,h,!0)))),m&&m.signatures&&Xa(u,m.signatures),u}});var el="matAlgo03xDSf",rl=["typed"],Or=O(el,rl,t=>{var{typed:e}=t;return function(n,i,o,l){var m=n._data,f=n._size,u=n._datatype,a=i._values,s=i._index,c=i._ptr,h=i._size,v=i._datatype;if(f.length!==h.length)throw new le(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");if(!a)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=f[0],D=f[1],x,y=0,g=o;typeof u=="string"&&u===v&&(x=u,y=e.convert(0,x),g=e.find(o,[x,x]));for(var A=[],w=0;w<p;w++)A[w]=[];for(var d=[],E=[],C=0;C<D;C++){for(var b=C+1,T=c[C],S=c[C+1],R=T;R<S;R++){var q=s[R];d[q]=l?g(a[R],m[q][C]):g(m[q][C],a[R]),E[q]=b}for(var L=0;L<p;L++)E[L]===b?A[L][C]=d[L]:A[L][C]=l?g(y,m[L][C]):g(m[L][C],y)}return n.createDenseMatrix({data:A,size:[p,D],datatype:x})}});var tl="matAlgo05xSfSf",nl=["typed","equalScalar"],Go=O(tl,nl,t=>{var{typed:e,equalScalar:r}=t;return function(i,o,l){var m=i._values,f=i._index,u=i._ptr,a=i._size,s=i._datatype,c=o._values,h=o._index,v=o._ptr,p=o._size,D=o._datatype;if(a.length!==p.length)throw new le(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");var x=a[0],y=a[1],g,A=r,w=0,d=l;typeof s=="string"&&s===D&&(g=s,A=e.find(r,[g,g]),w=e.convert(0,g),d=e.find(l,[g,g]));var E=m&&c?[]:void 0,C=[],b=[],T=E?[]:void 0,S=E?[]:void 0,R=[],q=[],L,I,F,Y;for(I=0;I<y;I++){b[I]=C.length;var U=I+1;for(F=u[I],Y=u[I+1];F<Y;F++)L=f[F],C.push(L),R[L]=U,T&&(T[L]=m[F]);for(F=v[I],Y=v[I+1];F<Y;F++)L=h[F],R[L]!==U&&C.push(L),q[L]=U,S&&(S[L]=c[F]);if(E)for(F=b[I];F<C.length;){L=C[F];var N=R[L],X=q[L];if(N===U||X===U){var Q=N===U?T[L]:w,oe=X===U?S[L]:w,ee=d(Q,oe);A(ee,w)?C.splice(F,1):(E.push(ee),F++)}}}return b[y]=C.length,i.createSparseMatrix({values:E,index:C,ptr:b,size:[x,y],datatype:g})}});var il="multiplyScalar",al=["typed"],bi=O(il,al,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":fi,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})});var Yo="multiply",ol=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Ci=O(Yo,ol,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:o,dot:l}=t,m=Xo({typed:e,equalScalar:o}),f=on({typed:e});function u(w,d){switch(w.length){case 1:switch(d.length){case 1:if(w[0]!==d[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==d[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+d[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+d.length+" dimensions)")}break;case 2:switch(d.length){case 1:if(w[1]!==d[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+d[0]+")");break;case 2:if(w[1]!==d[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+d[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+d.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function a(w,d,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return l(w,d)}function s(w,d){if(d.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return c(w,d)}function c(w,d){var E=w._data,C=w._size,b=w._datatype,T=d._data,S=d._size,R=d._datatype,q=C[0],L=S[1],I,F=n,Y=i;b&&R&&b===R&&typeof b=="string"&&(I=b,F=e.find(n,[I,I]),Y=e.find(i,[I,I]));for(var U=[],N=0;N<L;N++){for(var X=Y(E[0],T[0][N]),Q=1;Q<q;Q++)X=F(X,Y(E[Q],T[Q][N]));U[N]=X}return w.createDenseMatrix({data:U,size:[L],datatype:I})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":y}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":D,"DenseMatrix, SparseMatrix":x,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":A});function p(w,d){var E=w._data,C=w._size,b=w._datatype,T=d._data,S=d._datatype,R=C[0],q=C[1],L,I=n,F=i;b&&S&&b===S&&typeof b=="string"&&(L=b,I=e.find(n,[L,L]),F=e.find(i,[L,L]));for(var Y=[],U=0;U<R;U++){for(var N=E[U],X=F(N[0],T[0]),Q=1;Q<q;Q++)X=I(X,F(N[Q],T[Q]));Y[U]=X}return w.createDenseMatrix({data:Y,size:[R],datatype:L})}function D(w,d){var E=w._data,C=w._size,b=w._datatype,T=d._data,S=d._size,R=d._datatype,q=C[0],L=C[1],I=S[1],F,Y=n,U=i;b&&R&&b===R&&typeof b=="string"&&(F=b,Y=e.find(n,[F,F]),U=e.find(i,[F,F]));for(var N=[],X=0;X<q;X++){var Q=E[X];N[X]=[];for(var oe=0;oe<I;oe++){for(var ee=U(Q[0],T[0][oe]),K=1;K<L;K++)ee=Y(ee,U(Q[K],T[K][oe]));N[X][oe]=ee}}return w.createDenseMatrix({data:N,size:[q,I],datatype:F})}function x(w,d){var E=w._data,C=w._size,b=w._datatype,T=d._values,S=d._index,R=d._ptr,q=d._size,L=d._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var I=C[0],F=q[1],Y,U=n,N=i,X=o,Q=0;b&&L&&b===L&&typeof b=="string"&&(Y=b,U=e.find(n,[Y,Y]),N=e.find(i,[Y,Y]),X=e.find(o,[Y,Y]),Q=e.convert(0,Y));for(var oe=[],ee=[],K=[],we=d.createSparseMatrix({values:oe,index:ee,ptr:K,size:[I,F],datatype:Y}),pe=0;pe<F;pe++){K[pe]=ee.length;var ae=R[pe],de=R[pe+1];if(de>ae)for(var me=0,ne=0;ne<I;ne++){for(var Se=ne+1,Ce=void 0,ue=ae;ue<de;ue++){var xe=S[ue];me!==Se?(Ce=N(E[ne][xe],T[ue]),me=Se):Ce=U(Ce,N(E[ne][xe],T[ue]))}me===Se&&!X(Ce,Q)&&(ee.push(ne),oe.push(Ce))}}return K[F]=ee.length,we}function y(w,d){var E=w._values,C=w._index,b=w._ptr,T=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var S=d._data,R=d._datatype,q=w._size[0],L=d._size[0],I=[],F=[],Y=[],U,N=n,X=i,Q=o,oe=0;T&&R&&T===R&&typeof T=="string"&&(U=T,N=e.find(n,[U,U]),X=e.find(i,[U,U]),Q=e.find(o,[U,U]),oe=e.convert(0,U));var ee=[],K=[];Y[0]=0;for(var we=0;we<L;we++){var pe=S[we];if(!Q(pe,oe))for(var ae=b[we],de=b[we+1],me=ae;me<de;me++){var ne=C[me];K[ne]?ee[ne]=N(ee[ne],X(pe,E[me])):(K[ne]=!0,F.push(ne),ee[ne]=X(pe,E[me]))}}for(var Se=F.length,Ce=0;Ce<Se;Ce++){var ue=F[Ce];I[Ce]=ee[ue]}return Y[1]=F.length,w.createSparseMatrix({values:I,index:F,ptr:Y,size:[q,1],datatype:U})}function g(w,d){var E=w._values,C=w._index,b=w._ptr,T=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var S=d._data,R=d._datatype,q=w._size[0],L=d._size[0],I=d._size[1],F,Y=n,U=i,N=o,X=0;T&&R&&T===R&&typeof T=="string"&&(F=T,Y=e.find(n,[F,F]),U=e.find(i,[F,F]),N=e.find(o,[F,F]),X=e.convert(0,F));for(var Q=[],oe=[],ee=[],K=w.createSparseMatrix({values:Q,index:oe,ptr:ee,size:[q,I],datatype:F}),we=[],pe=[],ae=0;ae<I;ae++){ee[ae]=oe.length;for(var de=ae+1,me=0;me<L;me++){var ne=S[me][ae];if(!N(ne,X))for(var Se=b[me],Ce=b[me+1],ue=Se;ue<Ce;ue++){var xe=C[ue];pe[xe]!==de?(pe[xe]=de,oe.push(xe),we[xe]=U(ne,E[ue])):we[xe]=Y(we[xe],U(ne,E[ue]))}}for(var Re=ee[ae],ir=oe.length,Ze=Re;Ze<ir;Ze++){var De=oe[Ze];Q[Ze]=we[De]}}return ee[I]=oe.length,K}function A(w,d){var E=w._values,C=w._index,b=w._ptr,T=w._datatype,S=d._values,R=d._index,q=d._ptr,L=d._datatype,I=w._size[0],F=d._size[1],Y=E&&S,U,N=n,X=i;T&&L&&T===L&&typeof T=="string"&&(U=T,N=e.find(n,[U,U]),X=e.find(i,[U,U]));for(var Q=Y?[]:void 0,oe=[],ee=[],K=w.createSparseMatrix({values:Q,index:oe,ptr:ee,size:[I,F],datatype:U}),we=Y?[]:void 0,pe=[],ae,de,me,ne,Se,Ce,ue,xe,Re=0;Re<F;Re++){ee[Re]=oe.length;var ir=Re+1;for(Se=q[Re],Ce=q[Re+1],ne=Se;ne<Ce;ne++)if(xe=R[ne],Y)for(de=b[xe],me=b[xe+1],ae=de;ae<me;ae++)ue=C[ae],pe[ue]!==ir?(pe[ue]=ir,oe.push(ue),we[ue]=X(S[ne],E[ae])):we[ue]=N(we[ue],X(S[ne],E[ae]));else for(de=b[xe],me=b[xe+1],ae=de;ae<me;ae++)ue=C[ae],pe[ue]!==ir&&(pe[ue]=ir,oe.push(ue));if(Y)for(var Ze=ee[Re],De=oe.length,Ne=Ze;Ne<De;Ne++){var ar=oe[Ne];Q[Ne]=we[ar]}}return ee[F]=oe.length,K}return e(Yo,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(d,E)=>{u(Ve(d),Ve(E));var C=w(r(d),r(E));return ge(C)?C.valueOf():C}),"Matrix, Matrix":function(d,E){var C=d.size(),b=E.size();return u(C,b),C.length===1?b.length===1?a(d,E,C[0]):s(d,E):b.length===1?h(d,E):v(d,E)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(d,E)=>w(d,r(E))),"Array, Matrix":e.referToSelf(w=>(d,E)=>w(r(d,E.storage()),E)),"SparseMatrix, any":function(d,E){return m(d,E,i,!1)},"DenseMatrix, any":function(d,E){return f(d,E,i,!1)},"any, SparseMatrix":function(d,E){return m(E,d,i,!0)},"any, DenseMatrix":function(d,E){return f(E,d,i,!0)},"Array, any":function(d,E){return f(r(d),E,i,!1).valueOf()},"any, Array":function(d,E){return f(r(E),d,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(d,E,C)=>{for(var b=w(d,E),T=0;T<C.length;T++)b=w(b,C[T]);return b})})});var $o="subtract",ul=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],_i=O($o,ul,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:o,DenseMatrix:l}=t,m=un({typed:e}),f=Or({typed:e}),u=Go({typed:e,equalScalar:n}),a=sn({typed:e,DenseMatrix:l}),s=Rr({typed:e,DenseMatrix:l}),c=yr({typed:e,matrix:r});return e($o,{"number, number":(h,v)=>h-v,"Complex, Complex":(h,v)=>h.sub(v),"BigNumber, BigNumber":(h,v)=>h.minus(v),"Fraction, Fraction":(h,v)=>h.sub(v),"Unit, Unit":e.referToSelf(h=>(v,p)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(p.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(p))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(h,[D.valueType(),p.valueType()])(D.value,p.value),D.fixPrefix=!1,D})},c({SS:u,DS:m,SD:f,Ss:s,sS:a}))});var sl="matAlgo07xSSf",fl=["typed","DenseMatrix"],nt=O(sl,fl,t=>{var{typed:e,DenseMatrix:r}=t;return function(o,l,m){var f=o._size,u=o._datatype,a=l._size,s=l._datatype;if(f.length!==a.length)throw new le(f.length,a.length);if(f[0]!==a[0]||f[1]!==a[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+a+")");var c=f[0],h=f[1],v,p=0,D=m;typeof u=="string"&&u===s&&(v=u,p=e.convert(0,v),D=e.find(m,[v,v]));var x,y,g=[];for(x=0;x<c;x++)g[x]=[];var A=[],w=[],d=[],E=[];for(y=0;y<h;y++){var C=y+1;for(n(o,y,d,A,C),n(l,y,E,w,C),x=0;x<c;x++){var b=d[x]===C?A[x]:p,T=E[x]===C?w[x]:p;g[x][y]=D(b,T)}}return new r({data:g,size:[c,h],datatype:v})};function n(i,o,l,m,f){for(var u=i._values,a=i._index,s=i._ptr,c=s[o],h=s[o+1];c<h;c++){var v=a[c];l[v]=f,m[v]=u[c]}}});var Qo="conj",cl=["typed"],Ti=O(Qo,cl,t=>{var{typed:e}=t;return e(Qo,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>Xe(n,r))})});var Jo="identity",ll=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Mi=O(Jo,ll,t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:o,SparseMatrix:l}=t;return e(Jo,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(a){return n(a)},"number | BigNumber":function(a){return f(a,a,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(a,s){return f(a,a,s)},"number | BigNumber, number | BigNumber":function(a,s){return f(a,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(a,s,c){return f(a,s,c)},Array:function(a){return m(a)},"Array, string":function(a,s){return m(a,s)},Matrix:function(a){return m(a.valueOf(),a.storage())},"Matrix, string":function(a,s){return m(a.valueOf(),s)}});function m(u,a){switch(u.length){case 0:return a?n(a):[];case 1:return f(u[0],u[0],a);case 2:return f(u[0],u[1],a);default:throw new Error("Vector containing two values expected")}}function f(u,a,s){var c=Fe(u)||Fe(a)?i:null;if(Fe(u)&&(u=u.toNumber()),Fe(a)&&(a=a.toNumber()),!se(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!se(a)||a<1)throw new Error("Parameters in function identity must be positive integers");var h=c?new i(1):1,v=c?new c(0):0,p=[u,a];if(s){if(s==="sparse")return l.diagonal(p,h,0,v);if(s==="dense")return o.diagonal(p,h,0,v);throw new TypeError('Unknown matrix type "'.concat(s,'"'))}for(var D=Ur([],p,v),x=u<a?u:a,y=0;y<x;y++)D[y][y]=h;return D}});function Ko(){throw new Error('No "bignumber" implementation available')}function Wo(){throw new Error('No "fraction" implementation available')}function jo(){throw new Error('No "matrix" implementation available')}var eu="size",pl=["typed","config","?matrix"],Fi=O(eu,pl,t=>{var{typed:e,config:r,matrix:n}=t;return e(eu,{Matrix:function(o){return o.create(o.size())},Array:Ve,string:function(o){return r.matrix==="Array"?[o.length]:n([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return r.matrix==="Array"?[]:n?n([]):jo()}})});var ru="transpose",ml=["typed","matrix"],Si=O(ru,ml,t=>{var{typed:e,matrix:r}=t;return e(ru,{Array:l=>n(r(l)).valueOf(),Matrix:n,any:ye});function n(l){var m=l.size(),f;switch(m.length){case 1:f=l.clone();break;case 2:{var u=m[0],a=m[1];if(a===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Ee(m)+")");switch(l.storage()){case"dense":f=i(l,u,a);break;case"sparse":f=o(l,u,a);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Ee(m)+")")}return f}function i(l,m,f){for(var u=l._data,a=[],s,c=0;c<f;c++){s=a[c]=[];for(var h=0;h<m;h++)s[h]=ye(u[h][c])}return l.createDenseMatrix({data:a,size:[f,m],datatype:l._datatype})}function o(l,m,f){for(var u=l._values,a=l._index,s=l._ptr,c=u?[]:void 0,h=[],v=[],p=[],D=0;D<m;D++)p[D]=0;var x,y,g;for(x=0,y=a.length;x<y;x++)p[a[x]]++;for(var A=0,w=0;w<m;w++)v.push(A),A+=p[w],p[w]=v[w];for(v.push(A),g=0;g<f;g++)for(var d=s[g],E=s[g+1],C=d;C<E;C++){var b=p[a[C]]++;h[b]=g,u&&(c[b]=ye(u[C]))}return l.createSparseMatrix({values:c,index:h,ptr:v,size:[f,m],datatype:l._datatype})}});var tu="zeros",hl=["typed","config","matrix","BigNumber"],Ni=O(tu,hl,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(tu,{"":function(){return r.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var a=u[u.length-1];if(typeof a=="string"){var s=u.pop();return o(u,s)}else return r.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var a=u.storage();return o(u.valueOf(),a)},"Array | Matrix, string":function(u,a){return o(u.valueOf(),a)}});function o(f,u){var a=l(f),s=a?new i(0):0;if(m(f),u){var c=n(u);return f.length>0?c.resize(f,s):c}else{var h=[];return f.length>0?Ur(h,f,s):h}}function l(f){var u=!1;return f.forEach(function(a,s,c){Fe(a)&&(u=!0,c[s]=a.toNumber())}),u}function m(f){f.forEach(function(u){if(typeof u!="number"||!se(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}});function it(t,e,r){var n;return String(t).indexOf("Unexpected type")!==-1?(n=arguments.length>2?" (type: "+sr(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).indexOf("complex numbers")!==-1?(n=arguments.length>2?" (type: "+sr(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var vl="numeric",dl=["number","?bignumber","?fraction"],Bi=O(vl,dl,t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:l=>e(l),BigNumber:r?l=>r(l):Ko,Fraction:n?l=>n(l):Wo};return function(m){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var a=sr(m);if(!(a in i))throw new TypeError("Cannot convert "+m+' of type "'+a+'"; valid input types are '+Object.keys(i).join(", "));if(!(f in o))throw new TypeError("Cannot convert "+m+' to type "'+f+'"; valid output types are '+Object.keys(o).join(", "));return f===a?m:o[f](m)}});var nu="divideScalar",Dl=["typed","numeric"],Ii=O(nu,Dl,t=>{var{typed:e,numeric:r}=t;return e(nu,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})});function at(t){var{DenseMatrix:e}=t;return function(n,i,o){var l=n.size();if(l.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Ee(l)+")");var m=l[0],f=l[1];if(m!==f)throw new RangeError("Matrix must be square (size: "+Ee(l)+")");var u=[];if(ge(i)){var a=i.size(),s=i._data;if(a.length===1){if(a[0]!==m)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var c=0;c<m;c++)u[c]=[s[c]];return new e({data:u,size:[m,1],datatype:i._datatype})}if(a.length===2){if(a[0]!==m||a[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(qt(i)){if(o){u=[];for(var h=0;h<m;h++)u[h]=[s[h][0]];return new e({data:u,size:[m,1],datatype:i._datatype})}return i}if(Vt(i)){for(var v=0;v<m;v++)u[v]=[0];for(var p=i._values,D=i._index,x=i._ptr,y=x[1],g=x[0];g<y;g++){var A=D[g];u[A][0]=p[g]}return new e({data:u,size:[m,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Ae(i)){var w=Ve(i);if(w.length===1){if(w[0]!==m)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<m;d++)u[d]=[i[d]];return new e({data:u,size:[m,1]})}if(w.length===2){if(w[0]!==m||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<m;E++)u[E]=[i[E][0]];return new e({data:u,size:[m,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var iu="lsolve",xl=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Ri=O(iu,xl,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:l,DenseMatrix:m}=t,f=at({DenseMatrix:m});return e(iu,{"SparseMatrix, Array | Matrix":function(c,h){return a(c,h)},"DenseMatrix, Array | Matrix":function(c,h){return u(c,h)},"Array, Array | Matrix":function(c,h){var v=r(c),p=u(v,h);return p.valueOf()}});function u(s,c){c=f(s,c,!0);for(var h=c._data,v=s._size[0],p=s._size[1],D=[],x=s._data,y=0;y<p;y++){var g=h[y][0]||0,A=void 0;if(l(g,0))A=0;else{var w=x[y][y];if(l(w,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(g,w);for(var d=y+1;d<v;d++)h[d]=[o(h[d][0]||0,i(A,x[d][y]))]}D[y]=[A]}return new m({data:D,size:[v,1]})}function a(s,c){c=f(s,c,!0);for(var h=c._data,v=s._size[0],p=s._size[1],D=s._values,x=s._index,y=s._ptr,g=[],A=0;A<p;A++){var w=h[A][0]||0;if(l(w,0))g[A]=[0];else{for(var d=0,E=[],C=[],b=y[A],T=y[A+1],S=b;S<T;S++){var R=x[S];R===A?d=D[S]:R>A&&(E.push(D[S]),C.push(R))}if(l(d,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var q=n(w,d),L=0,I=C.length;L<I;L++){var F=C[L];h[F]=[o(h[F][0]||0,i(q,E[L]))]}g[A]=[q]}}return new m({data:g,size:[v,1]})}});var au="usolve",gl=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Oi=O(au,gl,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:l,DenseMatrix:m}=t,f=at({DenseMatrix:m});return e(au,{"SparseMatrix, Array | Matrix":function(c,h){return a(c,h)},"DenseMatrix, Array | Matrix":function(c,h){return u(c,h)},"Array, Array | Matrix":function(c,h){var v=r(c),p=u(v,h);return p.valueOf()}});function u(s,c){c=f(s,c,!0);for(var h=c._data,v=s._size[0],p=s._size[1],D=[],x=s._data,y=p-1;y>=0;y--){var g=h[y][0]||0,A=void 0;if(l(g,0))A=0;else{var w=x[y][y];if(l(w,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(g,w);for(var d=y-1;d>=0;d--)h[d]=[o(h[d][0]||0,i(A,x[d][y]))]}D[y]=[A]}return new m({data:D,size:[v,1]})}function a(s,c){c=f(s,c,!0);for(var h=c._data,v=s._size[0],p=s._size[1],D=s._values,x=s._index,y=s._ptr,g=[],A=p-1;A>=0;A--){var w=h[A][0]||0;if(l(w,0))g[A]=[0];else{for(var d=0,E=[],C=[],b=y[A],T=y[A+1],S=T-1;S>=b;S--){var R=x[S];R===A?d=D[S]:R<A&&(E.push(D[S]),C.push(R))}if(l(d,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var q=n(w,d),L=0,I=C.length;L<I;L++){var F=C[L];h[F]=[o(h[F][0],i(q,E[L]))]}g[A]=[q]}}return new m({data:g,size:[v,1]})}});var fn="smaller",yl=["typed","config","matrix","DenseMatrix"],Li=O(fn,yl,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,o=Or({typed:e}),l=nt({typed:e,DenseMatrix:i}),m=Rr({typed:e,DenseMatrix:i}),f=yr({typed:e,matrix:n}),u=Ir({typed:e});return e(fn,El({typed:e,config:r}),{"boolean, boolean":(a,s)=>a<s,"BigNumber, BigNumber":function(s,c){return s.lt(c)&&!Br(s,c,r.epsilon)},"Fraction, Fraction":(a,s)=>a.compare(s)===-1,"Complex, Complex":function(s,c){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:o,Ss:m}))}),El=O(fn,["typed","config"],t=>{var{typed:e,config:r}=t;return e(fn,{"number, number":function(i,o){return i<o&&!pr(i,o,r.epsilon)}})});var cn="larger",wl=["typed","config","matrix","DenseMatrix"],zi=O(cn,wl,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,o=Or({typed:e}),l=nt({typed:e,DenseMatrix:i}),m=Rr({typed:e,DenseMatrix:i}),f=yr({typed:e,matrix:n}),u=Ir({typed:e});return e(cn,Al({typed:e,config:r}),{"boolean, boolean":(a,s)=>a>s,"BigNumber, BigNumber":function(s,c){return s.gt(c)&&!Br(s,c,r.epsilon)},"Fraction, Fraction":(a,s)=>a.compare(s)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:o,Ss:m}))}),Al=O(cn,["typed","config"],t=>{var{typed:e,config:r}=t;return e(cn,{"number, number":function(i,o){return i>o&&!pr(i,o,r.epsilon)}})});var ln="largerEq",bl=["typed","config","matrix","DenseMatrix"],Pi=O(ln,bl,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,o=Or({typed:e}),l=nt({typed:e,DenseMatrix:i}),m=Rr({typed:e,DenseMatrix:i}),f=yr({typed:e,matrix:n}),u=Ir({typed:e});return e(ln,Cl({typed:e,config:r}),{"boolean, boolean":(a,s)=>a>=s,"BigNumber, BigNumber":function(s,c){return s.gte(c)||Br(s,c,r.epsilon)},"Fraction, Fraction":(a,s)=>a.compare(s)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:o,Ss:m}))}),Cl=O(ln,["typed","config"],t=>{var{typed:e,config:r}=t;return e(ln,{"number, number":function(i,o){return i>=o||pr(i,o,r.epsilon)}})});var ou="max",_l=["typed","config","numeric","larger"],ki=O(ou,_l,t=>{var{typed:e,config:r,numeric:n,larger:i}=t;return e(ou,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,u){return tn(f,u.valueOf(),o)},"...":function(f){if(rn(f))throw new TypeError("Scalar values expected in function max");return l(f)}});function o(m,f){try{return i(m,f)?m:f}catch(u){throw it(u,"max",f)}}function l(m){var f;if(wt(m,function(u){try{isNaN(u)&&typeof u=="number"?f=NaN:(f===void 0||i(u,f))&&(f=u)}catch(a){throw it(a,"max",u)}}),f===void 0)throw new Error("Cannot calculate max of an empty array");return typeof f=="string"&&(f=n(f,r.number)),f}});var uu="min",Tl=["typed","config","numeric","smaller"],qi=O(uu,Tl,t=>{var{typed:e,config:r,numeric:n,smaller:i}=t;return e(uu,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,u){return tn(f,u.valueOf(),o)},"...":function(f){if(rn(f))throw new TypeError("Scalar values expected in function min");return l(f)}});function o(m,f){try{return i(m,f)?m:f}catch(u){throw it(u,"min",f)}}function l(m){var f;if(wt(m,function(u){try{isNaN(u)&&typeof u=="number"?f=NaN:(f===void 0||i(u,f))&&(f=u)}catch(a){throw it(a,"min",u)}}),f===void 0)throw new Error("Cannot calculate min of an empty array");return typeof f=="string"&&(f=n(f,r.number)),f}});var Ml="FibonacciHeap",Fl=["smaller","larger"],Vi=O(Ml,Fl,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(a,s){var c={key:a,value:s,degree:0};if(this._minimum){var h=this._minimum;c.left=h,c.right=h.right,h.right=c,c.right.left=c,e(a,h.key)&&(this._minimum=c)}else c.left=c,c.right=c,this._minimum=c;return this._size++,c},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var a=this._minimum;if(a===null)return a;for(var s=this._minimum,c=a.degree,h=a.child;c>0;){var v=h.right;h.left.right=h.right,h.right.left=h.left,h.left=s,h.right=s.right,s.right=h,h.right.left=h,h.parent=null,h=v,c--}return a.left.right=a.right,a.right.left=a.left,a===a.right?s=null:(s=a.right,s=u(s,this._size)),this._size--,this._minimum=s,a},i.prototype.remove=function(a){this._minimum=o(this._minimum,a,-1),this.extractMinimum()};function o(a,s,c){s.key=c;var h=s.parent;return h&&e(s.key,h.key)&&(l(a,s,h),m(a,h)),e(s.key,a.key)&&(a=s),a}function l(a,s,c){s.left.right=s.right,s.right.left=s.left,c.degree--,c.child===s&&(c.child=s.right),c.degree===0&&(c.child=null),s.left=a,s.right=a.right,a.right=s,s.right.left=s,s.parent=null,s.mark=!1}function m(a,s){var c=s.parent;!c||(s.mark?(l(a,s,c),m(c)):s.mark=!0)}var f=function(s,c){s.left.right=s.right,s.right.left=s.left,s.parent=c,c.child?(s.left=c.child,s.right=c.child.right,c.child.right=s,s.right.left=s):(c.child=s,s.right=s,s.left=s),c.degree++,s.mark=!1};function u(a,s){var c=Math.floor(Math.log(s)*n)+1,h=new Array(c),v=0,p=a;if(p)for(v++,p=p.right;p!==a;)v++,p=p.right;for(var D;v>0;){for(var x=p.degree,y=p.right;D=h[x],!!D;){if(r(p.key,D.key)){var g=D;D=p,p=g}f(D,p),h[x]=null,x++}h[x]=p,p=y,v--}a=null;for(var A=0;A<c;A++)D=h[A],D&&(a?(D.left.right=D.right,D.right.left=D.left,D.left=a,D.right=a.right,a.right=D,D.right.left=D,e(D.key,a.key)&&(a=D)):a=D);return a}return i},{isClass:!0});var Sl="Spa",Nl=["addScalar","equalScalar","FibonacciHeap"],Ui=O(Sl,Nl,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,l){if(this._values[o])this._values[o].value=l;else{var m=this._heap.insert(o,l);this._values[o]=m}},i.prototype.get=function(o){var l=this._values[o];return l?l.value:0},i.prototype.accumulate=function(o,l){var m=this._values[o];m?m.value=e(m.value,l):(m=this._heap.insert(o,l),this._values[o]=m)},i.prototype.forEach=function(o,l,m){var f=this._heap,u=this._values,a=[],s=f.extractMinimum();for(s&&a.push(s);s&&s.key<=l;)s.key>=o&&(r(s.value,0)||m(s.key,s.value,this)),s=f.extractMinimum(),s&&a.push(s);for(var c=0;c<a.length;c++){var h=a[c];s=f.insert(h.key,h.value),u[s.key]=s}},i.prototype.swap=function(o,l){var m=this._values[o],f=this._values[l];if(!m&&f)m=this._heap.insert(o,f.value),this._heap.remove(f),this._values[o]=m,this._values[l]=void 0;else if(m&&!f)f=this._heap.insert(l,m.value),this._heap.remove(m),this._values[l]=f,this._values[o]=void 0;else if(m&&f){var u=m.value;m.value=f.value,f.value=u}},i},{isClass:!0});var su="add",Bl=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],Xi=O(su,Bl,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:o,SparseMatrix:l}=t,m=un({typed:e}),f=Zo({typed:e,equalScalar:i}),u=sn({typed:e,DenseMatrix:o}),a=yr({typed:e,matrix:r});return e(su,{"any, any":n,"any, any, ...any":e.referToSelf(s=>(c,h,v)=>{for(var p=s(c,h),D=0;D<v.length;D++)p=s(p,v[D]);return p})},a({elop:n,DS:m,SS:f,Ss:u}))});var fu="dot",Il=["typed","addScalar","multiplyScalar","conj","size"],Zi=O(fu,Il,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:o}=t;return e(fu,{"Array | DenseMatrix, Array | DenseMatrix":m,"SparseMatrix, SparseMatrix":f});function l(a,s){var c=u(a),h=u(s),v,p;if(c.length===1)v=c[0];else if(c.length===2&&c[1]===1)v=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(v!==p)throw new RangeError("Vectors must have equal length ("+v+" != "+p+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function m(a,s){var c=l(a,s),h=ge(a)?a._data:a,v=ge(a)?a._datatype:void 0,p=ge(s)?s._data:s,D=ge(s)?s._datatype:void 0,x=u(a).length===2,y=u(s).length===2,g=r,A=n;if(v&&D&&v===D&&typeof v=="string"){var w=v;g=e.find(r,[w,w]),A=e.find(n,[w,w])}if(!x&&!y){for(var d=A(i(h[0]),p[0]),E=1;E<c;E++)d=g(d,A(i(h[E]),p[E]));return d}if(!x&&y){for(var C=A(i(h[0]),p[0][0]),b=1;b<c;b++)C=g(C,A(i(h[b]),p[b][0]));return C}if(x&&!y){for(var T=A(i(h[0][0]),p[0]),S=1;S<c;S++)T=g(T,A(i(h[S][0]),p[S]));return T}if(x&&y){for(var R=A(i(h[0][0]),p[0][0]),q=1;q<c;q++)R=g(R,A(i(h[q][0]),p[q][0]));return R}}function f(a,s){l(a,s);for(var c=a._index,h=a._values,v=s._index,p=s._values,D=0,x=r,y=n,g=0,A=0;g<c.length&&A<v.length;){var w=c[g],d=v[A];if(w<d){g++;continue}if(w>d){A++;continue}w===d&&(D=x(D,y(h[g],p[A])),g++,A++)}return D}function u(a){return ge(a)?a.size():o(a)}});var cu="lup",Rl=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Hi=O(cu,Rl,t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:o,multiplyScalar:l,subtract:m,larger:f,equalScalar:u,unaryMinus:a,DenseMatrix:s,SparseMatrix:c,Spa:h}=t;return e(cu,{DenseMatrix:function(x){return v(x)},SparseMatrix:function(x){return p(x)},Array:function(x){var y=r(x),g=v(y);return{L:g.L.valueOf(),U:g.U.valueOf(),p:g.p}}});function v(D){var x=D._size[0],y=D._size[1],g=Math.min(x,y),A=ye(D._data),w=[],d=[x,g],E=[],C=[g,y],b,T,S,R=[];for(b=0;b<x;b++)R[b]=b;for(T=0;T<y;T++){if(T>0)for(b=0;b<x;b++){var q=Math.min(b,T),L=0;for(S=0;S<q;S++)L=i(L,l(A[b][S],A[S][T]));A[b][T]=m(A[b][T],L)}var I=T,F=0,Y=0;for(b=T;b<x;b++){var U=A[b][T],N=n(U);f(N,F)&&(I=b,F=N,Y=U)}if(T!==I&&(R[T]=[R[I],R[I]=R[T]][0],s._swapRows(T,I,A)),T<x)for(b=T+1;b<x;b++){var X=A[b][T];u(X,0)||(A[b][T]=o(A[b][T],Y))}}for(T=0;T<y;T++)for(b=0;b<x;b++){if(T===0&&(b<y&&(E[b]=[]),w[b]=[]),b<T){b<y&&(E[b][T]=A[b][T]),T<x&&(w[b][T]=0);continue}if(b===T){b<y&&(E[b][T]=A[b][T]),T<x&&(w[b][T]=1);continue}b<y&&(E[b][T]=0),T<x&&(w[b][T]=A[b][T])}var Q=new s({data:w,size:d}),oe=new s({data:E,size:C}),ee=[];for(b=0,g=R.length;b<g;b++)ee[R[b]]=b;return{L:Q,U:oe,p:ee,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(D){var x=D._size[0],y=D._size[1],g=Math.min(x,y),A=D._values,w=D._index,d=D._ptr,E=[],C=[],b=[],T=[x,g],S=[],R=[],q=[],L=[g,y],I,F,Y,U=[],N=[];for(I=0;I<x;I++)U[I]=I,N[I]=I;var X=function(ee,K){var we=N[ee],pe=N[K];U[we]=K,U[pe]=ee,N[ee]=pe,N[K]=we},Q=function(){var ee=new h;F<x&&(b.push(E.length),E.push(1),C.push(F)),q.push(S.length);var K=d[F],we=d[F+1];for(Y=K;Y<we;Y++)I=w[Y],ee.set(U[I],A[Y]);F>0&&ee.forEach(0,F-1,function(me,ne){c._forEachRow(me,E,C,b,function(Se,Ce){Se>me&&ee.accumulate(Se,a(l(Ce,ne)))})});var pe=F,ae=ee.get(F),de=n(ae);ee.forEach(F+1,x-1,function(me,ne){var Se=n(ne);f(Se,de)&&(pe=me,de=Se,ae=ne)}),F!==pe&&(c._swapRows(F,pe,T[1],E,C,b),c._swapRows(F,pe,L[1],S,R,q),ee.swap(F,pe),X(F,pe)),ee.forEach(0,x-1,function(me,ne){me<=F?(S.push(ne),R.push(me)):(ne=o(ne,ae),u(ne,0)||(E.push(ne),C.push(me)))})};for(F=0;F<y;F++)Q();return q.push(S.length),b.push(E.length),{L:new c({values:E,index:C,ptr:b,size:T}),U:new c({values:S,index:R,ptr:q,size:L}),p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function lu(t,e,r,n){for(var i=t._values,o=t._index,l=t._ptr,m=t._size,f=t._datatype,u=m[0],a=m[1],s=n&&t._values?[]:null,c=[],h=[],v=0,p=0;p<a;p++){h[p]=v;for(var D=r?r[p]:p,x=l[D],y=l[D+1],g=x;g<y;g++){var A=e?e[o[g]]:o[g];c[v]=A,s&&(s[v]=i[g]),v++}}return h[a]=v,t.createSparseMatrix({values:s,index:c,ptr:h,size:[u,a],datatype:f})}function pn(t,e,r,n,i,o,l){var m=0;for(r[l]=t;m>=0;){var f=r[l+m],u=r[n+f];u===-1?(m--,o[e++]=f):(r[n+f]=r[i+u],++m,r[l+m]=u)}return e}function pu(t,e){if(!t)return null;var r=0,n,i=[],o=[],l=0,m=e,f=2*e;for(n=0;n<e;n++)o[l+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(o[m+n]=o[l+t[n]],o[l+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=pn(n,r,o,l,m,i,f));return i}function mu(t,e){if(!t)return null;var r=t._index,n=t._ptr,i=t._size,o=i[0],l=i[1],m=[],f=[],u=0,a=l,s,c;if(e)for(s=0;s<o;s++)f[a+s]=-1;for(var h=0;h<l;h++){m[h]=-1,f[u+h]=-1;for(var v=n[h],p=n[h+1],D=v;D<p;D++){var x=r[D];for(s=e?f[a+x]:x;s!==-1&&s<h;s=c)c=f[u+s],f[u+s]=h,c===-1&&(m[s]=h);e&&(f[a+x]=h)}}return m}function hu(t,e,r){for(var n=t._values,i=t._index,o=t._ptr,l=t._size,m=l[1],f=0,u=0;u<m;u++){var a=o[u];for(o[u]=f;a<o[u+1];a++)e(i[a],u,n?n[a]:1,r)&&(i[f]=i[a],n&&(n[f]=n[a]),f++)}return o[m]=f,i.splice(f,i.length-f),n&&n.splice(f,n.length-f),f}function dr(t){return-t-2}var Ol="csAmd",Ll=["add","multiply","transpose"],vu=O(Ol,Ll,t=>{var{add:e,multiply:r,transpose:n}=t;return function(a,s){if(!s||a<=0||a>3)return null;var c=s._size,h=c[0],v=c[1],p=0,D=Math.max(16,10*Math.sqrt(v));D=Math.min(v-2,D);var x=i(a,s,h,v,D);hu(x,f,null);for(var y=x._index,g=x._ptr,A=g[v],w=[],d=[],E=0,C=v+1,b=2*(v+1),T=3*(v+1),S=4*(v+1),R=5*(v+1),q=6*(v+1),L=7*(v+1),I=w,F=o(v,g,d,E,T,I,b,L,C,q,S,R),Y=l(v,g,d,R,S,q,D,C,T,I,b),U=0,N,X,Q,oe,ee,K,we,pe,ae,de,me,ne,Se,Ce,ue,xe;Y<v;){for(Q=-1;U<v&&(Q=d[T+U])===-1;U++);d[b+Q]!==-1&&(I[d[b+Q]]=-1),d[T+U]=d[b+Q];var Re=d[S+Q],ir=d[C+Q];Y+=ir;var Ze=0;d[C+Q]=-ir;var De=g[Q],Ne=Re===0?De:A,ar=Ne;for(oe=1;oe<=Re+1;oe++){for(oe>Re?(K=Q,we=De,pe=d[E+Q]-Re):(K=y[De++],we=g[K],pe=d[E+K]),ee=1;ee<=pe;ee++)N=y[we++],!((ae=d[C+N])<=0)&&(Ze+=ae,d[C+N]=-ae,y[ar++]=N,d[b+N]!==-1&&(I[d[b+N]]=I[N]),I[N]!==-1?d[b+I[N]]=d[b+N]:d[T+d[R+N]]=d[b+N]);K!==Q&&(g[K]=dr(Q),d[q+K]=0)}for(Re!==0&&(A=ar),d[R+Q]=Ze,g[Q]=Ne,d[E+Q]=ar-Ne,d[S+Q]=-2,F=m(F,p,d,q,v),de=Ne;de<ar;de++)if(N=y[de],!((me=d[S+N])<=0)){ae=-d[C+N];var Mn=F-ae;for(De=g[N],ne=g[N]+me-1;De<=ne;De++)K=y[De],d[q+K]>=F?d[q+K]-=ae:d[q+K]!==0&&(d[q+K]=d[R+K]+Mn)}for(de=Ne;de<ar;de++){for(N=y[de],ne=g[N],Se=ne+d[S+N]-1,Ce=ne,ue=0,xe=0,De=ne;De<=Se;De++)if(K=y[De],d[q+K]!==0){var Mt=d[q+K]-F;Mt>0?(xe+=Mt,y[Ce++]=K,ue+=K):(g[K]=dr(Q),d[q+K]=0)}d[S+N]=Ce-ne+1;var Ft=Ce,St=ne+d[E+N];for(De=Se+1;De<St;De++){X=y[De];var st=d[C+X];st<=0||(xe+=st,y[Ce++]=X,ue+=X)}xe===0?(g[N]=dr(Q),ae=-d[C+N],Ze-=ae,ir+=ae,Y+=ae,d[C+N]=0,d[S+N]=-1):(d[R+N]=Math.min(d[R+N],xe),y[Ce]=y[Ft],y[Ft]=y[ne],y[ne]=Q,d[E+N]=Ce-ne+1,ue=(ue<0?-ue:ue)%v,d[b+N]=d[L+ue],d[L+ue]=N,I[N]=ue)}for(d[R+Q]=Ze,p=Math.max(p,Ze),F=m(F+p,p,d,q,v),de=Ne;de<ar;de++)if(N=y[de],!(d[C+N]>=0))for(ue=I[N],N=d[L+ue],d[L+ue]=-1;N!==-1&&d[b+N]!==-1;N=d[b+N],F++){for(pe=d[E+N],me=d[S+N],De=g[N]+1;De<=g[N]+pe-1;De++)d[q+y[De]]=F;var ft=N;for(X=d[b+N];X!==-1;){var Hr=d[E+X]===pe&&d[S+X]===me;for(De=g[X]+1;Hr&&De<=g[X]+pe-1;De++)d[q+y[De]]!==F&&(Hr=0);Hr?(g[X]=dr(N),d[C+N]+=d[C+X],d[C+X]=0,d[S+X]=-1,X=d[b+X],d[b+ft]=X):(ft=X,X=d[b+X])}}for(De=Ne,de=Ne;de<ar;de++)N=y[de],!((ae=-d[C+N])<=0)&&(d[C+N]=ae,xe=d[R+N]+Ze-ae,xe=Math.min(xe,v-Y-ae),d[T+xe]!==-1&&(I[d[T+xe]]=N),d[b+N]=d[T+xe],I[N]=-1,d[T+xe]=N,U=Math.min(U,xe),d[R+N]=xe,y[De++]=N);d[C+Q]=ir,(d[E+Q]=De-Ne)===0&&(g[Q]=-1,d[q+Q]=0),Re!==0&&(A=De)}for(N=0;N<v;N++)g[N]=dr(g[N]);for(X=0;X<=v;X++)d[T+X]=-1;for(X=v;X>=0;X--)d[C+X]>0||(d[b+X]=d[T+g[X]],d[T+g[X]]=X);for(K=v;K>=0;K--)d[C+K]<=0||g[K]!==-1&&(d[b+K]=d[T+g[K]],d[T+g[K]]=K);for(Q=0,N=0;N<=v;N++)g[N]===-1&&(Q=pn(N,Q,d,T,b,w,q));return w.splice(w.length-1,1),w};function i(u,a,s,c,h){var v=n(a);if(u===1&&c===s)return e(a,v);if(u===2){for(var p=v._index,D=v._ptr,x=0,y=0;y<s;y++){var g=D[y];if(D[y]=x,!(D[y+1]-g>h))for(var A=D[y+1];g<A;g++)p[x++]=p[g]}return D[s]=x,a=n(v),r(v,a)}return r(v,a)}function o(u,a,s,c,h,v,p,D,x,y,g,A){for(var w=0;w<u;w++)s[c+w]=a[w+1]-a[w];s[c+u]=0;for(var d=0;d<=u;d++)s[h+d]=-1,v[d]=-1,s[p+d]=-1,s[D+d]=-1,s[x+d]=1,s[y+d]=1,s[g+d]=0,s[A+d]=s[c+d];var E=m(0,0,s,y,u);return s[g+u]=-2,a[u]=-1,s[y+u]=0,E}function l(u,a,s,c,h,v,p,D,x,y,g){for(var A=0,w=0;w<u;w++){var d=s[c+w];if(d===0)s[h+w]=-2,A++,a[w]=-1,s[v+w]=0;else if(d>p)s[D+w]=0,s[h+w]=-1,A++,a[w]=dr(u),s[D+u]++;else{var E=s[x+d];E!==-1&&(y[E]=w),s[g+w]=s[x+d],s[x+d]=w}}return A}function m(u,a,s,c,h){if(u<2||u+a<0){for(var v=0;v<h;v++)s[c+v]!==0&&(s[c+v]=1);u=2}return u}function f(u,a){return u!==a}});function du(t,e,r,n,i,o,l){var m,f,u=0,a;if(t<=e||r[n+e]<=r[i+t])return-1;r[i+t]=r[n+e];var s=r[o+t];if(r[o+t]=e,s===-1)u=1,a=t;else{for(u=2,a=s;a!==r[l+a];a=r[l+a]);for(m=s;m!==a;m=f)f=r[l+m],r[l+m]=a}return{jleaf:u,q:a}}var zl="csCounts",Pl=["transpose"],Du=O(zl,Pl,t=>{var{transpose:e}=t;return function(r,n,i,o){if(!r||!n||!i)return null;var l=r._size,m=l[0],f=l[1],u,a,s,c,h,v,p,D=4*f+(o?f+m+1:0),x=[],y=0,g=f,A=2*f,w=3*f,d=4*f,E=5*f+1;for(s=0;s<D;s++)x[s]=-1;var C=[],b=e(r),T=b._index,S=b._ptr;for(s=0;s<f;s++)for(a=i[s],C[a]=x[w+a]===-1?1:0;a!==-1&&x[w+a]===-1;a=n[a])x[w+a]=s;if(o){for(s=0;s<f;s++)x[i[s]]=s;for(u=0;u<m;u++){for(s=f,v=S[u],p=S[u+1],h=v;h<p;h++)s=Math.min(s,x[T[h]]);x[E+u]=x[d+s],x[d+s]=u}}for(u=0;u<f;u++)x[y+u]=u;for(s=0;s<f;s++){for(a=i[s],n[a]!==-1&&C[n[a]]--,c=o?x[d+s]:a;c!==-1;c=o?x[E+c]:-1)for(h=S[c];h<S[c+1];h++){u=T[h];var R=du(u,a,x,w,g,A,y);R.jleaf>=1&&C[a]++,R.jleaf===2&&C[R.q]--}n[a]!==-1&&(x[y+a]=n[a])}for(a=0;a<f;a++)n[a]!==-1&&(C[n[a]]+=C[a]);return C}});var kl="csSqr",ql=["add","multiply","transpose"],xu=O(kl,ql,t=>{var{add:e,multiply:r,transpose:n}=t,i=vu({add:e,multiply:r,transpose:n}),o=Du({transpose:n});return function(f,u,a){var s=u._ptr,c=u._size,h=c[1],v,p={};if(p.q=i(f,u),f&&!p.q)return null;if(a){var D=f?lu(u,null,p.q,0):u;p.parent=mu(D,1);var x=pu(p.parent,h);if(p.cp=o(D,p.parent,x,1),D&&p.parent&&p.cp&&l(D,p))for(p.unz=0,v=0;v<h;v++)p.unz+=p.cp[v]}else p.unz=4*s[h]+h,p.lnz=p.unz;return p};function l(m,f){var u=m._ptr,a=m._index,s=m._size,c=s[0],h=s[1];f.pinv=[],f.leftmost=[];var v=f.parent,p=f.pinv,D=f.leftmost,x=[],y=0,g=c,A=c+h,w=c+2*h,d,E,C,b,T;for(E=0;E<h;E++)x[g+E]=-1,x[A+E]=-1,x[w+E]=0;for(d=0;d<c;d++)D[d]=-1;for(E=h-1;E>=0;E--)for(b=u[E],T=u[E+1],C=b;C<T;C++)D[a[C]]=E;for(d=c-1;d>=0;d--)p[d]=-1,E=D[d],E!==-1&&(x[w+E]++===0&&(x[A+E]=d),x[y+d]=x[g+E],x[g+E]=d);for(f.lnz=0,f.m2=c,E=0;E<h;E++)if(d=x[g+E],f.lnz++,d<0&&(d=f.m2++),p[d]=E,!(--w[E]<=0)){f.lnz+=x[w+E];var S=v[E];S!==-1&&(x[w+S]===0&&(x[A+S]=x[A+E]),x[y+x[A+E]]=x[g+S],x[g+S]=x[y+d],x[w+S]+=x[w+E])}for(d=0;d<c;d++)p[d]<0&&(p[d]=E++);return!0}});function bt(t,e){return t[e]<0}function mn(t,e){t[e]=dr(t[e])}function Gi(t){return t<0?dr(t):t}function gu(t,e,r,n,i){var o=e._index,l=e._ptr,m=e._size,f=m[1],u,a,s,c=0;for(n[0]=t;c>=0;){t=n[c];var h=i?i[t]:t;bt(l,t)||(mn(l,t),n[f+c]=h<0?0:Gi(l[h]));var v=1;for(a=n[f+c],s=h<0?0:Gi(l[h+1]);a<s;a++)if(u=o[a],!bt(l,u)){n[f+c]=a,n[++c]=u,v=0;break}v&&(c--,n[--r]=t)}return r}function yu(t,e,r,n,i){var o=t._ptr,l=t._size,m=e._index,f=e._ptr,u=l[1],a,s,c,h=u;for(s=f[r],c=f[r+1],a=s;a<c;a++){var v=m[a];bt(o,v)||(h=gu(v,t,h,n,i))}for(a=h;a<u;a++)mn(o,n[a]);return h}var Vl="csSpsolve",Ul=["divideScalar","multiply","subtract"],Eu=O(Vl,Ul,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(o,l,m,f,u,a,s){var c=o._values,h=o._index,v=o._ptr,p=o._size,D=p[1],x=l._values,y=l._index,g=l._ptr,A,w,d,E,C=yu(o,l,m,f,a);for(A=C;A<D;A++)u[f[A]]=0;for(w=g[m],d=g[m+1],A=w;A<d;A++)u[y[A]]=x[A];for(var b=C;b<D;b++){var T=f[b],S=a?a[T]:T;if(!(S<0))for(w=v[S],d=v[S+1],u[T]=e(u[T],c[s?w:d-1]),A=s?w+1:w,E=s?d:d-1;A<E;A++){var R=h[A];u[R]=n(u[R],r(c[A],u[T]))}}return C}});var Xl="csLu",Zl=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],wu=O(Xl,Zl,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:i,larger:o,largerEq:l,SparseMatrix:m}=t,f=Eu({divideScalar:r,multiply:n,subtract:i});return function(a,s,c){if(!a)return null;var h=a._size,v=h[1],p,D=100,x=100;s&&(p=s.q,D=s.lnz||D,x=s.unz||x);var y=[],g=[],A=[],w=new m({values:y,index:g,ptr:A,size:[v,v]}),d=[],E=[],C=[],b=new m({values:d,index:E,ptr:C,size:[v,v]}),T=[],S,R,q=[],L=[];for(S=0;S<v;S++)q[S]=0,T[S]=-1,A[S+1]=0;D=0,x=0;for(var I=0;I<v;I++){A[I]=D,C[I]=x;var F=p?p[I]:I,Y=f(w,a,F,L,q,T,1),U=-1,N=-1;for(R=Y;R<v;R++)if(S=L[R],T[S]<0){var X=e(q[S]);o(X,N)&&(N=X,U=S)}else E[x]=T[S],d[x++]=q[S];if(U===-1||N<=0)return null;T[F]<0&&l(e(q[F]),n(N,c))&&(U=F);var Q=q[U];for(E[x]=I,d[x++]=Q,T[U]=I,g[D]=U,y[D++]=1,R=Y;R<v;R++)S=L[R],T[S]<0&&(g[D]=S,y[D++]=r(q[S],Q)),q[S]=0}for(A[v]=D,C[v]=x,R=0;R<D;R++)g[R]=T[g[R]];return y.splice(D,y.length-D),g.splice(D,g.length-D),d.splice(x,d.length-x),E.splice(x,E.length-x),{L:w,U:b,pinv:T}}});var Au="slu",Hl=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Yi=O(Au,Hl,t=>{var{typed:e,abs:r,add:n,multiply:i,transpose:o,divideScalar:l,subtract:m,larger:f,largerEq:u,SparseMatrix:a}=t,s=xu({add:n,multiply:i,transpose:o}),c=wu({abs:r,divideScalar:l,multiply:i,subtract:m,larger:f,largerEq:u,SparseMatrix:a});return e(Au,{"SparseMatrix, number, number":function(v,p,D){if(!se(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(D<0||D>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var x=s(p,v,!1),y=c(v,x,D);return{L:y.L,U:y.U,p:y.pinv,q:x.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function $i(t,e){var r,n=e.length,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}var bu="lusolve",Gl=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Qi=O(bu,Gl,t=>{var{typed:e,matrix:r,lup:n,slu:i,usolve:o,lsolve:l,DenseMatrix:m}=t,f=at({DenseMatrix:m});return e(bu,{"Array, Array | Matrix":function(c,h){c=r(c);var v=n(c),p=a(v.L,v.U,v.p,null,h);return p.valueOf()},"DenseMatrix, Array | Matrix":function(c,h){var v=n(c);return a(v.L,v.U,v.p,null,h)},"SparseMatrix, Array | Matrix":function(c,h){var v=n(c);return a(v.L,v.U,v.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(c,h,v,p){var D=i(c,v,p);return a(D.L,D.U,D.p,D.q,h)},"Object, Array | Matrix":function(c,h){return a(c.L,c.U,c.p,c.q,h)}});function u(s){if(ge(s))return s;if(Ae(s))return r(s);throw new TypeError("Invalid Matrix LU decomposition")}function a(s,c,h,v,p){s=u(s),c=u(c),h&&(p=f(s,p,!0),p._data=$i(h,p._data));var D=l(s,p),x=o(c,D);return v&&(x._data=$i(v,x._data)),x}});var Cu="det",Yl=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],Ji=O(Cu,Yl,t=>{var{typed:e,matrix:r,subtract:n,multiply:i,divideScalar:o,isZero:l,unaryMinus:m}=t;return e(Cu,{any:function(a){return ye(a)},"Array | Matrix":function(a){var s;switch(ge(a)?s=a.size():Array.isArray(a)?(a=r(a),s=a.size()):s=[],s.length){case 0:return ye(a);case 1:if(s[0]===1)return ye(a.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Ee(s)+")");case 2:{var c=s[0],h=s[1];if(c===h)return f(a.clone().valueOf(),c,h);throw new RangeError("Matrix must be square (size: "+Ee(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ee(s)+")")}}});function f(u,a,s){if(a===1)return ye(u[0][0]);if(a===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var c=!1,h=new Array(a).fill(0).map((E,C)=>C),v=0;v<a;v++){var p=h[v];if(l(u[p][v])){var D=void 0;for(D=v+1;D<a;D++)if(!l(u[h[D]][v])){p=h[D],h[D]=h[v],h[v]=p,c=!c;break}if(D===a)return u[p][v]}for(var x=u[p][v],y=v===0?1:u[h[v-1]][v-1],g=v+1;g<a;g++)for(var A=h[g],w=v+1;w<a;w++)u[A][w]=o(n(i(u[A][w],x),i(u[A][v],u[p][w])),y)}var d=u[h[a-1]][a-1];return c?m(d):d}});var _u="inv",$l=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Ki=O(_u,$l,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:o,unaryMinus:l,det:m,identity:f,abs:u}=t;return e(_u,{"Array | Matrix":function(c){var h=ge(c)?c.size():Ve(c);switch(h.length){case 1:if(h[0]===1)return ge(c)?r([n(1,c.valueOf()[0])]):[n(1,c[0])];throw new RangeError("Matrix must be square (size: "+Ee(h)+")");case 2:{var v=h[0],p=h[1];if(v===p)return ge(c)?r(a(c.valueOf(),v,p),c.storage()):a(c,v,p);throw new RangeError("Matrix must be square (size: "+Ee(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ee(h)+")")}},any:function(c){return n(1,c)}});function a(s,c,h){var v,p,D,x,y;if(c===1){if(x=s[0][0],x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,x)]]}else if(c===2){var g=m(s);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(s[1][1],g),n(l(s[0][1]),g)],[n(l(s[1][0]),g),n(s[0][0],g)]]}else{var A=s.concat();for(v=0;v<c;v++)A[v]=A[v].concat();for(var w=f(c).valueOf(),d=0;d<h;d++){var E=u(A[d][d]),C=d;for(v=d+1;v<c;)u(A[v][d])>E&&(E=u(A[v][d]),C=v),v++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");v=C,v!==d&&(y=A[d],A[d]=A[v],A[v]=y,y=w[d],w[d]=w[v],w[v]=y);var b=A[d],T=w[d];for(v=0;v<c;v++){var S=A[v],R=w[v];if(v!==d){if(S[d]!==0){for(D=n(l(S[d]),b[d]),p=d;p<h;p++)S[p]=i(S[p],o(D,b[p]));for(p=0;p<h;p++)R[p]=i(R[p],o(D,T[p]))}}else{for(D=b[d],p=d;p<h;p++)S[p]=n(S[p],D);for(p=0;p<h;p++)R[p]=n(R[p],D)}}}return w}}});var Tu="combinations",Ql=["typed"],Wi=O(Tu,Ql,t=>{var{typed:e}=t;return e(Tu,{"number, number":li,"BigNumber, BigNumber":function(n,i){var o=n.constructor,l,m,f=n.minus(i),u=new o(1);if(!Mu(n)||!Mu(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(l=u,i.lt(f))for(m=u;m.lte(f);m=m.plus(u))l=l.times(i.plus(m)).dividedBy(m);else for(m=u;m.lte(i);m=m.plus(u))l=l.times(f.plus(m)).dividedBy(m);return l}})});function Mu(t){return t.isInteger()&&t.gte(0)}var hn=ei({config:lr}),Fu=ti({});var Su=ii({});var ji=ai({});var mr=oi({Matrix:ji});var he=Gn({BigNumber:hn,Complex:Fu,DenseMatrix:mr,Fraction:Su});var ea=wi({typed:he});var Xr=Ai({typed:he});var Jl=Di({BigNumber:hn,typed:he});var Nu=Wi({typed:he}),Bu=xi({Complex:Fu,typed:he}),Kl=Ti({typed:he});var Lr=hi({config:lr,typed:he});var Wl=mi({typed:he});var Ct=bi({typed:he});var jl=di({typed:he});var _t=vi({Matrix:ji,equalScalar:Lr,typed:he});var vn=Ei({typed:he});var ep=gi({Fraction:Su,typed:he});var Ye=yi({DenseMatrix:mr,Matrix:ji,SparseMatrix:_t,typed:he});var ra=Bi({bignumber:Jl,fraction:ep,number:jl});var rp=Fi({matrix:Ye,config:lr,typed:he}),Iu=Li({DenseMatrix:mr,config:lr,matrix:Ye,typed:he});var Cr=_i({DenseMatrix:mr,addScalar:Xr,equalScalar:Lr,matrix:Ye,typed:he,unaryMinus:vn});var ta=Si({matrix:Ye,typed:he});var Ru=Ni({BigNumber:hn,config:lr,matrix:Ye,typed:he});var ot=Ii({numeric:ra,typed:he});var tp=Pi({DenseMatrix:mr,config:lr,matrix:Ye,typed:he});var np=Ri({DenseMatrix:mr,divideScalar:ot,equalScalar:Lr,matrix:Ye,multiplyScalar:Ct,subtract:Cr,typed:he});var Ou=qi({config:lr,numeric:ra,smaller:Iu,typed:he});var ip=Oi({DenseMatrix:mr,divideScalar:ot,equalScalar:Lr,matrix:Ye,multiplyScalar:Ct,subtract:Cr,typed:he});var Tt=Xi({DenseMatrix:mr,SparseMatrix:_t,addScalar:Xr,equalScalar:Lr,matrix:Ye,typed:he});var ap=Zi({addScalar:Xr,conj:Kl,multiplyScalar:Ct,size:rp,typed:he});var op=Mi({BigNumber:hn,DenseMatrix:mr,SparseMatrix:_t,config:lr,matrix:Ye,typed:he});var dn=zi({DenseMatrix:mr,config:lr,matrix:Ye,typed:he});var Zr=Ci({addScalar:Xr,dot:ap,equalScalar:Lr,matrix:Ye,multiplyScalar:Ct,typed:he});var up=Yi({SparseMatrix:_t,abs:ea,add:Tt,divideScalar:ot,larger:dn,largerEq:tp,multiply:Zr,subtract:Cr,transpose:ta,typed:he});var Dn=Ji({divideScalar:ot,isZero:Wl,matrix:Ye,multiply:Zr,subtract:Cr,typed:he,unaryMinus:vn});var sp=Vi({larger:dn,smaller:Iu});var Lu=ki({config:lr,larger:dn,numeric:ra,typed:he});var zu=Ki({abs:ea,addScalar:Xr,det:Dn,divideScalar:ot,identity:op,matrix:Ye,multiply:Zr,typed:he,unaryMinus:vn});var fp=Ui({FibonacciHeap:sp,addScalar:Xr,equalScalar:Lr});var cp=Hi({DenseMatrix:mr,Spa:fp,SparseMatrix:_t,abs:ea,addScalar:Xr,divideScalar:ot,equalScalar:Lr,larger:dn,matrix:Ye,multiplyScalar:Ct,subtract:Cr,typed:he,unaryMinus:vn});var Pu=Qi({DenseMatrix:mr,lsolve:np,lup:cp,matrix:Ye,slu:up,typed:he,usolve:ip});var ve=class{constructor(e,r){this.rows=1;this.cols=1;this.values=[];this.rows=e,this.cols=r,this.values=new Array(e*r).fill(0)}getRows(){return this.rows}getCols(){return this.cols}setValue(e,r,n){this.values[e*this.cols+r]=n}getValue(e,r){return this.values[e*this.cols+r]}getCol(e){let r=new ze(this.rows);for(let n=0;n<this.rows;n++)r.setValue(n,this.getValue(n,e));return r}clone(){let e=new ve(this.rows,this.cols);return e.values=[...this.values],e}toString(){let e="[";for(let r=0;r<this.rows;r++){r>0&&(e+=","),e+="[";for(let n=0;n<this.cols;n++)n>0&&(e+=","),e+=this.getValue(r,n);e+="]"}return e+="]",e}static mathjs2matrix(e){let r=new ve(e.size()[0],e.size()[1]),n=r.getRows(),i=r.getCols();for(let o=0;o<n;o++)for(let l=0;l<i;l++)r.setValue(o,l,e.get([o,l]));return r}static matrix2mathjs(e){let r=Ru(e.rows,e.cols);for(let n=0;n<e.rows;n++)for(let i=0;i<e.cols;i++)r.set([n,i],e.getValue(n,i));return r}is_zero(e=1e-9){for(let r=0;r<this.rows;r++)for(let n=0;n<this.cols;n++)if(Math.abs(this.getValue(r,n))>e)return!1;return!0}rank(e=1e-12){let r=this.clone(),n=r.rows,i=r.cols,o=0,l=[];for(let m=0;m<i;m++)l.push(!1);for(let m=0;m<n;m++){let f;for(f=0;f<i&&!(!l[f]&&Math.abs(r.getValue(m,f))>e);f++);if(f!=i){o++,l[f]=!0;for(let u=m+1;u<n;u++)r.setValue(u,f,r.getValue(u,f)/r.getValue(m,f));for(let u=0;u<i;u++)if(u!=f&&Math.abs(r.getValue(m,u))>e)for(let a=m+1;a<n;a++)r.setValue(a,u,r.getValue(a,u)-r.getValue(a,f)*r.getValue(m,u))}}return o}};var gn=class{constructor(e){this.parent=null;this.parent=e}_create(e,r,n){let i=new ve(e,r),o=0;for(let l=0;l<e;l++)for(let m=0;m<r;m++)i.setValue(l,m,n[o++]);return i}_clone(e){return e.clone()}_getElement(e,r,n,i){if(r<0||r>=e.getRows())throw new Te(i,"matrix has "+e.getRows()+" rows. Cannot get row "+r);if(n<0||n>=e.getCols())throw new Te(i,"matrix has "+e.getCols()+" columns. Cannot get column "+n);return e.getValue(r,n)}_setElement(e,r,n,i,o){if(r<0||r>=e.getRows())throw new Te(o,"matrix has "+e.getRows()+" rows. Cannot get row "+r);if(n<0||n>=e.getCols())throw new Te(o,"matrix has "+e.getCols()+" columns. Cannot get column "+n);e.setValue(r,n,i)}_addMatrices(e,r,n){let i;try{i=Tt(ve.matrix2mathjs(e),ve.matrix2mathjs(r))}catch{throw new Te(n,"dimensions do not match")}return ve.mathjs2matrix(i)}_subMatrices(e,r,n){let i;try{i=Cr(ve.matrix2mathjs(e),ve.matrix2mathjs(r))}catch{throw new Te(n,"dimensions do not match")}return ve.mathjs2matrix(i)}_mulScalarMatrix(e,r){let n=Zr(e,ve.matrix2mathjs(r));return ve.mathjs2matrix(n)}_mulMatrixScalar(e,r){let n=Zr(ve.matrix2mathjs(e),r);return ve.mathjs2matrix(n)}_mulMatrices(e,r,n){let i;try{i=Zr(ve.matrix2mathjs(e),ve.matrix2mathjs(r))}catch{throw new Te(n,"dimensions do not match")}return ve.mathjs2matrix(i)}_randMatrix(e,r,n,i){let o=new ve(e,r);for(let l=0;l<e;l++)for(let m=0;m<r;m++)o.setValue(l,m,this.parent.interpret_basic._randIntMinMax(n,i));return o}_randZMatrix(e,r,n,i){let o=new ve(e,r);for(let l=0;l<e;l++)for(let m=0;m<r;m++)o.setValue(l,m,this.parent.interpret_basic._randIntMinMaxZ(n,i));return o}_det(e,r){try{return Dn(ve.matrix2mathjs(e))}catch{throw new Te(r,"matrix is not square")}}_minMatrix(e){return Ou(ve.matrix2mathjs(e))}_maxMatrix(e){return Lu(ve.matrix2mathjs(e))}_zeros(e,r){let n=new ve(e,r);for(let i=0;i<e;i++)for(let o=0;o<r;o++)n.setValue(i,o,0);return n}_ones(e,r){let n=new ve(e,r);for(let i=0;i<e;i++)for(let o=0;o<r;o++)n.setValue(i,o,1);return n}_transposeMatrix(e){return ve.mathjs2matrix(ta(ve.matrix2mathjs(e)))}_triu(e){let r=e.clone();for(let n=0;n<r.getRows();n++)for(let i=0;i<r.getCols();i++)n>i&&r.setValue(n,i,0);return r}_linsolve(e,r){return ve.mathjs2matrix(Pu(ve.matrix2mathjs(e),ze.vector2list(r))).getCol(0)}_matrixFromVectors(e,r){let n=e.length;if(n==0)throw new Te(r,"no vector given");let i=-1;for(let l=0;l<n;l++)if(l==0)i=e[0].getSize();else if(e[l].getSize()!=i)throw new Te(r,"vector lengths differ");let o=new ve(i,n);for(let l=0;l<i;l++)for(let m=0;m<n;m++)o.setValue(l,m,e[m].getValue(l));return o}_rank(e){return e.rank()}_isMatrixZero(e){return e.is_zero(1e-9)}_isMatrixInvertible(e){let r=Dn(ve.matrix2mathjs(e));return Math.abs(r)>1e-9}_invMatrix(e,r){if(this._isMatrixInvertible(e)==!1)throw new Te(r,"matrix is not invertible");return ve.mathjs2matrix(zu(ve.matrix2mathjs(e)))}};var zr=class{constructor(e=0,r=0){this.real=e,this.imag=r}static mathjs2complex(e){return new zr(e.re,e.im)}static complex2mathjs(e){return Bu(e.real,e.imag)}toMathJs(){return zr.complex2mathjs(this)}};var yn=class{constructor(e){this.parent=null;this.parent=e}_addComplex(e,r){return zr.mathjs2complex(Tt(e.toMathJs(),r.toMathJs()))}_subComplex(e,r){return zr.mathjs2complex(Cr(e.toMathJs(),r.toMathJs()))}_absComplex(e){return 0}};var En=class{constructor(e){this.parent=null;this.parent=e}_add(e,r){return e+r}_unaryMinus(e){return-e}_unaryNot(e){return!e}_sub(e,r){return e-r}_mul(e,r){return e*r}_div(e,r){return e/r}_mod(e,r){return e%r}_pow(e,r){return Math.pow(e,r)}_randIntMax(e){return Math.floor(Math.random()*e)}_randIntMaxZ(e){let r=0;for(;r==0;)r=this._randIntMax(e);return r}_randIntMinMax(e,r){return Math.floor(Math.random()*(r-e)+e)}_randIntMinMaxZ(e,r){let n=0;for(;n==0;)n=this._randIntMinMax(e,r);return n}_sin(e){return Math.sin(e)}_cos(e){return Math.cos(e)}_tan(e){return Math.tan(e)}_asin(e){return Math.asin(e)}_acos(e){return Math.acos(e)}_atan(e){return Math.atan(e)}_exp(e){return Math.exp(e)}_sqrt(e){return Math.sqrt(e)}_abs(e){return Math.abs(e)}_floor(e){return Math.floor(e)}_ceil(e){return Math.ceil(e)}_round(e){return Math.round(e)}_sign(e){return e==0?0:e<0?-1:1}_maxInt(e){return Math.max(...e)}_fac(e){let r=1;for(let n=1;n<=e;n++)r*=n;return r}_binomial(e,r){return Nu(e,r)}};var ut=class extends Error{constructor(e){super(e),this.name="TermError"}},J=class{constructor(e="",r=[]){this.op="";this.value="";this.o=[];this.op=e,this.o=r}static Op(e,r){let n=new J;return n.op=e,n.o=r,n}static Const(e){let r=new J;return r.op="#",r.value=e,r}static Var(e){let r=new J;return r.op="$",r.value=e,r}clone(){let e=new J;e.op=this.op,e.value=this.value;for(let r of this.o)e.o.push(r.clone());return e}eval(e={}){let r;switch(this.op){case"+":r=0;for(let n of this.o)r+=n.eval(e);break;case"*":r=1;for(let n of this.o)r*=n.eval(e);break;case"-":r=0;for(let n of this.o)r-=n.eval(e);break;case".-":r=-this.o[0].eval(e);break;case"^":r=Math.pow(this.o[0].eval(e),this.o[1].eval(e));break;case"#":r=this.value;break;case"sin":r=Math.sin(this.o[0].eval(e));break;case"cos":r=Math.cos(this.o[0].eval(e));break;case"tan":r=Math.tan(this.o[0].eval(e));break;case"asin":r=Math.asin(this.o[0].eval(e));break;case"atan":r=Math.atan(this.o[0].eval(e));break;case"exp":r=Math.exp(this.o[0].eval(e));break;case"$":if(this.value in e)return e[this.value];throw new ut('eval(..): unset variable "'+this.value+'"');default:throw new ut('eval(..): unimplemented operator "'+this.op+'"')}return r}diff(e){let r=null,n,i;switch(this.op){case".-":r=J.Op(".-",[this.o[0].diff(e)]);break;case"+":r=J.Op("+",[]);for(let o of this.o)r.o.push(o.diff(e));break;case"*":n=this.o[0],i=this.o.length==2?this.o[1]:J.Op("*",this.o.slice(1)),r=J.Op("+",[J.Op("*",[n.diff(e),i.clone()]),J.Op("*",[n.clone(),i.diff(e)])]);break;case"^":if(this.o[1].op!=="#")throw new ut("diff(..): u^v: operator ^ only implemented for constant v");r=J.Op("*",[this.o[0].diff(e),this.o[1].clone(),J.Op("^",[this.o[0].clone(),J.Const(this.o[1].value-1)])]);break;case"exp":r=J.Op("*",[this.o[0].diff(e),J.Op("exp",[this.o[0].clone()])]);break;case"sin":r=J.Op("*",[this.o[0].diff(e),J.Op("cos",[this.o[0].clone()])]);break;case"cos":r=J.Op(".-",[J.Op("*",[this.o[0].diff(e),J.Op("cos",[this.o[0].clone()])])]);break;case"$":r=J.Const(this.value===e?1:0);break;case"#":r=J.Const(0);break;default:throw new ut('diff(..): unimplemented operator "'+this.op+'"')}return r}integrate(e,r,n,i=1e-12){let o=0;for(let l=r;l<=n;l+=i)o+=this.eval({varId:l});return o/i}optimize(){let e=this.clone();for(let r=0;r<e.o.length;r++)e.o[r]=e.o[r].optimize();if(this.op==="*"){for(let r of e.o)if(r.op==="#"&&r.value==0)return J.Const(0)}try{let r=e.eval();return J.Const(r)}catch{}return e}setVariableValue(e,r){this.op==="$"&&(this.op="#",this.value=r);for(let n of this.o)n.setVariableValue(e,r)}getVariableIDs(){let e=new Set;this.op==="$"&&e.add(this.value);for(let r of this.o)e=new Set([...e,...r.getVariableIDs()]);return e}toString(){let e="";switch(this.op){case"#":case"$":e=""+this.value;break;case".-":e+="-("+this.o[0].toString()+")";break;default:if(this.op.length>2){e+=this.op+"(";for(let r=0;r<this.o.length;r++)r>0&&(e+=","),e+=this.o[r].toString();e+=")"}else{e+="(";for(let r=0;r<this.o.length;r++)r>0&&(e+=this.op),e+=this.o[r].toString();e+=")"}break}return e}};var wn=class{constructor(e){this.parent=null;this.parent=e}var(e){return J.Var(e)}_eval(e,r,n){let i=0;try{i=e.eval(r)}catch(o){throw new Te(n,o.message)}return i}_numberToTerm(e){return J.Const(e)}_addTermReal(e,r){return J.Op("+",[e,J.Const(r)])}_addRealTerm(e,r){return J.Op("+",[J.Const(e),r])}_addTermTerm(e,r){return J.Op("+",[e,r])}_subTermReal(e,r){return J.Op("-",[e,J.Const(r)])}_subRealTerm(e,r){return J.Op("-",[J.Const(e),r])}_subTermTerm(e,r){return J.Op("-",[e,r])}_mulTermReal(e,r){return J.Op("*",[e,J.Const(r)])}_mulRealTerm(e,r){return J.Op("*",[J.Const(e),r])}_mulTermTerm(e,r){return J.Op("*",[e,r])}_divTermReal(e,r){return J.Op("/",[e,J.Const(r)])}_divRealTerm(e,r){return J.Op("/",[J.Const(e),r])}_divTermTerm(e,r){return J.Op("/",[e,r])}_powTermReal(e,r){return J.Op("^",[e,J.Const(r)])}_powRealTerm(e,r){return J.Op("^",[J.Const(e),r])}_powTermTerm(e,r){return J.Op("^",[e,r])}_sinTerm(e){return J.Op("sin",[e])}_cosTerm(e){return J.Op("cos",[e])}_tanTerm(e){return J.Op("tan",[e])}_expTerm(e){return J.Op("exp",[e])}_diffTerm(e,r){return e.diff(r.toString())}};var An=class{constructor(e=[]){this.elements=[];this.elements=e}toString(){let e="{";return e+=this.elements.sort().join(","),e+="}",e}};var bn=class{constructor(e){this.parent=null;this.parent=e}_createSet(e){let r=new An;return r.elements=e,r}_lenSet(e){return e.elements.length}};var Te=class extends Error{constructor(e,r){super(""+e+":"+r),this.name="RunError"}},Cn=class{constructor(){this.interpret_vector=null;this.interpret_matrix=null;this.interpret_complex=null;this.interpret_basic=null;this.interpret_term=null;this.interpret_set=null;this.interpret_vector=new Pt(this),this.interpret_matrix=new gn(this),this.interpret_complex=new yn(this),this.interpret_basic=new En(this),this.interpret_term=new wn(this),this.interpret_set=new bn(this)}interpret(e,r){e+="return [";let n=0;for(let o of r)o.type.base!="TERM_VAR"&&(n>0&&(e+=", "),e+=o.id,n++);e+="];";let i=new Function("runtime",e);try{let o=i(this);for(let l=0;l<r.length;l++){let m=r[l];switch(m.type.base){case"BOOL":m.value=o[l];break;case"INT":case"REAL":m.value=o[l];break;case"VECTOR":m.value=o[l];break;case"MATRIX":m.value=o[l];break;case"TERM":m.value=o[l];break;case"INT_SET":m.value=o[l];break;default:throw new Te("-1","interpret(..): unimplemented type "+m.type)}}}catch(o){throw new Te("-1","interpret(..) failed: "+o)}}};var qu=mt(Nn());var ku=`

_add(x:INT,y:INT):INT -> interpret_basic._add;
_add(x:INT,y:REAL):REAL -> interpret_basic._add;
_add(x:REAL,y:INT):REAL -> interpret_basic._add;
_add(x:REAL,y:REAL):REAL -> interpret_basic._add;
_unaryMinus(x:INT):INT -> interpret_basic._unaryMinus;
_unaryMinus(x:REAL):REAL -> interpret_basic._unaryMinus;
_unaryNot(x:BOOL):BOOL -> interpret_basic._unaryNot;
_sub(x:INT,y:INT):INT -> interpret_basic._sub;
_sub(X:INT,y:REAL):REAL -> interpret_basic._sub;
_sub(x:REAL,y:INT):REAL -> interpret_basic._sub;
_sub(x:REAL,y:REAL):REAL -> interpret_basic._sub;
_mul(x:INT,y:INT):INT -> interpret_basic._mul;
_mul(x:INT,y:REAL):REAL -> interpret_basic._mul;
_mul(x:REAL,y:INT):REAL -> interpret_basic._mul;
_mul(x:REAL,y:REAL):REAL -> interpret_basic._mul;
_div(x:INT,y:INT):REAL -> interpret_basic._div;
_div(x:INT,y:REAL):REAL -> interpret_basic._div;
_div(x:REAL,y:INT):REAL -> interpret_basic._div;
_div(x:REAL,y:REAL):REAL -> interpret_basic._div;
_mod(x:INT,y:INT):INT -> interpret_basic._mod;
_pow(x:INT,y:INT):INT -> interpret_basic._pow;
_pow(x:INT,y:REAL):REAL -> interpret_basic._pow;
_pow(x:REAL,y:INT):REAL -> interpret_basic._pow;
_pow(x:REAL,y:REAL):REAL -> interpret_basic._pow;
rand(max:INT): INT -> interpret_basic._randIntMax;
rand(min:INT,max:INT): INT -> interpret_basic._randIntMinMax;
randZ(min:INT,max:INT): INT -> interpret_basic._randIntMinMaxZ;
sin(x:INT): REAL -> interpret_basic._sin;
sin(x:REAL): REAL -> interpret_basic._sin;
cos(x:INT): REAL -> interpret_basic._cos;
cos(x:REAL): REAL -> interpret_basic._cos;
tan(x:INT): REAL -> interpret_basic._tan;
tan(x:REAL): REAL -> interpret_basic._tan;
asin(x:INT): REAL -> interpret_basic._asin;
asin(x:REAL): REAL -> interpret_basic._asin;
acos(x:INT): REAL -> interpret_basic._acos;
acos(x:REAL): REAL -> interpret_basic._acos;
atan(x:INT): REAL -> interpret_basic._atan;
atan(x:REAL): REAL -> interpret_basic._atan;
exp(x:INT):REAL -> interpret_basic._exp;
exp(x:REAL):REAL -> interpret_basic._exp;
sqrt(x:REAL): REAL -> interpret_basic._sqrt;
abs(x:INT):INT -> interpret_basic._abs;
abs(x:REAL):REAL -> interpret_basic._abs;
floor(x:INT): INT -> interpret_basic._floor;
floor(x:REAL): INT -> interpret_basic._floor;
ceil(x:INT): INT -> interpret_basic._ceil;
ceil(x:REAL): INT -> interpret_basic._ceil;
round(x:INT): INT -> interpret_basic._round;
round(x:REAL): INT -> interpret_basic._round;
sign(x:INT): INT -> interpret_basic._sign;
sign(x:REAL): INT -> interpret_basic._sign;
max(list:INT_LIST): INT -> interpret_basic._maxInt;
fac(x:INT): INT -> interpret_basic._fac;
binomial(n:INT,k:INT): INT -> interpret_basic._binomial;
set(elements:INT_LIST): SET_INT -> interpret_set._createSet;
len(s:SET_INT): INT -> interpret_set._lenSet;
_add(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._addComplex;
_sub(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._subComplex;
exp(x:COMPLEX):COMPLEX -> interpret_complex._expComplex;
sqrt(x:COMPLEX): COMPLEX -> interpret_complex._sqrtComplex;
abs(x:COMPLEX): REAL -> interpret_complex._absComplex;
_add(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._addVectors;
_sub(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._subVectors;
_mul(x:INT,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
_mul(x:REAL,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
dot(x:VECTOR, y:VECTOR): REAL -> interpret_vector._dotVectors;
cross(x:VECTOR, y:VECTOR): VECTOR -> interpret_vector._crossVectors;
norm2(x:VECTOR): REAL -> interpret_vector._norm2vec;
zeros<size:INT>(): VECTOR -> interpret_vector._zerosVector;
rand<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randVector;
randZ<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randZVector;
is_zero(x:VECTOR): BOOL -> interpret_vector._isVectorZero;
_add(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._addMatrices;
_sub(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._subMatrices;
_mul(x:INT,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x:REAL,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x: MATRIX, y: INT): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x: MATRIX, y: REAL): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._mulMatrices;
rand<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randMatrix;
randZ<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randZMatrix;
det(x:MATRIX): REAL -> interpret_matrix._det;
min(x:MATRIX): REAL -> interpret_matrix._minMatrix;
max(x:MATRIX): REAL -> interpret_matrix._maxMatrix;
zeros<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._zeros;
ones<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._ones;
transpose(x:MATRIX): MATRIX -> interpret_matrix._transposeMatrix;
triu(x:MATRIX): MATRIX -> interpret_matrix._triu;
linsolve(A:MATRIX,b:VECTOR): VECTOR -> interpret_matrix._linsolve;
matrix(v:VECTOR_LIST): MATRIX -> interpret_matrix._matrixFromVectors;
rank(A:MATRIX): INT -> interpret_matrix._rank;
is_zero(x:MATRIX): BOOL -> interpret_matrix._isMatrixZero;
is_invertible(x:MATRIX): BOOL -> interpret_matrix._isMatrixInvertible;
inv(x:MATRIX): MATRIX -> interpret_matrix._invMatrix;
_numberToTerm(x:INT):TERM -> interpret_term._numberToTerm;
_add(x:TERM,y:INT):TERM -> interpret_term._addTermReal;
_add(x:TERM,y:REAL):TERM -> interpret_term._addTermReal;
_add(x:INT,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:REAL,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:TERM,y:TERM):TERM -> interpret_term._addTermTerm;
_sub(x:TERM,y:INT):TERM -> interpret_term._subTermReal;
_sub(x:TERM,y:REAL):TERM -> interpret_term._subTermReal;
_sub(x:INT,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:REAL,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:TERM,y:TERM):TERM -> interpret_term._subTermTerm;
_mul(x:TERM,y:INT):TERM -> interpret_term._mulTermReal;
_mul(x:TERM,y:REAL):TERM -> interpret_term._mulTermReal;
_mul(x:INT,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:REAL,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:TERM,y:TERM):TERM -> interpret_term._mulTermTerm;
_div(x:TERM,y:INT):TERM -> interpret_term._divTermReal;
_div(x:TERM,y:REAL):TERM -> interpret_term._divTermReal;
_div(x:INT,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:REAL,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:TERM,y:TERM):TERM -> interpret_term._divTermTerm;
_pow(x:TERM,y:INT):TERM -> interpret_term._powTermReal;
_pow(x:TERM,y:REAL):TERM -> interpret_term._powTermReal;
_pow(x:INT,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:REAL,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:TERM,y:TERM):TERM -> interpret_term._powTermTerm;
sin(x:TERM): TERM -> interpret_term._sinTerm;
cos(x:TERM): TERM -> interpret_term._cosTerm;
tan(x:TERM): TERM -> interpret_term._tanTerm;
exp(x:TERM): TERM -> interpret_term._expTerm;
diff(x:TERM, varId:TERM): TERM -> interpret_term._diffTerm;

`;var _n=class{constructor(){this.lexer=null;this.symTab=[];this.loopLevel=0;this.scope=0}getSymbol(e){for(let r of this.symTab)if(r.id===e)return r;return null}removeSymTabEntry(e){let r=[];for(let n of this.symTab)n!==e&&r.push(n);this.symTab=r}getLocalSymbols(){let e=[];for(let r of this.symTab)if(r.kind==="LOCAL"){if(r.type.base==="TERM_VAR")continue;e.push(r)}return e}parse(e){return this.loopLevel=0,this.scope=0,this.symTab=da(ku),this.lexer=new qu.Lexer,this.lexer.configureSingleLineComments("//"),this.lexer.configureMultiLineComments("/*","*/"),this.lexer.enableEmitNewlines(!1),this.lexer.enableEmitIndentation(!1),this.lexer.enableBackslashLineBreaks(!1),this.lexer.pushSource("FILE",e),this.lexer.setTerminals(["&&","||","==","!=",">=","<=","++","--"]),this.parseProgram().str}parseProgram(){let e=new We;for(;this.lexer.isNotEND();){let r=this.parseStatement();e.str+=r.str}return e}parseStatement(){if(this.lexer.isTER("let"))return this.parseDeclaration();if(this.lexer.isTER("if"))return this.parseIf();if(this.lexer.isTER("do"))return this.parseDo();if(this.lexer.isTER("while"))return this.parseWhile();if(this.lexer.isTER("function"))return this.parseFunction();if(this.lexer.isTER("return"))return this.parseReturn();if(this.lexer.isTER("break"))return this.parseBreak();if(this.lexer.isTER("continue"))return this.parseContinue();{let e=this.parseExpression();return this.lexer.EOS(),new We(e.code.str+";")}}parseDeclaration(){let e=new We;this.lexer.TER("let");let r=[];if(r.push(this.lexer.ID()),this.lexer.isTER("(")){let n=r[0];this.lexer.next();let i=[];for(i.push(this.lexer.ID());this.lexer.isTER(",");)this.lexer.next(),i.push(this.lexer.ID());for(let f of i){let u=new Ke("TERM_VAR"),a=new Dr(f,"LOCAL",u,this.scope,[]);this.symTab.push(a)}this.lexer.TER(")"),this.lexer.TER("=");let o=this.parseExpression();if(o.type.base!=="TERM")switch(o.type.base){case"INT":case"REAL":o.code.str="runtime.interpret_term._numberToTerm("+o.code.str+")",o.type.base="TERM";break;default:this.lexer.error("right-hand side is not a term")}e.str+="let "+n+" = "+o.code.str+";";for(let f=0;f<i.length;f++)this.symTab.pop();let l=[];for(let f of i)l.push(new Dr(f,"PARAMETER",new Ke("TERM_VAR"),this.scope+1,[]));let m=new Dr(n,"LOCAL",new Ke("TERM"),this.scope,l);this.symTab.push(m),this.lexer.EOS()}else{let n=!1;for(;this.lexer.isTER(":")||this.lexer.isTER("/");)this.lexer.isTER("/")&&(n=!0),this.lexer.isTER(":")&&n==!0&&this.lexer.error('cannot mix ":" and "/"'),this.lexer.next(),r.push(this.lexer.ID());this.lexer.TER("=");let i=this.parseExpression();for(let o of r){let l=new Dr(o,"LOCAL",i.type,this.scope,[]);this.symTab.push(l)}if(n){i.type.base!=="INT"&&this.lexer.error('declaration operator "/" is unimplemented for type '+i.type.base),e.str+="let ";for(let o=0;o<r.length;o++){let l=r[o];o>0&&(e.str+=", "),e.str+=l}e.str+=`;
`;for(let o=0;o<r.length;o++){let l=r[o];if(o==0)e.str+=l+" = "+i.code.str+`;
`;else{e.str+="do { "+l+" = "+i.code.str+"; } while (";let m="";for(let f=0;f<o;f++)m.length>0&&(m+=" || "),m+=l+" == "+r[f];e.str+=m,e.str+=`);
`}}}else for(let o of r)e.str+="let "+o+" = "+i.code.str+";";this.lexer.EOS()}return e}parseExpression(){let e=this.parseOr();for(;this.lexer.isTER("=");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseOr();e.code.tmp.includes("setElement")?(n.type.base!=="INT"&&n.type.base!=="REAL"&&this.lexer.error("element must be of type INT or REAL."),e.code.str=e.code.tmp.replace("\xA7RHS\xA7",n.code.str),e.type.base="VOID"):(e.type.base==="INT"||e.type.base==="REAL")&&(n.type.base==="INT"||n.type.base==="REAL")?(e.type.base="INT",e.code.str=e.code.str+" "+r+" "+n.code.str):e.type.base==="VECTOR"&&n.type.base==="VECTOR"?(e.type.base="VECTOR",e.code.str=e.code.str+" "+r+" runtime.interpret_vector._clone("+n.code.str+")"):e.type.base==="MATRIX"&&n.type.base==="MATRIX"?(e.type.base="MATRIX",e.code.str=e.code.str+" "+r+" runtime.interpret_matrix._clone("+n.code.str+")"):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseOr(){let e=this.parseAnd();for(;this.lexer.isTER("||");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseAnd();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseAnd(){let e=this.parseEqual();for(;this.lexer.isTER("&&");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseEqual();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseEqual(){let e=this.parseRelational();if(this.lexer.isTER("==")||this.lexer.isTER("!=")){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseRelational();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):e.type.base=="INT"&&n.type.base=="INT"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):(e.type.base=="INT"||e.type.base=="REAL")&&(n.type.base=="INT"||n.type.base=="REAL")?(e.type.base="BOOL",e.code.str=r=="=="?"(Math.abs(("+e.code.str+") - ("+n.code.str+")) <= 1e-9)":"(Math.abs(("+e.code.str+") - ("+n.code.str+")) > 1e-9)"):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseRelational(){let e=this.parseAdd();if(this.lexer.isTER("<=")||this.lexer.isTER(">=")||this.lexer.isTER("<")||this.lexer.isTER(">")){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseAdd();(e.type.base=="INT"||e.type.base=="REAL")&&(n.type.base=="INT"||n.type.base=="REAL")?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseAdd(){let e=this.parseMul();for(;this.lexer.isTER("+")||this.lexer.isTER("-");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseMul();e=this.call(this.getSymbol(r==="+"?"_add":"_sub"),[],[e,n])}return e}parseMul(){let e=this.parsePow();for(;this.lexer.isTER("*")||this.lexer.isTER("/")||this.lexer.isTER("mod");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parsePow();e=this.call(this.getSymbol(r==="*"?"_mul":r==="/"?"_div":"_mod"),[],[e,n])}return e}parsePow(){let e=this.parseUnary();if(this.lexer.isTER("^")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_pow"),[],[e,r])}return e}parseUnary(){let e=this.parseUnaryExpression();return e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isNotTER("(")&&this.lexer.isNotTER("<")&&this.lexer.errorExpected(["(","<"]),(this.lexer.isTER("++")||this.lexer.isTER("--")||e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isTER("<")||this.lexer.isTER("(")||this.lexer.isTER("["))&&(e=this.parseUnaryPostfix(e)),e}parseUnaryExpression(){let e=new dt;if(this.lexer.isTER("true"))e.code.str=" true ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isTER("false"))e.code.str=" false ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isINT())e.code.str=" "+this.lexer.INT()+" ",e.type.base="INT";else if(this.lexer.isREAL())e.code.str=" "+this.lexer.REAL()+" ",e.type.base="REAL";else if(this.lexer.isTER("(")){this.lexer.next();let r=this.parseExpression();this.lexer.TER(")"),e.code.str=" ( "+r.code.str+" ) ",e.type=r.type}else if(this.lexer.isTER("[")){this.lexer.next();let r=0,n=-1,i=-1,o=[];for(;this.lexer.isNotTER("]");){r>0&&this.lexer.TER(",");let f=this.parseMatrixRow();r==0?i=f.length:i!=f.length&&this.lexer.error("inconsistent number of matrix columns");for(let u of f)o.push(u);r++}n=r,this.lexer.TER("]");let l="[",m=0;for(let f of o)m>0&&(l+=", "),l+=f.code.str,m++;l+="]",e.code.str="runtime.interpret_matrix._create("+n+", "+i+", "+l+")",e.type.base="MATRIX"}else if(this.lexer.isID()){let r=this.lexer.ID();e.sym=this.getSymbol(r),e.sym==null&&this.lexer.errorUnknownSymbol(r),e.sym.type.base==="TERM_VAR"?(e.type=new Ke("TERM"),e.code.str='runtime.interpret_term.var("'+r+'")'):(e.type=e.sym.type.clone(),e.code.str=" "+r)}else if(this.lexer.isTER("-")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_unaryMinus"),[],[r])}else if(this.lexer.isTER("!")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_unaryNot"),[],[r])}else this.lexer.errorExpected(["INT","IMAG","REAL","(","ID"]);return e}parseMatrixRow(){this.lexer.TER("[");let e=0,r=[];for(;this.lexer.isNotTER("]");){e>0&&this.lexer.TER(",");let n=this.parseExpression();n.type.base!=="INT"&&n.type.base!=="REAL"&&this.lexer.error("matrix element must be of type INT or REAL."),r.push(n),e++}return this.lexer.TER("]"),r}parseUnaryPostfix(e){if(this.lexer.isTER("++"))this.lexer.next(),e.code.str+=" ++ ";else if(this.lexer.isTER("--"))this.lexer.next(),e.code.str+=" -- ";else if(this.lexer.isTER("<")||this.lexer.isTER("(")){let r=[],n=[];if(this.lexer.isTER("<")){this.lexer.next();let i=0;for(;this.lexer.isNotTER(">");)i>0&&this.lexer.TER(","),r.push(this.parseUnary()),i++;this.lexer.TER(">")}if(this.lexer.TER("("),e.sym==null&&this.lexer.errorNotAFunction(),e.sym.kind=="FUNCTION"||e.sym.kind=="LOCAL"&&e.sym.type.base==="TERM"){let i=0;for(;this.lexer.isNotTER(")");)i>0&&this.lexer.TER(","),n.push(this.parseExpression()),i++;this.lexer.TER(")")}else this.lexer.errorNotAFunction();if(e.sym.kind=="FUNCTION")e=this.call(e.sym,r,n);else{e.sym.subSymbols.length!=n.length&&this.lexer.error("invalid parameters for function "+e.sym.id);let i="{";for(let o=0;o<n.length;o++)n[o].type.base!=="INT"&&n[o].type.base!=="REAL"&&this.lexer.error("parameters for function must be of type INT or REAL."),o>0&&(i+=", "),i+=e.sym.subSymbols[o].id+": "+n[o].code.str;i+="}",e.code.str="runtime.interpret_term._eval("+e.sym.id+", "+i+", "+this.getTokenPosStr()+")",e.type=new Ke("REAL")}}else if(this.lexer.isTER("[")){this.lexer.next();let r=[],n=0;for(;this.lexer.isNotTER("]");)n>0&&this.lexer.TER(","),r.push(this.parseExpression()),n++;if(this.lexer.TER("]"),e.type.base==="VECTOR")r.length!=1&&this.lexer.error("expected one index"),r[0].type.base!=="INT"&&this.lexer.error("index is not of type integer"),e.type.base="REAL",e.code.str="runtime.interpret_vector._getElement("+e.sym.id+", "+r[0].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_vector._setElement("+e.sym.id+", "+r[0].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")";else if(e.type.base==="MATRIX"){r.length!=2&&this.lexer.error("expected two indices");for(let i=0;i<r.length;i++)r[i].type.base!=="INT"&&this.lexer.error("index "+(i+1)+" is not of type integer");e.type.base="REAL",e.code.str="runtime.interpret_matrix._getElement("+e.sym.id+", "+r[0].code.str+", "+r[1].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_matrix._setElement("+e.sym.id+", "+r[0].code.str+", "+r[1].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")"}else this.lexer.error("can only index a matrix or a vector")}else this.lexer.errorExpected(["++","--","(","["]);return e}call(e,r,n){let i=new dt;i.sym=e,i.type=e.type.clone();let o=e;for(;o!=null;){let l=[],m=[];for(let f of o.subSymbols)f.kind=="DIMENSION"?l.push(f):f.kind==="PARAMETER"&&m.push(f);if(l.length==r.length&&m.length==n.length||m.length==1&&(m[0].type.base=="INT_LIST"||m[0].type.base=="VECTOR_LIST")){let f=m.length==1&&m[0].type.base=="INT_LIST",u=m.length==1&&m[0].type.base=="VECTOR_LIST",a=!0;for(let s=0;s<l.length;s++)if(l[s].type.base!==r[s].type.base){a=!1;break}if(f||u){for(let s=0;s<n.length;s++)if(f&&n[s].type.base!="INT"||u&&n[s].type.base!="VECTOR"){a=!1;break}}else for(let s=0;s<m.length;s++)if(m[s].type.base!==n[s].type.base){a=!1;break}if(a){i.type=o.type.clone(),i.code.str="runtime."+o.runtimeId+"(";let s=0;for(let c=0;c<l.length;c++)s>0&&(i.code.str+=", "),i.code.str+=r[c].code.str,s++;if(f||u){s>0&&(i.code.str+=", "),i.code.str+="[";for(let c=0;c<n.length;c++)c>0&&(i.code.str+=","),i.code.str+=n[c].code.str;i.code.str+="]",s++}else for(let c=0;c<m.length;c++)s>0&&(i.code.str+=", "),i.code.str+=n[c].code.str,s++;s>0&&(i.code.str+=", "),i.code.str+=this.getTokenPosStr(),s++,i.code.str+=")",i.sym=null;break}}o=o.functionOverloadSuccessor}if(o==null){let l="";for(let m of n)l.length>0&&(l+=", "),l+=m.type.toString();this.lexer.error('no matching function prototype for calling "'+i.sym.id+'" with types ('+l+")")}return i}parseIf(){let e=new We;this.lexer.TER("if"),this.lexer.TER("(");let r=this.parseExpression();r.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),e.str="if ("+r.code.str+")";let n=this.parseBlock();if(e.str+=n.str,this.lexer.isTER("else")){this.lexer.next(),e.str+=" else ";let i=this.parseBlock();e.str+=i.str}return e}parseBlock(){let e=new We;if(this.lexer.isTER("{")){for(this.lexer.next(),e.str+="{";this.lexer.isNotTER("}");)e.str+=this.parseStatement().str;return this.lexer.TER("}"),e.str+="}",e}else return this.parseStatement()}parseDo(){this.lexer.TER("do"),this.loopLevel++;let e=this.parseBlock();this.loopLevel--,this.lexer.TER("while"),this.lexer.TER("(");let r=this.parseExpression();return r.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.lexer.EOS(),new We(" do "+e.str+" while( "+r.code.str+" ); ")}parseWhile(){this.lexer.TER("while"),this.lexer.TER("(");let e=this.parseExpression();e.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.loopLevel++;let r=this.parseBlock();return this.loopLevel--,new We(" while( "+e.code.str+" ) "+r.str)}parseFunction(){this.lexer.TER("function");let e=this.lexer.ID();this.lexer.TER("(");let r=0;for(;this.lexer.isNotTER(")");){r>0&&this.lexer.TER(",");let i=this.lexer.ID();r++}return this.lexer.TER(")"),this.parseBlock()}parseReturn(){if(this.lexer.TER("return"),this.lexer.isEOS()==!1){let e=this.parseExpression();return this.lexer.EOS(),new We(" return "+e.code)}else return this.lexer.EOS(),new We(" return ")}parseBreak(){return this.lexer.TER("break"),this.loopLevel==0&&this.lexer.error("break not allowed outside loop"),this.lexer.EOS(),new We(" break ")}parseContinue(){return this.lexer.TER("continue"),this.loopLevel==0&&this.lexer.error("continue not allowed outside loop"),this.lexer.EOS(),new We(" continue ")}getTokenPosStr(){return"'"+this.lexer.getToken().row+":"+this.lexer.getToken().col+"'"}};var Tn="";function pp(t,e=!1){let r=new _n;Tn=r.parse(t);let n=r.getLocalSymbols();return e&&console.log(Tn),new Cn().interpret(Tn,n),n}return As(mp);})();
/*!
 *  decimal.js v10.4.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
