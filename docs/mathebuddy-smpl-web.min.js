"use strict";var mathebuddySMPL=(()=>{var Af=Object.create;var Jt=Object.defineProperty;var Cf=Object.getOwnPropertyDescriptor;var _f=Object.getOwnPropertyNames;var Mf=Object.getPrototypeOf,Tf=Object.prototype.hasOwnProperty;var Zr=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Sf=(n,e)=>{for(var r in e)Jt(n,r,{get:e[r],enumerable:!0})},to=(n,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _f(e))!Tf.call(n,i)&&i!==r&&Jt(n,i,{get:()=>e[i],enumerable:!(t=Cf(e,i))||t.enumerable});return n};var Mt=(n,e,r)=>(r=n!=null?Af(Mf(n)):{},to(e||!n||!n.__esModule?Jt(r,"default",{value:n,enumerable:!0}):r,n)),Nf=n=>to(Jt({},"__esModule",{value:!0}),n);var io=Zr(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.getStr=yr.setLanguage=yr.LanguageText=yr.Language=void 0;var Ht;(function(n){n[n.EN=0]="EN",n[n.DE=1]="DE"})(Ht=yr.Language||(yr.Language={}));var xr;(function(n){n[n.EXPECTED=0]="EXPECTED",n[n.EXPECTED_ONE_OF=1]="EXPECTED_ONE_OF",n[n.CONDITION_NOT_BOOLEAN=2]="CONDITION_NOT_BOOLEAN",n[n.UNKNOWN_SYMBOL=3]="UNKNOWN_SYMBOL",n[n.SYMBOL_IS_NOT_A_FUNCTION=4]="SYMBOL_IS_NOT_A_FUNCTION",n[n.BIN_OP_INCOMPATIBLE_TYPES=5]="BIN_OP_INCOMPATIBLE_TYPES"})(xr=yr.LanguageText||(yr.LanguageText={}));function Ff(n){no=n}yr.setLanguage=Ff;function Bf(n){return ri[n+"_"+no]}yr.getStr=Bf;var no=Ht.EN,ri={};function ot(n,e){ri[n+"_"+Ht.EN]=e}function ut(n,e){ri[n+"_"+Ht.DE]=e}ot(xr.EXPECTED,"expected");ut(xr.EXPECTED,"erwarte");ot(xr.EXPECTED_ONE_OF,"expected one of");ut(xr.EXPECTED_ONE_OF,"erwarte Token aus Liste");ot(xr.CONDITION_NOT_BOOLEAN,"condition must be boolean");ut(xr.CONDITION_NOT_BOOLEAN,"Bedingung muss Boolsch sein");ot(xr.UNKNOWN_SYMBOL,"unknown symbol");ut(xr.UNKNOWN_SYMBOL,"unbekanntes Symbol");ot(xr.SYMBOL_IS_NOT_A_FUNCTION,"symbol is not a function");ut(xr.SYMBOL_IS_NOT_A_FUNCTION,"Symbol ist keine Funktion");ot(xr.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP is incompatible for types $T1 and $T2");ut(xr.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP ist inkompatibel mit den Typen $T1 und $T2")});var ao=Zr(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.LexerState=void 0;var Tt=class{constructor(){this.i=0,this.n=-1,this.row=1,this.col=1,this.indent=0,this.lastIndent=0,this.stack=[]}copy(){let e=new Tt;e.i=this.i,e.n=this.n,e.row=this.row,e.col=this.col,e.indent=this.indent,e.lastIndent=this.lastIndent;for(let r=0;r<this.stack.length;r++)e.stack.push(this.stack[r].copy());return e}};Wt.LexerState=Tt});var uo=Zr(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.LexerToken=et.LexerTokenType=void 0;var oo;(function(n){n.DEL="DEL",n.TER="TER",n.INT="INT",n.BIGINT="BIGINT",n.REAL="REAL",n.HEX="HEX",n.STR="STR",n.ID="ID",n.END="END"})(oo=et.LexerTokenType||(et.LexerTokenType={}));var St=class{constructor(){this.token="",this.type=oo.TER,this.value=0,this.valueBigint=0n,this.fileID="",this.row=0,this.col=0}toString(){let e=this.token;e=e.replace(/\n/g,"\\n"),e=e.replace(/\t/g,"\\t");let r=this.fileID+":"+this.row+":"+this.col;return r+=': "'+e+'" ('+this.type+")",r}copy(){let e=new St;return e.token=this.token,e.type=this.type,e.value=this.value,e.fileID=this.fileID,e.row=this.row,e.col=this.col,e}};et.LexerToken=St});var so=Zr(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Lexer=Qr.ParseError=Qr.LexerFile=void 0;var Ce=io(),If=ao(),le=uo(),Kt=class{constructor(){this.stateBackup=null,this.tokenBackup=null,this.id="",this.sourceCode=""}};Qr.LexerFile=Kt;var Ge=class extends Error{constructor(e){super(e),this.name="ParseError"}};Qr.ParseError=Ge;var ti=class{constructor(){this.terminals=new Set,this.fileStack=[],this.token=null,this.lastToken=null,this.state=null,this.singleLineCommentStart="//",this.multiLineCommentStart="/*",this.multilineCommentEnd="*/",this.emitNewline=!1,this.emitHex=!0,this.emitInt=!0,this.emitReal=!0,this.emitBigint=!0,this.emitDoubleQuotes=!0,this.emitIndentation=!1,this.lexerFilePositionPrefix="!>",this.allowBackslashLineBreaks=!1,this.putTrailingSemicolon=[],this.multicharDelimiters=[]}configureSingleLineComments(e="//"){this.singleLineCommentStart=e}configureMultiLineComments(e="/*",r="*/"){this.multiLineCommentStart=e,this.multilineCommentEnd=r}configureLexerFilePositionPrefix(e="!>"){this.lexerFilePositionPrefix=e}enableEmitNewlines(e){this.emitNewline=e}enableEmitHex(e){this.emitHex=e}enableEmitInt(e){this.emitInt=e}enableEmitReal(e){this.emitReal=e}enableEmitBigint(e){this.emitBigint=e}enableEmitDoubleQuotes(e){this.emitDoubleQuotes=e}enableEmitIndentation(e){this.emitIndentation=e}enableBackslashLineBreaks(e){this.allowBackslashLineBreaks=e}isEND(){return this.token.type===le.LexerTokenType.END}isNotEND(){return this.token.type!==le.LexerTokenType.END}END(){if(this.token.type===le.LexerTokenType.END)this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" END")}isID(){return this.token.type===le.LexerTokenType.ID}ID(){let e="";if(this.token.type===le.LexerTokenType.ID)e=this.token.token,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" ID");return e}isLID(){return this.token.type===le.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase()}LID(){let e="";if(this.token.type===le.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase())e=this.token.token,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" LowerCaseID");return e}isUID(){return this.token.type===le.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase()}UID(){let e="";if(this.token.type===le.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase())e=this.token.token,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" UpperCaseID");return e}isINT(){return this.token.type===le.LexerTokenType.INT}INT(){let e=0;if(this.token.type===le.LexerTokenType.INT)e=this.token.value,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" INT");return e}isBIGINT(){return this.token.type===le.LexerTokenType.BIGINT}BIGINT(){let e=0n;if(this.token.type===le.LexerTokenType.BIGINT)e=this.token.valueBigint,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" BIGINT");return e}isREAL(){return this.token.type===le.LexerTokenType.REAL}REAL(){let e=0;if(this.token.type===le.LexerTokenType.REAL)e=this.token.value,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" REAL");return e}isHEX(){return this.token.type===le.LexerTokenType.HEX}HEX(){let e="";if(this.token.type===le.LexerTokenType.HEX)e=this.token.token,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" HEX");return e}isSTR(){return this.token.type===le.LexerTokenType.STR}STR(){let e="";if(this.token.type===le.LexerTokenType.STR)e=this.token.token,this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" STR");return e}isTER(e){return this.token.type===le.LexerTokenType.DEL&&this.token.token===e||this.token.type===le.LexerTokenType.ID&&this.token.token===e}isNotTER(e){return this.isTER(e)==!1&&this.token.type!=le.LexerTokenType.END}TER(e){if(this.token.type===le.LexerTokenType.DEL&&this.token.token===e||this.token.type===le.LexerTokenType.ID&&this.token.token===e)this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+' "'+e+'"')}isEOS(){return this.token.token===";"}EOS(){if(this.token.token===";")this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+' ";"')}isINDENT(){return this.token.type==le.LexerTokenType.DEL&&this.token.token==="	+"}isNotINDENT(){return!(this.token.type===le.LexerTokenType.DEL&&this.token.token==="	+")}INDENT(){if(this.token.type==le.LexerTokenType.DEL&&this.token.token==="	+")this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" INDENT")}isOUTDENT(){return this.token.type==le.LexerTokenType.DEL&&this.token.token==="	-"}isNotOUTDENT(){return this.token.type===le.LexerTokenType.END?!1:!(this.token.type===le.LexerTokenType.DEL&&this.token.token==="	-")}OUTDENT(){if(this.token.type==le.LexerTokenType.DEL&&this.token.token==="	-")this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" OUTDENT")}isNEWLINE(){return this.isOUTDENT()||this.token.type==le.LexerTokenType.DEL&&this.token.token===`
`}isNotNEWLINE(){return!this.isOUTDENT()&&!(this.token.type===le.LexerTokenType.DEL&&this.token.token===`
`)}NEWLINE(){if(!this.isOUTDENT())if(this.token.type==le.LexerTokenType.DEL&&this.token.token===`
`)this.next();else throw new Ge(this.err_pos()+(0,Ce.getStr)(Ce.LanguageText.EXPECTED)+" NEWLINE")}error(e,r=null){throw new Ge(this.err_pos(r)+e)}errorExpected(e){let r=(0,Ce.getStr)(Ce.LanguageText.EXPECTED_ONE_OF)+" ";for(let t=0;t<e.length;t++)t>0&&(r+=", "),r+=e[t];r+=".",this.error(r)}errorConditionNotBoolean(){this.error((0,Ce.getStr)(Ce.LanguageText.CONDITION_NOT_BOOLEAN))}errorUnknownSymbol(e){this.error((0,Ce.getStr)(Ce.LanguageText.UNKNOWN_SYMBOL)+" "+e)}errorNotAFunction(){this.error((0,Ce.getStr)(Ce.LanguageText.SYMBOL_IS_NOT_A_FUNCTION))}errorTypesInBinaryOperation(e,r,t){this.error((0,Ce.getStr)(Ce.LanguageText.BIN_OP_INCOMPATIBLE_TYPES).replace("$OP",e).replace("$T1",r).replace("$T2",t))}err_pos(e=null){return e==null&&(e=this.token),e.fileID+":"+e.row+":"+e.col+": "}addPutTrailingSemicolon(e,r=""){let t=new le.LexerToken;t.type=e,t.token=r,this.putTrailingSemicolon.push(t)}setTerminals(e){this.terminals.clear(),this.multicharDelimiters=[];for(let r of e)r.length!=0&&(r[0]>="A"&&r[0]<="Z"||r[0]>="a"&&r[0]<="z"||r[0]=="_"?this.terminals.add(r):this.multicharDelimiters.push(r));this.multicharDelimiters.sort(function(r,t){return t.length-r.length})}getTerminals(){return Array.from(this.terminals)}getMulticharDelimiters(){return this.multicharDelimiters}getToken(){return this.token}next(){this.lastToken=this.token;let e=this.fileStack.slice(-1)[0].sourceCode,r=this.fileStack.slice(-1)[0].id,t=this.state;if(t.stack.length>0){this.token=t.stack[0],t.stack.shift();return}this.token=new le.LexerToken,this.token.fileID=r,t.indent=-1;let i=!1;for(;;)if(t.i<t.n&&e[t.i]===`
`)t.indent=0,i=this.nextTokenLinefeed(t);else if(t.i<t.n&&e[t.i]===" ")t.i++,t.col++,t.indent>=0&&t.indent++;else if(t.i<t.n&&e[t.i]==="	")t.i++,t.col+=4,t.indent>=0&&(t.indent+=4);else if(this.allowBackslashLineBreaks&&t.i<t.n&&e[t.i]==="\\")for(t.i++;t.i<t.n;){if(e[t.i]==" ")t.col++;else if(e[t.i]=="	")t.col+=4;else if(e[t.i]==`
`)t.row++,t.col=1;else break;t.i++}else if(this.singleLineCommentStart.length>0&&this.isNext(this.singleLineCommentStart)){if(this.emitIndentation&&t.indent>=0)break;let l=this.singleLineCommentStart.length;for(t.i+=l,t.col+=l;t.i<t.n&&e[t.i]!=`
`;)t.i++,t.col++;t.i<t.n&&e[t.i]===`
`&&(i=this.nextTokenLinefeed(t)),t.indent=0}else if(this.multiLineCommentStart.length>0&&this.isNext(this.multiLineCommentStart)){if(this.emitIndentation&&t.indent>=0)break;let l=this.multiLineCommentStart.length;for(t.i+=l,t.col+=l;t.i<t.n&&!this.isNext(this.multilineCommentEnd);)e[t.i]===`
`?(t.row++,t.col=1,t.indent=0):t.col++,t.i++;l=this.multilineCommentEnd.length,t.i+=l,t.col+=l}else if(this.lexerFilePositionPrefix.length>0&&e.substring(t.i).startsWith(this.lexerFilePositionPrefix)){t.i+=this.lexerFilePositionPrefix.length;let l="";for(;t.i<t.n&&e[t.i]!==":";)l+=e[t.i],t.i++;t.i++,this.fileStack.slice(-1)[0].id=l,this.token.fileID=l;let c="";for(;t.i<t.n&&e[t.i]!==":";)c+=e[t.i],t.i++;t.i++,this.token.row=parseInt(c);let f="";for(;t.i<t.n&&e[t.i]!==":";)f+=e[t.i],t.i++;t.i++,this.token.col=parseInt(f)}else break;if(this.emitIndentation&&t.indent>=0){let l=t.indent-t.lastIndent;if(t.lastIndent=t.indent,l!=0)if(l%4==0){let c=l>0,f=Math.floor(Math.abs(l)/4);for(let u=0;u<f;u++)this.token=new le.LexerToken,this.token.fileID=r,this.token.row=t.row,c?this.token.col=t.col-l+4*u:this.token.col=t.col,this.token.type=le.LexerTokenType.DEL,this.token.token=c?"	+":"	-",t.stack.push(this.token);this.token=t.stack[0],t.stack.shift();return}else{this.token.row=t.row,this.token.col=t.col-l,this.token.type=le.LexerTokenType.TER,this.token.token="	err";return}}if(i)return;let a=t.copy();if(this.token.row=t.row,this.token.col=t.col,t.indent=0,t.i>=t.n){this.token.token="$end",this.token.type=le.LexerTokenType.END;return}if(this.token.type=le.LexerTokenType.ID,this.token.token="",t.i<t.n&&(e[t.i]>="A"&&e[t.i]<="Z"||e[t.i]>="a"&&e[t.i]<="z"||e[t.i]==="_"))for(this.token.token+=e[t.i],t.i++,t.col++;t.i<t.n&&(e[t.i]>="A"&&e[t.i]<="Z"||e[t.i]>="a"&&e[t.i]<="z"||e[t.i]>="0"&&e[t.i]<="9"||e[t.i]==="_");)this.token.token+=e[t.i],t.i++,t.col++;if(this.token.token.length>0){this.terminals.has(this.token.token)&&(this.token.type=le.LexerTokenType.TER),this.state=t;return}if(t=a.copy(),this.emitDoubleQuotes&&(this.token.type=le.LexerTokenType.STR,t.i<t.n&&e[t.i]==='"')){for(this.token.token="",t.i++,t.col++;t.i<t.n&&e[t.i]!='"'&&e[t.i]!=`
`;)this.token.token+=e[t.i],t.i++,t.col++;if(t.i<t.n&&e[t.i]==='"'){t.i++,t.col++,this.state=t;return}}if(t=a.copy(),this.emitHex&&(this.token.type=le.LexerTokenType.HEX,this.token.token="",t.i<t.n&&e[t.i]==="0"&&(t.i++,t.col++,t.i<t.n&&e[t.i]==="x"))){t.i++,t.col++;let l=0;for(;t.i<t.n&&(e[t.i]>="0"&&e[t.i]<="9"||e[t.i]>="A"&&e[t.i]<="F"||e[t.i]>="a"&&e[t.i]<="f");)this.token.token+=e[t.i],t.i++,t.col++,l++;if(l>0){this.token.token="0x"+this.token.token,this.token.value=parseInt(this.token.token,16),this.token.valueBigint=BigInt(this.token.token),this.state=t;return}}if(t=a.copy(),this.emitInt){if(this.token.type=le.LexerTokenType.INT,this.token.token="",t.i<t.n&&e[t.i]==="0")this.token.token="0",t.i++,t.col++;else if(t.i<t.n&&e[t.i]>="1"&&e[t.i]<="9")for(this.token.token=e[t.i],t.i++,t.col++;t.i<t.n&&e[t.i]>="0"&&e[t.i]<="9";)this.token.token+=e[t.i],t.i++,t.col++;if(this.token.token.length>0&&this.emitBigint&&t.i<t.n&&e[t.i]==="n")t.i++,t.col++,this.token.type=le.LexerTokenType.BIGINT;else if(this.token.token.length>0&&this.emitReal&&t.i<t.n&&e[t.i]===".")for(this.token.type=le.LexerTokenType.REAL,this.token.token+=".",t.i++,t.col++;t.i<t.n&&e[t.i]>="0"&&e[t.i]<="9";)this.token.token+=e[t.i],t.i++,t.col++;if(this.token.token.length>0){this.token.type===le.LexerTokenType.INT?this.token.value=parseInt(this.token.token):this.token.type===le.LexerTokenType.BIGINT?this.token.valueBigint=BigInt(this.token.token):this.token.value=parseFloat(this.token.token),this.state=t;return}}this.token.type=le.LexerTokenType.DEL,this.token.token="";for(let l=0;l<this.multicharDelimiters.length;l++){let c=this.multicharDelimiters[l],f=!0;t=a.copy();for(let u=0;u<c.length;u++){let o=c[u];if(t.i<t.n&&e[t.i]===o)t.i++,t.col++;else{f=!1;break}}if(f){this.state=t,this.token.token=c;return}}t=a.copy(),this.token.type=le.LexerTokenType.DEL,this.token.token="",t.i<t.n&&(this.token.token=e[t.i],t.i++,t.col++,this.state=t)}nextTokenLinefeed(e){let r=!1;if(this.emitNewline)this.token.row=e.row,this.token.col=e.col,this.token.token=`
`,this.token.type=le.LexerTokenType.DEL;else if(this.putTrailingSemicolon.length>0){let t=!1;for(let i of this.putTrailingSemicolon)if(i.type===this.lastToken.type&&(i.type===le.LexerTokenType.DEL?t=i.token===this.lastToken.token:t=!0,t))break;t&&(r=!0,this.token.row=e.row,this.token.col=e.col,this.token.token=";",this.token.type=le.LexerTokenType.DEL)}return e.row++,e.col=1,e.indent=0,e.i++,this.emitNewline||r}isNext(e){let r=this.fileStack.slice(-1)[0].sourceCode,t=this.state,i=e.length;if(t.i+i>=t.n)return!1;for(let a=0;a<i;a++){let l=e[a];if(r[t.i+a]!=l)return!1}return!0}pushSource(e,r){this.fileStack.length>0&&(this.fileStack.slice(-1)[0].stateBackup=this.state.copy(),this.fileStack.slice(-1)[0].tokenBackup=this.token.copy());let t=new Kt;t.id=e,t.sourceCode=r,this.fileStack.push(t),this.state=new If.LexerState,this.state.n=r.length,this.next()}popSource(){this.fileStack.pop(),this.fileStack.length>0&&(this.state=this.fileStack.slice(-1)[0].stateBackup,this.token=this.fileStack.slice(-1)[0].tokenBackup)}backupState(){return{state:this.state.copy(),token:this.token.copy()}}replayState(e){this.state=e.state,this.token=e.token}};Qr.Lexer=ti});var ni=Zr(rt=>{"use strict";var Rf=rt&&rt.__createBinding||(Object.create?function(n,e,r,t){t===void 0&&(t=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,t,i)}:function(n,e,r,t){t===void 0&&(t=r),n[t]=e[r]}),Lf=rt&&rt.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Rf(e,n,r)};Object.defineProperty(rt,"__esModule",{value:!0});Lf(so(),rt)});var ko=Zr((oi,ui)=>{(function(n,e){typeof oi=="object"&&typeof ui<"u"?ui.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.typed=e())})(oi,function(){"use strict";function n(o,s){var p=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(!p){if(Array.isArray(o)||(p=e(o))||s&&o&&typeof o.length=="number"){p&&(o=p);var h=0,v=function(){};return{s:v,n:function(){return h>=o.length?{done:!0}:{done:!1,value:o[h++]}},e:function(D){throw D},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,d=!1,g;return{s:function(){p=p.call(o)},n:function(){var D=p.next();return m=D.done,D},e:function(D){d=!0,g=D},f:function(){try{!m&&p.return!=null&&p.return()}finally{if(d)throw g}}}}function e(o,s){if(!!o){if(typeof o=="string")return r(o,s);var p=Object.prototype.toString.call(o).slice(8,-1);if(p==="Object"&&o.constructor&&(p=o.constructor.name),p==="Map"||p==="Set")return Array.from(o);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return r(o,s)}}function r(o,s){(s==null||s>o.length)&&(s=o.length);for(var p=0,h=new Array(s);p<s;p++)h[p]=o[p];return h}function t(o){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(o)}function i(){return!0}function a(){return!1}function l(){}var c="Argument is not a typed-function.";function f(){function o(S){return t(S)==="object"&&S!==null&&S.constructor===Object}var s=[{name:"number",test:function(R){return typeof R=="number"}},{name:"string",test:function(R){return typeof R=="string"}},{name:"boolean",test:function(R){return typeof R=="boolean"}},{name:"Function",test:function(R){return typeof R=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(R){return R instanceof Date}},{name:"RegExp",test:function(R){return R instanceof RegExp}},{name:"Object",test:o},{name:"null",test:function(R){return R===null}},{name:"undefined",test:function(R){return R===void 0}}],p={name:"any",test:i,isAny:!0},h,v,m=0,d={createCount:0};function g(S){var R=h.get(S);if(R)return R;var k='Unknown type "'+S+'"',Y=S.toLowerCase(),K,j=n(v),te;try{for(j.s();!(te=j.n()).done;)if(K=te.value,K.toLowerCase()===Y){k+='. Did you mean "'+K+'" ?';break}}catch(J){j.e(J)}finally{j.f()}throw new TypeError(k)}function y(S){for(var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",k=R?g(R).index:v.length,Y=[],K=0;K<S.length;++K){if(!S[K]||typeof S[K].name!="string"||typeof S[K].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var j=S[K].name;if(h.has(j))throw new TypeError('Duplicate type name "'+j+'"');Y.push(j),h.set(j,{name:j,test:S[K].test,isAny:S[K].isAny,index:k+K,conversionsTo:[]})}var te=v.slice(k);v=v.slice(0,k).concat(Y).concat(te);for(var J=k+Y.length;J<v.length;++J)h.get(v[J]).index=J}function D(){h=new Map,v=[],m=0,y([p],!1)}D(),y(s);function w(){var S,R=n(v),k;try{for(R.s();!(k=R.n()).done;)S=k.value,h.get(S).conversionsTo=[]}catch(Y){R.e(Y)}finally{R.f()}m=0}function b(S){var R=v.filter(function(k){var Y=h.get(k);return!Y.isAny&&Y.test(S)});return R.length?R:["any"]}function x(S){return S&&typeof S=="function"&&"_typedFunctionData"in S}function A(S,R,k){if(!x(S))throw new TypeError(c);var Y=k&&k.exact,K=Array.isArray(R)?R.join(","):R,j=O(K),te=E(j);if(!Y||te in S.signatures){var J=S._typedFunctionData.signatureMap.get(te);if(J)return J}var ee=j.length,me;if(Y){me=[];var Ae;for(Ae in S.signatures)me.push(S._typedFunctionData.signatureMap.get(Ae))}else me=S._typedFunctionData.signatures;for(var ie=0;ie<ee;++ie){var ir=j[ie],$e=[],rr=void 0,Xe=n(me),lr;try{for(Xe.s();!(lr=Xe.n()).done;){rr=lr.value;var Qe=V(rr.params,ie);if(!(!Qe||ir.restParam&&!Qe.restParam)){if(!Qe.hasAny){var Dr=function(){var cr=L(Qe);if(ir.types.some(function(jr){return!cr.has(jr.name)}))return"continue"}();if(Dr==="continue")continue}$e.push(rr)}}}catch(cr){Xe.e(cr)}finally{Xe.f()}if(me=$e,me.length===0)break}var ar,or=n(me),Kr;try{for(or.s();!(Kr=or.n()).done;)if(ar=Kr.value,ar.params.length<=ee)return ar}catch(cr){or.e(cr)}finally{or.f()}throw new TypeError("Signature not found (signature: "+(S.name||"unnamed")+"("+E(j,", ")+"))")}function _(S,R,k){return A(S,R,k).implementation}function C(S,R){var k=g(R);if(k.test(S))return S;var Y=k.conversionsTo;if(Y.length===0)throw new Error("There are no conversions to "+R+" defined.");for(var K=0;K<Y.length;K++){var j=g(Y[K].from);if(j.test(S))return Y[K].convert(S)}throw new Error("Cannot convert "+S+" to "+R)}function E(S){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return S.map(function(k){return k.name}).join(R)}function T(S){var R=S.indexOf("...")===0,k=R?S.length>3?S.slice(3):"any":S,Y=k.split("|").map(function(J){return g(J.trim())}),K=!1,j=R?"...":"",te=Y.map(function(J){return K=J.isAny||K,j+=J.name+"|",{name:J.name,typeIndex:J.index,test:J.test,isAny:J.isAny,conversion:null,conversionIndex:-1}});return{types:te,name:j.slice(0,-1),hasAny:K,hasConversion:!1,restParam:R}}function M(S){var R=S.types.map(function(te){return te.name}),k=W(R),Y=S.hasAny,K=S.name,j=k.map(function(te){var J=g(te.from);return Y=J.isAny||Y,K+="|"+te.from,{name:te.from,typeIndex:J.index,test:J.test,isAny:J.isAny,conversion:te,conversionIndex:te.index}});return{types:S.types.concat(j),name:K,hasAny:Y,hasConversion:j.length>0,restParam:S.restParam}}function L(S){return S.typeSet||(S.typeSet=new Set,S.types.forEach(function(R){return S.typeSet.add(R.name)})),S.typeSet}function O(S){var R=[];if(typeof S!="string")throw new TypeError("Signatures must be strings");var k=S.trim();if(k==="")return R;for(var Y=k.split(","),K=0;K<Y.length;++K){var j=T(Y[K].trim());if(j.restParam&&K!==Y.length-1)throw new SyntaxError('Unexpected rest parameter "'+Y[K]+'": only allowed for the last parameter');if(j.types.length===0)return null;R.push(j)}return R}function I(S){var R=ye(S);return R?R.restParam:!1}function N(S){if(!S||S.types.length===0)return i;if(S.types.length===1)return g(S.types[0].name).test;if(S.types.length===2){var R=g(S.types[0].name).test,k=g(S.types[1].name).test;return function(j){return R(j)||k(j)}}else{var Y=S.types.map(function(K){return g(K.name).test});return function(j){for(var te=0;te<Y.length;te++)if(Y[te](j))return!0;return!1}}}function X(S){var R,k,Y;if(I(S)){R=fe(S).map(N);var K=R.length,j=N(ye(S)),te=function(ee){for(var me=K;me<ee.length;me++)if(!j(ee[me]))return!1;return!0};return function(ee){for(var me=0;me<R.length;me++)if(!R[me](ee[me]))return!1;return te(ee)&&ee.length>=K+1}}else return S.length===0?function(ee){return ee.length===0}:S.length===1?(k=N(S[0]),function(ee){return k(ee[0])&&ee.length===1}):S.length===2?(k=N(S[0]),Y=N(S[1]),function(ee){return k(ee[0])&&Y(ee[1])&&ee.length===2}):(R=S.map(N),function(ee){for(var me=0;me<R.length;me++)if(!R[me](ee[me]))return!1;return ee.length===R.length})}function V(S,R){return R<S.length?S[R]:I(S)?ye(S):null}function F(S,R){var k=V(S,R);return k?L(k):new Set}function B(S){return S.conversion===null||S.conversion===void 0}function q(S,R){var k=new Set;return S.forEach(function(Y){var K=F(Y.params,R),j,te=n(K),J;try{for(te.s();!(J=te.n()).done;)j=J.value,k.add(j)}catch(ee){te.e(ee)}finally{te.f()}}),k.has("any")?["any"]:Array.from(k)}function H(S,R,k){var Y,K,j=S||"unnamed",te=k,J,ee=function(){var Xe=[];if(te.forEach(function(Qe){var Dr=V(Qe.params,J),ar=N(Dr);(J<Qe.params.length||I(Qe.params))&&ar(R[J])&&Xe.push(Qe)}),Xe.length===0){if(K=q(te,J),K.length>0){var lr=b(R[J]);return Y=new TypeError("Unexpected type of argument in function "+j+" (expected: "+K.join(" or ")+", actual: "+lr.join(" | ")+", index: "+J+")"),Y.data={category:"wrongType",fn:j,index:J,actual:lr,expected:K},{v:Y}}}else te=Xe};for(J=0;J<R.length;J++){var me=ee();if(t(me)==="object")return me.v}var Ae=te.map(function(rr){return I(rr.params)?1/0:rr.params.length});if(R.length<Math.min.apply(null,Ae))return K=q(te,J),Y=new TypeError("Too few arguments in function "+j+" (expected: "+K.join(" or ")+", index: "+R.length+")"),Y.data={category:"tooFewArgs",fn:j,index:R.length,expected:K},Y;var ie=Math.max.apply(null,Ae);if(R.length>ie)return Y=new TypeError("Too many arguments in function "+j+" (expected: "+ie+", actual: "+R.length+")"),Y.data={category:"tooManyArgs",fn:j,index:R.length,expectedLength:ie},Y;for(var ir=[],$e=0;$e<R.length;++$e)ir.push(b(R[$e]).join("|"));return Y=new TypeError('Arguments of type "'+ir.join(", ")+'" do not match any of the defined signatures of function '+j+"."),Y.data={category:"mismatch",actual:ir},Y}function U(S){for(var R=v.length+1,k=0;k<S.types.length;k++)B(S.types[k])&&(R=Math.min(R,S.types[k].typeIndex));return R}function z(S){for(var R=m+1,k=0;k<S.types.length;k++)B(S.types[k])||(R=Math.min(R,S.types[k].conversionIndex));return R}function Z(S,R){if(S.hasAny){if(!R.hasAny)return 1}else if(R.hasAny)return-1;if(S.restParam){if(!R.restParam)return 1}else if(R.restParam)return-1;if(S.hasConversion){if(!R.hasConversion)return 1}else if(R.hasConversion)return-1;var k=U(S)-U(R);if(k<0)return-1;if(k>0)return 1;var Y=z(S)-z(R);return Y<0?-1:Y>0?1:0}function G(S,R){var k=S.params,Y=R.params,K=ye(k),j=ye(Y),te=I(k),J=I(Y);if(te&&K.hasAny){if(!J||!j.hasAny)return 1}else if(J&&j.hasAny)return-1;var ee=0,me=0,Ae,ie=n(k),ir;try{for(ie.s();!(ir=ie.n()).done;)Ae=ir.value,Ae.hasAny&&++ee,Ae.hasConversion&&++me}catch(At){ie.e(At)}finally{ie.f()}var $e=0,rr=0,Xe=n(Y),lr;try{for(Xe.s();!(lr=Xe.n()).done;)Ae=lr.value,Ae.hasAny&&++$e,Ae.hasConversion&&++rr}catch(At){Xe.e(At)}finally{Xe.f()}if(ee!==$e)return ee-$e;if(te&&K.hasConversion){if(!J||!j.hasConversion)return 1}else if(J&&j.hasConversion)return-1;if(me!==rr)return me-rr;if(te){if(!J)return 1}else if(J)return-1;var Qe=(k.length-Y.length)*(te?-1:1);if(Qe!==0)return Qe;for(var Dr=[],ar=0,or=0;or<k.length;++or){var Kr=Z(k[or],Y[or]);Dr.push(Kr),ar+=Kr}if(ar!==0)return ar;for(var cr,jr=0,Gt=Dr;jr<Gt.length;jr++)if(cr=Gt[jr],cr!==0)return cr;return 0}function W(S){if(S.length===0)return[];var R=S.map(g);S.length>1&&R.sort(function(ee,me){return ee.index-me.index});var k=R[0].conversionsTo;if(S.length===1)return k;k=k.concat([]);for(var Y=new Set(S),K=1;K<R.length;++K){var j=void 0,te=n(R[K].conversionsTo),J;try{for(te.s();!(J=te.n()).done;)j=J.value,Y.has(j.from)||(k.push(j),Y.add(j.from))}catch(ee){te.e(ee)}finally{te.f()}}return k}function re(S,R){var k=R;if(S.some(function(J){return J.hasConversion})){var Y=I(S),K=S.map(ne);k=function(){for(var ee=[],me=Y?arguments.length-1:arguments.length,Ae=0;Ae<me;Ae++)ee[Ae]=K[Ae](arguments[Ae]);return Y&&(ee[me]=arguments[me].map(K[me])),R.apply(this,ee)}}var j=k;if(I(S)){var te=S.length-1;j=function(){return k.apply(this,Se(arguments,0,te).concat([Se(arguments,te)]))}}return j}function ne(S){var R,k,Y,K,j=[],te=[];switch(S.types.forEach(function(J){J.conversion&&(j.push(g(J.conversion.from).test),te.push(J.conversion.convert))}),te.length){case 0:return function(ee){return ee};case 1:return R=j[0],Y=te[0],function(ee){return R(ee)?Y(ee):ee};case 2:return R=j[0],k=j[1],Y=te[0],K=te[1],function(ee){return R(ee)?Y(ee):k(ee)?K(ee):ee};default:return function(ee){for(var me=0;me<te.length;me++)if(j[me](ee))return te[me](ee);return ee}}}function Q(S){function R(k,Y,K){if(Y<k.length){var j=k[Y],te=[];if(j.restParam){var J=j.types.filter(B);J.length<j.types.length&&te.push({types:J,name:"..."+J.map(function(ee){return ee.name}).join("|"),hasAny:J.some(function(ee){return ee.isAny}),hasConversion:!1,restParam:!0}),te.push(j)}else te=j.types.map(function(ee){return{types:[ee],name:ee.name,hasAny:ee.isAny,hasConversion:ee.conversion,restParam:!1}});return Ue(te,function(ee){return R(k,Y+1,K.concat([ee]))})}else return[K]}return R(S,0,[])}function ge(S,R){for(var k=Math.max(S.length,R.length),Y=0;Y<k;Y++){var K=F(S,Y),j=F(R,Y),te=!1,J=void 0,ee=n(j),me;try{for(ee.s();!(me=ee.n()).done;)if(J=me.value,K.has(J)){te=!0;break}}catch(rr){ee.e(rr)}finally{ee.f()}if(!te)return!1}var Ae=S.length,ie=R.length,ir=I(S),$e=I(R);return ir?$e?Ae===ie:ie>=Ae:$e?Ae>=ie:Ae===ie}function pe(S){return S.map(function(R){return Pr(R)?er(R.referToSelf.callback):Sr(R)?gr(R.referTo.references,R.referTo.callback):R})}function ae(S,R,k){var Y=[],K,j=n(S),te;try{for(j.s();!(te=j.n()).done;){K=te.value;var J=k[K];if(typeof J!="number")throw new TypeError('No definition for referenced signature "'+K+'"');if(J=R[J],typeof J!="function")return!1;Y.push(J)}}catch(ee){j.e(ee)}finally{j.f()}return Y}function oe(S,R,k){for(var Y=pe(S),K=new Array(Y.length).fill(!1),j=!0;j;){j=!1;for(var te=!0,J=0;J<Y.length;++J)if(!K[J]){var ee=Y[J];if(Pr(ee))Y[J]=ee.referToSelf.callback(k),Y[J].referToSelf=ee.referToSelf,K[J]=!0,te=!1;else if(Sr(ee)){var me=ae(ee.referTo.references,Y,R);me?(Y[J]=ee.referTo.callback.apply(this,me),Y[J].referTo=ee.referTo,K[J]=!0,te=!1):j=!0}}if(te&&j)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Y}function De(S){var R=/\bthis(\(|\.signatures\b)/;Object.keys(S).forEach(function(k){var Y=S[k];if(R.test(Y.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function be(S,R){if(d.createCount++,Object.keys(R).length===0)throw new SyntaxError("No signatures provided");d.warnAgainstDeprecatedThis&&De(R);var k=[],Y=[],K={},j=[],te,J=function(){if(!Object.prototype.hasOwnProperty.call(R,te))return"continue";var Je=O(te);if(!Je)return"continue";k.forEach(function(at){if(ge(at,Je))throw new TypeError('Conflicting signatures "'+E(at)+'" and "'+E(Je)+'".')}),k.push(Je);var ja=Y.length;Y.push(R[te]);var bf=Je.map(M),Yt=void 0,$t=n(Q(bf)),eo;try{for($t.s();!(eo=$t.n()).done;){Yt=eo.value;var ro=E(Yt);j.push({params:Yt,name:ro,fn:ja}),Yt.every(function(at){return!at.hasConversion})&&(K[ro]=ja)}}catch(at){$t.e(at)}finally{$t.f()}};for(te in R)var ee=J();j.sort(G);var me=oe(Y,K,_t),Ae;for(Ae in K)Object.prototype.hasOwnProperty.call(K,Ae)&&(K[Ae]=me[K[Ae]]);for(var ie=[],ir=new Map,$e=0,rr=j;$e<rr.length;$e++)Ae=rr[$e],ir.has(Ae.name)||(Ae.fn=me[Ae.fn],ie.push(Ae),ir.set(Ae.name,Ae));for(var Xe=ie[0]&&ie[0].params.length<=2&&!I(ie[0].params),lr=ie[1]&&ie[1].params.length<=2&&!I(ie[1].params),Qe=ie[2]&&ie[2].params.length<=2&&!I(ie[2].params),Dr=ie[3]&&ie[3].params.length<=2&&!I(ie[3].params),ar=ie[4]&&ie[4].params.length<=2&&!I(ie[4].params),or=ie[5]&&ie[5].params.length<=2&&!I(ie[5].params),Kr=Xe&&lr&&Qe&&Dr&&ar&&or,cr=0;cr<ie.length;++cr)ie[cr].test=X(ie[cr].params);for(var jr=Xe?N(ie[0].params[0]):a,Gt=lr?N(ie[1].params[0]):a,At=Qe?N(ie[2].params[0]):a,Hs=Dr?N(ie[3].params[0]):a,Ws=ar?N(ie[4].params[0]):a,Ks=or?N(ie[5].params[0]):a,js=Xe?N(ie[0].params[1]):a,ef=lr?N(ie[1].params[1]):a,rf=Qe?N(ie[2].params[1]):a,tf=Dr?N(ie[3].params[1]):a,nf=ar?N(ie[4].params[1]):a,af=or?N(ie[5].params[1]):a,Ct=0;Ct<ie.length;++Ct)ie[Ct].implementation=re(ie[Ct].params,ie[Ct].fn);var of=Xe?ie[0].implementation:l,uf=lr?ie[1].implementation:l,sf=Qe?ie[2].implementation:l,ff=Dr?ie[3].implementation:l,lf=ar?ie[4].implementation:l,cf=or?ie[5].implementation:l,pf=Xe?ie[0].params.length:-1,mf=lr?ie[1].params.length:-1,hf=Qe?ie[2].params.length:-1,vf=Dr?ie[3].params.length:-1,df=ar?ie[4].params.length:-1,xf=or?ie[5].params.length:-1,gf=Kr?6:0,Df=ie.length,yf=ie.map(function(dr){return dr.test}),Ef=ie.map(function(dr){return dr.implementation}),wf=function(){for(var Je=gf;Je<Df;Je++)if(yf[Je](arguments))return Ef[Je].apply(this,arguments);return d.onMismatch(S,arguments,ie)};function _t(dr,Je){return arguments.length===pf&&jr(dr)&&js(Je)?of.apply(this,arguments):arguments.length===mf&&Gt(dr)&&ef(Je)?uf.apply(this,arguments):arguments.length===hf&&At(dr)&&rf(Je)?sf.apply(this,arguments):arguments.length===vf&&Hs(dr)&&tf(Je)?ff.apply(this,arguments):arguments.length===df&&Ws(dr)&&nf(Je)?lf.apply(this,arguments):arguments.length===xf&&Ks(dr)&&af(Je)?cf.apply(this,arguments):wf.apply(this,arguments)}try{Object.defineProperty(_t,"name",{value:S})}catch{}return _t.signatures=K,_t._typedFunctionData={signatures:ie,signatureMap:ir},_t}function Me(S,R,k){throw H(S,R,k)}function fe(S){return Se(S,0,S.length-1)}function ye(S){return S[S.length-1]}function Se(S,R,k){return Array.prototype.slice.call(S,R,k)}function Ve(S,R){for(var k=0;k<S.length;k++)if(R(S[k]))return S[k]}function Ue(S,R){return Array.prototype.concat.apply([],S.map(R))}function fr(){var S=fe(arguments).map(function(k){return E(O(k))}),R=ye(arguments);if(typeof R!="function")throw new TypeError("Callback function expected as last argument");return gr(S,R)}function gr(S,R){return{referTo:{references:S,callback:R}}}function er(S){if(typeof S!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:S}}}function Sr(S){return S&&t(S.referTo)==="object"&&Array.isArray(S.referTo.references)&&typeof S.referTo.callback=="function"}function Pr(S){return S&&t(S.referToSelf)==="object"&&typeof S.referToSelf.callback=="function"}function bt(S,R){if(!S)return R;if(R&&R!==S){var k=new Error("Function names do not match (expected: "+S+", actual: "+R+")");throw k.data={actual:R,expected:S},k}return S}function zr(S){var R;for(var k in S)Object.prototype.hasOwnProperty.call(S,k)&&(x(S[k])||typeof S[k].signature=="string")&&(R=bt(R,S[k].name));return R}function Qt(S,R){var k;for(k in R)if(Object.prototype.hasOwnProperty.call(R,k)){if(k in S&&R[k]!==S[k]){var Y=new Error('Signature "'+k+'" is defined twice');throw Y.data={signature:k,sourceFunction:R[k],destFunction:S[k]},Y}S[k]=R[k]}}var ei=d;d=function(R){for(var k=typeof R=="string",Y=k?1:0,K=k?R:"",j={},te=Y;te<arguments.length;++te){var J=arguments[te],ee={},me=void 0;if(typeof J=="function"?(me=J.name,typeof J.signature=="string"?ee[J.signature]=J:x(J)&&(ee=J.signatures)):o(J)&&(ee=J,k||(me=zr(J))),Object.keys(ee).length===0){var Ae=new TypeError("Argument to 'typed' at index "+te+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ae.data={index:te,argument:J},Ae}k||(K=bt(K,me)),Qt(j,ee)}return be(K||"",j)},d.create=f,d.createCount=ei.createCount,d.onMismatch=Me,d.throwMismatchError=Me,d.createError=H,d.clear=D,d.clearConversions=w,d.addTypes=y,d._findType=g,d.referTo=fr,d.referToSelf=er,d.convert=C,d.findSignature=A,d.find=_,d.isTypedFunction=x,d.warnAgainstDeprecatedThis=!0,d.addType=function(S,R){var k="any";R!==!1&&h.has("Object")&&(k="Object"),d.addTypes([S],k)};function it(S){if(!S||typeof S.from!="string"||typeof S.to!="string"||typeof S.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(S.to===S.from)throw new SyntaxError('Illegal to define conversion from "'+S.from+'" to itself.')}return d.addConversion=function(S){it(S);var R=g(S.to);if(R.conversionsTo.every(function(k){return k.from!==S.from}))R.conversionsTo.push({from:S.from,convert:S.convert,index:m++});else throw new Error('There is already a conversion from "'+S.from+'" to "'+R.name+'"')},d.addConversions=function(S){S.forEach(d.addConversion)},d.removeConversion=function(S){it(S);var R=g(S.to),k=Ve(R.conversionsTo,function(K){return K.from===S.from});if(!k)throw new Error("Attempt to remove nonexistent conversion from "+S.from+" to "+S.to);if(k.convert!==S.convert)throw new Error("Conversion to remove does not match existing conversion");var Y=R.conversionsTo.indexOf(k);R.conversionsTo.splice(Y,1)},d.resolve=function(S,R){if(!x(S))throw new TypeError(c);for(var k=S._typedFunctionData.signatures,Y=0;Y<k.length;++Y)if(k[Y].test(R))return k[Y];return null},d}var u=f();return u})});var Cu=Zr((Ci,Au)=>{(function(n){"use strict";var e=Math.cosh||function(u){return Math.abs(u)<1e-9?1-u:(Math.exp(u)+Math.exp(-u))*.5},r=Math.sinh||function(u){return Math.abs(u)<1e-9?u:(Math.exp(u)-Math.exp(-u))*.5},t=function(u){var o=Math.PI/4;if(-o>u||u>o)return Math.cos(u)-1;var s=u*u;return s*(s*(s*(s*(s*(s*(s*(s/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},i=function(u,o){var s=Math.abs(u),p=Math.abs(o);return s<3e3&&p<3e3?Math.sqrt(s*s+p*p):(s<p?(s=p,p=u/o):p=o/u,s*Math.sqrt(1+p*p))},a=function(){throw SyntaxError("Invalid Param")};function l(u,o){var s=Math.abs(u),p=Math.abs(o);return u===0?Math.log(p):o===0?Math.log(s):s<3e3&&p<3e3?Math.log(u*u+o*o)*.5:(u=u/2,o=o/2,.5*Math.log(u*u+o*o)+Math.LN2)}var c=function(u,o){var s={re:0,im:0};if(u==null)s.re=s.im=0;else if(o!==void 0)s.re=u,s.im=o;else switch(typeof u){case"object":if("im"in u&&"re"in u)s.re=u.re,s.im=u.im;else if("abs"in u&&"arg"in u){if(!Number.isFinite(u.abs)&&Number.isFinite(u.arg))return f.INFINITY;s.re=u.abs*Math.cos(u.arg),s.im=u.abs*Math.sin(u.arg)}else if("r"in u&&"phi"in u){if(!Number.isFinite(u.r)&&Number.isFinite(u.phi))return f.INFINITY;s.re=u.r*Math.cos(u.phi),s.im=u.r*Math.sin(u.phi)}else u.length===2?(s.re=u[0],s.im=u[1]):a();break;case"string":s.im=s.re=0;var p=u.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),h=1,v=0;p===null&&a();for(var m=0;m<p.length;m++){var d=p[m];d===" "||d==="	"||d===`
`||(d==="+"?h++:d==="-"?v++:d==="i"||d==="I"?(h+v===0&&a(),p[m+1]!==" "&&!isNaN(p[m+1])?(s.im+=parseFloat((v%2?"-":"")+p[m+1]),m++):s.im+=parseFloat((v%2?"-":"")+"1"),h=v=0):((h+v===0||isNaN(d))&&a(),p[m+1]==="i"||p[m+1]==="I"?(s.im+=parseFloat((v%2?"-":"")+d),m++):s.re+=parseFloat((v%2?"-":"")+d),h=v=0))}h+v>0&&a();break;case"number":s.im=0,s.re=u;break;default:a()}return isNaN(s.re)||isNaN(s.im),s};function f(u,o){if(!(this instanceof f))return new f(u,o);var s=c(u,o);this.re=s.re,this.im=s.im}f.prototype={re:0,im:0,sign:function(){var u=this.abs();return new f(this.re/u,this.im/u)},add:function(u,o){var s=new f(u,o);return this.isInfinite()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:new f(this.re+s.re,this.im+s.im)},sub:function(u,o){var s=new f(u,o);return this.isInfinite()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:new f(this.re-s.re,this.im-s.im)},mul:function(u,o){var s=new f(u,o);return this.isInfinite()&&s.isZero()||this.isZero()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:s.im===0&&this.im===0?new f(this.re*s.re,0):new f(this.re*s.re-this.im*s.im,this.re*s.im+this.im*s.re)},div:function(u,o){var s=new f(u,o);if(this.isZero()&&s.isZero()||this.isInfinite()&&s.isInfinite())return f.NAN;if(this.isInfinite()||s.isZero())return f.INFINITY;if(this.isZero()||s.isInfinite())return f.ZERO;u=this.re,o=this.im;var p=s.re,h=s.im,v,m;return h===0?new f(u/p,o/p):Math.abs(p)<Math.abs(h)?(m=p/h,v=p*m+h,new f((u*m+o)/v,(o*m-u)/v)):(m=h/p,v=h*m+p,new f((u+o*m)/v,(o-u*m)/v))},pow:function(u,o){var s=new f(u,o);if(u=this.re,o=this.im,s.isZero())return f.ONE;if(s.im===0){if(o===0&&u>0)return new f(Math.pow(u,s.re),0);if(u===0)switch((s.re%4+4)%4){case 0:return new f(Math.pow(o,s.re),0);case 1:return new f(0,Math.pow(o,s.re));case 2:return new f(-Math.pow(o,s.re),0);case 3:return new f(0,-Math.pow(o,s.re))}}if(u===0&&o===0&&s.re>0&&s.im>=0)return f.ZERO;var p=Math.atan2(o,u),h=l(u,o);return u=Math.exp(s.re*h-s.im*p),o=s.im*h+s.re*p,new f(u*Math.cos(o),u*Math.sin(o))},sqrt:function(){var u=this.re,o=this.im,s=this.abs(),p,h;if(u>=0){if(o===0)return new f(Math.sqrt(u),0);p=.5*Math.sqrt(2*(s+u))}else p=Math.abs(o)/Math.sqrt(2*(s-u));return u<=0?h=.5*Math.sqrt(2*(s-u)):h=Math.abs(o)/Math.sqrt(2*(s+u)),new f(p,o<0?-h:h)},exp:function(){var u=Math.exp(this.re);return this.im,new f(u*Math.cos(this.im),u*Math.sin(this.im))},expm1:function(){var u=this.re,o=this.im;return new f(Math.expm1(u)*Math.cos(o)+t(o),Math.exp(u)*Math.sin(o))},log:function(){var u=this.re,o=this.im;return o===0&&u>0,new f(l(u,o),Math.atan2(o,u))},abs:function(){return i(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var u=this.re,o=this.im;return new f(Math.sin(u)*e(o),Math.cos(u)*r(o))},cos:function(){var u=this.re,o=this.im;return new f(Math.cos(u)*e(o),-Math.sin(u)*r(o))},tan:function(){var u=2*this.re,o=2*this.im,s=Math.cos(u)+e(o);return new f(Math.sin(u)/s,r(o)/s)},cot:function(){var u=2*this.re,o=2*this.im,s=Math.cos(u)-e(o);return new f(-Math.sin(u)/s,r(o)/s)},sec:function(){var u=this.re,o=this.im,s=.5*e(2*o)+.5*Math.cos(2*u);return new f(Math.cos(u)*e(o)/s,Math.sin(u)*r(o)/s)},csc:function(){var u=this.re,o=this.im,s=.5*e(2*o)-.5*Math.cos(2*u);return new f(Math.sin(u)*e(o)/s,-Math.cos(u)*r(o)/s)},asin:function(){var u=this.re,o=this.im,s=new f(o*o-u*u+1,-2*u*o).sqrt(),p=new f(s.re-o,s.im+u).log();return new f(p.im,-p.re)},acos:function(){var u=this.re,o=this.im,s=new f(o*o-u*u+1,-2*u*o).sqrt(),p=new f(s.re-o,s.im+u).log();return new f(Math.PI/2-p.im,p.re)},atan:function(){var u=this.re,o=this.im;if(u===0){if(o===1)return new f(0,1/0);if(o===-1)return new f(0,-1/0)}var s=u*u+(1-o)*(1-o),p=new f((1-o*o-u*u)/s,-2*u/s).log();return new f(-.5*p.im,.5*p.re)},acot:function(){var u=this.re,o=this.im;if(o===0)return new f(Math.atan2(1,u),0);var s=u*u+o*o;return s!==0?new f(u/s,-o/s).atan():new f(u!==0?u/0:0,o!==0?-o/0:0).atan()},asec:function(){var u=this.re,o=this.im;if(u===0&&o===0)return new f(0,1/0);var s=u*u+o*o;return s!==0?new f(u/s,-o/s).acos():new f(u!==0?u/0:0,o!==0?-o/0:0).acos()},acsc:function(){var u=this.re,o=this.im;if(u===0&&o===0)return new f(Math.PI/2,1/0);var s=u*u+o*o;return s!==0?new f(u/s,-o/s).asin():new f(u!==0?u/0:0,o!==0?-o/0:0).asin()},sinh:function(){var u=this.re,o=this.im;return new f(r(u)*Math.cos(o),e(u)*Math.sin(o))},cosh:function(){var u=this.re,o=this.im;return new f(e(u)*Math.cos(o),r(u)*Math.sin(o))},tanh:function(){var u=2*this.re,o=2*this.im,s=e(u)+Math.cos(o);return new f(r(u)/s,Math.sin(o)/s)},coth:function(){var u=2*this.re,o=2*this.im,s=e(u)-Math.cos(o);return new f(r(u)/s,-Math.sin(o)/s)},csch:function(){var u=this.re,o=this.im,s=Math.cos(2*o)-e(2*u);return new f(-2*r(u)*Math.cos(o)/s,2*e(u)*Math.sin(o)/s)},sech:function(){var u=this.re,o=this.im,s=Math.cos(2*o)+e(2*u);return new f(2*e(u)*Math.cos(o)/s,-2*r(u)*Math.sin(o)/s)},asinh:function(){var u=this.im;this.im=-this.re,this.re=u;var o=this.asin();return this.re=-this.im,this.im=u,u=o.re,o.re=-o.im,o.im=u,o},acosh:function(){var u=this.acos();if(u.im<=0){var o=u.re;u.re=-u.im,u.im=o}else{var o=u.im;u.im=-u.re,u.re=o}return u},atanh:function(){var u=this.re,o=this.im,s=u>1&&o===0,p=1-u,h=1+u,v=p*p+o*o,m=v!==0?new f((h*p-o*o)/v,(o*p+h*o)/v):new f(u!==-1?u/0:0,o!==0?o/0:0),d=m.re;return m.re=l(m.re,m.im)/2,m.im=Math.atan2(m.im,d)/2,s&&(m.im=-m.im),m},acoth:function(){var u=this.re,o=this.im;if(u===0&&o===0)return new f(0,Math.PI/2);var s=u*u+o*o;return s!==0?new f(u/s,-o/s).atanh():new f(u!==0?u/0:0,o!==0?-o/0:0).atanh()},acsch:function(){var u=this.re,o=this.im;if(o===0)return new f(u!==0?Math.log(u+Math.sqrt(u*u+1)):1/0,0);var s=u*u+o*o;return s!==0?new f(u/s,-o/s).asinh():new f(u!==0?u/0:0,o!==0?-o/0:0).asinh()},asech:function(){var u=this.re,o=this.im;if(this.isZero())return f.INFINITY;var s=u*u+o*o;return s!==0?new f(u/s,-o/s).acosh():new f(u!==0?u/0:0,o!==0?-o/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var u=this.re,o=this.im,s=u*u+o*o;return new f(u/s,-o/s)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(u){return u=Math.pow(10,u||0),new f(Math.ceil(this.re*u)/u,Math.ceil(this.im*u)/u)},floor:function(u){return u=Math.pow(10,u||0),new f(Math.floor(this.re*u)/u,Math.floor(this.im*u)/u)},round:function(u){return u=Math.pow(10,u||0),new f(Math.round(this.re*u)/u,Math.round(this.im*u)/u)},equals:function(u,o){var s=new f(u,o);return Math.abs(s.re-this.re)<=f.EPSILON&&Math.abs(s.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var u=this.re,o=this.im,s="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(u)<f.EPSILON&&(u=0),Math.abs(o)<f.EPSILON&&(o=0),o===0?s+u:(u!==0?(s+=u,s+=" ",o<0?(o=-o,s+="-"):s+="+",s+=" "):o<0&&(o=-o,s+="-"),o!==1&&(s+=o),s+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return f}):typeof Ci=="object"?(Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,Au.exports=f):n.Complex=f})(Ci)});var Mu=Zr((Mi,_u)=>{(function(n){"use strict";var e=2e3,r={s:1,n:0,d:1};function t(p,h){if(isNaN(p=parseInt(p,10)))throw s.InvalidParameter;return p*h}function i(p,h){if(h===0)throw s.DivisionByZero;var v=Object.create(s.prototype);v.s=p<0?-1:1,p=p<0?-p:p;var m=o(p,h);return v.n=p/m,v.d=h/m,v}function a(p){for(var h={},v=p,m=2,d=4;d<=v;){for(;v%m===0;)v/=m,h[m]=(h[m]||0)+1;d+=1+2*m++}return v!==p?v>1&&(h[v]=(h[v]||0)+1):h[p]=(h[p]||0)+1,h}var l=function(p,h){var v=0,m=1,d=1,g=0,y=0,D=0,w=1,b=1,x=0,A=1,_=1,C=1,E=1e7,T;if(p!=null)if(h!==void 0){if(v=p,m=h,d=v*m,v%1!==0||m%1!==0)throw s.NonIntegerParameter}else switch(typeof p){case"object":{if("d"in p&&"n"in p)v=p.n,m=p.d,"s"in p&&(v*=p.s);else if(0 in p)v=p[0],1 in p&&(m=p[1]);else throw s.InvalidParameter;d=v*m;break}case"number":{if(p<0&&(d=p,p=-p),p%1===0)v=p;else if(p>0){for(p>=1&&(b=Math.pow(10,Math.floor(1+Math.log(p)/Math.LN10)),p/=b);A<=E&&C<=E;)if(T=(x+_)/(A+C),p===T){A+C<=E?(v=x+_,m=A+C):C>A?(v=_,m=C):(v=x,m=A);break}else p>T?(x+=_,A+=C):(_+=x,C+=A),A>E?(v=_,m=C):(v=x,m=A);v*=b}else(isNaN(p)||isNaN(h))&&(m=v=NaN);break}case"string":{if(A=p.match(/\d+|./g),A===null)throw s.InvalidParameter;if(A[x]==="-"?(d=-1,x++):A[x]==="+"&&x++,A.length===x+1?y=t(A[x++],d):A[x+1]==="."||A[x]==="."?(A[x]!=="."&&(g=t(A[x++],d)),x++,(x+1===A.length||A[x+1]==="("&&A[x+3]===")"||A[x+1]==="'"&&A[x+3]==="'")&&(y=t(A[x],d),w=Math.pow(10,A[x].length),x++),(A[x]==="("&&A[x+2]===")"||A[x]==="'"&&A[x+2]==="'")&&(D=t(A[x+1],d),b=Math.pow(10,A[x+1].length)-1,x+=3)):A[x+1]==="/"||A[x+1]===":"?(y=t(A[x],d),w=t(A[x+2],1),x+=3):A[x+3]==="/"&&A[x+1]===" "&&(g=t(A[x],d),y=t(A[x+2],d),w=t(A[x+4],1),x+=5),A.length<=x){m=w*b,d=v=D+m*g+b*y;break}}default:throw s.InvalidParameter}if(m===0)throw s.DivisionByZero;r.s=d<0?-1:1,r.n=Math.abs(v),r.d=Math.abs(m)};function c(p,h,v){for(var m=1;h>0;p=p*p%v,h>>=1)h&1&&(m=m*p%v);return m}function f(p,h){for(;h%2===0;h/=2);for(;h%5===0;h/=5);if(h===1)return 0;for(var v=10%h,m=1;v!==1;m++)if(v=v*10%h,m>e)return 0;return m}function u(p,h,v){for(var m=1,d=c(10,v,h),g=0;g<300;g++){if(m===d)return g;m=m*10%h,d=d*10%h}return 0}function o(p,h){if(!p)return h;if(!h)return p;for(;;){if(p%=h,!p)return h;if(h%=p,!h)return p}}function s(p,h){if(l(p,h),this instanceof s)p=o(r.d,r.n),this.s=r.s,this.n=r.n/p,this.d=r.d/p;else return i(r.s*r.n,r.d)}s.DivisionByZero=new Error("Division by Zero"),s.InvalidParameter=new Error("Invalid argument"),s.NonIntegerParameter=new Error("Parameters must be integer"),s.prototype={s:1,n:0,d:1,abs:function(){return i(this.n,this.d)},neg:function(){return i(-this.s*this.n,this.d)},add:function(p,h){return l(p,h),i(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(p,h){return l(p,h),i(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(p,h){return l(p,h),i(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(p,h){return l(p,h),i(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return i(this.s*this.n,this.d)},mod:function(p,h){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(p===void 0)return i(this.s*this.n%this.d,1);if(l(p,h),r.n===0&&this.d===0)throw s.DivisionByZero;return i(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(p,h){return l(p,h),i(o(r.n,this.n)*o(r.d,this.d),r.d*this.d)},lcm:function(p,h){return l(p,h),r.n===0&&this.n===0?i(0,1):i(r.n*this.n,o(r.n,this.n)*o(r.d,this.d))},ceil:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.ceil(p*this.s*this.n/this.d),p)},floor:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.floor(p*this.s*this.n/this.d),p)},round:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.round(p*this.s*this.n/this.d),p)},inverse:function(){return i(this.s*this.d,this.n)},pow:function(p,h){if(l(p,h),r.d===1)return r.s<0?i(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):i(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var v=a(this.n),m=a(this.d),d=1,g=1;for(var y in v)if(y!=="1"){if(y==="0"){d=0;break}if(v[y]*=r.n,v[y]%r.d===0)v[y]/=r.d;else return null;d*=Math.pow(y,v[y])}for(var y in m)if(y!=="1"){if(m[y]*=r.n,m[y]%r.d===0)m[y]/=r.d;else return null;g*=Math.pow(y,m[y])}return r.s<0?i(g,d):i(d,g)},equals:function(p,h){return l(p,h),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(p,h){l(p,h);var v=this.s*this.n*r.d-r.s*r.n*this.d;return(0<v)-(v<0)},simplify:function(p){if(isNaN(this.n)||isNaN(this.d))return this;p=p||.001;for(var h=this.abs(),v=h.toContinued(),m=1;m<v.length;m++){for(var d=i(v[m-1],1),g=m-2;g>=0;g--)d=d.inverse().add(v[g]);if(d.sub(h).abs().valueOf()<p)return d.mul(this.s)}return this},divisible:function(p,h){return l(p,h),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(p){var h,v="",m=this.n,d=this.d;return this.s<0&&(v+="-"),d===1?v+=m:(p&&(h=Math.floor(m/d))>0&&(v+=h,v+=" ",m%=d),v+=m,v+="/",v+=d),v},toLatex:function(p){var h,v="",m=this.n,d=this.d;return this.s<0&&(v+="-"),d===1?v+=m:(p&&(h=Math.floor(m/d))>0&&(v+=h,m%=d),v+="\\frac{",v+=m,v+="}{",v+=d,v+="}"),v},toContinued:function(){var p,h=this.n,v=this.d,m=[];if(isNaN(h)||isNaN(v))return m;do m.push(Math.floor(h/v)),p=h%v,h=v,v=p;while(h!==1);return m},toString:function(p){var h=this.n,v=this.d;if(isNaN(h)||isNaN(v))return"NaN";p=p||15;var m=f(h,v),d=u(h,v,m),g=this.s<0?"-":"";if(g+=h/v|0,h%=v,h*=10,h&&(g+="."),m){for(var y=d;y--;)g+=h/v|0,h%=v,h*=10;g+="(";for(var y=m;y--;)g+=h/v|0,h%=v,h*=10;g+=")"}else for(var y=p;h&&y--;)g+=h/v|0,h%=v,h*=10;return g}},typeof define=="function"&&define.amd?define([],function(){return s}):typeof Mi=="object"?(Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,_u.exports=s):n.Fraction=s})(Mi)});var Hm={};Sf(Hm,{code:()=>jn,interpret:()=>Jm});var fo=Mt(ni());var ur=class{constructor(e="INT"){this.base="INT";this.base=e}clone(){let e=new ur;return e.base=this.base,e}toString(){return""+this.base}},sr=class{constructor(e=""){this.str="";this.tmp="";this.str=e}},Nt=class{constructor(){this.type=new ur;this.code=new sr;this.sym=null}};var Nr=class{constructor(e,r,t,i,a=[]){this.id="";this.kind="LOCAL";this.type=new ur;this.scope=0;this.runtimeId="";this.subSymbols=[];this.functionOverloadSuccessor=null;this.value=null;this.id=e,this.kind=r,this.type=t,this.scope=i,this.subSymbols=a}toString(){let e="SYM";if(e+=',id="'+this.id+'"',e+=',kind="'+this.kind+'"',e+=',type="'+this.type.toString()+'"',e+=',scope="'+this.scope+'"',e+=',runtimeId="'+this.runtimeId+'"',this.subSymbols.length>0){e+=`,subSymbols=[
`;for(let r=0;r<this.subSymbols.length;r++)e+="  "+this.subSymbols[r].toString();e+="]"}return e+=`
`,e}};function ii(n,e){if(e==="ID")return"ID";if(e==="BOOL")return"BOOL";if(e==="INT")return"INT";if(e==="REAL")return"REAL";if(e==="COMPLEX")return"COMPLEX";if(e==="VECTOR")return"VECTOR";if(e==="MATRIX")return"MATRIX";if(e==="TERM")return"TERM";if(e==="TERM_VAR")return"TERM_VAR";if(e==="SET_INT")return"INT_SET";if(e==="SET_REAL")return"REAL_SET";if(e==="SET_COMPLEX")return"COMPLEX_SET";if(e==="INT_LIST")return"INT_LIST";if(e==="REAL_LIST")return"REAL_LIST";if(e==="COMPLEX_LIST")return"COMPLEX_LIST";if(e==="VECTOR_LIST")return"VECTOR_LIST";n.error("unknown base type "+e)}function lo(n){let e=new fo.Lexer;e.configureSingleLineComments("#"),e.configureMultiLineComments("",""),e.enableEmitNewlines(!1),e.enableEmitIndentation(!1),e.enableBackslashLineBreaks(!1),e.setTerminals(["->"]),e.pushSource("PROTOTYPES",n);let r=[];for(;e.isNotEND();){let t=e.ID(),i=[],a=[];if(e.isTER("<")){e.next();let h=0;for(;e.isNotTER(">");)h>0&&e.TER(","),i.push(e.ID()),e.TER(":"),a.push(ii(e,e.ID())),h++;e.TER(">")}let l=[],c=[];e.TER("(");let f=0;for(;e.isNotTER(")");)f>0&&e.TER(","),l.push(e.ID()),e.TER(":"),c.push(ii(e,e.ID())),f++;e.TER(")"),e.TER(":");let u=ii(e,e.ID());e.TER("->");let o=e.ID();e.TER("."),o+="."+e.ID(),e.TER(";");let s=[];for(let h=0;h<i.length;h++){let v=new Nr(i[h],"DIMENSION",new ur(a[h]),1,[]);s.push(v)}for(let h=0;h<l.length;h++){let v=new Nr(l[h],"PARAMETER",new ur(c[h]),1,[]);s.push(v)}let p=new Nr(t,"FUNCTION",new ur(u),0,s);p.runtimeId=o;for(let h=r.length-1;h>=0;h--)if(r[h].id===t){r[h].functionOverloadSuccessor=p;break}r.push(p)}return r}var st=class extends Error{constructor(e){super(e),this.name="VectorError"}},ke=class{constructor(e){this.size=1;this.values=[];this.size=e,this.values=new Array(e).fill(0)}getSize(){return this.size}setValue(e,r){this.values[e]=r}getValue(e){return this.values[e]}static vector2list(e){return e.clone().values}clone(){let e=new ke(this.size);return e.values=[...this.values],e}toString(){let e="[";for(let r=0;r<this.size;r++)r>0&&(e+=","),e+=this.getValue(r);return e+="]",e}static add(e,r){if(e.size!=r.size)throw new st("dimensions do not match");let t=e.clone();for(let i=0;i<r.size;i++)t.values[i]+=r.values[i];return t}static sub(e,r){if(e.size!=r.size)throw new st("dimensions do not match");let t=e.clone();for(let i=0;i<r.size;i++)t.values[i]-=r.values[i];return t}mul(e){let r=this.clone();for(let t=0;t<r.size;t++)r.values[t]*=e;return r}static dot(e,r){if(e.size!=r.size)throw new st("dimensions do not match");let t=0;for(let i=0;i<r.size;i++)t+=e.values[i]*r.values[i];return t}static cross(e,r){if(e.size!=3||r.size!=3)throw new st("vector length must be 3");let t=new ke(3);return t.values[0]=e.values[1]*r.values[2]-e.values[2]*r.values[1],t.values[1]=e.values[2]*r.values[0]-e.values[0]*r.values[2],t.values[2]=e.values[0]*r.values[1]-e.values[1]*r.values[0],t}norm2(){let e=0;for(let r=0;r<this.size;r++)e+=this.values[r]*this.values[r];return Math.sqrt(e)}is_zero(e=1e-9){for(let r=0;r<this.size;r++)if(Math.abs(this.getValue(r))>e)return!1;return!0}};var jt=class{constructor(e){this.parent=null;this.parent=e}_create(e,r){let t=new ke(e),i=0;for(let a=0;a<e;a++)t.setValue(a,r[i++]);return t}_clone(e){return e.clone()}_getElement(e,r,t){if(r<0||r>=e.getSize())throw new Ne(t,"vector has "+e.getSize()+" elements. Cannot get element "+r);return e.getValue(r)}_setElement(e,r,t,i){if(r<0||r>=e.getSize())throw new Ne(i,"vector has "+e.getSize()+" element. Cannot get element "+r);e.setValue(r,t)}_addVectors(e,r,t){if(e.getSize()!=r.getSize())throw new Ne(t,"dimensions do not match");return ke.add(e,r)}_subVectors(e,r,t){if(e.getSize()!=r.getSize())throw new Ne(t,"dimensions do not match");return ke.sub(e,r)}_mulScalarVector(e,r){return r.mul(e)}_dotVectors(e,r,t){if(e.getSize()!=r.getSize())throw new Ne(t,"dimensions do not match");return ke.dot(e,r)}_crossVectors(e,r,t){if(e.getSize()!=3||r.getSize()!=3)throw new Ne(t,"vector length must be 3");return ke.cross(e,r)}_norm2vec(e){return e.norm2()}_zerosVector(e){let r=new ke(e);for(let t=0;t<e;t++)r.setValue(t,0);return r}_randVector(e,r,t){let i=new ke(e);for(let a=0;a<e;a++)i.setValue(a,this.parent.interpret_basic._randIntMinMax(r,t));return i}_randZVector(e,r,t){let i=new ke(e);for(let a=0;a<e;a++)i.setValue(a,this.parent.interpret_basic._randIntMinMaxZ(r,t));return i}_isVectorZero(e){return e.is_zero(1e-9)}};function tt(){return tt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},tt.apply(this,arguments)}var ai={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Be(n){return typeof n=="number"}function ze(n){return!n||typeof n!="object"||typeof n.constructor!="function"?!1:n.isBigNumber===!0&&typeof n.constructor.prototype=="object"&&n.constructor.prototype.isBigNumber===!0||typeof n.constructor.isDecimal=="function"&&n.constructor.isDecimal(n)===!0}function Ft(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isComplex===!0||!1}function Bt(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isFraction===!0||!1}function en(n){return n&&n.constructor.prototype.isUnit===!0||!1}function tr(n){return typeof n=="string"}var Te=Array.isArray;function we(n){return n&&n.constructor.prototype.isMatrix===!0||!1}function qr(n){return Array.isArray(n)||we(n)}function rn(n){return n&&n.isDenseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function tn(n){return n&&n.isSparseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function nn(n){return n&&n.constructor.prototype.isRange===!0||!1}function ft(n){return n&&n.constructor.prototype.isIndex===!0||!1}function co(n){return typeof n=="boolean"}function po(n){return n&&n.constructor.prototype.isResultSet===!0||!1}function mo(n){return n&&n.constructor.prototype.isHelp===!0||!1}function ho(n){return typeof n=="function"}function vo(n){return n instanceof Date}function xo(n){return n instanceof RegExp}function go(n){return!!(n&&typeof n=="object"&&n.constructor===Object&&!Ft(n)&&!Bt(n))}function Do(n){return n===null}function yo(n){return n===void 0}function Eo(n){return n&&n.isAccessorNode===!0&&n.constructor.prototype.isNode===!0||!1}function wo(n){return n&&n.isArrayNode===!0&&n.constructor.prototype.isNode===!0||!1}function bo(n){return n&&n.isAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function Ao(n){return n&&n.isBlockNode===!0&&n.constructor.prototype.isNode===!0||!1}function Co(n){return n&&n.isConditionalNode===!0&&n.constructor.prototype.isNode===!0||!1}function _o(n){return n&&n.isConstantNode===!0&&n.constructor.prototype.isNode===!0||!1}function Mo(n){return n&&n.isFunctionAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function To(n){return n&&n.isFunctionNode===!0&&n.constructor.prototype.isNode===!0||!1}function So(n){return n&&n.isIndexNode===!0&&n.constructor.prototype.isNode===!0||!1}function No(n){return n&&n.isNode===!0&&n.constructor.prototype.isNode===!0||!1}function Fo(n){return n&&n.isObjectNode===!0&&n.constructor.prototype.isNode===!0||!1}function Bo(n){return n&&n.isOperatorNode===!0&&n.constructor.prototype.isNode===!0||!1}function Io(n){return n&&n.isParenthesisNode===!0&&n.constructor.prototype.isNode===!0||!1}function Ro(n){return n&&n.isRangeNode===!0&&n.constructor.prototype.isNode===!0||!1}function Lo(n){return n&&n.isSymbolNode===!0&&n.constructor.prototype.isNode===!0||!1}function Oo(n){return n&&n.constructor.prototype.isChain===!0||!1}function He(n){var e=typeof n;return e==="object"?n===null?"null":ze(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function ve(n){var e=typeof n;if(e==="number"||e==="string"||e==="boolean"||n===null||n===void 0)return n;if(typeof n.clone=="function")return n.clone();if(Array.isArray(n))return n.map(function(r){return ve(r)});if(n instanceof Date)return new Date(n.valueOf());if(ze(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return Of(n,ve)}function Of(n,e){var r={};for(var t in n)ct(n,t)&&(r[t]=e(n[t]));return r}function an(n,e){for(var r in e)ct(e,r)&&(n[r]=e[r]);return n}function lt(n,e){var r,t,i;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;t++)if(!lt(n[t],e[t]))return!1;return!0}else{if(typeof n=="function")return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in n)if(!(r in e)||!lt(n[r],e[r]))return!1;for(r in e)if(!(r in n))return!1;return!0}else return n===e}}function ct(n,e){return n&&Object.hasOwnProperty.call(n,e)}function Po(n,e){for(var r={},t=0;t<e.length;t++){var i=e[t],a=n[i];a!==void 0&&(r[i]=a)}return r}var zo=["Matrix","Array"],qo=["number","BigNumber","Fraction"];var We=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(ai)};tt(We,ai,{MATRIX_OPTIONS:zo,NUMBER_OPTIONS:qo});var vi=Mt(ko(),1);function de(n){return typeof n=="boolean"?!0:isFinite(n)?n===Math.round(n):!1}var Vo=Math.sign||function(n){return n>0?1:n<0?-1:0},Uo=Math.log2||function(e){return Math.log(e)/Math.LN2},Xo=Math.log10||function(e){return Math.log(e)/Math.LN10},Zo=Math.log1p||function(n){return Math.log(n+1)},Qo=Math.cbrt||function(e){if(e===0)return e;var r=e<0,t;return r&&(e=-e),isFinite(e)?(t=Math.exp(Math.log(e)/3),t=(e/(t*t)+2*t)/3):t=e,r?-t:t},Go=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function si(n,e,r){var t={2:"0b",8:"0o",16:"0x"},i=t[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!de(r))throw new Error("size must be an integer");if(n>2**(r-1)-1||n<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!de(n))throw new Error("Value must be an integer");n<0&&(n=n+2**r),a="i".concat(r)}var l="";return n<0&&(n=-n,l="-"),"".concat(l).concat(i).concat(n.toString(e)).concat(a)}function It(n,e){if(typeof e=="function")return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var r="auto",t,i;if(e&&(e.notation&&(r=e.notation),Be(e)?t=e:Be(e.precision)&&(t=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Yo(n,t);case"exponential":return $o(n,t);case"engineering":return Pf(n,t);case"bin":return si(n,2,i);case"oct":return si(n,8,i);case"hex":return si(n,16,i);case"auto":return zf(n,t,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],l=arguments[4];return a!=="."?a+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function on(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var r=e[1],t=e[2],i=parseFloat(e[4]||"0"),a=t.indexOf(".");i+=a!==-1?a-1:t.length-1;var l=t.replace(".","").replace(/^0*/,function(c){return i-=c.length,""}).replace(/0*$/,"").split("").map(function(c){return parseInt(c)});return l.length===0&&(l.push(0),i++),{sign:r,coefficients:l,exponent:i}}function Pf(n,e){if(isNaN(n)||!isFinite(n))return String(n);var r=on(n),t=un(r,e),i=t.exponent,a=t.coefficients,l=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Be(e))for(;e>a.length||i-l+1>a.length;)a.push(0);else for(var c=Math.abs(i-l)-(a.length-1),f=0;f<c;f++)a.push(0);for(var u=Math.abs(i-l),o=1;u>0;)o++,u--;var s=a.slice(o).join(""),p=Be(e)&&s.length||s.match(/[1-9]/)?"."+s:"",h=a.slice(0,o).join("")+p+"e"+(i>=0?"+":"")+l.toString();return t.sign+h}function Yo(n,e){if(isNaN(n)||!isFinite(n))return String(n);var r=on(n),t=typeof e=="number"?un(r,r.exponent+1+e):r,i=t.coefficients,a=t.exponent+1,l=a+(e||0);return i.length<l&&(i=i.concat(pt(l-i.length))),a<0&&(i=pt(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),t.sign+i.join("")}function $o(n,e){if(isNaN(n)||!isFinite(n))return String(n);var r=on(n),t=e?un(r,e):r,i=t.coefficients,a=t.exponent;i.length<e&&(i=i.concat(pt(e-i.length)));var l=i.shift();return t.sign+l+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function zf(n,e,r){if(isNaN(n)||!isFinite(n))return String(n);var t=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=on(n),l=e?un(a,e):a;if(l.exponent<t||l.exponent>=i)return $o(n,e);var c=l.coefficients,f=l.exponent;c.length<e&&(c=c.concat(pt(e-c.length))),c=c.concat(pt(f-c.length+1+(c.length<e?e-c.length:0))),c=pt(-f).concat(c);var u=f>0?f:0;return u<c.length-1&&c.splice(u+1,0,"."),l.sign+c.join("")}function un(n,e){for(var r={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},t=r.coefficients;e<=0;)t.unshift(0),r.exponent++,e++;if(t.length>e){var i=t.splice(e,t.length-e);if(i[0]>=5){var a=e-1;for(t[a]++;t[a]===10;)t.pop(),a===0&&(t.unshift(0),r.exponent++,a++),a--,t[a]++}}return r}function pt(n){for(var e=[],r=0;r<n;r++)e.push(0);return e}function Jo(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var qf=Number.EPSILON||2220446049250313e-31;function pr(n,e,r){if(r==null)return n===e;if(n===e)return!0;if(isNaN(n)||isNaN(e))return!1;if(isFinite(n)&&isFinite(e)){var t=Math.abs(n-e);return t<qf?!0:t<=Math.max(Math.abs(n),Math.abs(e))*r}return!1}function fi(n,e,r){var t=n.constructor,i=new t(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!de(r))throw new Error("size must be an integer");if(n.greaterThan(i.pow(r-1).sub(1))||n.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(n.toBinary()).concat(a);case 8:return"".concat(n.toOctal()).concat(a);case 16:return"".concat(n.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Wo(n,e){if(typeof e=="function")return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var r="auto",t,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?t=e:e.precision&&(t=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Vf(n,t);case"exponential":return Ho(n,t);case"engineering":return kf(n,t);case"bin":return fi(n,2,i);case"oct":return fi(n,8,i);case"hex":return fi(n,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,l=e&&e.upperExp!==void 0?e.upperExp:5;if(n.isZero())return"0";var c,f=n.toSignificantDigits(t),u=f.e;return u>=a&&u<l?c=f.toFixed():c=Ho(n,t),c.replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return o!=="."?o+s:s})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function kf(n,e){var r=n.e,t=r%3===0?r:r<0?r-3-r%3:r-r%3,i=n.mul(Math.pow(10,-t)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+t.toString()}function Ho(n,e){return e!==void 0?n.toExponential(e-1):n.toExponential()}function Vf(n,e){return n.toFixed(e)}function Fe(n,e){var r=Uf(n,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Uf(n,e){if(typeof n=="number")return It(n,e);if(ze(n))return Wo(n,e);if(Xf(n))return!e||e.fraction!=="decimal"?n.s*n.n+"/"+n.d:n.toString();if(Array.isArray(n))return Ko(n,e);if(tr(n))return'"'+n+'"';if(typeof n=="function")return n.syntax?String(n.syntax):"function";if(n&&typeof n=="object"){if(typeof n.format=="function")return n.format(e);if(n&&n.toString(e)!=={}.toString())return n.toString(e);var r=Object.keys(n).map(t=>'"'+t+'": '+Fe(n[t],e));return"{"+r.join(", ")+"}"}return String(n)}function Ko(n,e){if(Array.isArray(n)){for(var r="[",t=n.length,i=0;i<t;i++)i!==0&&(r+=", "),r+=Ko(n[i],e);return r+="]",r}else return Fe(n,e)}function Xf(n){return n&&typeof n=="object"&&typeof n.s=="number"&&typeof n.n=="number"&&typeof n.d=="number"||!1}function _e(n,e,r){if(!(this instanceof _e))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}_e.prototype=new RangeError;_e.prototype.constructor=RangeError;_e.prototype.name="DimensionError";_e.prototype.isDimensionError=!0;function kr(n,e,r){if(!(this instanceof kr))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}kr.prototype=new RangeError;kr.prototype.constructor=RangeError;kr.prototype.name="IndexError";kr.prototype.isIndexError=!0;function Pe(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function jo(n,e,r){var t,i=n.length;if(i!==e[r])throw new _e(i,e[r]);if(r<e.length-1){var a=r+1;for(t=0;t<i;t++){var l=n[t];if(!Array.isArray(l))throw new _e(e.length-1,e.length,"<");jo(n[t],e,a)}}else for(t=0;t<i;t++)if(Array.isArray(n[t]))throw new _e(e.length+1,e.length,">")}function ci(n,e){var r=e.length===0;if(r){if(Array.isArray(n))throw new _e(n.length,0)}else jo(n,e,0)}function Le(n,e){if(!Be(n)||!de(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||typeof e=="number"&&n>=e)throw new kr(n,e)}function nt(n,e,r){if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Be(i)||!de(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Fe(e)+")")});var t=r!==void 0?r:0;return li(n,e,0,t),n}function li(n,e,r,t){var i,a,l=n.length,c=e[r],f=Math.min(l,c);if(n.length=c,r<e.length-1){var u=r+1;for(i=0;i<f;i++)a=n[i],Array.isArray(a)||(a=[a],n[i]=a),li(a,e,u,t);for(i=f;i<c;i++)a=[],n[i]=a,li(a,e,u,t)}else{for(i=0;i<f;i++)for(;Array.isArray(n[i]);)n[i]=n[i][0];for(i=f;i<c;i++)n[i]=t}}function eu(n,e){var r=fn(n),t=r.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new _e(0,t,"!=");e=Rt(e,t);var i=ru(e);if(t!==i)throw new _e(i,t,"!=");try{return Zf(r,e)}catch(a){throw a instanceof _e?new _e(i,t,"!="):a}}function Rt(n,e){var r=ru(n),t=n.slice(),i=-1,a=n.indexOf(i),l=n.indexOf(i,a+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var c=a>=0,f=e%r===0;if(c)if(f)t[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return t}function ru(n){return n.reduce((e,r)=>e*r,1)}function Zf(n,e){for(var r=n,t,i=e.length-1;i>0;i--){var a=e[i];t=[];for(var l=r.length/a,c=0;c<l;c++)t.push(r.slice(c*a,(c+1)*a));r=t}return r}function sn(n,e,r,t){var i=t||Pe(n);if(r)for(var a=0;a<r;a++)n=[n],i.unshift(1);for(n=tu(n,e,0);i.length<e;)i.push(1);return n}function tu(n,e,r){var t,i;if(Array.isArray(n)){var a=r+1;for(t=0,i=n.length;t<i;t++)n[t]=tu(n[t],e,a)}else for(var l=r;l<e;l++)n=[n];return n}function fn(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function r(t){Array.isArray(t)?t.forEach(r):e.push(t)}),e}function mt(n,e){for(var r,t=0,i=0;i<n.length;i++){var a=n[i],l=Array.isArray(a);if(i===0&&l&&(t=a.length),l&&a.length!==t)return;var c=l?mt(a,e):e(a);if(r===void 0)r=c;else if(r!==c)return"mixed"}return r}function P(n,e,r,t){function i(a){var l=Po(a,e.map(Yf));return Qf(n,e,a),r(l)}return i.isFactory=!0,i.fn=n,i.dependencies=e.slice().sort(),t&&(i.meta=t),i}function Qf(n,e,r){var t=e.filter(a=>!Gf(a)).every(a=>r[a]!==void 0);if(!t){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Gf(n){return n&&n[0]==="?"}function Yf(n){return n&&n[0]==="?"?n.slice(1):n}function nu(n,e){if(uu(n)&&ou(n,e))return n[e];throw typeof n[e]=="function"&&$f(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function iu(n,e,r){if(uu(n)&&ou(n,e))return n[e]=r,r;throw new Error('No access to property "'+e+'"')}function au(n,e){return e in n}function ou(n,e){return!n||typeof n!="object"?!1:ct(Jf,e)?!0:!(e in Object.prototype||e in Function.prototype)}function $f(n,e){return n==null||typeof n[e]!="function"||ct(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)?!1:ct(Hf,e)?!0:!(e in Object.prototype||e in Function.prototype)}function uu(n){return typeof n=="object"&&n&&n.constructor===Object}var Jf={length:!0,name:!0},Hf={toString:!0,valueOf:!0,toLocaleString:!0};var pi=class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return nu(this.wrappedObject,e)}set(e,r){return iu(this.wrappedObject,e,r),this}has(e){return au(this.wrappedObject,e)}};function su(n){return n?n instanceof Map||n instanceof pi||typeof n.set=="function"&&typeof n.get=="function"&&typeof n.keys=="function"&&typeof n.has=="function":!1}var fu=function(){return fu=vi.default.create,vi.default},Wf=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],di=P("typed",Wf,function(e){var{BigNumber:r,Complex:t,DenseMatrix:i,Fraction:a}=e,l=fu();return l.clear(),l.addTypes([{name:"number",test:Be},{name:"Complex",test:Ft},{name:"BigNumber",test:ze},{name:"Fraction",test:Bt},{name:"Unit",test:en},{name:"identifier",test:c=>tr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(c)},{name:"string",test:tr},{name:"Chain",test:Oo},{name:"Array",test:Te},{name:"Matrix",test:we},{name:"DenseMatrix",test:rn},{name:"SparseMatrix",test:tn},{name:"Range",test:nn},{name:"Index",test:ft},{name:"boolean",test:co},{name:"ResultSet",test:po},{name:"Help",test:mo},{name:"function",test:ho},{name:"Date",test:vo},{name:"RegExp",test:xo},{name:"null",test:Do},{name:"undefined",test:yo},{name:"AccessorNode",test:Eo},{name:"ArrayNode",test:wo},{name:"AssignmentNode",test:bo},{name:"BlockNode",test:Ao},{name:"ConditionalNode",test:Co},{name:"ConstantNode",test:_o},{name:"FunctionNode",test:To},{name:"FunctionAssignmentNode",test:Mo},{name:"IndexNode",test:So},{name:"Node",test:No},{name:"ObjectNode",test:Fo},{name:"OperatorNode",test:Bo},{name:"ParenthesisNode",test:Io},{name:"RangeNode",test:Ro},{name:"SymbolNode",test:Lo},{name:"Map",test:su},{name:"Object",test:go}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||mi(f),Jo(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return t||ln(f),new t(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return t||ln(f),new t(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return t||ln(f),new t(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){a||hi(f);var u=new a(f);if(u.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(f){var u=Number(f);if(isNaN(u))throw new Error('Cannot convert "'+f+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(f){r||mi(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){a||hi(f);try{return new a(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){t||ln(f);try{return new t(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||mi(f),new r(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return a||hi(f),new a(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||Kf(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),l.onMismatch=(c,f,u)=>{var o=l.createError(c,f,u);if(["wrongType","mismatch"].includes(o.data.category)&&f.length===1&&qr(f[0])&&u.some(p=>!p.params.includes(","))){var s=new TypeError("Function '".concat(c,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(c,")'."));throw s.data=o.data,s}throw o},l.onMismatch=(c,f,u)=>{var o=l.createError(c,f,u);if(["wrongType","mismatch"].includes(o.data.category)&&f.length===1&&qr(f[0])&&u.some(p=>!p.params.includes(","))){var s=new TypeError("Function '".concat(c,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(c,")'."));throw s.data=o.data,s}throw o},l});function mi(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function ln(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function Kf(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function hi(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}var ht=9e15,Jr=1e9,xi="0123456789abcdef",pn="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",mn="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",gi={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ht,maxE:ht,crypto:!1},mu,Vr,xe=!0,vn="[DecimalError] ",$r=vn+"Invalid argument: ",hu=vn+"Precision limit exceeded",vu=vn+"crypto unavailable",du="[object Decimal]",nr=Math.floor,Ze=Math.pow,jf=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,el=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,rl=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,xu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_r=1e7,he=7,tl=9007199254740991,nl=pn.length-1,Di=mn.length-1,$={toStringTag:du};$.absoluteValue=$.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),se(n)};$.ceil=function(){return se(new this.constructor(this),this.e+1,2)};$.clampedTo=$.clamp=function(n,e){var r,t=this,i=t.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error($r+e);return r=t.cmp(n),r<0?n:t.cmp(e)>0?e:new i(t)};$.comparedTo=$.cmp=function(n){var e,r,t,i,a=this,l=a.d,c=(n=new a.constructor(n)).d,f=a.s,u=n.s;if(!l||!c)return!f||!u?NaN:f!==u?f:l===c?0:!l^f<0?1:-1;if(!l[0]||!c[0])return l[0]?f:c[0]?-u:0;if(f!==u)return f;if(a.e!==n.e)return a.e>n.e^f<0?1:-1;for(t=l.length,i=c.length,e=0,r=t<i?t:i;e<r;++e)if(l[e]!==c[e])return l[e]>c[e]^f<0?1:-1;return t===i?0:t>i^f<0?1:-1};$.cosine=$.cos=function(){var n,e,r=this,t=r.constructor;return r.d?r.d[0]?(n=t.precision,e=t.rounding,t.precision=n+Math.max(r.e,r.sd())+he,t.rounding=1,r=il(t,wu(t,r)),t.precision=n,t.rounding=e,se(Vr==2||Vr==3?r.neg():r,n,e,!0)):new t(1):new t(NaN)};$.cubeRoot=$.cbrt=function(){var n,e,r,t,i,a,l,c,f,u,o=this,s=o.constructor;if(!o.isFinite()||o.isZero())return new s(o);for(xe=!1,a=o.s*Ze(o.s*o,1/3),!a||Math.abs(a)==1/0?(r=Ke(o.d),n=o.e,(a=(n-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=Ze(r,1/3),n=nr((n+1)/3)-(n%3==(n<0?-1:2)),a==1/0?r="5e"+n:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+n),t=new s(r),t.s=o.s):t=new s(a.toString()),l=(n=s.precision)+3;;)if(c=t,f=c.times(c).times(c),u=f.plus(o),t=Oe(u.plus(o).times(c),u.plus(f),l+2,1),Ke(c.d).slice(0,l)===(r=Ke(t.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!i&&r=="4999"){if(!i&&(se(c,n+1,0),c.times(c).times(c).eq(o))){t=c;break}l+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(se(t,n+1,1),e=!t.times(t).times(t).eq(o));break}return xe=!0,se(t,n,s.rounding,e)};$.decimalPlaces=$.dp=function(){var n,e=this.d,r=NaN;if(e){if(n=e.length-1,r=(n-nr(this.e/he))*he,n=e[n],n)for(;n%10==0;n/=10)r--;r<0&&(r=0)}return r};$.dividedBy=$.div=function(n){return Oe(this,new this.constructor(n))};$.dividedToIntegerBy=$.divToInt=function(n){var e=this,r=e.constructor;return se(Oe(e,new r(n),0,1,1),r.precision,r.rounding)};$.equals=$.eq=function(n){return this.cmp(n)===0};$.floor=function(){return se(new this.constructor(this),this.e+1,3)};$.greaterThan=$.gt=function(n){return this.cmp(n)>0};$.greaterThanOrEqualTo=$.gte=function(n){var e=this.cmp(n);return e==1||e===0};$.hyperbolicCosine=$.cosh=function(){var n,e,r,t,i,a=this,l=a.constructor,c=new l(1);if(!a.isFinite())return new l(a.s?1/0:NaN);if(a.isZero())return c;r=l.precision,t=l.rounding,l.precision=r+Math.max(a.e,a.sd())+4,l.rounding=1,i=a.d.length,i<32?(n=Math.ceil(i/3),e=(1/xn(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),a=vt(l,1,a.times(e),new l(1),!0);for(var f,u=n,o=new l(8);u--;)f=a.times(a),a=c.minus(f.times(o.minus(f.times(o))));return se(a,l.precision=r,l.rounding=t,!0)};$.hyperbolicSine=$.sinh=function(){var n,e,r,t,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,t=i.d.length,t<3)i=vt(a,2,i,i,!0);else{n=1.4*Math.sqrt(t),n=n>16?16:n|0,i=i.times(1/xn(5,n)),i=vt(a,2,i,i,!0);for(var l,c=new a(5),f=new a(16),u=new a(20);n--;)l=i.times(i),i=i.times(c.plus(l.times(f.times(l).plus(u))))}return a.precision=e,a.rounding=r,se(i,e,r,!0)};$.hyperbolicTangent=$.tanh=function(){var n,e,r=this,t=r.constructor;return r.isFinite()?r.isZero()?new t(r):(n=t.precision,e=t.rounding,t.precision=n+7,t.rounding=1,Oe(r.sinh(),r.cosh(),t.precision=n,t.rounding=e)):new t(r.s)};$.inverseCosine=$.acos=function(){var n,e=this,r=e.constructor,t=e.abs().cmp(1),i=r.precision,a=r.rounding;return t!==-1?t===0?e.isNeg()?Cr(r,i,a):new r(0):new r(NaN):e.isZero()?Cr(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),n=Cr(r,i+4,a).times(.5),r.precision=i,r.rounding=a,n.minus(e))};$.inverseHyperbolicCosine=$.acosh=function(){var n,e,r=this,t=r.constructor;return r.lte(1)?new t(r.eq(1)?0:NaN):r.isFinite()?(n=t.precision,e=t.rounding,t.precision=n+Math.max(Math.abs(r.e),r.sd())+4,t.rounding=1,xe=!1,r=r.times(r).minus(1).sqrt().plus(r),xe=!0,t.precision=n,t.rounding=e,r.ln()):new t(r)};$.inverseHyperbolicSine=$.asinh=function(){var n,e,r=this,t=r.constructor;return!r.isFinite()||r.isZero()?new t(r):(n=t.precision,e=t.rounding,t.precision=n+2*Math.max(Math.abs(r.e),r.sd())+6,t.rounding=1,xe=!1,r=r.times(r).plus(1).sqrt().plus(r),xe=!0,t.precision=n,t.rounding=e,r.ln())};$.inverseHyperbolicTangent=$.atanh=function(){var n,e,r,t,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=a.precision,e=a.rounding,t=i.sd(),Math.max(t,n)<2*-i.e-1?se(new a(i),n,e,!0):(a.precision=r=t-i.e,i=Oe(i.plus(1),new a(1).minus(i),r+n,1),a.precision=n+4,a.rounding=1,i=i.ln(),a.precision=n,a.rounding=e,i.times(.5))):new a(NaN)};$.inverseSine=$.asin=function(){var n,e,r,t,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,t=a.rounding,e!==-1?e===0?(n=Cr(a,r+4,t).times(.5),n.s=i.s,n):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=t,i.times(2)))};$.inverseTangent=$.atan=function(){var n,e,r,t,i,a,l,c,f,u=this,o=u.constructor,s=o.precision,p=o.rounding;if(u.isFinite()){if(u.isZero())return new o(u);if(u.abs().eq(1)&&s+4<=Di)return l=Cr(o,s+4,p).times(.25),l.s=u.s,l}else{if(!u.s)return new o(NaN);if(s+4<=Di)return l=Cr(o,s+4,p).times(.5),l.s=u.s,l}for(o.precision=c=s+10,o.rounding=1,r=Math.min(28,c/he+2|0),n=r;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(xe=!1,e=Math.ceil(c/he),t=1,f=u.times(u),l=new o(u),i=u;n!==-1;)if(i=i.times(f),a=l.minus(i.div(t+=2)),i=i.times(f),l=a.plus(i.div(t+=2)),l.d[e]!==void 0)for(n=e;l.d[n]===a.d[n]&&n--;);return r&&(l=l.times(2<<r-1)),xe=!0,se(l,o.precision=s,o.rounding=p,!0)};$.isFinite=function(){return!!this.d};$.isInteger=$.isInt=function(){return!!this.d&&nr(this.e/he)>this.d.length-2};$.isNaN=function(){return!this.s};$.isNegative=$.isNeg=function(){return this.s<0};$.isPositive=$.isPos=function(){return this.s>0};$.isZero=function(){return!!this.d&&this.d[0]===0};$.lessThan=$.lt=function(n){return this.cmp(n)<0};$.lessThanOrEqualTo=$.lte=function(n){return this.cmp(n)<1};$.logarithm=$.log=function(n){var e,r,t,i,a,l,c,f,u=this,o=u.constructor,s=o.precision,p=o.rounding,h=5;if(n==null)n=new o(10),e=!0;else{if(n=new o(n),r=n.d,n.s<0||!r||!r[0]||n.eq(1))return new o(NaN);e=n.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new o(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(xe=!1,c=s+h,l=Yr(u,c),t=e?hn(o,c+10):Yr(n,c),f=Oe(l,t,c,1),Lt(f.d,i=s,p))do if(c+=10,l=Yr(u,c),t=e?hn(o,c+10):Yr(n,c),f=Oe(l,t,c,1),!a){+Ke(f.d).slice(i+1,i+15)+1==1e14&&(f=se(f,s+1,0));break}while(Lt(f.d,i+=10,p));return xe=!0,se(f,s,p)};$.minus=$.sub=function(n){var e,r,t,i,a,l,c,f,u,o,s,p,h=this,v=h.constructor;if(n=new v(n),!h.d||!n.d)return!h.s||!n.s?n=new v(NaN):h.d?n.s=-n.s:n=new v(n.d||h.s!==n.s?h:NaN),n;if(h.s!=n.s)return n.s=-n.s,h.plus(n);if(u=h.d,p=n.d,c=v.precision,f=v.rounding,!u[0]||!p[0]){if(p[0])n.s=-n.s;else if(u[0])n=new v(h);else return new v(f===3?-0:0);return xe?se(n,c,f):n}if(r=nr(n.e/he),o=nr(h.e/he),u=u.slice(),a=o-r,a){for(s=a<0,s?(e=u,a=-a,l=p.length):(e=p,r=o,l=u.length),t=Math.max(Math.ceil(c/he),l)+2,a>t&&(a=t,e.length=1),e.reverse(),t=a;t--;)e.push(0);e.reverse()}else{for(t=u.length,l=p.length,s=t<l,s&&(l=t),t=0;t<l;t++)if(u[t]!=p[t]){s=u[t]<p[t];break}a=0}for(s&&(e=u,u=p,p=e,n.s=-n.s),l=u.length,t=p.length-l;t>0;--t)u[l++]=0;for(t=p.length;t>a;){if(u[--t]<p[t]){for(i=t;i&&u[--i]===0;)u[i]=_r-1;--u[i],u[t]+=_r}u[t]-=p[t]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(n.d=u,n.e=dn(u,r),xe?se(n,c,f):n):new v(f===3?-0:0)};$.modulo=$.mod=function(n){var e,r=this,t=r.constructor;return n=new t(n),!r.d||!n.s||n.d&&!n.d[0]?new t(NaN):!n.d||r.d&&!r.d[0]?se(new t(r),t.precision,t.rounding):(xe=!1,t.modulo==9?(e=Oe(r,n.abs(),0,3,1),e.s*=n.s):e=Oe(r,n,0,t.modulo,1),e=e.times(n),xe=!0,r.minus(e))};$.naturalExponential=$.exp=function(){return yi(this)};$.naturalLogarithm=$.ln=function(){return Yr(this)};$.negated=$.neg=function(){var n=new this.constructor(this);return n.s=-n.s,se(n)};$.plus=$.add=function(n){var e,r,t,i,a,l,c,f,u,o,s=this,p=s.constructor;if(n=new p(n),!s.d||!n.d)return!s.s||!n.s?n=new p(NaN):s.d||(n=new p(n.d||s.s===n.s?s:NaN)),n;if(s.s!=n.s)return n.s=-n.s,s.minus(n);if(u=s.d,o=n.d,c=p.precision,f=p.rounding,!u[0]||!o[0])return o[0]||(n=new p(s)),xe?se(n,c,f):n;if(a=nr(s.e/he),t=nr(n.e/he),u=u.slice(),i=a-t,i){for(i<0?(r=u,i=-i,l=o.length):(r=o,t=a,l=u.length),a=Math.ceil(c/he),l=a>l?a+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=u.length,i=o.length,l-i<0&&(i=l,r=o,o=u,u=r),e=0;i;)e=(u[--i]=u[i]+o[i]+e)/_r|0,u[i]%=_r;for(e&&(u.unshift(e),++t),l=u.length;u[--l]==0;)u.pop();return n.d=u,n.e=dn(u,t),xe?se(n,c,f):n};$.precision=$.sd=function(n){var e,r=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error($r+n);return r.d?(e=gu(r.d),n&&r.e+1>e&&(e=r.e+1)):e=NaN,e};$.round=function(){var n=this,e=n.constructor;return se(new e(n),n.e+1,e.rounding)};$.sine=$.sin=function(){var n,e,r=this,t=r.constructor;return r.isFinite()?r.isZero()?new t(r):(n=t.precision,e=t.rounding,t.precision=n+Math.max(r.e,r.sd())+he,t.rounding=1,r=ol(t,wu(t,r)),t.precision=n,t.rounding=e,se(Vr>2?r.neg():r,n,e,!0)):new t(NaN)};$.squareRoot=$.sqrt=function(){var n,e,r,t,i,a,l=this,c=l.d,f=l.e,u=l.s,o=l.constructor;if(u!==1||!c||!c[0])return new o(!u||u<0&&(!c||c[0])?NaN:c?l:1/0);for(xe=!1,u=Math.sqrt(+l),u==0||u==1/0?(e=Ke(c),(e.length+f)%2==0&&(e+="0"),u=Math.sqrt(e),f=nr((f+1)/2)-(f<0||f%2),u==1/0?e="5e"+f:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+f),t=new o(e)):t=new o(u.toString()),r=(f=o.precision)+3;;)if(a=t,t=a.plus(Oe(l,a,r+2,1)).times(.5),Ke(a.d).slice(0,r)===(e=Ke(t.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(se(a,f+1,0),a.times(a).eq(l))){t=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(se(t,f+1,1),n=!t.times(t).eq(l));break}return xe=!0,se(t,f,o.rounding,n)};$.tangent=$.tan=function(){var n,e,r=this,t=r.constructor;return r.isFinite()?r.isZero()?new t(r):(n=t.precision,e=t.rounding,t.precision=n+10,t.rounding=1,r=r.sin(),r.s=1,r=Oe(r,new t(1).minus(r.times(r)).sqrt(),n+10,0),t.precision=n,t.rounding=e,se(Vr==2||Vr==4?r.neg():r,n,e,!0)):new t(NaN)};$.times=$.mul=function(n){var e,r,t,i,a,l,c,f,u,o=this,s=o.constructor,p=o.d,h=(n=new s(n)).d;if(n.s*=o.s,!p||!p[0]||!h||!h[0])return new s(!n.s||p&&!p[0]&&!h||h&&!h[0]&&!p?NaN:!p||!h?n.s/0:n.s*0);for(r=nr(o.e/he)+nr(n.e/he),f=p.length,u=h.length,f<u&&(a=p,p=h,h=a,l=f,f=u,u=l),a=[],l=f+u,t=l;t--;)a.push(0);for(t=u;--t>=0;){for(e=0,i=f+t;i>t;)c=a[i]+h[t]*p[i-t-1]+e,a[i--]=c%_r|0,e=c/_r|0;a[i]=(a[i]+e)%_r|0}for(;!a[--l];)a.pop();return e?++r:a.shift(),n.d=a,n.e=dn(a,r),xe?se(n,s.precision,s.rounding):n};$.toBinary=function(n,e){return wi(this,2,n,e)};$.toDecimalPlaces=$.toDP=function(n,e){var r=this,t=r.constructor;return r=new t(r),n===void 0?r:(mr(n,0,Jr),e===void 0?e=t.rounding:mr(e,0,8),se(r,n+r.e+1,e))};$.toExponential=function(n,e){var r,t=this,i=t.constructor;return n===void 0?r=Fr(t,!0):(mr(n,0,Jr),e===void 0?e=i.rounding:mr(e,0,8),t=se(new i(t),n+1,e),r=Fr(t,!0,n+1)),t.isNeg()&&!t.isZero()?"-"+r:r};$.toFixed=function(n,e){var r,t,i=this,a=i.constructor;return n===void 0?r=Fr(i):(mr(n,0,Jr),e===void 0?e=a.rounding:mr(e,0,8),t=se(new a(i),n+i.e+1,e),r=Fr(t,!1,n+t.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};$.toFraction=function(n){var e,r,t,i,a,l,c,f,u,o,s,p,h=this,v=h.d,m=h.constructor;if(!v)return new m(h);if(u=r=new m(1),t=f=new m(0),e=new m(t),a=e.e=gu(v)-h.e-1,l=a%he,e.d[0]=Ze(10,l<0?he+l:l),n==null)n=a>0?e:u;else{if(c=new m(n),!c.isInt()||c.lt(u))throw Error($r+c);n=c.gt(e)?a>0?e:u:c}for(xe=!1,c=new m(Ke(v)),o=m.precision,m.precision=a=v.length*he*2;s=Oe(c,e,0,1,1),i=r.plus(s.times(t)),i.cmp(n)!=1;)r=t,t=i,i=u,u=f.plus(s.times(i)),f=i,i=e,e=c.minus(s.times(i)),c=i;return i=Oe(n.minus(r),t,0,1,1),f=f.plus(i.times(u)),r=r.plus(i.times(t)),f.s=u.s=h.s,p=Oe(u,t,a,1).minus(h).abs().cmp(Oe(f,r,a,1).minus(h).abs())<1?[u,t]:[f,r],m.precision=o,xe=!0,p};$.toHexadecimal=$.toHex=function(n,e){return wi(this,16,n,e)};$.toNearest=function(n,e){var r=this,t=r.constructor;if(r=new t(r),n==null){if(!r.d)return r;n=new t(1),e=t.rounding}else{if(n=new t(n),e===void 0?e=t.rounding:mr(e,0,8),!r.d)return n.s?r:n;if(!n.d)return n.s&&(n.s=r.s),n}return n.d[0]?(xe=!1,r=Oe(r,n,0,e,1).times(n),xe=!0,se(r)):(n.s=r.s,r=n),r};$.toNumber=function(){return+this};$.toOctal=function(n,e){return wi(this,8,n,e)};$.toPower=$.pow=function(n){var e,r,t,i,a,l,c=this,f=c.constructor,u=+(n=new f(n));if(!c.d||!n.d||!c.d[0]||!n.d[0])return new f(Ze(+c,u));if(c=new f(c),c.eq(1))return c;if(t=f.precision,a=f.rounding,n.eq(1))return se(c,t,a);if(e=nr(n.e/he),e>=n.d.length-1&&(r=u<0?-u:u)<=tl)return i=Du(f,c,r,t),n.s<0?new f(1).div(i):se(i,t,a);if(l=c.s,l<0){if(e<n.d.length-1)return new f(NaN);if((n.d[e]&1)==0&&(l=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=l,c}return r=Ze(+c,u),e=r==0||!isFinite(r)?nr(u*(Math.log("0."+Ke(c.d))/Math.LN10+c.e+1)):new f(r+"").e,e>f.maxE+1||e<f.minE-1?new f(e>0?l/0:0):(xe=!1,f.rounding=c.s=1,r=Math.min(12,(e+"").length),i=yi(n.times(Yr(c,t+r)),t),i.d&&(i=se(i,t+5,1),Lt(i.d,t,a)&&(e=t+10,i=se(yi(n.times(Yr(c,e+r)),e),e+5,1),+Ke(i.d).slice(t+1,t+15)+1==1e14&&(i=se(i,t+1,0)))),i.s=l,xe=!0,f.rounding=a,se(i,t,a))};$.toPrecision=function(n,e){var r,t=this,i=t.constructor;return n===void 0?r=Fr(t,t.e<=i.toExpNeg||t.e>=i.toExpPos):(mr(n,1,Jr),e===void 0?e=i.rounding:mr(e,0,8),t=se(new i(t),n,e),r=Fr(t,n<=t.e||t.e<=i.toExpNeg,n)),t.isNeg()&&!t.isZero()?"-"+r:r};$.toSignificantDigits=$.toSD=function(n,e){var r=this,t=r.constructor;return n===void 0?(n=t.precision,e=t.rounding):(mr(n,1,Jr),e===void 0?e=t.rounding:mr(e,0,8)),se(new t(r),n,e)};$.toString=function(){var n=this,e=n.constructor,r=Fr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+r:r};$.truncated=$.trunc=function(){return se(new this.constructor(this),this.e+1,1)};$.valueOf=$.toJSON=function(){var n=this,e=n.constructor,r=Fr(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+r:r};function Ke(n){var e,r,t,i=n.length-1,a="",l=n[0];if(i>0){for(a+=l,e=1;e<i;e++)t=n[e]+"",r=he-t.length,r&&(a+=Gr(r)),a+=t;l=n[e],t=l+"",r=he-t.length,r&&(a+=Gr(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}function mr(n,e,r){if(n!==~~n||n<e||n>r)throw Error($r+n)}function Lt(n,e,r,t){var i,a,l,c;for(a=n[0];a>=10;a/=10)--e;return--e<0?(e+=he,i=0):(i=Math.ceil((e+1)/he),e%=he),a=Ze(10,he-e),c=n[i]%a|0,t==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),l=r<4&&c==99999||r>3&&c==49999||c==5e4||c==0):l=(r<4&&c+1==a||r>3&&c+1==a/2)&&(n[i+1]/a/100|0)==Ze(10,e-2)-1||(c==a/2||c==0)&&(n[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),l=(t||r<4)&&c==9999||!t&&r>3&&c==4999):l=((t||r<4)&&c+1==a||!t&&r>3&&c+1==a/2)&&(n[i+1]/a/1e3|0)==Ze(10,e-3)-1,l}function cn(n,e,r){for(var t,i=[0],a,l=0,c=n.length;l<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=xi.indexOf(n.charAt(l++)),t=0;t<i.length;t++)i[t]>r-1&&(i[t+1]===void 0&&(i[t+1]=0),i[t+1]+=i[t]/r|0,i[t]%=r)}return i.reverse()}function il(n,e){var r,t,i;if(e.isZero())return e;t=e.d.length,t<32?(r=Math.ceil(t/3),i=(1/xn(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),n.precision+=r,e=vt(n,1,e.times(i),new n(1));for(var a=r;a--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return n.precision-=r,e}var Oe=function(){function n(t,i,a){var l,c=0,f=t.length;for(t=t.slice();f--;)l=t[f]*i+c,t[f]=l%a|0,c=l/a|0;return c&&t.unshift(c),t}function e(t,i,a,l){var c,f;if(a!=l)f=a>l?1:-1;else for(c=f=0;c<a;c++)if(t[c]!=i[c]){f=t[c]>i[c]?1:-1;break}return f}function r(t,i,a,l){for(var c=0;a--;)t[a]-=c,c=t[a]<i[a]?1:0,t[a]=c*l+t[a]-i[a];for(;!t[0]&&t.length>1;)t.shift()}return function(t,i,a,l,c,f){var u,o,s,p,h,v,m,d,g,y,D,w,b,x,A,_,C,E,T,M,L=t.constructor,O=t.s==i.s?1:-1,I=t.d,N=i.d;if(!I||!I[0]||!N||!N[0])return new L(!t.s||!i.s||(I?N&&I[0]==N[0]:!N)?NaN:I&&I[0]==0||!N?O*0:O/0);for(f?(h=1,o=t.e-i.e):(f=_r,h=he,o=nr(t.e/h)-nr(i.e/h)),T=N.length,C=I.length,g=new L(O),y=g.d=[],s=0;N[s]==(I[s]||0);s++);if(N[s]>(I[s]||0)&&o--,a==null?(x=a=L.precision,l=L.rounding):c?x=a+(t.e-i.e)+1:x=a,x<0)y.push(1),v=!0;else{if(x=x/h+2|0,s=0,T==1){for(p=0,N=N[0],x++;(s<C||p)&&x--;s++)A=p*f+(I[s]||0),y[s]=A/N|0,p=A%N|0;v=p||s<C}else{for(p=f/(N[0]+1)|0,p>1&&(N=n(N,p,f),I=n(I,p,f),T=N.length,C=I.length),_=T,D=I.slice(0,T),w=D.length;w<T;)D[w++]=0;M=N.slice(),M.unshift(0),E=N[0],N[1]>=f/2&&++E;do p=0,u=e(N,D,T,w),u<0?(b=D[0],T!=w&&(b=b*f+(D[1]||0)),p=b/E|0,p>1?(p>=f&&(p=f-1),m=n(N,p,f),d=m.length,w=D.length,u=e(m,D,d,w),u==1&&(p--,r(m,T<d?M:N,d,f))):(p==0&&(u=p=1),m=N.slice()),d=m.length,d<w&&m.unshift(0),r(D,m,w,f),u==-1&&(w=D.length,u=e(N,D,T,w),u<1&&(p++,r(D,T<w?M:N,w,f))),w=D.length):u===0&&(p++,D=[0]),y[s++]=p,u&&D[0]?D[w++]=I[_]||0:(D=[I[_]],w=1);while((_++<C||D[0]!==void 0)&&x--);v=D[0]!==void 0}y[0]||y.shift()}if(h==1)g.e=o,mu=v;else{for(s=1,p=y[0];p>=10;p/=10)s++;g.e=s+o*h-1,se(g,c?a+g.e+1:a,l,v)}return g}}();function se(n,e,r,t){var i,a,l,c,f,u,o,s,p,h=n.constructor;e:if(e!=null){if(s=n.d,!s)return n;for(i=1,c=s[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=he,l=e,o=s[p=0],f=o/Ze(10,i-l-1)%10|0;else if(p=Math.ceil((a+1)/he),c=s.length,p>=c)if(t){for(;c++<=p;)s.push(0);o=f=0,i=1,a%=he,l=a-he+1}else break e;else{for(o=c=s[p],i=1;c>=10;c/=10)i++;a%=he,l=a-he+i,f=l<0?0:o/Ze(10,i-l-1)%10|0}if(t=t||e<0||s[p+1]!==void 0||(l<0?o:o%Ze(10,i-l-1)),u=r<4?(f||t)&&(r==0||r==(n.s<0?3:2)):f>5||f==5&&(r==4||t||r==6&&(a>0?l>0?o/Ze(10,i-l):0:s[p-1])%10&1||r==(n.s<0?8:7)),e<1||!s[0])return s.length=0,u?(e-=n.e+1,s[0]=Ze(10,(he-e%he)%he),n.e=-e||0):s[0]=n.e=0,n;if(a==0?(s.length=p,c=1,p--):(s.length=p+1,c=Ze(10,he-a),s[p]=l>0?(o/Ze(10,i-l)%Ze(10,l)|0)*c:0),u)for(;;)if(p==0){for(a=1,l=s[0];l>=10;l/=10)a++;for(l=s[0]+=c,c=1;l>=10;l/=10)c++;a!=c&&(n.e++,s[0]==_r&&(s[0]=1));break}else{if(s[p]+=c,s[p]!=_r)break;s[p--]=0,c=1}for(a=s.length;s[--a]===0;)s.pop()}return xe&&(n.e>h.maxE?(n.d=null,n.e=NaN):n.e<h.minE&&(n.e=0,n.d=[0])),n}function Fr(n,e,r){if(!n.isFinite())return Eu(n);var t,i=n.e,a=Ke(n.d),l=a.length;return e?(r&&(t=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Gr(t):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(n.e<0?"e":"e+")+n.e):i<0?(a="0."+Gr(-i-1)+a,r&&(t=r-l)>0&&(a+=Gr(t))):i>=l?(a+=Gr(i+1-l),r&&(t=r-i-1)>0&&(a=a+"."+Gr(t))):((t=i+1)<l&&(a=a.slice(0,t)+"."+a.slice(t)),r&&(t=r-l)>0&&(i+1===l&&(a+="."),a+=Gr(t))),a}function dn(n,e){var r=n[0];for(e*=he;r>=10;r/=10)e++;return e}function hn(n,e,r){if(e>nl)throw xe=!0,r&&(n.precision=r),Error(hu);return se(new n(pn),e,1,!0)}function Cr(n,e,r){if(e>Di)throw Error(hu);return se(new n(mn),e,r,!0)}function gu(n){var e=n.length-1,r=e*he+1;if(e=n[e],e){for(;e%10==0;e/=10)r--;for(e=n[0];e>=10;e/=10)r++}return r}function Gr(n){for(var e="";n--;)e+="0";return e}function Du(n,e,r,t){var i,a=new n(1),l=Math.ceil(t/he+4);for(xe=!1;;){if(r%2&&(a=a.times(e),cu(a.d,l)&&(i=!0)),r=nr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),cu(e.d,l)}return xe=!0,a}function lu(n){return n.d[n.d.length-1]&1}function yu(n,e,r){for(var t,i=new n(e[0]),a=0;++a<e.length;)if(t=new n(e[a]),t.s)i[r](t)&&(i=t);else{i=t;break}return i}function yi(n,e){var r,t,i,a,l,c,f,u=0,o=0,s=0,p=n.constructor,h=p.rounding,v=p.precision;if(!n.d||!n.d[0]||n.e>17)return new p(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:0/0);for(e==null?(xe=!1,f=v):f=e,c=new p(.03125);n.e>-2;)n=n.times(c),s+=5;for(t=Math.log(Ze(2,s))/Math.LN10*2+5|0,f+=t,r=a=l=new p(1),p.precision=f;;){if(a=se(a.times(n),f,1),r=r.times(++o),c=l.plus(Oe(a,r,f,1)),Ke(c.d).slice(0,f)===Ke(l.d).slice(0,f)){for(i=s;i--;)l=se(l.times(l),f,1);if(e==null)if(u<3&&Lt(l.d,f-t,h,u))p.precision=f+=10,r=a=c=new p(1),o=0,u++;else return se(l,p.precision=v,h,xe=!0);else return p.precision=v,l}l=c}}function Yr(n,e){var r,t,i,a,l,c,f,u,o,s,p,h=1,v=10,m=n,d=m.d,g=m.constructor,y=g.rounding,D=g.precision;if(m.s<0||!d||!d[0]||!m.e&&d[0]==1&&d.length==1)return new g(d&&!d[0]?-1/0:m.s!=1?NaN:d?0:m);if(e==null?(xe=!1,o=D):o=e,g.precision=o+=v,r=Ke(d),t=r.charAt(0),Math.abs(a=m.e)<15e14){for(;t<7&&t!=1||t==1&&r.charAt(1)>3;)m=m.times(n),r=Ke(m.d),t=r.charAt(0),h++;a=m.e,t>1?(m=new g("0."+r),a++):m=new g(t+"."+r.slice(1))}else return u=hn(g,o+2,D).times(a+""),m=Yr(new g(t+"."+r.slice(1)),o-v).plus(u),g.precision=D,e==null?se(m,D,y,xe=!0):m;for(s=m,f=l=m=Oe(m.minus(1),m.plus(1),o,1),p=se(m.times(m),o,1),i=3;;){if(l=se(l.times(p),o,1),u=f.plus(Oe(l,new g(i),o,1)),Ke(u.d).slice(0,o)===Ke(f.d).slice(0,o))if(f=f.times(2),a!==0&&(f=f.plus(hn(g,o+2,D).times(a+""))),f=Oe(f,new g(h),o,1),e==null)if(Lt(f.d,o-v,y,c))g.precision=o+=v,u=l=m=Oe(s.minus(1),s.plus(1),o,1),p=se(m.times(m),o,1),i=c=1;else return se(f,g.precision=D,y,xe=!0);else return g.precision=D,f;f=u,i+=2}}function Eu(n){return String(n.s*n.s/0)}function Ei(n,e){var r,t,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(t=e.search(/e/i))>0?(r<0&&(r=t),r+=+e.slice(t+1),e=e.substring(0,t)):r<0&&(r=e.length),t=0;e.charCodeAt(t)===48;t++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(t,i),e){if(i-=t,n.e=r=r-t-1,n.d=[],t=(r+1)%he,r<0&&(t+=he),t<i){for(t&&n.d.push(+e.slice(0,t)),i-=he;t<i;)n.d.push(+e.slice(t,t+=he));e=e.slice(t),t=he-e.length}else t-=i;for(;t--;)e+="0";n.d.push(+e),xe&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function al(n,e){var r,t,i,a,l,c,f,u,o;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),xu.test(e))return Ei(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(el.test(e))r=16,e=e.toLowerCase();else if(jf.test(e))r=2;else if(rl.test(e))r=8;else throw Error($r+e);for(a=e.search(/p/i),a>0?(f=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),l=a>=0,t=n.constructor,l&&(e=e.replace(".",""),c=e.length,a=c-a,i=Du(t,new t(r),a,a*2)),u=cn(e,r,_r),o=u.length-1,a=o;u[a]===0;--a)u.pop();return a<0?new t(n.s*0):(n.e=dn(u,o),n.d=u,xe=!1,l&&(n=Oe(n,i,c*4)),f&&(n=n.times(Math.abs(f)<54?Ze(2,f):Ot.pow(2,f))),xe=!0,n)}function ol(n,e){var r,t=e.d.length;if(t<3)return e.isZero()?e:vt(n,2,e,e);r=1.4*Math.sqrt(t),r=r>16?16:r|0,e=e.times(1/xn(5,r)),e=vt(n,2,e,e);for(var i,a=new n(5),l=new n(16),c=new n(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(l.times(i).minus(c))));return e}function vt(n,e,r,t,i){var a,l,c,f,u=1,o=n.precision,s=Math.ceil(o/he);for(xe=!1,f=r.times(r),c=new n(t);;){if(l=Oe(c.times(f),new n(e++*e++),o,1),c=i?t.plus(l):t.minus(l),t=Oe(l.times(f),new n(e++*e++),o,1),l=c.plus(t),l.d[s]!==void 0){for(a=s;l.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=t,t=l,l=a,u++}return xe=!0,l.d.length=s+1,l}function xn(n,e){for(var r=n;--e;)r*=n;return r}function wu(n,e){var r,t=e.s<0,i=Cr(n,n.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Vr=t?4:1,e;if(r=e.divToInt(i),r.isZero())Vr=t?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return Vr=lu(r)?t?2:3:t?4:1,e;Vr=lu(r)?t?1:4:t?3:2}return e.minus(i).abs()}function wi(n,e,r,t){var i,a,l,c,f,u,o,s,p,h=n.constructor,v=r!==void 0;if(v?(mr(r,1,Jr),t===void 0?t=h.rounding:mr(t,0,8)):(r=h.precision,t=h.rounding),!n.isFinite())o=Eu(n);else{for(o=Fr(n),l=o.indexOf("."),v?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,l>=0&&(o=o.replace(".",""),p=new h(1),p.e=o.length-l,p.d=cn(Fr(p),10,i),p.e=p.d.length),s=cn(o,10,i),a=f=s.length;s[--f]==0;)s.pop();if(!s[0])o=v?"0p+0":"0";else{if(l<0?a--:(n=new h(n),n.d=s,n.e=a,n=Oe(n,p,r,t,0,i),s=n.d,a=n.e,u=mu),l=s[r],c=i/2,u=u||s[r+1]!==void 0,u=t<4?(l!==void 0||u)&&(t===0||t===(n.s<0?3:2)):l>c||l===c&&(t===4||u||t===6&&s[r-1]&1||t===(n.s<0?8:7)),s.length=r,u)for(;++s[--r]>i-1;)s[r]=0,r||(++a,s.unshift(1));for(f=s.length;!s[f-1];--f);for(l=0,o="";l<f;l++)o+=xi.charAt(s[l]);if(v){if(f>1)if(e==16||e==8){for(l=e==16?4:3,--f;f%l;f++)o+="0";for(s=cn(o,i,e),f=s.length;!s[f-1];--f);for(l=1,o="1.";l<f;l++)o+=xi.charAt(s[l])}else o=o.charAt(0)+"."+o.slice(1);o=o+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)o="0"+o;o="0."+o}else if(++a>f)for(a-=f;a--;)o+="0";else a<f&&(o=o.slice(0,a)+"."+o.slice(a))}o=(e==16?"0x":e==2?"0b":e==8?"0o":"")+o}return n.s<0?"-"+o:o}function cu(n,e){if(n.length>e)return n.length=e,!0}function ul(n){return new this(n).abs()}function sl(n){return new this(n).acos()}function fl(n){return new this(n).acosh()}function ll(n,e){return new this(n).plus(e)}function cl(n){return new this(n).asin()}function pl(n){return new this(n).asinh()}function ml(n){return new this(n).atan()}function hl(n){return new this(n).atanh()}function vl(n,e){n=new this(n),e=new this(e);var r,t=this.precision,i=this.rounding,a=t+4;return!n.s||!e.s?r=new this(NaN):!n.d&&!e.d?(r=Cr(this,a,1).times(e.s>0?.25:.75),r.s=n.s):!e.d||n.isZero()?(r=e.s<0?Cr(this,t,i):new this(0),r.s=n.s):!n.d||e.isZero()?(r=Cr(this,a,1).times(.5),r.s=n.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Oe(n,e,a,1)),e=Cr(this,a,1),this.precision=t,this.rounding=i,r=n.s<0?r.minus(e):r.plus(e)):r=this.atan(Oe(n,e,a,1)),r}function dl(n){return new this(n).cbrt()}function xl(n){return se(n=new this(n),n.e+1,2)}function gl(n,e,r){return new this(n).clamp(e,r)}function Dl(n){if(!n||typeof n!="object")throw Error(vn+"Object expected");var e,r,t,i=n.defaults===!0,a=["precision",1,Jr,"rounding",0,8,"toExpNeg",-ht,0,"toExpPos",0,ht,"maxE",0,ht,"minE",-ht,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=gi[r]),(t=n[r])!==void 0)if(nr(t)===t&&t>=a[e+1]&&t<=a[e+2])this[r]=t;else throw Error($r+r+": "+t);if(r="crypto",i&&(this[r]=gi[r]),(t=n[r])!==void 0)if(t===!0||t===!1||t===0||t===1)if(t)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(vu);else this[r]=!1;else throw Error($r+r+": "+t);return this}function yl(n){return new this(n).cos()}function El(n){return new this(n).cosh()}function bu(n){var e,r,t;function i(a){var l,c,f,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,pu(a)){u.s=a.s,xe?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(f=typeof a,f==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(l=0,c=a;c>=10;c/=10)l++;xe?l>i.maxE?(u.e=NaN,u.d=null):l<i.minE?(u.e=0,u.d=[0]):(u.e=l,u.d=[a]):(u.e=l,u.d=[a]);return}else if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return Ei(u,a.toString())}else if(f!=="string")throw Error($r+a);return(c=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(c===43&&(a=a.slice(1)),u.s=1),xu.test(a)?Ei(u,a):al(u,a)}if(i.prototype=$,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Dl,i.clone=bu,i.isDecimal=pu,i.abs=ul,i.acos=sl,i.acosh=fl,i.add=ll,i.asin=cl,i.asinh=pl,i.atan=ml,i.atanh=hl,i.atan2=vl,i.cbrt=dl,i.ceil=xl,i.clamp=gl,i.cos=yl,i.cosh=El,i.div=wl,i.exp=bl,i.floor=Al,i.hypot=Cl,i.ln=_l,i.log=Ml,i.log10=Sl,i.log2=Tl,i.max=Nl,i.min=Fl,i.mod=Bl,i.mul=Il,i.pow=Rl,i.random=Ll,i.round=Ol,i.sign=Pl,i.sin=zl,i.sinh=ql,i.sqrt=kl,i.sub=Vl,i.sum=Ul,i.tan=Xl,i.tanh=Zl,i.trunc=Ql,n===void 0&&(n={}),n&&n.defaults!==!0)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<t.length;)n.hasOwnProperty(r=t[e++])||(n[r]=this[r]);return i.config(n),i}function wl(n,e){return new this(n).div(e)}function bl(n){return new this(n).exp()}function Al(n){return se(n=new this(n),n.e+1,3)}function Cl(){var n,e,r=new this(0);for(xe=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return xe=!0,new this(1/0);r=e}return xe=!0,r.sqrt()}function pu(n){return n instanceof Ot||n&&n.toStringTag===du||!1}function _l(n){return new this(n).ln()}function Ml(n,e){return new this(n).log(e)}function Tl(n){return new this(n).log(2)}function Sl(n){return new this(n).log(10)}function Nl(){return yu(this,arguments,"lt")}function Fl(){return yu(this,arguments,"gt")}function Bl(n,e){return new this(n).mod(e)}function Il(n,e){return new this(n).mul(e)}function Rl(n,e){return new this(n).pow(e)}function Ll(n){var e,r,t,i,a=0,l=new this(1),c=[];if(n===void 0?n=this.precision:mr(n,1,Jr),t=Math.ceil(n/he),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(t));a<t;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(t*=4);a<t;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=t/4}else throw Error(vu);else for(;a<t;)c[a++]=Math.random()*1e7|0;for(t=c[--a],n%=he,t&&n&&(i=Ze(10,he-n),c[a]=(t/i|0)*i);c[a]===0;a--)c.pop();if(a<0)r=0,c=[0];else{for(r=-1;c[0]===0;r-=he)c.shift();for(t=1,i=c[0];i>=10;i/=10)t++;t<he&&(r-=he-t)}return l.e=r,l.d=c,l}function Ol(n){return se(n=new this(n),n.e+1,this.rounding)}function Pl(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function zl(n){return new this(n).sin()}function ql(n){return new this(n).sinh()}function kl(n){return new this(n).sqrt()}function Vl(n,e){return new this(n).sub(e)}function Ul(){var n=0,e=arguments,r=new this(e[n]);for(xe=!1;r.s&&++n<e.length;)r=r.plus(e[n]);return xe=!0,se(r,this.precision,this.rounding)}function Xl(n){return new this(n).tan()}function Zl(n){return new this(n).tanh()}function Ql(n){return se(n=new this(n),n.e+1,1)}$[Symbol.for("nodejs.util.inspect.custom")]=$.toString;$[Symbol.toStringTag]="Decimal";var Ot=$.constructor=bu(gi);pn=new Ot(pn);mn=new Ot(mn);var bi=Ot;var Gl="BigNumber",Yl=["?on","config"],Ai=P(Gl,Yl,n=>{var{on:e,config:r}=n,t=bi.clone({precision:r.precision,modulo:bi.EUCLID});return t.prototype=Object.create(t.prototype),t.prototype.type="BigNumber",t.prototype.isBigNumber=!0,t.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},t.fromJSON=function(i){return new t(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&t.config({precision:i.precision})}),t},{isClass:!0});var Ye=Mt(Cu(),1);var $l="Complex",Jl=[],_i=P($l,Jl,()=>(Object.defineProperty(Ye.default,"name",{value:"Complex"}),Ye.default.prototype.constructor=Ye.default,Ye.default.prototype.type="Complex",Ye.default.prototype.isComplex=!0,Ye.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ye.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ye.default.prototype.format=function(n){var e="",r=this.im,t=this.re,i=It(this.re,n),a=It(this.im,n),l=Be(n)?n:n?n.precision:null;if(l!==null){var c=Math.pow(10,-l);Math.abs(t/r)<c&&(t=0),Math.abs(r/t)<c&&(r=0)}return r===0?e=i:t===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Ye.default.fromPolar=function(n){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return(0,Ye.default)(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],t=arguments[1];if(Be(r)){if(en(t)&&t.hasBase("ANGLE")&&(t=t.toNumber("rad")),Be(t))return new Ye.default({r,phi:t});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ye.default.prototype.valueOf=Ye.default.prototype.toString,Ye.default.fromJSON=function(n){return new Ye.default(n)},Ye.default.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},Ye.default),{isClass:!0});var Br=Mt(Mu(),1);var Hl="Fraction",Wl=[],Ti=P(Hl,Wl,()=>(Object.defineProperty(Br.default,"name",{value:"Fraction"}),Br.default.prototype.constructor=Br.default,Br.default.prototype.type="Fraction",Br.default.prototype.isFraction=!0,Br.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Br.default.fromJSON=function(n){return new Br.default(n)},Br.default),{isClass:!0});var Kl="Matrix",jl=[],Si=P(Kl,jl,()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,r,t){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,r,t){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function gn(n){return Object.keys(n.signatures||{}).reduce(function(e,r){var t=(r.match(/,/g)||[]).length+1;return Math.max(e,t)},-1)}var ec="DenseMatrix",rc=["Matrix"],Ni=P(ec,rc,n=>{var{Matrix:e}=n;function r(o,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!tr(s))throw new Error("Invalid datatype: "+s);if(we(o))o.type==="DenseMatrix"?(this._data=ve(o._data),this._size=ve(o._size),this._datatype=s||o._datatype):(this._data=o.toArray(),this._size=o.size(),this._datatype=s||o._datatype);else if(o&&Te(o.data)&&Te(o.size))this._data=o.data,this._size=o.size,ci(this._data,this._size),this._datatype=s||o.datatype;else if(Te(o))this._data=u(o),this._size=Pe(this._data),ci(this._data,this._size),this._datatype=s;else{if(o)throw new TypeError("Unsupported type of data ("+He(o)+")");this._data=[],this._size=[0],this._datatype=s}}r.prototype=new e,r.prototype.createDenseMatrix=function(o,s){return new r(o,s)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return mt(this._data,He)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(o,s){return new r(o,s)},r.prototype.subset=function(o,s,p){switch(arguments.length){case 1:return t(this,o);case 2:case 3:return a(this,o,s,p);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(o){if(!Te(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new _e(o.length,this._size.length);for(var s=0;s<o.length;s++)Le(o[s],this._size[s]);for(var p=this._data,h=0,v=o.length;h<v;h++){var m=o[h];Le(m,p.length),p=p[m]}return p},r.prototype.set=function(o,s,p){if(!Te(o))throw new TypeError("Array expected");if(o.length<this._size.length)throw new _e(o.length,this._size.length,"<");var h,v,m,d=o.map(function(y){return y+1});f(this,d,p);var g=this._data;for(h=0,v=o.length-1;h<v;h++)m=o[h],Le(m,g.length),g=g[m];return m=o[o.length-1],Le(m,g.length),g[m]=s,this};function t(o,s){if(!ft(s))throw new TypeError("Invalid index");var p=s.isScalar();if(p)return o.get(s.min());var h=s.size();if(h.length!==o._size.length)throw new _e(h.length,o._size.length);for(var v=s.min(),m=s.max(),d=0,g=o._size.length;d<g;d++)Le(v[d],o._size[d]),Le(m[d],o._size[d]);return new r(i(o._data,s,h.length,0),o._datatype)}function i(o,s,p,h){var v=h===p-1,m=s.dimension(h);return v?m.map(function(d){return Le(d,o.length),o[d]}).valueOf():m.map(function(d){Le(d,o.length);var g=o[d];return i(g,s,p,h+1)}).valueOf()}function a(o,s,p,h){if(!s||s.isIndex!==!0)throw new TypeError("Invalid index");var v=s.size(),m=s.isScalar(),d;if(we(p)?(d=p.size(),p=p.valueOf()):d=Pe(p),m){if(d.length!==0)throw new TypeError("Scalar expected");o.set(s.min(),p,h)}else{if(v.length<o._size.length)throw new _e(v.length,o._size.length,"<");if(d.length<v.length){for(var g=0,y=0;v[g]===1&&d[g]===1;)g++;for(;v[g]===1;)y++,g++;p=sn(p,v.length,y,d)}if(!lt(v,d))throw new _e(v,d,">");var D=s.max().map(function(x){return x+1});f(o,D,h);var w=v.length,b=0;l(o._data,s,p,w,b)}return o}function l(o,s,p,h,v){var m=v===h-1,d=s.dimension(v);m?d.forEach(function(g,y){Le(g),o[g]=p[y[0]]}):d.forEach(function(g,y){Le(g),l(o[g],s,p[y[0]],h,v+1)})}r.prototype.resize=function(o,s,p){if(!qr(o))throw new TypeError("Array or Matrix expected");var h=o.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),v=p?this.clone():this;return c(v,h,s)};function c(o,s,p){if(s.length===0){for(var h=o._data;Te(h);)h=h[0];return h}return o._size=s.slice(0),o._data=nt(o._data,o._size,p),o}r.prototype.reshape=function(o,s){var p=s?this.clone():this;p._data=eu(p._data,o);var h=p._size.reduce((v,m)=>v*m);return p._size=Rt(o,h),p};function f(o,s,p){for(var h=o._size.slice(0),v=!1;h.length<s.length;)h.push(0),v=!0;for(var m=0,d=s.length;m<d;m++)s[m]>h[m]&&(h[m]=s[m],v=!0);v&&c(o,h,p)}r.prototype.clone=function(){var o=new r({data:ve(this._data),size:ve(this._size),datatype:this._datatype});return o},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(o){var s=this,p=gn(o),h=function d(g,y){return Te(g)?g.map(function(D,w){return d(D,y.concat(w))}):p===1?o(g):p===2?o(g,y):o(g,y,s)},v=h(this._data,[]),m=this._datatype!==void 0?mt(v,He):void 0;return new r(v,m)},r.prototype.forEach=function(o){var s=this,p=function h(v,m){Te(v)?v.forEach(function(d,g){h(d,m.concat(g))}):o(v,m,s)};p(this._data,[])},r.prototype[Symbol.iterator]=function*(){var o=function*s(p,h){if(Te(p))for(var v=0;v<p.length;v++)yield*s(p[v],h.concat(v));else yield{value:p,index:h}};yield*o(this._data,[])},r.prototype.rows=function(){var o=[],s=this.size();if(s.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var h of p)o.push(new r([h],this._datatype));return o},r.prototype.columns=function(){var o=this,s=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,v=function(g){var y=h.map(D=>[D[g]]);s.push(new r(y,o._datatype))},m=0;m<p[1];m++)v(m);return s},r.prototype.toArray=function(){return ve(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(o){return Fe(this._data,o)},r.prototype.toString=function(){return Fe(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(o){if(o){if(ze(o)&&(o=o.toNumber()),!Be(o)||!de(o))throw new TypeError("The parameter k must be an integer number")}else o=0;for(var s=o>0?o:0,p=o<0?-o:0,h=this._size[0],v=this._size[1],m=Math.min(h-p,v-s),d=[],g=0;g<m;g++)d[g]=this._data[g+p][g+s];return new r({data:d,size:[m],datatype:this._datatype})},r.diagonal=function(o,s,p,h){if(!Te(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(A){if(ze(A)&&(A=A.toNumber()),!Be(A)||!de(A)||A<1)throw new Error("Size values must be positive integers");return A}),p){if(ze(p)&&(p=p.toNumber()),!Be(p)||!de(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var v=p>0?p:0,m=p<0?-p:0,d=o[0],g=o[1],y=Math.min(d-m,g-v),D;if(Te(s)){if(s.length!==y)throw new Error("Invalid value array length");D=function(_){return s[_]}}else if(we(s)){var w=s.size();if(w.length!==1||w[0]!==y)throw new Error("Invalid matrix length");D=function(_){return s.get([_])}}else D=function(){return s};h||(h=ze(D(0))?D(0).mul(0):0);var b=[];if(o.length>0){b=nt(b,o,h);for(var x=0;x<y;x++)b[x+m][x+v]=D(x)}return new r({data:b,size:[d,g]})},r.fromJSON=function(o){return new r(o)},r.prototype.swapRows=function(o,s){if(!Be(o)||!de(o)||!Be(s)||!de(s))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Le(o,this._size[0]),Le(s,this._size[0]),r._swapRows(o,s,this._data),this},r._swapRows=function(o,s,p){var h=p[o];p[o]=p[s],p[s]=h};function u(o){for(var s=0,p=o.length;s<p;s++){var h=o[s];Te(h)?o[s]=u(h):h&&h.isMatrix===!0&&(o[s]=u(h.valueOf()))}return o}return r},{isClass:!0});function Tu(n){var e=n.length,r=n[0].length,t,i,a=[];for(i=0;i<r;i++){var l=[];for(t=0;t<e;t++)l.push(n[t][i]);a.push(l)}return a}function yn(n){for(var e=0;e<n.length;e++)if(qr(n[e]))return!0;return!1}function Pt(n,e){we(n)&&(n=n.valueOf());for(var r=0,t=n.length;r<t;r++){var i=n[r];Array.isArray(i)?Pt(i,e):e(i)}}function qe(n,e,r){return n&&typeof n.map=="function"?n.map(function(t){return qe(t,e,r)}):e(n)}function En(n,e,r){var t=Array.isArray(n)?Pe(n):n.size();if(e<0||e>=t.length)throw new kr(e,t.length);return we(n)?n.create(Dn(n.valueOf(),e,r)):Dn(n,e,r)}function Dn(n,e,r){var t,i,a,l;if(e<=0)if(Array.isArray(n[0])){for(l=Tu(n),i=[],t=0;t<l.length;t++)i[t]=Dn(l[t],e-1,r);return i}else{for(a=n[0],t=1;t<n.length;t++)a=r(a,n[t]);return a}else{for(i=[],t=0;t<n.length;t++)i[t]=Dn(n[t],e-1,r);return i}}var hr="number",Ur="number, number";function Fi(n){return Math.abs(n)}Fi.signature=hr;function Bi(n,e){return n+e}Bi.signature=Ur;function tc(n,e){return n-e}tc.signature=Ur;function Ii(n,e){return n*e}Ii.signature=Ur;function nc(n,e){return n/e}nc.signature=Ur;function Ri(n){return-n}Ri.signature=hr;function ic(n){return n}ic.signature=hr;function ac(n){return Qo(n)}ac.signature=hr;function oc(n){return n*n*n}oc.signature=hr;function uc(n){return Math.exp(n)}uc.signature=hr;function sc(n){return Go(n)}sc.signature=hr;function fc(n,e){if(!de(n)||!de(e))throw new Error("Parameters in function gcd must be integer numbers");for(var r;e!==0;)r=n%e,n=e,e=r;return n<0?-n:n}fc.signature=Ur;function lc(n,e){if(!de(n)||!de(e))throw new Error("Parameters in function lcm must be integer numbers");if(n===0||e===0)return 0;for(var r,t=n*e;e!==0;)r=e,e=n%r,n=r;return Math.abs(t/n)}lc.signature=Ur;function cc(n){return Xo(n)}cc.signature=hr;function pc(n){return Uo(n)}pc.signature=hr;function mc(n){return Zo(n)}mc.signature=hr;function hc(n,e){if(e>0)return n-e*Math.floor(n/e);if(e===0)return n;throw new Error("Cannot calculate mod for a negative divisor")}hc.signature=Ur;function wn(n){return Vo(n)}wn.signature=hr;function vc(n){return Math.sqrt(n)}vc.signature=hr;function dc(n){return n*n}dc.signature=hr;function xc(n,e){var r,t,i,a=0,l=1,c=1,f=0;if(!de(n)||!de(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)t=Math.floor(n/e),i=n-t*e,r=a,a=l-t*a,l=r,r=c,c=f-t*c,f=r,n=e,e=i;var u;return n<0?u=[-n,-l,-f]:u=[n,n?l:0,f],u}xc.signature=Ur;function Li(n,e){return n*n<1&&e===1/0||n*n>1&&e===-1/0?0:Math.pow(n,e)}Li.signature=Ur;function gc(n){return Math.abs(n)}gc.signature=hr;function bn(n,e){if(e<n)return 1;if(e===n)return e;var r=e+n>>1;return bn(n,r)*bn(r+1,e)}function Oi(n,e){if(!de(n)||n<0)throw new TypeError("Positive integer value expected in function combinations");if(!de(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>n)throw new TypeError("k must be less than or equal to n");for(var r=n-e,t=1,i=e<r?r+1:e+1,a=2,l=e<r?e:r,c=i;c<=n;++c)for(t*=c;a<=l&&t%a===0;)t/=a,++a;return a<=l&&(t/=bn(a,l)),t}Oi.signature="number, number";var zt="number";function Dc(n){return de(n)}Dc.signature=zt;function yc(n){return n<0}yc.signature=zt;function Ec(n){return n>0}Ec.signature=zt;function Pi(n){return n===0}Pi.signature=zt;function wc(n){return Number.isNaN(n)}wc.signature=zt;var Su="isZero",bc=["typed"],zi=P(Su,bc,n=>{var{typed:e}=n;return e(Su,{number:Pi,BigNumber:function(t){return t.isZero()},Complex:function(t){return t.re===0&&t.im===0},Fraction:function(t){return t.d===1&&t.n===0},Unit:e.referToSelf(r=>t=>e.find(r,t.valueType())(t.value)),"Array | Matrix":e.referToSelf(r=>t=>qe(t,r))})});function Ir(n,e,r){if(r==null)return n.eq(e);if(n.eq(e))return!0;if(n.isNaN()||e.isNaN())return!1;if(n.isFinite()&&e.isFinite()){var t=n.minus(e).abs();if(t.isZero())return!0;var i=n.constructor.max(n.abs(),e.abs());return t.lte(i.times(r))}return!1}function Nu(n,e,r){return pr(n.re,e.re,r)&&pr(n.im,e.im,r)}var Rr=P("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(r=>(t,i)=>{if(!t.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[t.valueType(),i.valueType()])(t.value,i.value)})}});var An="equalScalar",Ac=["typed","config"],qi=P(An,Ac,n=>{var{typed:e,config:r}=n,t=Rr({typed:e});return e(An,{"boolean, boolean":function(a,l){return a===l},"number, number":function(a,l){return pr(a,l,r.epsilon)},"BigNumber, BigNumber":function(a,l){return a.eq(l)||Ir(a,l,r.epsilon)},"Fraction, Fraction":function(a,l){return a.equals(l)},"Complex, Complex":function(a,l){return Nu(a,l,r.epsilon)}},t)}),U0=P(An,["typed","config"],n=>{var{typed:e,config:r}=n;return e(An,{"number, number":function(i,a){return pr(i,a,r.epsilon)}})});var Cc="SparseMatrix",_c=["typed","equalScalar","Matrix"],ki=P(Cc,_c,n=>{var{typed:e,equalScalar:r,Matrix:t}=n;function i(m,d){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!tr(d))throw new Error("Invalid datatype: "+d);if(we(m))a(this,m,d);else if(m&&Te(m.index)&&Te(m.ptr)&&Te(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=d||m.datatype;else if(Te(m))l(this,m,d);else{if(m)throw new TypeError("Unsupported type of data ("+He(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=d}}function a(m,d,g){d.type==="SparseMatrix"?(m._values=d._values?ve(d._values):void 0,m._index=ve(d._index),m._ptr=ve(d._ptr),m._size=ve(d._size),m._datatype=g||d._datatype):l(m,d.valueOf(),g||d._datatype)}function l(m,d,g){m._values=[],m._index=[],m._ptr=[],m._datatype=g;var y=d.length,D=0,w=r,b=0;if(tr(g)&&(w=e.find(r,[g,g])||r,b=e.convert(0,g)),y>0){var x=0;do{m._ptr.push(m._index.length);for(var A=0;A<y;A++){var _=d[A];if(Te(_)){if(x===0&&D<_.length&&(D=_.length),x<_.length){var C=_[x];w(C,b)||(m._values.push(C),m._index.push(A))}}else x===0&&D<1&&(D=1),w(_,b)||(m._values.push(_),m._index.push(A))}x++}while(x<D)}m._ptr.push(m._index.length),m._size=[y,D]}i.prototype=new t,i.prototype.createSparseMatrix=function(m,d){return new i(m,d)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return mt(this._values,He)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,d){return new i(m,d)},i.prototype.density=function(){var m=this._size[0],d=this._size[1];return m!==0&&d!==0?this._index.length/(m*d):0},i.prototype.subset=function(m,d,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return c(this,m);case 2:case 3:return f(this,m,d,g);default:throw new SyntaxError("Wrong number of arguments")}};function c(m,d){if(!ft(d))throw new TypeError("Invalid index");var g=d.isScalar();if(g)return m.get(d.min());var y=d.size();if(y.length!==m._size.length)throw new _e(y.length,m._size.length);var D,w,b,x,A=d.min(),_=d.max();for(D=0,w=m._size.length;D<w;D++)Le(A[D],m._size[D]),Le(_[D],m._size[D]);var C=m._values,E=m._index,T=m._ptr,M=d.dimension(0),L=d.dimension(1),O=[],I=[];M.forEach(function(F,B){I[F]=B[0],O[F]=!0});var N=C?[]:void 0,X=[],V=[];return L.forEach(function(F){for(V.push(X.length),b=T[F],x=T[F+1];b<x;b++)D=E[b],O[D]===!0&&(X.push(I[D]),N&&N.push(C[b]))}),V.push(X.length),new i({values:N,index:X,ptr:V,size:y,datatype:m._datatype})}function f(m,d,g,y){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var D=d.size(),w=d.isScalar(),b;if(we(g)?(b=g.size(),g=g.toArray()):b=Pe(g),w){if(b.length!==0)throw new TypeError("Scalar expected");m.set(d.min(),g,y)}else{if(D.length!==1&&D.length!==2)throw new _e(D.length,m._size.length,"<");if(b.length<D.length){for(var x=0,A=0;D[x]===1&&b[x]===1;)x++;for(;D[x]===1;)A++,x++;g=sn(g,D.length,A,b)}if(!lt(D,b))throw new _e(D,b,">");if(D.length===1){var _=d.dimension(0);_.forEach(function(T,M){Le(T),m.set([T,0],g[M[0]],y)})}else{var C=d.dimension(0),E=d.dimension(1);C.forEach(function(T,M){Le(T),E.forEach(function(L,O){Le(L),m.set([T,L],g[M[0]][O[0]],y)})})}}return m}i.prototype.get=function(m){if(!Te(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new _e(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var d=m[0],g=m[1];Le(d,this._size[0]),Le(g,this._size[1]);var y=u(d,this._ptr[g],this._ptr[g+1],this._index);return y<this._ptr[g+1]&&this._index[y]===d?this._values[y]:0},i.prototype.set=function(m,d,g){if(!Te(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new _e(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var y=m[0],D=m[1],w=this._size[0],b=this._size[1],x=r,A=0;tr(this._datatype)&&(x=e.find(r,[this._datatype,this._datatype])||r,A=e.convert(0,this._datatype)),(y>w-1||D>b-1)&&(p(this,Math.max(y+1,w),Math.max(D+1,b),g),w=this._size[0],b=this._size[1]),Le(y,w),Le(D,b);var _=u(y,this._ptr[D],this._ptr[D+1],this._index);return _<this._ptr[D+1]&&this._index[_]===y?x(d,A)?o(_,D,this._values,this._index,this._ptr):this._values[_]=d:s(_,y,D,d,this._values,this._index,this._ptr),this};function u(m,d,g,y){if(g-d===0)return g;for(var D=d;D<g;D++)if(y[D]===m)return D;return d}function o(m,d,g,y,D){g.splice(m,1),y.splice(m,1);for(var w=d+1;w<D.length;w++)D[w]--}function s(m,d,g,y,D,w,b){D.splice(m,0,y),w.splice(m,0,d);for(var x=g+1;x<b.length;x++)b[x]++}i.prototype.resize=function(m,d,g){if(!qr(m))throw new TypeError("Array or Matrix expected");var y=m.valueOf().map(w=>Array.isArray(w)&&w.length===1?w[0]:w);if(y.length!==2)throw new Error("Only two dimensions matrix are supported");y.forEach(function(w){if(!Be(w)||!de(w)||w<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Fe(y)+")")});var D=g?this.clone():this;return p(D,y[0],y[1],d)};function p(m,d,g,y){var D=y||0,w=r,b=0;tr(m._datatype)&&(w=e.find(r,[m._datatype,m._datatype])||r,b=e.convert(0,m._datatype),D=e.convert(D,m._datatype));var x=!w(D,b),A=m._size[0],_=m._size[1],C,E,T;if(g>_){for(E=_;E<g;E++)if(m._ptr[E]=m._values.length,x)for(C=0;C<A;C++)m._values.push(D),m._index.push(C);m._ptr[g]=m._values.length}else g<_&&(m._ptr.splice(g+1,_-g),m._values.splice(m._ptr[g],m._values.length),m._index.splice(m._ptr[g],m._index.length));if(_=g,d>A){if(x){var M=0;for(E=0;E<_;E++){m._ptr[E]=m._ptr[E]+M,T=m._ptr[E+1]+M;var L=0;for(C=A;C<d;C++,L++)m._values.splice(T+L,0,D),m._index.splice(T+L,0,C),M++}m._ptr[_]=m._values.length}}else if(d<A){var O=0;for(E=0;E<_;E++){m._ptr[E]=m._ptr[E]-O;var I=m._ptr[E],N=m._ptr[E+1]-O;for(T=I;T<N;T++)C=m._index[T],C>d-1&&(m._values.splice(T,1),m._index.splice(T,1),O++)}m._ptr[E]=m._values.length}return m._size[0]=d,m._size[1]=g,m}i.prototype.reshape=function(m,d){if(!Te(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(F){if(!Be(F)||!de(F)||F<=-2||F===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Fe(m)+")")});var g=this._size[0]*this._size[1];m=Rt(m,g);var y=m[0]*m[1];if(g!==y)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var D=d?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return D;for(var w=[],b=0;b<D._ptr.length;b++)for(var x=0;x<D._ptr[b+1]-D._ptr[b];x++)w.push(b);for(var A=D._values.slice(),_=D._index.slice(),C=0;C<D._index.length;C++){var E=_[C],T=w[C],M=E*D._size[1]+T;w[C]=M%m[1],_[C]=Math.floor(M/m[1])}D._values.length=0,D._index.length=0,D._ptr.length=m[1]+1,D._size=m.slice();for(var L=0;L<D._ptr.length;L++)D._ptr[L]=0;for(var O=0;O<A.length;O++){var I=_[O],N=w[O],X=A[O],V=u(I,D._ptr[N],D._ptr[N+1],D._index);s(V,I,N,X,D._values,D._index,D._ptr)}return D},i.prototype.clone=function(){var m=new i({values:this._values?ve(this._values):void 0,index:ve(this._index),ptr:ve(this._ptr),size:ve(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,d){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,y=this._size[0],D=this._size[1],w=gn(m),b=function(A,_,C){return w===1?m(A):w===2?m(A,[_,C]):m(A,[_,C],g)};return h(this,0,y-1,0,D-1,b,d)};function h(m,d,g,y,D,w,b){var x=[],A=[],_=[],C=r,E=0;tr(m._datatype)&&(C=e.find(r,[m._datatype,m._datatype])||r,E=e.convert(0,m._datatype));for(var T=function(U,z,Z){U=w(U,z,Z),C(U,E)||(x.push(U),A.push(z))},M=y;M<=D;M++){_.push(x.length);var L=m._ptr[M],O=m._ptr[M+1];if(b)for(var I=L;I<O;I++){var N=m._index[I];N>=d&&N<=g&&T(m._values[I],N-d,M-y)}else{for(var X={},V=L;V<O;V++){var F=m._index[V];X[F]=m._values[V]}for(var B=d;B<=g;B++){var q=B in X?X[B]:0;T(q,B-d,M-y)}}}return _.push(x.length),new i({values:x,index:A,ptr:_,size:[g-d+1,D-y+1]})}i.prototype.forEach=function(m,d){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,y=this._size[0],D=this._size[1],w=0;w<D;w++){var b=this._ptr[w],x=this._ptr[w+1];if(d)for(var A=b;A<x;A++){var _=this._index[A];m(this._values[A],[_,w],g)}else{for(var C={},E=b;E<x;E++){var T=this._index[E];C[T]=this._values[E]}for(var M=0;M<y;M++){var L=M in C?C[M]:0;m(L,[M,w],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],d=0;d<m;d++)for(var g=this._ptr[d],y=this._ptr[d+1],D=g;D<y;D++){var w=this._index[D];yield{value:this._values[D],index:[w,d]}}},i.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(m,d,g,y,D){var w=y[0],b=y[1],x=[],A,_;for(A=0;A<w;A++)for(x[A]=[],_=0;_<b;_++)x[A][_]=0;for(_=0;_<b;_++)for(var C=g[_],E=g[_+1],T=C;T<E;T++)A=d[T],x[A][_]=m?D?ve(m[T]):m[T]:1;return x}return i.prototype.format=function(m){for(var d=this._size[0],g=this._size[1],y=this.density(),D="Sparse Matrix ["+Fe(d,m)+" x "+Fe(g,m)+"] density: "+Fe(y,m)+`
`,w=0;w<g;w++)for(var b=this._ptr[w],x=this._ptr[w+1],A=b;A<x;A++){var _=this._index[A];D+=`
    (`+Fe(_,m)+", "+Fe(w,m)+") ==> "+(this._values?Fe(this._values[A],m):"X")}return D},i.prototype.toString=function(){return Fe(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(ze(m)&&(m=m.toNumber()),!Be(m)||!de(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var d=m>0?m:0,g=m<0?-m:0,y=this._size[0],D=this._size[1],w=Math.min(y-g,D-d),b=[],x=[],A=[];A[0]=0;for(var _=d;_<D&&b.length<w;_++)for(var C=this._ptr[_],E=this._ptr[_+1],T=C;T<E;T++){var M=this._index[T];if(M===_-d+g){b.push(this._values[T]),x[b.length-1]=M-g;break}}return A.push(b.length),new i({values:b,index:x,ptr:A,size:[w,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,d,g,y,D){if(!Te(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(F){if(ze(F)&&(F=F.toNumber()),!Be(F)||!de(F)||F<1)throw new Error("Size values must be positive integers");return F}),g){if(ze(g)&&(g=g.toNumber()),!Be(g)||!de(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var w=r,b=0;tr(D)&&(w=e.find(r,[D,D])||r,b=e.convert(0,D));var x=g>0?g:0,A=g<0?-g:0,_=m[0],C=m[1],E=Math.min(_-A,C-x),T;if(Te(d)){if(d.length!==E)throw new Error("Invalid value array length");T=function(B){return d[B]}}else if(we(d)){var M=d.size();if(M.length!==1||M[0]!==E)throw new Error("Invalid matrix length");T=function(B){return d.get([B])}}else T=function(){return d};for(var L=[],O=[],I=[],N=0;N<C;N++){I.push(L.length);var X=N-x;if(X>=0&&X<E){var V=T(X);w(V,b)||(O.push(X+A),L.push(V))}}return I.push(L.length),new i({values:L,index:O,ptr:I,size:[_,C]})},i.prototype.swapRows=function(m,d){if(!Be(m)||!de(m)||!Be(d)||!de(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Le(m,this._size[0]),Le(d,this._size[0]),i._swapRows(m,d,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,d,g,y,D){for(var w=y[m],b=y[m+1],x=w;x<b;x++)D(g[x],d[x])},i._swapRows=function(m,d,g,y,D,w){for(var b=0;b<g;b++){var x=w[b],A=w[b+1],_=u(m,x,A,D),C=u(d,x,A,D);if(_<A&&C<A&&D[_]===m&&D[C]===d){if(y){var E=y[_];y[_]=y[C],y[C]=E}continue}if(_<A&&D[_]===m&&(C>=A||D[C]!==d)){var T=y?y[_]:void 0;D.splice(C,0,d),y&&y.splice(C,0,T),D.splice(C<=_?_+1:_,1),y&&y.splice(C<=_?_+1:_,1);continue}if(C<A&&D[C]===d&&(_>=A||D[_]!==m)){var M=y?y[C]:void 0;D.splice(_,0,m),y&&y.splice(_,0,M),D.splice(_<=C?C+1:C,1),y&&y.splice(_<=C?C+1:C,1)}}},i},{isClass:!0});var Mc="number",Tc=["typed"];function Sc(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],t=e[2],i=e[3];return{input:n,radix:r,integerPart:t,fractionalPart:i}}else return null}function Nc(n){for(var e=parseInt(n.integerPart,n.radix),r=0,t=0;t<n.fractionalPart.length;t++){var i=parseInt(n.fractionalPart[t],n.radix);r+=i/Math.pow(n.radix,t+1)}var a=e+r;if(isNaN(a))throw new SyntaxError('String "'+n.input+'" is no valid number');return a}var Vi=P(Mc,Tc,n=>{var{typed:e}=n,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=Sc(i);if(a)return Nc(a);var l=0,c=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);c&&(l=Number(c[2]),i=c[1]);var f=Number(i);if(isNaN(f))throw new SyntaxError('String "'+i+'" is no valid number');if(c){if(f>2**l-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));f>=2**(l-1)&&(f=f-2**l)}return f},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(t=>i=>qe(i,t))});return r.fromJSON=function(t){return parseFloat(t.value)},r});var Fc="bignumber",Bc=["typed","BigNumber"],Ui=P(Fc,Bc,n=>{var{typed:e,BigNumber:r}=n;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var l=a[2],c=r(a[1]),f=new r(2).pow(Number(l));if(c.gt(f.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new r(2).pow(Number(l)-1);return c.gte(u)?c.sub(f):c}return new r(i)},BigNumber:function(i){return i},Fraction:function(i){return new r(i.n).div(i.d).times(i.s)},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(t=>i=>qe(i,t))})});var Ic="complex",Rc=["typed","Complex"],Xi=P(Ic,Rc,n=>{var{typed:e,Complex:r}=n;return e("complex",{"":function(){return r.ZERO},number:function(i){return new r(i,0)},"number, number":function(i,a){return new r(i,a)},"BigNumber, BigNumber":function(i,a){return new r(i.toNumber(),a.toNumber())},Fraction:function(i){return new r(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return r(i)},null:function(i){return r(0)},Object:function(i){if("re"in i&&"im"in i)return new r(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new r(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(t=>i=>qe(i,t))})});var Lc="fraction",Oc=["typed","Fraction"],Zi=P(Lc,Oc,n=>{var{typed:e,Fraction:r}=n;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,a){return new r(i,a)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},Fraction:function(i){return i},Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(t=>i=>qe(i,t))})});var Fu="matrix",Pc=["typed","Matrix","DenseMatrix","SparseMatrix"],Qi=P(Fu,Pc,n=>{var{typed:e,Matrix:r,DenseMatrix:t,SparseMatrix:i}=n;return e(Fu,{"":function(){return a([])},string:function(c){return a([],c)},"string, string":function(c,f){return a([],c,f)},Array:function(c){return a(c)},Matrix:function(c){return a(c,c.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(l,c,f){if(c==="dense"||c==="default"||c===void 0)return new t(l,f);if(c==="sparse")return new i(l,f);throw new TypeError("Unknown matrix type "+JSON.stringify(c)+".")}});var Bu="matrixFromColumns",zc=["typed","matrix","flatten","size"],Gi=P(Bu,zc,n=>{var{typed:e,matrix:r,flatten:t,size:i}=n;return e(Bu,{"...Array":function(f){return a(f)},"...Matrix":function(f){return r(a(f.map(u=>u.toArray())))}});function a(c){if(c.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var f=l(c[0]),u=[],o=0;o<f;o++)u[o]=[];for(var s of c){var p=l(s);if(p!==f)throw new TypeError("The vectors had different length: "+(f|0)+" \u2260 "+(p|0));for(var h=t(s),v=0;v<f;v++)u[v].push(h[v])}return u}function l(c){var f=i(c);if(f.length===1)return f[0];if(f.length===2){if(f[0]===1)return f[1];if(f[1]===1)return f[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}});var Iu="unaryMinus",qc=["typed"],Yi=P(Iu,qc,n=>{var{typed:e}=n;return e(Iu,{number:Ri,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>t=>{var i=t.clone();return i.value=e.find(r,i.valueType())(t.value),i}),"Array | Matrix":e.referToSelf(r=>t=>qe(t,r,!0))})});var Ru="abs",kc=["typed"],$i=P(Ru,kc,n=>{var{typed:e}=n;return e(Ru,{number:Fi,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),"Array | Matrix":e.referToSelf(r=>t=>qe(t,r,!0))})});var Lu="addScalar",Vc=["typed"],Ji=P(Lu,Vc,n=>{var{typed:e}=n;return e(Lu,{"number, number":Bi,"Complex, Complex":function(t,i){return t.add(i)},"BigNumber, BigNumber":function(t,i){return t.plus(i)},"Fraction, Fraction":function(t,i){return t.add(i)},"Unit, Unit":e.referToSelf(r=>(t,i)=>{if(t.value===null||t.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(i))throw new Error("Units do not match");var a=t.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})});var Uc="matAlgo11xS0s",Xc=["typed","equalScalar"],Cn=P(Uc,Xc,n=>{var{typed:e,equalScalar:r}=n;return function(i,a,l,c){var f=i._values,u=i._index,o=i._ptr,s=i._size,p=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],m,d=r,g=0,y=l;typeof p=="string"&&(m=p,d=e.find(r,[m,m]),g=e.convert(0,m),a=e.convert(a,m),y=e.find(l,[m,m]));for(var D=[],w=[],b=[],x=0;x<v;x++){b[x]=w.length;for(var A=o[x],_=o[x+1],C=A;C<_;C++){var E=u[C],T=c?y(a,f[C]):y(f[C],a);d(T,g)||(w.push(E),D.push(T))}}return b[v]=w.length,i.createSparseMatrix({values:D,index:w,ptr:b,size:[h,v],datatype:m})}});var Zc="matAlgo12xSfs",Qc=["typed","DenseMatrix"],Er=P(Zc,Qc,n=>{var{typed:e,DenseMatrix:r}=n;return function(i,a,l,c){var f=i._values,u=i._index,o=i._ptr,s=i._size,p=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],m,d=l;typeof p=="string"&&(m=p,a=e.convert(a,m),d=e.find(l,[m,m]));for(var g=[],y=[],D=[],w=0;w<v;w++){for(var b=w+1,x=o[w],A=o[w+1],_=x;_<A;_++){var C=u[_];y[C]=f[_],D[C]=b}for(var E=0;E<h;E++)w===0&&(g[E]=[]),D[E]===b?g[E][w]=c?d(a,y[E]):d(y[E],a):g[E][w]=c?d(a,0):d(0,a)}return new r({data:g,size:[h,v],datatype:m})}});var Gc="matAlgo14xDs",Yc=["typed"],dt=P(Gc,Yc,n=>{var{typed:e}=n;return function(i,a,l,c){var f=i._data,u=i._size,o=i._datatype,s,p=l;typeof o=="string"&&(s=o,a=e.convert(a,s),p=e.find(l,[s,s]));var h=u.length>0?r(p,0,u,u[0],f,a,c):[];return i.createDenseMatrix({data:h,size:ve(u),datatype:s})};function r(t,i,a,l,c,f,u){var o=[];if(i===a.length-1)for(var s=0;s<l;s++)o[s]=u?t(f,c[s]):t(c[s],f);else for(var p=0;p<l;p++)o[p]=r(t,i+1,a,a[i+1],c[p],f,u);return o}});var $c="matAlgo01xDSid",Jc=["typed"],_n=P($c,Jc,n=>{var{typed:e}=n;return function(t,i,a,l){var c=t._data,f=t._size,u=t._datatype,o=i._values,s=i._index,p=i._ptr,h=i._size,v=i._datatype;if(f.length!==h.length)throw new _e(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=f[0],d=f[1],g=typeof u=="string"&&u===v?u:void 0,y=g?e.find(a,[g,g]):a,D,w,b=[];for(D=0;D<m;D++)b[D]=[];var x=[],A=[];for(w=0;w<d;w++){for(var _=w+1,C=p[w],E=p[w+1],T=C;T<E;T++)D=s[T],x[D]=l?y(o[T],c[D][w]):y(c[D][w],o[T]),A[D]=_;for(D=0;D<m;D++)A[D]===_?b[D][w]=x[D]:b[D][w]=c[D][w]}return t.createDenseMatrix({data:b,size:[m,d],datatype:g})}});var Hc="matAlgo04xSidSid",Wc=["typed","equalScalar"],Ou=P(Hc,Wc,n=>{var{typed:e,equalScalar:r}=n;return function(i,a,l){var c=i._values,f=i._index,u=i._ptr,o=i._size,s=i._datatype,p=a._values,h=a._index,v=a._ptr,m=a._size,d=a._datatype;if(o.length!==m.length)throw new _e(o.length,m.length);if(o[0]!==m[0]||o[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+m+")");var g=o[0],y=o[1],D,w=r,b=0,x=l;typeof s=="string"&&s===d&&(D=s,w=e.find(r,[D,D]),b=e.convert(0,D),x=e.find(l,[D,D]));var A=c&&p?[]:void 0,_=[],C=[],E=c&&p?[]:void 0,T=c&&p?[]:void 0,M=[],L=[],O,I,N,X,V;for(I=0;I<y;I++){C[I]=_.length;var F=I+1;for(X=u[I],V=u[I+1],N=X;N<V;N++)O=f[N],_.push(O),M[O]=F,E&&(E[O]=c[N]);for(X=v[I],V=v[I+1],N=X;N<V;N++)if(O=h[N],M[O]===F){if(E){var B=x(E[O],p[N]);w(B,b)?M[O]=null:E[O]=B}}else _.push(O),L[O]=F,T&&(T[O]=p[N]);if(E&&T)for(N=C[I];N<_.length;)O=_[N],M[O]===F?(A[N]=E[O],N++):L[O]===F?(A[N]=T[O],N++):_.splice(N,1)}return C[y]=_.length,i.createSparseMatrix({values:A,index:_,ptr:C,size:[g,y],datatype:D})}});var Kc="matAlgo10xSids",jc=["typed","DenseMatrix"],Mn=P(Kc,jc,n=>{var{typed:e,DenseMatrix:r}=n;return function(i,a,l,c){var f=i._values,u=i._index,o=i._ptr,s=i._size,p=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],m,d=l;typeof p=="string"&&(m=p,a=e.convert(a,m),d=e.find(l,[m,m]));for(var g=[],y=[],D=[],w=0;w<v;w++){for(var b=w+1,x=o[w],A=o[w+1],_=x;_<A;_++){var C=u[_];y[C]=f[_],D[C]=b}for(var E=0;E<h;E++)w===0&&(g[E]=[]),D[E]===b?g[E][w]=c?d(a,y[E]):d(y[E],a):g[E][w]=a}return new r({data:g,size:[h,v],datatype:m})}});var ep="matAlgo13xDD",rp=["typed"],Pu=P(ep,rp,n=>{var{typed:e}=n;return function(i,a,l){var c=i._data,f=i._size,u=i._datatype,o=a._data,s=a._size,p=a._datatype,h=[];if(f.length!==s.length)throw new _e(f.length,s.length);for(var v=0;v<f.length;v++){if(f[v]!==s[v])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+s+")");h[v]=f[v]}var m,d=l;typeof u=="string"&&u===p&&(m=u,d=e.find(l,[m,m]));var g=h.length>0?r(d,0,h,h[0],c,o):[];return i.createDenseMatrix({data:g,size:h,datatype:m})};function r(t,i,a,l,c,f){var u=[];if(i===a.length-1)for(var o=0;o<l;o++)u[o]=t(c[o],f[o]);else for(var s=0;s<l;s++)u[s]=r(t,i+1,a,a[i+1],c[s],f[s]);return u}});var tp="matrixAlgorithmSuite",np=["typed","matrix"],vr=P(tp,np,n=>{var{typed:e,matrix:r}=n,t=Pu({typed:e}),i=dt({typed:e});return function(l){var c=l.elop,f=l.SD||l.DS,u;c?(u={"DenseMatrix, DenseMatrix":(h,v)=>t(h,v,c),"Array, Array":(h,v)=>t(r(h),r(v),c).valueOf(),"Array, DenseMatrix":(h,v)=>t(r(h),v,c),"DenseMatrix, Array":(h,v)=>t(h,r(v),c)},l.SS&&(u["SparseMatrix, SparseMatrix"]=(h,v)=>l.SS(h,v,c,!1)),l.DS&&(u["DenseMatrix, SparseMatrix"]=(h,v)=>l.DS(h,v,c,!1),u["Array, SparseMatrix"]=(h,v)=>l.DS(r(h),v,c,!1)),f&&(u["SparseMatrix, DenseMatrix"]=(h,v)=>f(v,h,c,!0),u["SparseMatrix, Array"]=(h,v)=>f(r(v),h,c,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(v,m)=>t(v,m,h)),"Array, Array":e.referToSelf(h=>(v,m)=>t(r(v),r(m),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(v,m)=>t(r(v),m,h)),"DenseMatrix, Array":e.referToSelf(h=>(v,m)=>t(v,r(m),h))},l.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(v,m)=>l.SS(v,m,h,!1))),l.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(v,m)=>l.DS(v,m,h,!1)),u["Array, SparseMatrix"]=e.referToSelf(h=>(v,m)=>l.DS(r(v),m,h,!1))),f&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(v,m)=>f(m,v,h,!0)),u["SparseMatrix, Array"]=e.referToSelf(h=>(v,m)=>f(r(m),v,h,!0))));var o=l.scalar||"any",s=l.Ds||l.Ss;s&&(c?(u["DenseMatrix,"+o]=(h,v)=>i(h,v,c,!1),u[o+", DenseMatrix"]=(h,v)=>i(v,h,c,!0),u["Array,"+o]=(h,v)=>i(r(h),v,c,!1).valueOf(),u[o+", Array"]=(h,v)=>i(r(v),h,c,!0).valueOf()):(u["DenseMatrix,"+o]=e.referToSelf(h=>(v,m)=>i(v,m,h,!1)),u[o+", DenseMatrix"]=e.referToSelf(h=>(v,m)=>i(m,v,h,!0)),u["Array,"+o]=e.referToSelf(h=>(v,m)=>i(r(v),m,h,!1).valueOf()),u[o+", Array"]=e.referToSelf(h=>(v,m)=>i(r(m),v,h,!0).valueOf())));var p=l.sS!==void 0?l.sS:l.Ss;return c?(l.Ss&&(u["SparseMatrix,"+o]=(h,v)=>l.Ss(h,v,c,!1)),p&&(u[o+", SparseMatrix"]=(h,v)=>p(v,h,c,!0))):(l.Ss&&(u["SparseMatrix,"+o]=e.referToSelf(h=>(v,m)=>l.Ss(v,m,h,!1))),p&&(u[o+", SparseMatrix"]=e.referToSelf(h=>(v,m)=>p(m,v,h,!0)))),c&&c.signatures&&an(u,c.signatures),u}});var ip="matAlgo03xDSf",ap=["typed"],wr=P(ip,ap,n=>{var{typed:e}=n;return function(t,i,a,l){var c=t._data,f=t._size,u=t._datatype,o=i._values,s=i._index,p=i._ptr,h=i._size,v=i._datatype;if(f.length!==h.length)throw new _e(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");if(!o)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=f[0],d=f[1],g,y=0,D=a;typeof u=="string"&&u===v&&(g=u,y=e.convert(0,g),D=e.find(a,[g,g]));for(var w=[],b=0;b<m;b++)w[b]=[];for(var x=[],A=[],_=0;_<d;_++){for(var C=_+1,E=p[_],T=p[_+1],M=E;M<T;M++){var L=s[M];x[L]=l?D(o[M],c[L][_]):D(c[L][_],o[M]),A[L]=C}for(var O=0;O<m;O++)A[O]===C?w[O][_]=x[O]:w[O][_]=l?D(y,c[O][_]):D(c[O][_],y)}return t.createDenseMatrix({data:w,size:[m,d],datatype:g})}});var op="matAlgo05xSfSf",up=["typed","equalScalar"],zu=P(op,up,n=>{var{typed:e,equalScalar:r}=n;return function(i,a,l){var c=i._values,f=i._index,u=i._ptr,o=i._size,s=i._datatype,p=a._values,h=a._index,v=a._ptr,m=a._size,d=a._datatype;if(o.length!==m.length)throw new _e(o.length,m.length);if(o[0]!==m[0]||o[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+m+")");var g=o[0],y=o[1],D,w=r,b=0,x=l;typeof s=="string"&&s===d&&(D=s,w=e.find(r,[D,D]),b=e.convert(0,D),x=e.find(l,[D,D]));var A=c&&p?[]:void 0,_=[],C=[],E=A?[]:void 0,T=A?[]:void 0,M=[],L=[],O,I,N,X;for(I=0;I<y;I++){C[I]=_.length;var V=I+1;for(N=u[I],X=u[I+1];N<X;N++)O=f[N],_.push(O),M[O]=V,E&&(E[O]=c[N]);for(N=v[I],X=v[I+1];N<X;N++)O=h[N],M[O]!==V&&_.push(O),L[O]=V,T&&(T[O]=p[N]);if(A)for(N=C[I];N<_.length;){O=_[N];var F=M[O],B=L[O];if(F===V||B===V){var q=F===V?E[O]:b,H=B===V?T[O]:b,U=x(q,H);w(U,b)?_.splice(N,1):(A.push(U),N++)}}}return C[y]=_.length,i.createSparseMatrix({values:A,index:_,ptr:C,size:[g,y],datatype:D})}});var sp="multiplyScalar",fp=["typed"],Hi=P(sp,fp,n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":Ii,"Complex, Complex":function(t,i){return t.mul(i)},"BigNumber, BigNumber":function(t,i){return t.times(i)},"Fraction, Fraction":function(t,i){return t.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,t)=>t.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,t)=>r.multiply(t)})});var qu="multiply",lp=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Wi=P(qu,lp,n=>{var{typed:e,matrix:r,addScalar:t,multiplyScalar:i,equalScalar:a,dot:l}=n,c=Cn({typed:e,equalScalar:a}),f=dt({typed:e});function u(b,x){switch(b.length){case 1:switch(x.length){case 1:if(b[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(b[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+b[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(b[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+b[1]+") must match Vector length ("+x[0]+")");break;case 2:if(b[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+b[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+b.length+" dimensions)")}}function o(b,x,A){if(A===0)throw new Error("Cannot multiply two empty vectors");return l(b,x)}function s(b,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(b,x)}function p(b,x){var A=b._data,_=b._size,C=b._datatype,E=x._data,T=x._size,M=x._datatype,L=_[0],O=T[1],I,N=t,X=i;C&&M&&C===M&&typeof C=="string"&&(I=C,N=e.find(t,[I,I]),X=e.find(i,[I,I]));for(var V=[],F=0;F<O;F++){for(var B=X(A[0],E[0][F]),q=1;q<L;q++)B=N(B,X(A[q],E[q][F]));V[F]=B}return b.createDenseMatrix({data:V,size:[O],datatype:I})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":y}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":d,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":D,"SparseMatrix, SparseMatrix":w});function m(b,x){var A=b._data,_=b._size,C=b._datatype,E=x._data,T=x._datatype,M=_[0],L=_[1],O,I=t,N=i;C&&T&&C===T&&typeof C=="string"&&(O=C,I=e.find(t,[O,O]),N=e.find(i,[O,O]));for(var X=[],V=0;V<M;V++){for(var F=A[V],B=N(F[0],E[0]),q=1;q<L;q++)B=I(B,N(F[q],E[q]));X[V]=B}return b.createDenseMatrix({data:X,size:[M],datatype:O})}function d(b,x){var A=b._data,_=b._size,C=b._datatype,E=x._data,T=x._size,M=x._datatype,L=_[0],O=_[1],I=T[1],N,X=t,V=i;C&&M&&C===M&&typeof C=="string"&&(N=C,X=e.find(t,[N,N]),V=e.find(i,[N,N]));for(var F=[],B=0;B<L;B++){var q=A[B];F[B]=[];for(var H=0;H<I;H++){for(var U=V(q[0],E[0][H]),z=1;z<O;z++)U=X(U,V(q[z],E[z][H]));F[B][H]=U}}return b.createDenseMatrix({data:F,size:[L,I],datatype:N})}function g(b,x){var A=b._data,_=b._size,C=b._datatype,E=x._values,T=x._index,M=x._ptr,L=x._size,O=x._datatype;if(!E)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var I=_[0],N=L[1],X,V=t,F=i,B=a,q=0;C&&O&&C===O&&typeof C=="string"&&(X=C,V=e.find(t,[X,X]),F=e.find(i,[X,X]),B=e.find(a,[X,X]),q=e.convert(0,X));for(var H=[],U=[],z=[],Z=x.createSparseMatrix({values:H,index:U,ptr:z,size:[I,N],datatype:X}),G=0;G<N;G++){z[G]=U.length;var W=M[G],re=M[G+1];if(re>W)for(var ne=0,Q=0;Q<I;Q++){for(var ge=Q+1,pe=void 0,ae=W;ae<re;ae++){var oe=T[ae];ne!==ge?(pe=F(A[Q][oe],E[ae]),ne=ge):pe=V(pe,F(A[Q][oe],E[ae]))}ne===ge&&!B(pe,q)&&(U.push(Q),H.push(pe))}}return z[N]=U.length,Z}function y(b,x){var A=b._values,_=b._index,C=b._ptr,E=b._datatype;if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=x._data,M=x._datatype,L=b._size[0],O=x._size[0],I=[],N=[],X=[],V,F=t,B=i,q=a,H=0;E&&M&&E===M&&typeof E=="string"&&(V=E,F=e.find(t,[V,V]),B=e.find(i,[V,V]),q=e.find(a,[V,V]),H=e.convert(0,V));var U=[],z=[];X[0]=0;for(var Z=0;Z<O;Z++){var G=T[Z];if(!q(G,H))for(var W=C[Z],re=C[Z+1],ne=W;ne<re;ne++){var Q=_[ne];z[Q]?U[Q]=F(U[Q],B(G,A[ne])):(z[Q]=!0,N.push(Q),U[Q]=B(G,A[ne]))}}for(var ge=N.length,pe=0;pe<ge;pe++){var ae=N[pe];I[pe]=U[ae]}return X[1]=N.length,b.createSparseMatrix({values:I,index:N,ptr:X,size:[L,1],datatype:V})}function D(b,x){var A=b._values,_=b._index,C=b._ptr,E=b._datatype;if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var T=x._data,M=x._datatype,L=b._size[0],O=x._size[0],I=x._size[1],N,X=t,V=i,F=a,B=0;E&&M&&E===M&&typeof E=="string"&&(N=E,X=e.find(t,[N,N]),V=e.find(i,[N,N]),F=e.find(a,[N,N]),B=e.convert(0,N));for(var q=[],H=[],U=[],z=b.createSparseMatrix({values:q,index:H,ptr:U,size:[L,I],datatype:N}),Z=[],G=[],W=0;W<I;W++){U[W]=H.length;for(var re=W+1,ne=0;ne<O;ne++){var Q=T[ne][W];if(!F(Q,B))for(var ge=C[ne],pe=C[ne+1],ae=ge;ae<pe;ae++){var oe=_[ae];G[oe]!==re?(G[oe]=re,H.push(oe),Z[oe]=V(Q,A[ae])):Z[oe]=X(Z[oe],V(Q,A[ae]))}}for(var De=U[W],be=H.length,Me=De;Me<be;Me++){var fe=H[Me];q[Me]=Z[fe]}}return U[I]=H.length,z}function w(b,x){var A=b._values,_=b._index,C=b._ptr,E=b._datatype,T=x._values,M=x._index,L=x._ptr,O=x._datatype,I=b._size[0],N=x._size[1],X=A&&T,V,F=t,B=i;E&&O&&E===O&&typeof E=="string"&&(V=E,F=e.find(t,[V,V]),B=e.find(i,[V,V]));for(var q=X?[]:void 0,H=[],U=[],z=b.createSparseMatrix({values:q,index:H,ptr:U,size:[I,N],datatype:V}),Z=X?[]:void 0,G=[],W,re,ne,Q,ge,pe,ae,oe,De=0;De<N;De++){U[De]=H.length;var be=De+1;for(ge=L[De],pe=L[De+1],Q=ge;Q<pe;Q++)if(oe=M[Q],X)for(re=C[oe],ne=C[oe+1],W=re;W<ne;W++)ae=_[W],G[ae]!==be?(G[ae]=be,H.push(ae),Z[ae]=B(T[Q],A[W])):Z[ae]=F(Z[ae],B(T[Q],A[W]));else for(re=C[oe],ne=C[oe+1],W=re;W<ne;W++)ae=_[W],G[ae]!==be&&(G[ae]=be,H.push(ae));if(X)for(var Me=U[De],fe=H.length,ye=Me;ye<fe;ye++){var Se=H[ye];q[ye]=Z[Se]}}return U[N]=H.length,z}return e(qu,i,{"Array, Array":e.referTo("Matrix, Matrix",b=>(x,A)=>{u(Pe(x),Pe(A));var _=b(r(x),r(A));return we(_)?_.valueOf():_}),"Matrix, Matrix":function(x,A){var _=x.size(),C=A.size();return u(_,C),_.length===1?C.length===1?o(x,A,_[0]):s(x,A):C.length===1?h(x,A):v(x,A)},"Matrix, Array":e.referTo("Matrix,Matrix",b=>(x,A)=>b(x,r(A))),"Array, Matrix":e.referToSelf(b=>(x,A)=>b(r(x,A.storage()),A)),"SparseMatrix, any":function(x,A){return c(x,A,i,!1)},"DenseMatrix, any":function(x,A){return f(x,A,i,!1)},"any, SparseMatrix":function(x,A){return c(A,x,i,!0)},"any, DenseMatrix":function(x,A){return f(A,x,i,!0)},"Array, any":function(x,A){return f(r(x),A,i,!1).valueOf()},"any, Array":function(x,A){return f(r(A),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(b=>(x,A,_)=>{for(var C=b(x,A),E=0;E<_.length;E++)C=b(C,_[E]);return C})})});var ku="sign",cp=["typed","BigNumber","Fraction","complex"],Ki=P(ku,cp,n=>{var{typed:e,BigNumber:r,complex:t,Fraction:i}=n;return e(ku,{number:wn,Complex:function(l){return l.im===0?t(wn(l.re)):l.sign()},BigNumber:function(l){return new r(l.cmp(0))},Fraction:function(l){return new i(l.s,1)},"Array | Matrix":e.referToSelf(a=>l=>qe(l,a,!0)),Unit:e.referToSelf(a=>l=>{if(!l._isDerived()&&l.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,l.valueType())(l.value)})})});var pp="sqrt",mp=["config","typed","Complex"],ji=P(pp,mp,n=>{var{config:e,typed:r,Complex:t}=n;return r("sqrt",{number:i,Complex:function(l){return l.sqrt()},BigNumber:function(l){return!l.isNegative()||e.predictable?l.sqrt():i(l.toNumber())},Unit:function(l){return l.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new t(a,0).sqrt()}});var Vu="subtract",hp=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],ea=P(Vu,hp,n=>{var{typed:e,matrix:r,equalScalar:t,addScalar:i,unaryMinus:a,DenseMatrix:l}=n,c=_n({typed:e}),f=wr({typed:e}),u=zu({typed:e,equalScalar:t}),o=Mn({typed:e,DenseMatrix:l}),s=Er({typed:e,DenseMatrix:l}),p=vr({typed:e,matrix:r});return e(Vu,{"number, number":(h,v)=>h-v,"Complex, Complex":(h,v)=>h.sub(v),"BigNumber, BigNumber":(h,v)=>h.minus(v),"Fraction, Fraction":(h,v)=>h.sub(v),"Unit, Unit":e.referToSelf(h=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var d=v.clone();return d.value=e.find(h,[d.valueType(),m.valueType()])(d.value,m.value),d.fixPrefix=!1,d})},p({SS:u,DS:c,SD:f,Ss:s,sS:o}))});var vp="matAlgo07xSSf",dp=["typed","DenseMatrix"],Lr=P(vp,dp,n=>{var{typed:e,DenseMatrix:r}=n;return function(a,l,c){var f=a._size,u=a._datatype,o=l._size,s=l._datatype;if(f.length!==o.length)throw new _e(f.length,o.length);if(f[0]!==o[0]||f[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+o+")");var p=f[0],h=f[1],v,m=0,d=c;typeof u=="string"&&u===s&&(v=u,m=e.convert(0,v),d=e.find(c,[v,v]));var g,y,D=[];for(g=0;g<p;g++)D[g]=[];var w=[],b=[],x=[],A=[];for(y=0;y<h;y++){var _=y+1;for(t(a,y,x,w,_),t(l,y,A,b,_),g=0;g<p;g++){var C=x[g]===_?w[g]:m,E=A[g]===_?b[g]:m;D[g][y]=d(C,E)}}return new r({data:D,size:[p,h],datatype:v})};function t(i,a,l,c,f){for(var u=i._values,o=i._index,s=i._ptr,p=s[a],h=s[a+1];p<h;p++){var v=o[p];l[v]=f,c[v]=u[p]}}});var Uu="conj",xp=["typed"],ra=P(Uu,xp,n=>{var{typed:e}=n;return e(Uu,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>t=>qe(t,r))})});var Xu="im",gp=["typed"],ta=P(Xu,gp,n=>{var{typed:e}=n;return e(Xu,{number:()=>0,"BigNumber | Fraction":r=>r.mul(0),Complex:r=>r.im,"Array | Matrix":e.referToSelf(r=>t=>qe(t,r))})});var Zu="re",Dp=["typed"],na=P(Zu,Dp,n=>{var{typed:e}=n;return e(Zu,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.re,"Array | Matrix":e.referToSelf(r=>t=>qe(t,r))})});var Qu="column",yp=["typed","Index","matrix","range"],ia=P(Qu,yp,n=>{var{typed:e,Index:r,matrix:t,range:i}=n;return e(Qu,{"Matrix, number":a,"Array, number":function(c,f){return a(t(ve(c)),f).valueOf()}});function a(l,c){if(l.size().length!==2)throw new Error("Only two dimensional matrix is supported");Le(c,l.size()[1]);var f=i(0,l.size()[0]),u=new r(f,c);return l.subset(u)}});var Gu="diag",Ep=["typed","matrix","DenseMatrix","SparseMatrix"],aa=P(Gu,Ep,n=>{var{typed:e,matrix:r,DenseMatrix:t,SparseMatrix:i}=n;return e(Gu,{Array:function(u){return a(u,0,Pe(u),null)},"Array, number":function(u,o){return a(u,o,Pe(u),null)},"Array, BigNumber":function(u,o){return a(u,o.toNumber(),Pe(u),null)},"Array, string":function(u,o){return a(u,0,Pe(u),o)},"Array, number, string":function(u,o,s){return a(u,o,Pe(u),s)},"Array, BigNumber, string":function(u,o,s){return a(u,o.toNumber(),Pe(u),s)},Matrix:function(u){return a(u,0,u.size(),u.storage())},"Matrix, number":function(u,o){return a(u,o,u.size(),u.storage())},"Matrix, BigNumber":function(u,o){return a(u,o.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,o){return a(u,0,u.size(),o)},"Matrix, number, string":function(u,o,s){return a(u,o,u.size(),s)},"Matrix, BigNumber, string":function(u,o,s){return a(u,o.toNumber(),u.size(),s)}});function a(f,u,o,s){if(!de(u))throw new TypeError("Second parameter in function diag must be an integer");var p=u>0?u:0,h=u<0?-u:0;switch(o.length){case 1:return l(f,u,s,o[0],h,p);case 2:return c(f,u,s,o,h,p)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function l(f,u,o,s,p,h){var v=[s+p,s+h];if(o&&o!=="sparse"&&o!=="dense")throw new TypeError("Unknown matrix type ".concat(o,'"'));var m=o==="sparse"?i.diagonal(v,f,u):t.diagonal(v,f,u);return o!==null?m:m.valueOf()}function c(f,u,o,s,p,h){if(we(f)){var v=f.diagonal(u);return o!==null?o!==v.storage()?r(v,o):v:v.valueOf()}for(var m=Math.min(s[0]-p,s[1]-h),d=[],g=0;g<m;g++)d[g]=f[g+p][g+h];return o!==null?r(d):d}});var Yu="flatten",wp=["typed","matrix"],oa=P(Yu,wp,n=>{var{typed:e,matrix:r}=n;return e(Yu,{Array:function(i){return fn(ve(i))},Matrix:function(i){var a=fn(ve(i.toArray()));return r(a)}})});var $u="identity",bp=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],ua=P($u,bp,n=>{var{typed:e,config:r,matrix:t,BigNumber:i,DenseMatrix:a,SparseMatrix:l}=n;return e($u,{"":function(){return r.matrix==="Matrix"?t([]):[]},string:function(o){return t(o)},"number | BigNumber":function(o){return f(o,o,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(o,s){return f(o,o,s)},"number | BigNumber, number | BigNumber":function(o,s){return f(o,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(o,s,p){return f(o,s,p)},Array:function(o){return c(o)},"Array, string":function(o,s){return c(o,s)},Matrix:function(o){return c(o.valueOf(),o.storage())},"Matrix, string":function(o,s){return c(o.valueOf(),s)}});function c(u,o){switch(u.length){case 0:return o?t(o):[];case 1:return f(u[0],u[0],o);case 2:return f(u[0],u[1],o);default:throw new Error("Vector containing two values expected")}}function f(u,o,s){var p=ze(u)||ze(o)?i:null;if(ze(u)&&(u=u.toNumber()),ze(o)&&(o=o.toNumber()),!de(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!de(o)||o<1)throw new Error("Parameters in function identity must be positive integers");var h=p?new i(1):1,v=p?new p(0):0,m=[u,o];if(s){if(s==="sparse")return l.diagonal(m,h,0,v);if(s==="dense")return a.diagonal(m,h,0,v);throw new TypeError('Unknown matrix type "'.concat(s,'"'))}for(var d=nt([],m,v),g=u<o?u:o,y=0;y<g;y++)d[y][y]=h;return d}});function Tn(){throw new Error('No "bignumber" implementation available')}function Ju(){throw new Error('No "fraction" implementation available')}function Sn(){throw new Error('No "matrix" implementation available')}var Hu="range",Ap=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],sa=P(Hu,Ap,n=>{var{typed:e,config:r,matrix:t,bignumber:i,smaller:a,smallerEq:l,larger:c,largerEq:f}=n;return e(Hu,{string:o,"string, boolean":o,"number, number":function(g,y){return u(s(g,y,1))},"number, number, number":function(g,y,D){return u(s(g,y,D))},"number, number, boolean":function(g,y,D){return u(D?p(g,y,1):s(g,y,1))},"number, number, number, boolean":function(g,y,D,w){return u(w?p(g,y,D):s(g,y,D))},"BigNumber, BigNumber":function(g,y){var D=g.constructor;return u(h(g,y,new D(1)))},"BigNumber, BigNumber, BigNumber":function(g,y,D){return u(h(g,y,D))},"BigNumber, BigNumber, boolean":function(g,y,D){var w=g.constructor;return u(D?v(g,y,new w(1)):h(g,y,new w(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(g,y,D,w){return u(w?v(g,y,D):h(g,y,D))}});function u(d){return r.matrix==="Matrix"?t?t(d):Sn():d}function o(d,g){var y=m(d);if(!y)throw new SyntaxError('String "'+d+'" is no valid range');var D;return r.number==="BigNumber"?(i===void 0&&Tn(),D=g?v:h,u(D(i(y.start),i(y.end),i(y.step)))):(D=g?p:s,u(D(y.start,y.end,y.step)))}function s(d,g,y){var D=[],w=d;if(y>0)for(;a(w,g);)D.push(w),w+=y;else if(y<0)for(;c(w,g);)D.push(w),w+=y;return D}function p(d,g,y){var D=[],w=d;if(y>0)for(;l(w,g);)D.push(w),w+=y;else if(y<0)for(;f(w,g);)D.push(w),w+=y;return D}function h(d,g,y){var D=i(0),w=[],b=d;if(y.gt(D))for(;a(b,g);)w.push(b),b=b.plus(y);else if(y.lt(D))for(;c(b,g);)w.push(b),b=b.plus(y);return w}function v(d,g,y){var D=i(0),w=[],b=d;if(y.gt(D))for(;l(b,g);)w.push(b),b=b.plus(y);else if(y.lt(D))for(;f(b,g);)w.push(b),b=b.plus(y);return w}function m(d){var g=d.split(":"),y=g.map(function(w){return Number(w)}),D=y.some(function(w){return isNaN(w)});if(D)return null;switch(y.length){case 2:return{start:y[0],end:y[1],step:1};case 3:return{start:y[0],end:y[2],step:y[1]};default:return null}}});var Wu="size",Cp=["typed","config","?matrix"],fa=P(Wu,Cp,n=>{var{typed:e,config:r,matrix:t}=n;return e(Wu,{Matrix:function(a){return a.create(a.size())},Array:Pe,string:function(a){return r.matrix==="Array"?[a.length]:t([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:t?t([]):Sn()}})});var Ku="transpose",_p=["typed","matrix"],la=P(Ku,_p,n=>{var{typed:e,matrix:r}=n;return e(Ku,{Array:l=>t(r(l)).valueOf(),Matrix:t,any:ve});function t(l){var c=l.size(),f;switch(c.length){case 1:f=l.clone();break;case 2:{var u=c[0],o=c[1];if(o===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Fe(c)+")");switch(l.storage()){case"dense":f=i(l,u,o);break;case"sparse":f=a(l,u,o);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Fe(c)+")")}return f}function i(l,c,f){for(var u=l._data,o=[],s,p=0;p<f;p++){s=o[p]=[];for(var h=0;h<c;h++)s[h]=ve(u[h][p])}return l.createDenseMatrix({data:o,size:[f,c],datatype:l._datatype})}function a(l,c,f){for(var u=l._values,o=l._index,s=l._ptr,p=u?[]:void 0,h=[],v=[],m=[],d=0;d<c;d++)m[d]=0;var g,y,D;for(g=0,y=o.length;g<y;g++)m[o[g]]++;for(var w=0,b=0;b<c;b++)v.push(w),w+=m[b],m[b]=v[b];for(v.push(w),D=0;D<f;D++)for(var x=s[D],A=s[D+1],_=x;_<A;_++){var C=m[o[_]]++;h[C]=D,u&&(p[C]=ve(u[_]))}return l.createSparseMatrix({values:p,index:h,ptr:v,size:[f,c],datatype:l._datatype})}});var ju="zeros",Mp=["typed","config","matrix","BigNumber"],ca=P(ju,Mp,n=>{var{typed:e,config:r,matrix:t,BigNumber:i}=n;return e(ju,{"":function(){return r.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(u){var o=u[u.length-1];if(typeof o=="string"){var s=u.pop();return a(u,s)}else return r.matrix==="Array"?a(u):a(u,"default")},Array:a,Matrix:function(u){var o=u.storage();return a(u.valueOf(),o)},"Array | Matrix, string":function(u,o){return a(u.valueOf(),o)}});function a(f,u){var o=l(f),s=o?new i(0):0;if(c(f),u){var p=t(u);return f.length>0?p.resize(f,s):p}else{var h=[];return f.length>0?nt(h,f,s):h}}function l(f){var u=!1;return f.forEach(function(o,s,p){ze(o)&&(u=!0,p[s]=o.toNumber())}),u}function c(f){f.forEach(function(u){if(typeof u!="number"||!de(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}});function xt(n,e,r){var t;return String(n).indexOf("Unexpected type")!==-1?(t=arguments.length>2?" (type: "+He(r)+", value: "+JSON.stringify(r)+")":" (type: "+n.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+t)):String(n).indexOf("complex numbers")!==-1?(t=arguments.length>2?" (type: "+He(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+t)):n}var Tp="numeric",Sp=["number","?bignumber","?fraction"],pa=P(Tp,Sp,n=>{var{number:e,bignumber:r,fraction:t}=n,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:l=>e(l),BigNumber:r?l=>r(l):Tn,Fraction:t?l=>t(l):Ju};return function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var o=He(c);if(!(o in i))throw new TypeError("Cannot convert "+c+' of type "'+o+'"; valid input types are '+Object.keys(i).join(", "));if(!(f in a))throw new TypeError("Cannot convert "+c+' to type "'+f+'"; valid output types are '+Object.keys(a).join(", "));return f===o?c:a[f](c)}});var es="divideScalar",Np=["typed","numeric"],ma=P(es,Np,n=>{var{typed:e,numeric:r}=n;return e(es,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(t,i)=>t.divide(i),"number | Fraction | Complex | BigNumber, Unit":(t,i)=>i.divideInto(t)})});var rs="pow",Fp=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],ha=P(rs,Fp,n=>{var{typed:e,config:r,identity:t,multiply:i,matrix:a,inv:l,number:c,fraction:f,Complex:u}=n;return e(rs,{"number, number":o,"Complex, Complex":function(v,m){return v.pow(m)},"BigNumber, BigNumber":function(v,m){return m.isInteger()||v>=0||r.predictable?v.pow(m):new u(v.toNumber(),0).pow(m.toNumber(),0)},"Fraction, Fraction":function(v,m){var d=v.pow(m);if(d!=null)return d;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return o(v.valueOf(),m.valueOf())},"Array, number":s,"Array, BigNumber":function(v,m){return s(v,m.toNumber())},"Matrix, number":p,"Matrix, BigNumber":function(v,m){return p(v,m.toNumber())},"Unit, number | BigNumber":function(v,m){return v.pow(m)}});function o(h,v){if(r.predictable&&!de(v)&&h<0)try{var m=f(v),d=c(m);if((v===d||Math.abs((v-d)/v)<1e-14)&&m.d%2===1)return(m.n%2===0?1:-1)*Math.pow(-h,v)}catch{}return r.predictable&&(h<-1&&v===1/0||h>-1&&h<0&&v===-1/0)?NaN:de(v)||h>=0||r.predictable?Li(h,v):h*h<1&&v===1/0||h*h>1&&v===-1/0?0:new u(h,0).pow(v,0)}function s(h,v){if(!de(v))throw new TypeError("For A^b, b must be an integer (value is "+v+")");var m=Pe(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(v<0)try{return s(l(h),-v)}catch(y){throw y.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+v+")"):y}for(var d=t(m[0]).valueOf(),g=h;v>=1;)(v&1)===1&&(d=i(g,d)),v>>=1,g=i(g,g);return d}function p(h,v){return a(s(h.valueOf(),v))}});function Hr(n){var{DenseMatrix:e}=n;return function(t,i,a){var l=t.size();if(l.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Fe(l)+")");var c=l[0],f=l[1];if(c!==f)throw new RangeError("Matrix must be square (size: "+Fe(l)+")");var u=[];if(we(i)){var o=i.size(),s=i._data;if(o.length===1){if(o[0]!==c)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var p=0;p<c;p++)u[p]=[s[p]];return new e({data:u,size:[c,1],datatype:i._datatype})}if(o.length===2){if(o[0]!==c||o[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(rn(i)){if(a){u=[];for(var h=0;h<c;h++)u[h]=[s[h][0]];return new e({data:u,size:[c,1],datatype:i._datatype})}return i}if(tn(i)){for(var v=0;v<c;v++)u[v]=[0];for(var m=i._values,d=i._index,g=i._ptr,y=g[1],D=g[0];D<y;D++){var w=d[D];u[w][0]=m[D]}return new e({data:u,size:[c,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Te(i)){var b=Pe(i);if(b.length===1){if(b[0]!==c)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<c;x++)u[x]=[i[x]];return new e({data:u,size:[c,1]})}if(b.length===2){if(b[0]!==c||b[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<c;A++)u[A]=[i[A][0]];return new e({data:u,size:[c,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var ts="lsolve",Bp=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],va=P(ts,Bp,n=>{var{typed:e,matrix:r,divideScalar:t,multiplyScalar:i,subtract:a,equalScalar:l,DenseMatrix:c}=n,f=Hr({DenseMatrix:c});return e(ts,{"SparseMatrix, Array | Matrix":function(p,h){return o(p,h)},"DenseMatrix, Array | Matrix":function(p,h){return u(p,h)},"Array, Array | Matrix":function(p,h){var v=r(p),m=u(v,h);return m.valueOf()}});function u(s,p){p=f(s,p,!0);for(var h=p._data,v=s._size[0],m=s._size[1],d=[],g=s._data,y=0;y<m;y++){var D=h[y][0]||0,w=void 0;if(l(D,0))w=0;else{var b=g[y][y];if(l(b,0))throw new Error("Linear system cannot be solved since matrix is singular");w=t(D,b);for(var x=y+1;x<v;x++)h[x]=[a(h[x][0]||0,i(w,g[x][y]))]}d[y]=[w]}return new c({data:d,size:[v,1]})}function o(s,p){p=f(s,p,!0);for(var h=p._data,v=s._size[0],m=s._size[1],d=s._values,g=s._index,y=s._ptr,D=[],w=0;w<m;w++){var b=h[w][0]||0;if(l(b,0))D[w]=[0];else{for(var x=0,A=[],_=[],C=y[w],E=y[w+1],T=C;T<E;T++){var M=g[T];M===w?x=d[T]:M>w&&(A.push(d[T]),_.push(M))}if(l(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var L=t(b,x),O=0,I=_.length;O<I;O++){var N=_[O];h[N]=[a(h[N][0]||0,i(L,A[O]))]}D[w]=[L]}}return new c({data:D,size:[v,1]})}});var ns="usolve",Ip=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],da=P(ns,Ip,n=>{var{typed:e,matrix:r,divideScalar:t,multiplyScalar:i,subtract:a,equalScalar:l,DenseMatrix:c}=n,f=Hr({DenseMatrix:c});return e(ns,{"SparseMatrix, Array | Matrix":function(p,h){return o(p,h)},"DenseMatrix, Array | Matrix":function(p,h){return u(p,h)},"Array, Array | Matrix":function(p,h){var v=r(p),m=u(v,h);return m.valueOf()}});function u(s,p){p=f(s,p,!0);for(var h=p._data,v=s._size[0],m=s._size[1],d=[],g=s._data,y=m-1;y>=0;y--){var D=h[y][0]||0,w=void 0;if(l(D,0))w=0;else{var b=g[y][y];if(l(b,0))throw new Error("Linear system cannot be solved since matrix is singular");w=t(D,b);for(var x=y-1;x>=0;x--)h[x]=[a(h[x][0]||0,i(w,g[x][y]))]}d[y]=[w]}return new c({data:d,size:[v,1]})}function o(s,p){p=f(s,p,!0);for(var h=p._data,v=s._size[0],m=s._size[1],d=s._values,g=s._index,y=s._ptr,D=[],w=m-1;w>=0;w--){var b=h[w][0]||0;if(l(b,0))D[w]=[0];else{for(var x=0,A=[],_=[],C=y[w],E=y[w+1],T=E-1;T>=C;T--){var M=g[T];M===w?x=d[T]:M<w&&(A.push(d[T]),_.push(M))}if(l(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var L=t(b,x),O=0,I=_.length;O<I;O++){var N=_[O];h[N]=[a(h[N][0],i(L,A[O]))]}D[w]=[L]}}return new c({data:D,size:[v,1]})}});var is="usolveAll",Rp=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],xa=P(is,Rp,n=>{var{typed:e,matrix:r,divideScalar:t,multiplyScalar:i,subtract:a,equalScalar:l,DenseMatrix:c}=n,f=Hr({DenseMatrix:c});return e(is,{"SparseMatrix, Array | Matrix":function(p,h){return o(p,h)},"DenseMatrix, Array | Matrix":function(p,h){return u(p,h)},"Array, Array | Matrix":function(p,h){var v=r(p),m=u(v,h);return m.map(d=>d.valueOf())}});function u(s,p){for(var h=[f(s,p,!0)._data.map(_=>_[0])],v=s._data,m=s._size[0],d=s._size[1],g=d-1;g>=0;g--)for(var y=h.length,D=0;D<y;D++){var w=h[D];if(l(v[g][g],0))if(l(w[g],0)){if(D===0){var x=[...w];x[g]=1;for(var A=g-1;A>=0;A--)x[A]=a(x[A],v[A][g]);h.push(x)}}else{if(D===0)return[];h.splice(D,1),D-=1,y-=1}else{w[g]=t(w[g],v[g][g]);for(var b=g-1;b>=0;b--)w[b]=a(w[b],i(w[g],v[b][g]))}}return h.map(_=>new c({data:_.map(C=>[C]),size:[m,1]}))}function o(s,p){for(var h=[f(s,p,!0)._data.map(q=>q[0])],v=s._size[0],m=s._size[1],d=s._values,g=s._index,y=s._ptr,D=m-1;D>=0;D--)for(var w=h.length,b=0;b<w;b++){for(var x=h[b],A=[],_=[],C=y[D],E=y[D+1],T=0,M=E-1;M>=C;M--){var L=g[M];L===D?T=d[M]:L<D&&(A.push(d[M]),_.push(L))}if(l(T,0))if(l(x[D],0)){if(b===0){var X=[...x];X[D]=1;for(var V=0,F=_.length;V<F;V++){var B=_[V];X[B]=a(X[B],A[V])}h.push(X)}}else{if(b===0)return[];h.splice(b,1),b-=1,w-=1}else{x[D]=t(x[D],T);for(var O=0,I=_.length;O<I;O++){var N=_[O];x[N]=a(x[N],i(x[D],A[O]))}}}return h.map(q=>new c({data:q.map(H=>[H]),size:[v,1]}))}});var Nn="equal",Lp=["typed","matrix","equalScalar","DenseMatrix"],ga=P(Nn,Lp,n=>{var{typed:e,matrix:r,equalScalar:t,DenseMatrix:i}=n,a=wr({typed:e}),l=Lr({typed:e,DenseMatrix:i}),c=Er({typed:e,DenseMatrix:i}),f=vr({typed:e,matrix:r});return e(Nn,Op({typed:e,equalScalar:t}),f({elop:t,SS:l,DS:a,Ss:c}))}),Op=P(Nn,["typed","equalScalar"],n=>{var{typed:e,equalScalar:r}=n;return e(Nn,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:r(i,a)}})});var Fn="smaller",Pp=["typed","config","matrix","DenseMatrix"],Da=P(Fn,Pp,n=>{var{typed:e,config:r,matrix:t,DenseMatrix:i}=n,a=wr({typed:e}),l=Lr({typed:e,DenseMatrix:i}),c=Er({typed:e,DenseMatrix:i}),f=vr({typed:e,matrix:t}),u=Rr({typed:e});return e(Fn,zp({typed:e,config:r}),{"boolean, boolean":(o,s)=>o<s,"BigNumber, BigNumber":function(s,p){return s.lt(p)&&!Ir(s,p,r.epsilon)},"Fraction, Fraction":(o,s)=>o.compare(s)===-1,"Complex, Complex":function(s,p){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:a,Ss:c}))}),zp=P(Fn,["typed","config"],n=>{var{typed:e,config:r}=n;return e(Fn,{"number, number":function(i,a){return i<a&&!pr(i,a,r.epsilon)}})});var Bn="smallerEq",qp=["typed","config","matrix","DenseMatrix"],ya=P(Bn,qp,n=>{var{typed:e,config:r,matrix:t,DenseMatrix:i}=n,a=wr({typed:e}),l=Lr({typed:e,DenseMatrix:i}),c=Er({typed:e,DenseMatrix:i}),f=vr({typed:e,matrix:t}),u=Rr({typed:e});return e(Bn,kp({typed:e,config:r}),{"boolean, boolean":(o,s)=>o<=s,"BigNumber, BigNumber":function(s,p){return s.lte(p)||Ir(s,p,r.epsilon)},"Fraction, Fraction":(o,s)=>o.compare(s)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:a,Ss:c}))}),kp=P(Bn,["typed","config"],n=>{var{typed:e,config:r}=n;return e(Bn,{"number, number":function(i,a){return i<=a||pr(i,a,r.epsilon)}})});var In="larger",Vp=["typed","config","matrix","DenseMatrix"],Ea=P(In,Vp,n=>{var{typed:e,config:r,matrix:t,DenseMatrix:i}=n,a=wr({typed:e}),l=Lr({typed:e,DenseMatrix:i}),c=Er({typed:e,DenseMatrix:i}),f=vr({typed:e,matrix:t}),u=Rr({typed:e});return e(In,Up({typed:e,config:r}),{"boolean, boolean":(o,s)=>o>s,"BigNumber, BigNumber":function(s,p){return s.gt(p)&&!Ir(s,p,r.epsilon)},"Fraction, Fraction":(o,s)=>o.compare(s)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:a,Ss:c}))}),Up=P(In,["typed","config"],n=>{var{typed:e,config:r}=n;return e(In,{"number, number":function(i,a){return i>a&&!pr(i,a,r.epsilon)}})});var Rn="largerEq",Xp=["typed","config","matrix","DenseMatrix"],wa=P(Rn,Xp,n=>{var{typed:e,config:r,matrix:t,DenseMatrix:i}=n,a=wr({typed:e}),l=Lr({typed:e,DenseMatrix:i}),c=Er({typed:e,DenseMatrix:i}),f=vr({typed:e,matrix:t}),u=Rr({typed:e});return e(Rn,Zp({typed:e,config:r}),{"boolean, boolean":(o,s)=>o>=s,"BigNumber, BigNumber":function(s,p){return s.gte(p)||Ir(s,p,r.epsilon)},"Fraction, Fraction":(o,s)=>o.compare(s)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:l,DS:a,Ss:c}))}),Zp=P(Rn,["typed","config"],n=>{var{typed:e,config:r}=n;return e(Rn,{"number, number":function(i,a){return i>=a||pr(i,a,r.epsilon)}})});var as="max",Qp=["typed","config","numeric","larger"],ba=P(as,Qp,n=>{var{typed:e,config:r,numeric:t,larger:i}=n;return e(as,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,u){return En(f,u.valueOf(),a)},"...":function(f){if(yn(f))throw new TypeError("Scalar values expected in function max");return l(f)}});function a(c,f){try{return i(c,f)?c:f}catch(u){throw xt(u,"max",f)}}function l(c){var f;if(Pt(c,function(u){try{isNaN(u)&&typeof u=="number"?f=NaN:(f===void 0||i(u,f))&&(f=u)}catch(o){throw xt(o,"max",u)}}),f===void 0)throw new Error("Cannot calculate max of an empty array");return typeof f=="string"&&(f=t(f,r.number)),f}});var os="min",Gp=["typed","config","numeric","smaller"],Aa=P(os,Gp,n=>{var{typed:e,config:r,numeric:t,smaller:i}=n;return e(os,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(f,u){return En(f,u.valueOf(),a)},"...":function(f){if(yn(f))throw new TypeError("Scalar values expected in function min");return l(f)}});function a(c,f){try{return i(c,f)?c:f}catch(u){throw xt(u,"min",f)}}function l(c){var f;if(Pt(c,function(u){try{isNaN(u)&&typeof u=="number"?f=NaN:(f===void 0||i(u,f))&&(f=u)}catch(o){throw xt(o,"min",u)}}),f===void 0)throw new Error("Cannot calculate min of an empty array");return typeof f=="string"&&(f=t(f,r.number)),f}});var Yp="ImmutableDenseMatrix",$p=["smaller","DenseMatrix"],Ca=P(Yp,$p,n=>{var{smaller:e,DenseMatrix:r}=n;function t(i,a){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!tr(a))throw new Error("Invalid datatype: "+a);if(we(i)||Te(i)){var l=new r(i,a);this._data=l._data,this._size=l._size,this._datatype=l._datatype,this._min=null,this._max=null}else if(i&&Te(i.data)&&Te(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+He(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return t.prototype=new r,t.prototype.type="ImmutableDenseMatrix",t.prototype.isImmutableDenseMatrix=!0,t.prototype.subset=function(i){switch(arguments.length){case 1:{var a=r.prototype.subset.call(this,i);return we(a)?new t({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},t.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},t.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},t.prototype.clone=function(){return new t({data:ve(this._data),size:ve(this._size),datatype:this._datatype})},t.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.fromJSON=function(i){return new t(i)},t.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},t.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},t.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},t},{isClass:!0});var Jp="Index",Hp=["ImmutableDenseMatrix"],_a=P(Jp,Hp,n=>{var{ImmutableDenseMatrix:e}=n;function r(i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var a=0,l=arguments.length;a<l;a++){var c=arguments[a];if(nn(c))this._dimensions.push(c),this._isScalar=!1;else if(Array.isArray(c)||we(c)){var f=t(c.valueOf());this._dimensions.push(f);var u=f.size();(u.length!==1||u[0]!==1)&&(this._isScalar=!1)}else if(typeof c=="number")this._dimensions.push(t([c]));else if(typeof c=="string")this._dimensions.push(c);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range")}}r.prototype.type="Index",r.prototype.isIndex=!0;function t(i){for(var a=0,l=i.length;a<l;a++)if(typeof i[a]!="number"||!de(i[a]))throw new TypeError("Index parameters must be positive integer numbers");return new e(i)}return r.prototype.clone=function(){var i=new r;return i._dimensions=ve(this._dimensions),i._isScalar=this._isScalar,i},r.create=function(i){var a=new r;return r.apply(a,i),a},r.prototype.size=function(){for(var i=[],a=0,l=this._dimensions.length;a<l;a++){var c=this._dimensions[a];i[a]=typeof c=="string"?1:c.size()[0]}return i},r.prototype.max=function(){for(var i=[],a=0,l=this._dimensions.length;a<l;a++){var c=this._dimensions[a];i[a]=typeof c=="string"?c:c.max()}return i},r.prototype.min=function(){for(var i=[],a=0,l=this._dimensions.length;a<l;a++){var c=this._dimensions[a];i[a]=typeof c=="string"?c:c.min()}return i},r.prototype.forEach=function(i){for(var a=0,l=this._dimensions.length;a<l;a++)i(this._dimensions[a],a,this)},r.prototype.dimension=function(i){return this._dimensions[i]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var i=[],a=0,l=this._dimensions.length;a<l;a++){var c=this._dimensions[a];i.push(typeof c=="string"?c:c.toArray())}return i},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var i=[],a=0,l=this._dimensions.length;a<l;a++){var c=this._dimensions[a];typeof c=="string"?i.push(JSON.stringify(c)):i.push(c.toString())}return"["+i.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(i){return r.create(i.dimensions)},r},{isClass:!0});var Wp="FibonacciHeap",Kp=["smaller","larger"],Ma=P(Wp,Kp,n=>{var{smaller:e,larger:r}=n,t=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(o,s){var p={key:o,value:s,degree:0};if(this._minimum){var h=this._minimum;p.left=h,p.right=h.right,h.right=p,p.right.left=p,e(o,h.key)&&(this._minimum=p)}else p.left=p,p.right=p,this._minimum=p;return this._size++,p},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var o=this._minimum;if(o===null)return o;for(var s=this._minimum,p=o.degree,h=o.child;p>0;){var v=h.right;h.left.right=h.right,h.right.left=h.left,h.left=s,h.right=s.right,s.right=h,h.right.left=h,h.parent=null,h=v,p--}return o.left.right=o.right,o.right.left=o.left,o===o.right?s=null:(s=o.right,s=u(s,this._size)),this._size--,this._minimum=s,o},i.prototype.remove=function(o){this._minimum=a(this._minimum,o,-1),this.extractMinimum()};function a(o,s,p){s.key=p;var h=s.parent;return h&&e(s.key,h.key)&&(l(o,s,h),c(o,h)),e(s.key,o.key)&&(o=s),o}function l(o,s,p){s.left.right=s.right,s.right.left=s.left,p.degree--,p.child===s&&(p.child=s.right),p.degree===0&&(p.child=null),s.left=o,s.right=o.right,o.right=s,s.right.left=s,s.parent=null,s.mark=!1}function c(o,s){var p=s.parent;!p||(s.mark?(l(o,s,p),c(p)):s.mark=!0)}var f=function(s,p){s.left.right=s.right,s.right.left=s.left,s.parent=p,p.child?(s.left=p.child,s.right=p.child.right,p.child.right=s,s.right.left=s):(p.child=s,s.right=s,s.left=s),p.degree++,s.mark=!1};function u(o,s){var p=Math.floor(Math.log(s)*t)+1,h=new Array(p),v=0,m=o;if(m)for(v++,m=m.right;m!==o;)v++,m=m.right;for(var d;v>0;){for(var g=m.degree,y=m.right;d=h[g],!!d;){if(r(m.key,d.key)){var D=d;d=m,m=D}f(d,m),h[g]=null,g++}h[g]=m,m=y,v--}o=null;for(var w=0;w<p;w++)d=h[w],d&&(o?(d.left.right=d.right,d.right.left=d.left,d.left=o,d.right=o.right,o.right=d,d.right.left=d,e(d.key,o.key)&&(o=d)):o=d);return o}return i},{isClass:!0});var jp="Spa",em=["addScalar","equalScalar","FibonacciHeap"],Ta=P(jp,em,n=>{var{addScalar:e,equalScalar:r,FibonacciHeap:t}=n;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,l){if(this._values[a])this._values[a].value=l;else{var c=this._heap.insert(a,l);this._values[a]=c}},i.prototype.get=function(a){var l=this._values[a];return l?l.value:0},i.prototype.accumulate=function(a,l){var c=this._values[a];c?c.value=e(c.value,l):(c=this._heap.insert(a,l),this._values[a]=c)},i.prototype.forEach=function(a,l,c){var f=this._heap,u=this._values,o=[],s=f.extractMinimum();for(s&&o.push(s);s&&s.key<=l;)s.key>=a&&(r(s.value,0)||c(s.key,s.value,this)),s=f.extractMinimum(),s&&o.push(s);for(var p=0;p<o.length;p++){var h=o[p];s=f.insert(h.key,h.value),u[s.key]=s}},i.prototype.swap=function(a,l){var c=this._values[a],f=this._values[l];if(!c&&f)c=this._heap.insert(a,f.value),this._heap.remove(f),this._values[a]=c,this._values[l]=void 0;else if(c&&!f)f=this._heap.insert(l,c.value),this._heap.remove(c),this._values[l]=f,this._values[a]=void 0;else if(c&&f){var u=c.value;c.value=f.value,f.value=u}},i},{isClass:!0});var rm="atan",tm=["typed"],Sa=P(rm,tm,n=>{var{typed:e}=n;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()}})});var Ln=P("trigUnit",["typed"],n=>{var{typed:e}=n;return{Unit:e.referToSelf(r=>t=>{if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(r,t.valueType())(t.value)})}});var us="cos",nm=["typed"],Na=P(us,nm,n=>{var{typed:e}=n,r=Ln({typed:e});return e(us,{number:Math.cos,"Complex | BigNumber":t=>t.cos()},r)});var ss="sin",im=["typed"],Fa=P(ss,im,n=>{var{typed:e}=n,r=Ln({typed:e});return e(ss,{number:Math.sin,"Complex | BigNumber":t=>t.sin()},r)});var fs="add",am=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],Ba=P(fs,am,n=>{var{typed:e,matrix:r,addScalar:t,equalScalar:i,DenseMatrix:a,SparseMatrix:l}=n,c=_n({typed:e}),f=Ou({typed:e,equalScalar:i}),u=Mn({typed:e,DenseMatrix:a}),o=vr({typed:e,matrix:r});return e(fs,{"any, any":t,"any, any, ...any":e.referToSelf(s=>(p,h,v)=>{for(var m=s(p,h),d=0;d<v.length;d++)m=s(m,v[d]);return m})},o({elop:t,DS:c,SS:f,Ss:u}))});var ls="dot",om=["typed","addScalar","multiplyScalar","conj","size"],Ia=P(ls,om,n=>{var{typed:e,addScalar:r,multiplyScalar:t,conj:i,size:a}=n;return e(ls,{"Array | DenseMatrix, Array | DenseMatrix":c,"SparseMatrix, SparseMatrix":f});function l(o,s){var p=u(o),h=u(s),v,m;if(p.length===1)v=p[0];else if(p.length===2&&p[1]===1)v=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(v!==m)throw new RangeError("Vectors must have equal length ("+v+" != "+m+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function c(o,s){var p=l(o,s),h=we(o)?o._data:o,v=we(o)?o._datatype:void 0,m=we(s)?s._data:s,d=we(s)?s._datatype:void 0,g=u(o).length===2,y=u(s).length===2,D=r,w=t;if(v&&d&&v===d&&typeof v=="string"){var b=v;D=e.find(r,[b,b]),w=e.find(t,[b,b])}if(!g&&!y){for(var x=w(i(h[0]),m[0]),A=1;A<p;A++)x=D(x,w(i(h[A]),m[A]));return x}if(!g&&y){for(var _=w(i(h[0]),m[0][0]),C=1;C<p;C++)_=D(_,w(i(h[C]),m[C][0]));return _}if(g&&!y){for(var E=w(i(h[0][0]),m[0]),T=1;T<p;T++)E=D(E,w(i(h[T][0]),m[T]));return E}if(g&&y){for(var M=w(i(h[0][0]),m[0][0]),L=1;L<p;L++)M=D(M,w(i(h[L][0]),m[L][0]));return M}}function f(o,s){l(o,s);for(var p=o._index,h=o._values,v=s._index,m=s._values,d=0,g=r,y=t,D=0,w=0;D<p.length&&w<v.length;){var b=p[D],x=v[w];if(b<x){D++;continue}if(b>x){w++;continue}b===x&&(d=g(d,y(h[D],m[w])),D++,w++)}return d}function u(o){return we(o)?o.size():a(o)}});var cs="lup",um=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Ra=P(cs,um,n=>{var{typed:e,matrix:r,abs:t,addScalar:i,divideScalar:a,multiplyScalar:l,subtract:c,larger:f,equalScalar:u,unaryMinus:o,DenseMatrix:s,SparseMatrix:p,Spa:h}=n;return e(cs,{DenseMatrix:function(g){return v(g)},SparseMatrix:function(g){return m(g)},Array:function(g){var y=r(g),D=v(y);return{L:D.L.valueOf(),U:D.U.valueOf(),p:D.p}}});function v(d){var g=d._size[0],y=d._size[1],D=Math.min(g,y),w=ve(d._data),b=[],x=[g,D],A=[],_=[D,y],C,E,T,M=[];for(C=0;C<g;C++)M[C]=C;for(E=0;E<y;E++){if(E>0)for(C=0;C<g;C++){var L=Math.min(C,E),O=0;for(T=0;T<L;T++)O=i(O,l(w[C][T],w[T][E]));w[C][E]=c(w[C][E],O)}var I=E,N=0,X=0;for(C=E;C<g;C++){var V=w[C][E],F=t(V);f(F,N)&&(I=C,N=F,X=V)}if(E!==I&&(M[E]=[M[I],M[I]=M[E]][0],s._swapRows(E,I,w)),E<g)for(C=E+1;C<g;C++){var B=w[C][E];u(B,0)||(w[C][E]=a(w[C][E],X))}}for(E=0;E<y;E++)for(C=0;C<g;C++){if(E===0&&(C<y&&(A[C]=[]),b[C]=[]),C<E){C<y&&(A[C][E]=w[C][E]),E<g&&(b[C][E]=0);continue}if(C===E){C<y&&(A[C][E]=w[C][E]),E<g&&(b[C][E]=1);continue}C<y&&(A[C][E]=0),E<g&&(b[C][E]=w[C][E])}var q=new s({data:b,size:x}),H=new s({data:A,size:_}),U=[];for(C=0,D=M.length;C<D;C++)U[M[C]]=C;return{L:q,U:H,p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(d){var g=d._size[0],y=d._size[1],D=Math.min(g,y),w=d._values,b=d._index,x=d._ptr,A=[],_=[],C=[],E=[g,D],T=[],M=[],L=[],O=[D,y],I,N,X,V=[],F=[];for(I=0;I<g;I++)V[I]=I,F[I]=I;var B=function(U,z){var Z=F[U],G=F[z];V[Z]=z,V[G]=U,F[U]=G,F[z]=Z},q=function(){var U=new h;N<g&&(C.push(A.length),A.push(1),_.push(N)),L.push(T.length);var z=x[N],Z=x[N+1];for(X=z;X<Z;X++)I=b[X],U.set(V[I],w[X]);N>0&&U.forEach(0,N-1,function(ne,Q){p._forEachRow(ne,A,_,C,function(ge,pe){ge>ne&&U.accumulate(ge,o(l(pe,Q)))})});var G=N,W=U.get(N),re=t(W);U.forEach(N+1,g-1,function(ne,Q){var ge=t(Q);f(ge,re)&&(G=ne,re=ge,W=Q)}),N!==G&&(p._swapRows(N,G,E[1],A,_,C),p._swapRows(N,G,O[1],T,M,L),U.swap(N,G),B(N,G)),U.forEach(0,g-1,function(ne,Q){ne<=N?(T.push(Q),M.push(ne)):(Q=a(Q,W),u(Q,0)||(A.push(Q),_.push(ne)))})};for(N=0;N<y;N++)q();return L.push(T.length),C.push(A.length),{L:new p({values:A,index:_,ptr:C,size:E}),U:new p({values:T,index:M,ptr:L,size:O}),p:V,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});var ps="qr",sm=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],La=P(ps,sm,n=>{var{typed:e,matrix:r,zeros:t,identity:i,isZero:a,equal:l,sign:c,sqrt:f,conj:u,unaryMinus:o,addScalar:s,divideScalar:p,multiplyScalar:h,subtract:v,complex:m}=n;return tt(e(ps,{DenseMatrix:function(w){return g(w)},SparseMatrix:function(w){return y(w)},Array:function(w){var b=r(w),x=g(b);return{Q:x.Q.valueOf(),R:x.R.valueOf()}}}),{_denseQRimpl:d});function d(D){var w=D._size[0],b=D._size[1],x=i([w],"dense"),A=x._data,_=D.clone(),C=_._data,E,T,M,L=t([w],"");for(M=0;M<Math.min(b,w);++M){var O=C[M][M],I=o(l(O,0)?1:c(O)),N=u(I),X=0;for(E=M;E<w;E++)X=s(X,h(C[E][M],u(C[E][M])));var V=h(I,f(X));if(!a(V)){var F=v(O,V);for(L[M]=1,E=M+1;E<w;E++)L[E]=p(C[E][M],F);var B=o(u(p(F,V))),q=void 0;for(T=M;T<b;T++){for(q=0,E=M;E<w;E++)q=s(q,h(u(L[E]),C[E][T]));for(q=h(q,B),E=M;E<w;E++)C[E][T]=h(v(C[E][T],h(L[E],q)),N)}for(E=0;E<w;E++){for(q=0,T=M;T<w;T++)q=s(q,h(A[E][T],L[T]));for(q=h(q,B),T=M;T<w;++T)A[E][T]=p(v(A[E][T],h(q,u(L[T]))),N)}}}return{Q:x,R:_,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function g(D){var w=d(D),b=w.R._data;if(D._data.length>0)for(var x=b[0][0].type==="Complex"?m(0):0,A=0;A<b.length;++A)for(var _=0;_<A&&_<(b[0]||[]).length;++_)b[A][_]=x;return w}function y(D){throw new Error("qr not implemented for sparse matrices yet")}});function ms(n,e,r,t){for(var i=n._values,a=n._index,l=n._ptr,c=n._size,f=n._datatype,u=c[0],o=c[1],s=t&&n._values?[]:null,p=[],h=[],v=0,m=0;m<o;m++){h[m]=v;for(var d=r?r[m]:m,g=l[d],y=l[d+1],D=g;D<y;D++){var w=e?e[a[D]]:a[D];p[v]=w,s&&(s[v]=i[D]),v++}}return h[o]=v,n.createSparseMatrix({values:s,index:p,ptr:h,size:[u,o],datatype:f})}function On(n,e,r,t,i,a,l){var c=0;for(r[l]=n;c>=0;){var f=r[l+c],u=r[t+f];u===-1?(c--,a[e++]=f):(r[t+f]=r[i+u],++c,r[l+c]=u)}return e}function hs(n,e){if(!n)return null;var r=0,t,i=[],a=[],l=0,c=e,f=2*e;for(t=0;t<e;t++)a[l+t]=-1;for(t=e-1;t>=0;t--)n[t]!==-1&&(a[c+t]=a[l+n[t]],a[l+n[t]]=t);for(t=0;t<e;t++)n[t]===-1&&(r=On(t,r,a,l,c,i,f));return i}function vs(n,e){if(!n)return null;var r=n._index,t=n._ptr,i=n._size,a=i[0],l=i[1],c=[],f=[],u=0,o=l,s,p;if(e)for(s=0;s<a;s++)f[o+s]=-1;for(var h=0;h<l;h++){c[h]=-1,f[u+h]=-1;for(var v=t[h],m=t[h+1],d=v;d<m;d++){var g=r[d];for(s=e?f[o+g]:g;s!==-1&&s<h;s=p)p=f[u+s],f[u+s]=h,p===-1&&(c[s]=h);e&&(f[o+g]=h)}}return c}function ds(n,e,r){for(var t=n._values,i=n._index,a=n._ptr,l=n._size,c=l[1],f=0,u=0;u<c;u++){var o=a[u];for(a[u]=f;o<a[u+1];o++)e(i[o],u,t?t[o]:1,r)&&(i[f]=i[o],t&&(t[f]=t[o]),f++)}return a[c]=f,i.splice(f,i.length-f),t&&t.splice(f,t.length-f),f}function Mr(n){return-n-2}var fm="csAmd",lm=["add","multiply","transpose"],xs=P(fm,lm,n=>{var{add:e,multiply:r,transpose:t}=n;return function(o,s){if(!s||o<=0||o>3)return null;var p=s._size,h=p[0],v=p[1],m=0,d=Math.max(16,10*Math.sqrt(v));d=Math.min(v-2,d);var g=i(o,s,h,v,d);ds(g,f,null);for(var y=g._index,D=g._ptr,w=D[v],b=[],x=[],A=0,_=v+1,C=2*(v+1),E=3*(v+1),T=4*(v+1),M=5*(v+1),L=6*(v+1),O=7*(v+1),I=b,N=a(v,D,x,A,E,I,C,O,_,L,T,M),X=l(v,D,x,M,T,L,d,_,E,I,C),V=0,F,B,q,H,U,z,Z,G,W,re,ne,Q,ge,pe,ae,oe;X<v;){for(q=-1;V<v&&(q=x[E+V])===-1;V++);x[C+q]!==-1&&(I[x[C+q]]=-1),x[E+V]=x[C+q];var De=x[T+q],be=x[_+q];X+=be;var Me=0;x[_+q]=-be;var fe=D[q],ye=De===0?fe:w,Se=ye;for(H=1;H<=De+1;H++){for(H>De?(z=q,Z=fe,G=x[A+q]-De):(z=y[fe++],Z=D[z],G=x[A+z]),U=1;U<=G;U++)F=y[Z++],!((W=x[_+F])<=0)&&(Me+=W,x[_+F]=-W,y[Se++]=F,x[C+F]!==-1&&(I[x[C+F]]=I[F]),I[F]!==-1?x[C+I[F]]=x[C+F]:x[E+x[M+F]]=x[C+F]);z!==q&&(D[z]=Mr(q),x[L+z]=0)}for(De!==0&&(w=Se),x[M+q]=Me,D[q]=ye,x[A+q]=Se-ye,x[T+q]=-2,N=c(N,m,x,L,v),re=ye;re<Se;re++)if(F=y[re],!((ne=x[T+F])<=0)){W=-x[_+F];var Ve=N-W;for(fe=D[F],Q=D[F]+ne-1;fe<=Q;fe++)z=y[fe],x[L+z]>=N?x[L+z]-=W:x[L+z]!==0&&(x[L+z]=x[M+z]+Ve)}for(re=ye;re<Se;re++){for(F=y[re],Q=D[F],ge=Q+x[T+F]-1,pe=Q,ae=0,oe=0,fe=Q;fe<=ge;fe++)if(z=y[fe],x[L+z]!==0){var Ue=x[L+z]-N;Ue>0?(oe+=Ue,y[pe++]=z,ae+=z):(D[z]=Mr(q),x[L+z]=0)}x[T+F]=pe-Q+1;var fr=pe,gr=Q+x[A+F];for(fe=ge+1;fe<gr;fe++){B=y[fe];var er=x[_+B];er<=0||(oe+=er,y[pe++]=B,ae+=B)}oe===0?(D[F]=Mr(q),W=-x[_+F],Me-=W,be+=W,X+=W,x[_+F]=0,x[T+F]=-1):(x[M+F]=Math.min(x[M+F],oe),y[pe]=y[fr],y[fr]=y[Q],y[Q]=q,x[A+F]=pe-Q+1,ae=(ae<0?-ae:ae)%v,x[C+F]=x[O+ae],x[O+ae]=F,I[F]=ae)}for(x[M+q]=Me,m=Math.max(m,Me),N=c(N+m,m,x,L,v),re=ye;re<Se;re++)if(F=y[re],!(x[_+F]>=0))for(ae=I[F],F=x[O+ae],x[O+ae]=-1;F!==-1&&x[C+F]!==-1;F=x[C+F],N++){for(G=x[A+F],ne=x[T+F],fe=D[F]+1;fe<=D[F]+G-1;fe++)x[L+y[fe]]=N;var Sr=F;for(B=x[C+F];B!==-1;){var Pr=x[A+B]===G&&x[T+B]===ne;for(fe=D[B]+1;Pr&&fe<=D[B]+G-1;fe++)x[L+y[fe]]!==N&&(Pr=0);Pr?(D[B]=Mr(F),x[_+F]+=x[_+B],x[_+B]=0,x[T+B]=-1,B=x[C+B],x[C+Sr]=B):(Sr=B,B=x[C+B])}}for(fe=ye,re=ye;re<Se;re++)F=y[re],!((W=-x[_+F])<=0)&&(x[_+F]=W,oe=x[M+F]+Me-W,oe=Math.min(oe,v-X-W),x[E+oe]!==-1&&(I[x[E+oe]]=F),x[C+F]=x[E+oe],I[F]=-1,x[E+oe]=F,V=Math.min(V,oe),x[M+F]=oe,y[fe++]=F);x[_+q]=be,(x[A+q]=fe-ye)===0&&(D[q]=-1,x[L+q]=0),De!==0&&(w=fe)}for(F=0;F<v;F++)D[F]=Mr(D[F]);for(B=0;B<=v;B++)x[E+B]=-1;for(B=v;B>=0;B--)x[_+B]>0||(x[C+B]=x[E+D[B]],x[E+D[B]]=B);for(z=v;z>=0;z--)x[_+z]<=0||D[z]!==-1&&(x[C+z]=x[E+D[z]],x[E+D[z]]=z);for(q=0,F=0;F<=v;F++)D[F]===-1&&(q=On(F,q,x,E,C,b,L));return b.splice(b.length-1,1),b};function i(u,o,s,p,h){var v=t(o);if(u===1&&p===s)return e(o,v);if(u===2){for(var m=v._index,d=v._ptr,g=0,y=0;y<s;y++){var D=d[y];if(d[y]=g,!(d[y+1]-D>h))for(var w=d[y+1];D<w;D++)m[g++]=m[D]}return d[s]=g,o=t(v),r(v,o)}return r(v,o)}function a(u,o,s,p,h,v,m,d,g,y,D,w){for(var b=0;b<u;b++)s[p+b]=o[b+1]-o[b];s[p+u]=0;for(var x=0;x<=u;x++)s[h+x]=-1,v[x]=-1,s[m+x]=-1,s[d+x]=-1,s[g+x]=1,s[y+x]=1,s[D+x]=0,s[w+x]=s[p+x];var A=c(0,0,s,y,u);return s[D+u]=-2,o[u]=-1,s[y+u]=0,A}function l(u,o,s,p,h,v,m,d,g,y,D){for(var w=0,b=0;b<u;b++){var x=s[p+b];if(x===0)s[h+b]=-2,w++,o[b]=-1,s[v+b]=0;else if(x>m)s[d+b]=0,s[h+b]=-1,w++,o[b]=Mr(u),s[d+u]++;else{var A=s[g+x];A!==-1&&(y[A]=b),s[D+b]=s[g+x],s[g+x]=b}}return w}function c(u,o,s,p,h){if(u<2||u+o<0){for(var v=0;v<h;v++)s[p+v]!==0&&(s[p+v]=1);u=2}return u}function f(u,o){return u!==o}});function gs(n,e,r,t,i,a,l){var c,f,u=0,o;if(n<=e||r[t+e]<=r[i+n])return-1;r[i+n]=r[t+e];var s=r[a+n];if(r[a+n]=e,s===-1)u=1,o=n;else{for(u=2,o=s;o!==r[l+o];o=r[l+o]);for(c=s;c!==o;c=f)f=r[l+c],r[l+c]=o}return{jleaf:u,q:o}}var cm="csCounts",pm=["transpose"],Ds=P(cm,pm,n=>{var{transpose:e}=n;return function(r,t,i,a){if(!r||!t||!i)return null;var l=r._size,c=l[0],f=l[1],u,o,s,p,h,v,m,d=4*f+(a?f+c+1:0),g=[],y=0,D=f,w=2*f,b=3*f,x=4*f,A=5*f+1;for(s=0;s<d;s++)g[s]=-1;var _=[],C=e(r),E=C._index,T=C._ptr;for(s=0;s<f;s++)for(o=i[s],_[o]=g[b+o]===-1?1:0;o!==-1&&g[b+o]===-1;o=t[o])g[b+o]=s;if(a){for(s=0;s<f;s++)g[i[s]]=s;for(u=0;u<c;u++){for(s=f,v=T[u],m=T[u+1],h=v;h<m;h++)s=Math.min(s,g[E[h]]);g[A+u]=g[x+s],g[x+s]=u}}for(u=0;u<f;u++)g[y+u]=u;for(s=0;s<f;s++){for(o=i[s],t[o]!==-1&&_[t[o]]--,p=a?g[x+s]:o;p!==-1;p=a?g[A+p]:-1)for(h=T[p];h<T[p+1];h++){u=E[h];var M=gs(u,o,g,b,D,w,y);M.jleaf>=1&&_[o]++,M.jleaf===2&&_[M.q]--}t[o]!==-1&&(g[y+o]=t[o])}for(o=0;o<f;o++)t[o]!==-1&&(_[t[o]]+=_[o]);return _}});var mm="csSqr",hm=["add","multiply","transpose"],ys=P(mm,hm,n=>{var{add:e,multiply:r,transpose:t}=n,i=xs({add:e,multiply:r,transpose:t}),a=Ds({transpose:t});return function(f,u,o){var s=u._ptr,p=u._size,h=p[1],v,m={};if(m.q=i(f,u),f&&!m.q)return null;if(o){var d=f?ms(u,null,m.q,0):u;m.parent=vs(d,1);var g=hs(m.parent,h);if(m.cp=a(d,m.parent,g,1),d&&m.parent&&m.cp&&l(d,m))for(m.unz=0,v=0;v<h;v++)m.unz+=m.cp[v]}else m.unz=4*s[h]+h,m.lnz=m.unz;return m};function l(c,f){var u=c._ptr,o=c._index,s=c._size,p=s[0],h=s[1];f.pinv=[],f.leftmost=[];var v=f.parent,m=f.pinv,d=f.leftmost,g=[],y=0,D=p,w=p+h,b=p+2*h,x,A,_,C,E;for(A=0;A<h;A++)g[D+A]=-1,g[w+A]=-1,g[b+A]=0;for(x=0;x<p;x++)d[x]=-1;for(A=h-1;A>=0;A--)for(C=u[A],E=u[A+1],_=C;_<E;_++)d[o[_]]=A;for(x=p-1;x>=0;x--)m[x]=-1,A=d[x],A!==-1&&(g[b+A]++===0&&(g[w+A]=x),g[y+x]=g[D+A],g[D+A]=x);for(f.lnz=0,f.m2=p,A=0;A<h;A++)if(x=g[D+A],f.lnz++,x<0&&(x=f.m2++),m[x]=A,!(--b[A]<=0)){f.lnz+=g[b+A];var T=v[A];T!==-1&&(g[b+T]===0&&(g[w+T]=g[w+A]),g[y+g[w+A]]=g[D+T],g[D+T]=g[y+x],g[b+T]+=g[b+A])}for(x=0;x<p;x++)m[x]<0&&(m[x]=A++);return!0}});function qt(n,e){return n[e]<0}function Pn(n,e){n[e]=Mr(n[e])}function Oa(n){return n<0?Mr(n):n}function Es(n,e,r,t,i){var a=e._index,l=e._ptr,c=e._size,f=c[1],u,o,s,p=0;for(t[0]=n;p>=0;){n=t[p];var h=i?i[n]:n;qt(l,n)||(Pn(l,n),t[f+p]=h<0?0:Oa(l[h]));var v=1;for(o=t[f+p],s=h<0?0:Oa(l[h+1]);o<s;o++)if(u=a[o],!qt(l,u)){t[f+p]=o,t[++p]=u,v=0;break}v&&(p--,t[--r]=n)}return r}function ws(n,e,r,t,i){var a=n._ptr,l=n._size,c=e._index,f=e._ptr,u=l[1],o,s,p,h=u;for(s=f[r],p=f[r+1],o=s;o<p;o++){var v=c[o];qt(a,v)||(h=Es(v,n,h,t,i))}for(o=h;o<u;o++)Pn(a,t[o]);return h}var vm="csSpsolve",dm=["divideScalar","multiply","subtract"],bs=P(vm,dm,n=>{var{divideScalar:e,multiply:r,subtract:t}=n;return function(a,l,c,f,u,o,s){var p=a._values,h=a._index,v=a._ptr,m=a._size,d=m[1],g=l._values,y=l._index,D=l._ptr,w,b,x,A,_=ws(a,l,c,f,o);for(w=_;w<d;w++)u[f[w]]=0;for(b=D[c],x=D[c+1],w=b;w<x;w++)u[y[w]]=g[w];for(var C=_;C<d;C++){var E=f[C],T=o?o[E]:E;if(!(T<0))for(b=v[T],x=v[T+1],u[E]=e(u[E],p[s?b:x-1]),w=s?b+1:b,A=s?x:x-1;w<A;w++){var M=h[w];u[M]=t(u[M],r(p[w],u[E]))}}return _}});var xm="csLu",gm=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],As=P(xm,gm,n=>{var{abs:e,divideScalar:r,multiply:t,subtract:i,larger:a,largerEq:l,SparseMatrix:c}=n,f=bs({divideScalar:r,multiply:t,subtract:i});return function(o,s,p){if(!o)return null;var h=o._size,v=h[1],m,d=100,g=100;s&&(m=s.q,d=s.lnz||d,g=s.unz||g);var y=[],D=[],w=[],b=new c({values:y,index:D,ptr:w,size:[v,v]}),x=[],A=[],_=[],C=new c({values:x,index:A,ptr:_,size:[v,v]}),E=[],T,M,L=[],O=[];for(T=0;T<v;T++)L[T]=0,E[T]=-1,w[T+1]=0;d=0,g=0;for(var I=0;I<v;I++){w[I]=d,_[I]=g;var N=m?m[I]:I,X=f(b,o,N,O,L,E,1),V=-1,F=-1;for(M=X;M<v;M++)if(T=O[M],E[T]<0){var B=e(L[T]);a(B,F)&&(F=B,V=T)}else A[g]=E[T],x[g++]=L[T];if(V===-1||F<=0)return null;E[N]<0&&l(e(L[N]),t(F,p))&&(V=N);var q=L[V];for(A[g]=I,x[g++]=q,E[V]=I,D[d]=V,y[d++]=1,M=X;M<v;M++)T=O[M],E[T]<0&&(D[d]=T,y[d++]=r(L[T],q)),L[T]=0}for(w[v]=d,_[v]=g,M=0;M<d;M++)D[M]=E[D[M]];return y.splice(d,y.length-d),D.splice(d,D.length-d),x.splice(g,x.length-g),A.splice(g,A.length-g),{L:b,U:C,pinv:E}}});var Cs="slu",Dm=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],Pa=P(Cs,Dm,n=>{var{typed:e,abs:r,add:t,multiply:i,transpose:a,divideScalar:l,subtract:c,larger:f,largerEq:u,SparseMatrix:o}=n,s=ys({add:t,multiply:i,transpose:a}),p=As({abs:r,divideScalar:l,multiply:i,subtract:c,larger:f,largerEq:u,SparseMatrix:o});return e(Cs,{"SparseMatrix, number, number":function(v,m,d){if(!de(m)||m<0||m>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(d<0||d>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var g=s(m,v,!1),y=p(v,g,d);return{L:y.L,U:y.U,p:y.pinv,q:g.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function za(n,e){var r,t=e.length,i=[];if(n)for(r=0;r<t;r++)i[n[r]]=e[r];else for(r=0;r<t;r++)i[r]=e[r];return i}var _s="lusolve",ym=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],qa=P(_s,ym,n=>{var{typed:e,matrix:r,lup:t,slu:i,usolve:a,lsolve:l,DenseMatrix:c}=n,f=Hr({DenseMatrix:c});return e(_s,{"Array, Array | Matrix":function(p,h){p=r(p);var v=t(p),m=o(v.L,v.U,v.p,null,h);return m.valueOf()},"DenseMatrix, Array | Matrix":function(p,h){var v=t(p);return o(v.L,v.U,v.p,null,h)},"SparseMatrix, Array | Matrix":function(p,h){var v=t(p);return o(v.L,v.U,v.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(p,h,v,m){var d=i(p,v,m);return o(d.L,d.U,d.p,d.q,h)},"Object, Array | Matrix":function(p,h){return o(p.L,p.U,p.p,p.q,h)}});function u(s){if(we(s))return s;if(Te(s))return r(s);throw new TypeError("Invalid Matrix LU decomposition")}function o(s,p,h,v,m){s=u(s),p=u(p),h&&(m=f(s,m,!0),m._data=za(h,m._data));var d=l(s,m),g=a(p,d);return v&&(g._data=za(v,g._data)),g}});var Ms="det",Em=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],ka=P(Ms,Em,n=>{var{typed:e,matrix:r,subtract:t,multiply:i,divideScalar:a,isZero:l,unaryMinus:c}=n;return e(Ms,{any:function(o){return ve(o)},"Array | Matrix":function(o){var s;switch(we(o)?s=o.size():Array.isArray(o)?(o=r(o),s=o.size()):s=[],s.length){case 0:return ve(o);case 1:if(s[0]===1)return ve(o.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Fe(s)+")");case 2:{var p=s[0],h=s[1];if(p===h)return f(o.clone().valueOf(),p,h);throw new RangeError("Matrix must be square (size: "+Fe(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Fe(s)+")")}}});function f(u,o,s){if(o===1)return ve(u[0][0]);if(o===2)return t(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var p=!1,h=new Array(o).fill(0).map((A,_)=>_),v=0;v<o;v++){var m=h[v];if(l(u[m][v])){var d=void 0;for(d=v+1;d<o;d++)if(!l(u[h[d]][v])){m=h[d],h[d]=h[v],h[v]=m,p=!p;break}if(d===o)return u[m][v]}for(var g=u[m][v],y=v===0?1:u[h[v-1]][v-1],D=v+1;D<o;D++)for(var w=h[D],b=v+1;b<o;b++)u[w][b]=a(t(i(u[w][b],g),i(u[w][v],u[m][b])),y)}var x=u[h[o-1]][o-1];return p?c(x):x}});var Ts="inv",wm=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Va=P(Ts,wm,n=>{var{typed:e,matrix:r,divideScalar:t,addScalar:i,multiply:a,unaryMinus:l,det:c,identity:f,abs:u}=n;return e(Ts,{"Array | Matrix":function(p){var h=we(p)?p.size():Pe(p);switch(h.length){case 1:if(h[0]===1)return we(p)?r([t(1,p.valueOf()[0])]):[t(1,p[0])];throw new RangeError("Matrix must be square (size: "+Fe(h)+")");case 2:{var v=h[0],m=h[1];if(v===m)return we(p)?r(o(p.valueOf(),v,m),p.storage()):o(p,v,m);throw new RangeError("Matrix must be square (size: "+Fe(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Fe(h)+")")}},any:function(p){return t(1,p)}});function o(s,p,h){var v,m,d,g,y;if(p===1){if(g=s[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[t(1,g)]]}else if(p===2){var D=c(s);if(D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[t(s[1][1],D),t(l(s[0][1]),D)],[t(l(s[1][0]),D),t(s[0][0],D)]]}else{var w=s.concat();for(v=0;v<p;v++)w[v]=w[v].concat();for(var b=f(p).valueOf(),x=0;x<h;x++){var A=u(w[x][x]),_=x;for(v=x+1;v<p;)u(w[v][x])>A&&(A=u(w[v][x]),_=v),v++;if(A===0)throw Error("Cannot calculate inverse, determinant is zero");v=_,v!==x&&(y=w[x],w[x]=w[v],w[v]=y,y=b[x],b[x]=b[v],b[v]=y);var C=w[x],E=b[x];for(v=0;v<p;v++){var T=w[v],M=b[v];if(v!==x){if(T[x]!==0){for(d=t(l(T[x]),C[x]),m=x;m<h;m++)T[m]=i(T[m],a(d,C[m]));for(m=0;m<h;m++)M[m]=i(M[m],a(d,E[m]))}}else{for(d=C[x],m=x;m<h;m++)T[m]=t(T[m],d);for(m=0;m<h;m++)M[m]=t(M[m],d)}}}return b}}});function Ss(n){var{addScalar:e,subtract:r,flatten:t,multiply:i,multiplyScalar:a,divideScalar:l,sqrt:c,abs:f,bignumber:u,diag:o,inv:s,qr:p,usolve:h,usolveAll:v,equal:m,complex:d,larger:g,smaller:y,matrixFromColumns:D,dot:w}=n;function b(B,q,H,U,z){z===void 0&&(z=!0);var Z=x(B,q,H,U,z);A(B,q,H,U,z,Z);var{values:G,C:W}=_(B,q,H,U,z),re;return z&&(re=C(B,q,W,Z,G,H,U),re=D(...re)),{values:G,vectors:re}}function x(B,q,H,U,z){var Z=U==="BigNumber",G=U==="Complex",W=Z?u(0):0,re=Z?u(1):G?d(1):1,ne=Z?u(1):1,Q=Z?u(10):2,ge=a(Q,Q),pe;z&&(pe=Array(q).fill(re));for(var ae=!1;!ae;){ae=!0;for(var oe=0;oe<q;oe++){for(var De=W,be=W,Me=0;Me<q;Me++)if(oe!==Me){var fe=f(B[oe][Me]);De=e(De,fe),be=e(be,fe)}if(!m(De,0)&&!m(be,0)){for(var ye=ne,Se=De,Ve=l(be,Q),Ue=a(be,Q);y(Se,Ve);)Se=a(Se,ge),ye=a(ye,Q);for(;g(Se,Ue);)Se=l(Se,ge),ye=l(ye,Q);var fr=y(l(e(Se,be),ye),a(e(De,be),.95));if(fr){ae=!1;for(var gr=l(1,ye),er=0;er<q;er++)oe!==er&&(B[oe][er]=a(B[oe][er],ye),B[er][oe]=a(B[er][oe],gr));z&&(pe[oe]=a(pe[oe],ye))}}}}return o(pe)}function A(B,q,H,U,z,Z){var G=U==="BigNumber",W=U==="Complex",re=G?u(0):W?d(0):0;G&&(H=u(H));for(var ne=0;ne<q-2;ne++){for(var Q=0,ge=re,pe=ne+1;pe<q;pe++){var ae=B[pe][ne];y(f(ge),f(ae))&&(ge=ae,Q=pe)}if(!y(f(ge),H)){if(Q!==ne+1){var oe=B[Q];B[Q]=B[ne+1],B[ne+1]=oe;for(var De=0;De<q;De++){var be=B[De][Q];B[De][Q]=B[De][ne+1],B[De][ne+1]=be}if(z){var Me=Z[Q];Z[Q]=Z[ne+1],Z[ne+1]=Me}}for(var fe=ne+2;fe<q;fe++){var ye=l(B[fe][ne],ge);if(ye!==0){for(var Se=0;Se<q;Se++)B[fe][Se]=r(B[fe][Se],a(ye,B[ne+1][Se]));for(var Ve=0;Ve<q;Ve++)B[Ve][ne+1]=e(B[Ve][ne+1],a(ye,B[Ve][fe]));if(z)for(var Ue=0;Ue<q;Ue++)Z[fe][Ue]=r(Z[fe][Ue],a(ye,Z[ne+1][Ue]))}}}}return Z}function _(B,q,H,U,z){var Z=U==="BigNumber",G=U==="Complex",W=Z?u(1):G?d(1):1;Z&&(H=u(H));for(var re=ve(B),ne=[],Q=q,ge=[],pe=z?o(Array(q).fill(W)):void 0,ae=z?o(Array(Q).fill(W)):void 0,oe=0;oe<=100;){oe+=1;for(var De=0,be=0;be<Q;be++)re[be][be]=r(re[be][be],De);var{Q:Me,R:fe}=p(re);re=i(fe,Me);for(var ye=0;ye<Q;ye++)re[ye][ye]=e(re[ye][ye],De);if(z&&(ae=i(ae,Me)),Q===1||y(f(re[Q-1][Q-2]),H)){oe=0,ne.push(re[Q-1][Q-1]),z&&(ge.unshift([[1]]),M(ae,q),pe=i(pe,ae),Q>1&&(ae=o(Array(Q-1).fill(W)))),Q-=1,re.pop();for(var Se=0;Se<Q;Se++)re[Se].pop()}else if(Q===2||y(f(re[Q-2][Q-3]),H)){oe=0;var Ve=E(re[Q-2][Q-2],re[Q-2][Q-1],re[Q-1][Q-2],re[Q-1][Q-1]);ne.push(...Ve),z&&(ge.unshift(T(re[Q-2][Q-2],re[Q-2][Q-1],re[Q-1][Q-2],re[Q-1][Q-1],Ve[0],Ve[1],H,U)),M(ae,q),pe=i(pe,ae),Q>2&&(ae=o(Array(Q-2).fill(W)))),Q-=2,re.pop(),re.pop();for(var Ue=0;Ue<Q;Ue++)re[Ue].pop(),re[Ue].pop()}if(Q===0)break}if(ne.sort((er,Sr)=>+r(f(er),f(Sr))),oe>100){var fr=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ne.join(", "));throw fr.values=ne,fr.vectors=[],fr}var gr=z?i(pe,L(ge,q)):void 0;return{values:ne,C:gr}}function C(B,q,H,U,z,Z,G){var W=s(H),re=i(W,B,H),ne=G==="BigNumber",Q=G==="Complex",ge=ne?u(0):Q?d(0):0,pe=ne?u(1):Q?d(1):1,ae=[],oe=[];for(var De of z){var be=O(ae,De,m);be===-1?(ae.push(De),oe.push(1)):oe[be]+=1}for(var Me=[],fe=ae.length,ye=Array(q).fill(ge),Se=o(Array(q).fill(pe)),Ve=[],Ue=function(Sr){var Pr=ae[Sr],bt=r(re,i(Pr,Se)),zr=v(bt,ye);for(zr.shift();zr.length<oe[Sr];){var Qt=I(bt,q,zr,Z,G);if(Qt==null){Ve.push(Pr);break}zr.push(Qt)}var ei=i(s(U),H);zr=zr.map(it=>i(ei,it)),Me.push(...zr.map(it=>t(it)))},fr=0;fr<fe;fr++)Ue(fr);if(Ve.length!==0){var gr=new Error("Failed to find eigenvectors for the following eigenvalues: "+Ve.join(", "));throw gr.values=z,gr.vectors=Me,gr}return Me}function E(B,q,H,U){var z=e(B,U),Z=r(a(B,U),a(q,H)),G=a(z,.5),W=a(c(r(a(z,z),a(4,Z))),.5);return[e(G,W),r(G,W)]}function T(B,q,H,U,z,Z,G,W){var re=W==="BigNumber",ne=W==="Complex",Q=re?u(0):ne?d(0):0,ge=re?u(1):ne?d(1):1;if(y(f(H),G))return[[ge,Q],[Q,ge]];if(g(f(r(z,Z)),G))return[[r(z,U),r(Z,U)],[H,H]];var pe=r(B,z),ae=r(q,z),oe=r(H,z),De=r(U,z);return y(f(ae),G)?[[pe,ge],[oe,Q]]:[[ae,Q],[De,ge]]}function M(B,q){for(var H=0;H<B.length;H++)B[H].push(...Array(q-B[H].length).fill(0));for(var U=B.length;U<q;U++)B.push(Array(q).fill(0)),B[U][U]=1;return B}function L(B,q){for(var H=[],U=0;U<q;U++)H[U]=Array(q).fill(0);var z=0;for(var Z of B){for(var G=Z.length,W=0;W<G;W++)for(var re=0;re<G;re++)H[z+W][z+re]=Z[W][re];z+=G}return H}function O(B,q,H){for(var U=0;U<B.length;U++)if(H(B[U],q))return U;return-1}function I(B,q,H,U,z){for(var Z=z==="BigNumber"?u(1e3):1e3,G,W=0;G=N(q,H,z),G=h(B,G),!g(V(G),Z);)if(++W>=5)return null;for(W=0;;){var re=h(B,G);if(y(V(X(G,[re])),U))break;if(++W>=10)return null;G=F(re)}return G}function N(B,q,H){var U=H==="BigNumber",z=H==="Complex",Z=Array(B).fill(0).map(G=>2*Math.random()-1);return U&&(Z=Z.map(G=>u(G))),z&&(Z=Z.map(G=>d(G))),Z=X(Z,q),F(Z,H)}function X(B,q){for(var H of q)B=r(B,i(l(w(H,B),w(H,H)),H));return B}function V(B){return f(c(w(B,B)))}function F(B,q){var H=q==="BigNumber",U=q==="Complex",z=H?u(1):U?d(1):1;return i(l(z,V(B)),B)}return b}function Ns(n){var{config:e,addScalar:r,subtract:t,abs:i,atan:a,cos:l,sin:c,multiplyScalar:f,inv:u,bignumber:o,multiply:s,add:p}=n;function h(E,T){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,L=arguments.length>3?arguments[3]:void 0;if(L==="number")return v(E,M);if(L==="BigNumber")return m(E,M);throw TypeError("Unsupported data type: "+L)}function v(E,T){for(var M=E.length,L=Math.abs(T/M),O,I=new Array(M),N=0;N<M;N++)I[N]=C(M,0),I[N][N]=1;for(var X=x(E);Math.abs(X[1])>=Math.abs(L);){var V=X[0][0],F=X[0][1];O=d(E[V][V],E[F][F],E[V][F]),E=b(E,O,V,F),I=y(I,O,V,F),X=x(E)}for(var B=C(M,0),q=0;q<M;q++)B[q]=E[q][q];return _(ve(B),ve(I))}function m(E,T){for(var M=E.length,L=i(T/M),O,I=new Array(M),N=0;N<M;N++)I[N]=C(M,0),I[N][N]=1;for(var X=A(E);i(X[1])>=i(L);){var V=X[0][0],F=X[0][1];O=g(E[V][V],E[F][F],E[V][F]),E=w(E,O,V,F),I=D(I,O,V,F),X=A(E)}for(var B=C(M,0),q=0;q<M;q++)B[q]=E[q][q];return _(ve(B),ve(I))}function d(E,T,M){var L=T-E;return Math.abs(L)<=e.epsilon?Math.PI/4:.5*Math.atan(2*M/(T-E))}function g(E,T,M){var L=t(T,E);return i(L)<=e.epsilon?o(-1).acos().div(4):f(.5,a(s(2,M,u(L))))}function y(E,T,M,L){for(var O=E.length,I=Math.cos(T),N=Math.sin(T),X=C(O,0),V=C(O,0),F=0;F<O;F++)X[F]=I*E[F][M]-N*E[F][L],V[F]=N*E[F][M]+I*E[F][L];for(var B=0;B<O;B++)E[B][M]=X[B],E[B][L]=V[B];return E}function D(E,T,M,L){for(var O=E.length,I=l(T),N=c(T),X=C(O,o(0)),V=C(O,o(0)),F=0;F<O;F++)X[F]=t(f(I,E[F][M]),f(N,E[F][L])),V[F]=r(f(N,E[F][M]),f(I,E[F][L]));for(var B=0;B<O;B++)E[B][M]=X[B],E[B][L]=V[B];return E}function w(E,T,M,L){for(var O=E.length,I=o(l(T)),N=o(c(T)),X=f(I,I),V=f(N,N),F=C(O,o(0)),B=C(O,o(0)),q=s(o(2),I,N,E[M][L]),H=r(t(f(X,E[M][M]),q),f(V,E[L][L])),U=p(f(V,E[M][M]),q,f(X,E[L][L])),z=0;z<O;z++)F[z]=t(f(I,E[M][z]),f(N,E[L][z])),B[z]=r(f(N,E[M][z]),f(I,E[L][z]));E[M][M]=H,E[L][L]=U,E[M][L]=o(0),E[L][M]=o(0);for(var Z=0;Z<O;Z++)Z!==M&&Z!==L&&(E[M][Z]=F[Z],E[Z][M]=F[Z],E[L][Z]=B[Z],E[Z][L]=B[Z]);return E}function b(E,T,M,L){for(var O=E.length,I=Math.cos(T),N=Math.sin(T),X=I*I,V=N*N,F=C(O,0),B=C(O,0),q=X*E[M][M]-2*I*N*E[M][L]+V*E[L][L],H=V*E[M][M]+2*I*N*E[M][L]+X*E[L][L],U=0;U<O;U++)F[U]=I*E[M][U]-N*E[L][U],B[U]=N*E[M][U]+I*E[L][U];E[M][M]=q,E[L][L]=H,E[M][L]=0,E[L][M]=0;for(var z=0;z<O;z++)z!==M&&z!==L&&(E[M][z]=F[z],E[z][M]=F[z],E[L][z]=B[z],E[z][L]=B[z]);return E}function x(E){for(var T=E.length,M=0,L=[0,1],O=0;O<T;O++)for(var I=O+1;I<T;I++)Math.abs(M)<Math.abs(E[O][I])&&(M=Math.abs(E[O][I]),L=[O,I]);return[L,M]}function A(E){for(var T=E.length,M=0,L=[0,1],O=0;O<T;O++)for(var I=O+1;I<T;I++)i(M)<i(E[O][I])&&(M=i(E[O][I]),L=[O,I]);return[L,M]}function _(E,T){for(var M=E.length,L=Array(M),O=Array(M),I=0;I<M;I++)O[I]=Array(M);for(var N=0;N<M;N++){for(var X=0,V=E[0],F=0;F<E.length;F++)i(E[F])<i(V)&&(X=F,V=E[X]);L[N]=E.splice(X,1)[0];for(var B=0;B<M;B++)O[B][N]=T[B][X],T[B].splice(X,1)}return{values:L,vectors:O}}function C(E,T){for(var M=new Array(E),L=0;L<E;L++)M[L]=T;return M}return h}var bm="eigs",Am=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Ua=P(bm,Am,n=>{var{config:e,typed:r,matrix:t,addScalar:i,subtract:a,equal:l,abs:c,atan:f,cos:u,sin:o,multiplyScalar:s,divideScalar:p,inv:h,bignumber:v,multiply:m,add:d,larger:g,column:y,flatten:D,number:w,complex:b,sqrt:x,diag:A,qr:_,usolve:C,usolveAll:E,im:T,re:M,smaller:L,matrixFromColumns:O,dot:I}=n,N=Ns({config:e,addScalar:i,subtract:a,column:y,flatten:D,equal:l,abs:c,atan:f,cos:u,sin:o,multiplyScalar:s,inv:h,bignumber:v,complex:b,multiply:m,add:d}),X=Ss({config:e,addScalar:i,subtract:a,multiply:m,multiplyScalar:s,flatten:D,divideScalar:p,sqrt:x,abs:c,bignumber:v,diag:A,qr:_,inv:h,usolve:C,usolveAll:E,equal:l,complex:b,larger:g,smaller:L,matrixFromColumns:O,dot:I});return r("eigs",{Array:function(z){var Z=t(z);return V(Z)},"Array, number|BigNumber":function(z,Z){var G=t(z);return V(G,Z)},Matrix:function(z){var{values:Z,vectors:G}=V(z);return{values:t(Z),vectors:t(G)}},"Matrix, number|BigNumber":function(z,Z){var{values:G,vectors:W}=V(z,Z);return{values:t(G),vectors:t(W)}}});function V(U,z){z===void 0&&(z=e.epsilon);var Z=U.size();if(Z.length!==2||Z[0]!==Z[1])throw new RangeError("Matrix must be square (size: "+Fe(Z)+")");var G=U.toArray(),W=Z[0];if(B(G,W,z)&&(q(G,W),F(G,W,z))){var re=H(U,G,W);return N(G,W,z,re)}var ne=H(U,G,W);return X(G,W,z,ne)}function F(U,z,Z){for(var G=0;G<z;G++)for(var W=G;W<z;W++)if(g(v(c(a(U[G][W],U[W][G]))),Z))return!1;return!0}function B(U,z,Z){for(var G=0;G<z;G++)for(var W=0;W<z;W++)if(g(v(c(T(U[G][W]))),Z))return!1;return!0}function q(U,z){for(var Z=0;Z<z;Z++)for(var G=0;G<z;G++)U[Z][G]=M(U[Z][G])}function H(U,z,Z){var G=U.datatype();if(G==="number"||G==="BigNumber"||G==="Complex")return G;for(var W=!1,re=!1,ne=!1,Q=0;Q<Z;Q++)for(var ge=0;ge<Z;ge++){var pe=z[Q][ge];if(Be(pe)||Bt(pe))W=!0;else if(ze(pe))re=!0;else if(Ft(pe))ne=!0;else throw TypeError("Unsupported type in Matrix: "+He(pe))}if(re&&ne&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ne){for(var ae=0;ae<Z;ae++)for(var oe=0;oe<Z;oe++)z[ae][oe]=b(z[ae][oe]);return"Complex"}if(re){for(var De=0;De<Z;De++)for(var be=0;be<Z;be++)z[De][be]=v(z[De][be]);return"BigNumber"}if(W){for(var Me=0;Me<Z;Me++)for(var fe=0;fe<Z;fe++)z[Me][fe]=w(z[Me][fe]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}});var Cm="divide",_m=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Xa=P(Cm,_m,n=>{var{typed:e,matrix:r,multiply:t,equalScalar:i,divideScalar:a,inv:l}=n,c=Cn({typed:e,equalScalar:i}),f=dt({typed:e});return e("divide",an({"Array | Matrix, Array | Matrix":function(o,s){return t(o,l(s))},"DenseMatrix, any":function(o,s){return f(o,s,a,!1)},"SparseMatrix, any":function(o,s){return c(o,s,a,!1)},"Array, any":function(o,s){return f(r(o),s,a,!1).valueOf()},"any, Array | Matrix":function(o,s){return t(o,l(s))}},a.signatures))});var Fs="combinations",Mm=["typed"],Za=P(Fs,Mm,n=>{var{typed:e}=n;return e(Fs,{"number, number":Oi,"BigNumber, BigNumber":function(t,i){var a=t.constructor,l,c,f=t.minus(i),u=new a(1);if(!Bs(t)||!Bs(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(t))throw new TypeError("k must be less than n in function combinations");if(l=u,i.lt(f))for(c=u;c.lte(f);c=c.plus(u))l=l.times(i.plus(c)).dividedBy(c);else for(c=u;c.lte(i);c=c.plus(u))l=l.times(f.plus(c)).dividedBy(c);return l}})});function Bs(n){return n.isInteger()&&n.gte(0)}var kt=Ai({config:We}),zn=_i({});var Qa=Ti({});var Ga=Si({});var je=Ni({Matrix:Ga});var ce=di({BigNumber:kt,Complex:zn,DenseMatrix:je,Fraction:Qa});var qn=$i({typed:ce});var Xr=Ji({typed:ce});var Tm=Sa({typed:ce});var Ya=Ui({BigNumber:kt,typed:ce});var Is=Za({typed:ce}),Vt=Xi({Complex:zn,typed:ce}),Rs=ra({typed:ce});var Tr=qi({config:We,typed:ce});var Sm=ta({typed:ce});var Ls=zi({typed:ce});var Wr=Hi({typed:ce});var $a=Vi({typed:ce});var Nm=na({typed:ce});var Fm=Ki({BigNumber:kt,Fraction:Qa,complex:Vt,typed:ce}),Bm=Fa({typed:ce}),gt=ki({Matrix:Ga,equalScalar:Tr,typed:ce});var Im=Na({typed:ce});var kn=ji({Complex:zn,config:We,typed:ce});var Ut=Yi({typed:ce});var Os=Zi({Fraction:Qa,typed:ce});var Re=Qi({DenseMatrix:je,Matrix:Ga,SparseMatrix:gt,typed:ce});var Ja=pa({bignumber:Ya,fraction:Os,number:$a});var Ps=fa({matrix:Re,config:We,typed:ce}),Xt=Da({DenseMatrix:je,config:We,matrix:Re,typed:ce});var br=ea({DenseMatrix:je,addScalar:Xr,equalScalar:Tr,matrix:Re,typed:ce,unaryMinus:Ut});var Ha=la({matrix:Re,typed:ce});var Wa=ca({BigNumber:kt,config:We,matrix:Re,typed:ce});var Rm=aa({DenseMatrix:je,SparseMatrix:gt,matrix:Re,typed:ce}),Or=ma({numeric:Ja,typed:ce});var zs=ga({DenseMatrix:je,equalScalar:Tr,matrix:Re,typed:ce});var qs=oa({matrix:Re,typed:ce});var ks=wa({DenseMatrix:je,config:We,matrix:Re,typed:ce});var Lm=va({DenseMatrix:je,divideScalar:Or,equalScalar:Tr,matrix:Re,multiplyScalar:Wr,subtract:br,typed:ce}),Om=Gi({flatten:qs,matrix:Re,size:Ps,typed:ce}),Vs=Aa({config:We,numeric:Ja,smaller:Xt,typed:ce});var Pm=ya({DenseMatrix:je,config:We,matrix:Re,typed:ce});var Us=da({DenseMatrix:je,divideScalar:Or,equalScalar:Tr,matrix:Re,multiplyScalar:Wr,subtract:br,typed:ce});var Dt=Ba({DenseMatrix:je,SparseMatrix:gt,addScalar:Xr,equalScalar:Tr,matrix:Re,typed:ce});var Xs=Ia({addScalar:Xr,conj:Rs,multiplyScalar:Wr,size:Ps,typed:ce});var Ka=ua({BigNumber:kt,DenseMatrix:je,SparseMatrix:gt,config:We,matrix:Re,typed:ce});var yt=Ea({DenseMatrix:je,config:We,matrix:Re,typed:ce});var Ar=Wi({addScalar:Xr,dot:Xs,equalScalar:Tr,matrix:Re,multiplyScalar:Wr,typed:ce}),zm=La({addScalar:Xr,complex:Vt,conj:Rs,divideScalar:Or,equal:zs,identity:Ka,isZero:Ls,matrix:Re,multiplyScalar:Wr,sign:Fm,sqrt:kn,subtract:br,typed:ce,unaryMinus:Ut,zeros:Wa}),qm=sa({bignumber:Ya,matrix:Re,config:We,larger:yt,largerEq:ks,smaller:Xt,smallerEq:Pm,typed:ce});var km=Pa({SparseMatrix:gt,abs:qn,add:Dt,divideScalar:Or,larger:yt,largerEq:ks,multiply:Ar,subtract:br,transpose:Ha,typed:ce});var Vm=xa({DenseMatrix:je,divideScalar:Or,equalScalar:Tr,matrix:Re,multiplyScalar:Wr,subtract:br,typed:ce});var Vn=ka({divideScalar:Or,isZero:Ls,matrix:Re,multiply:Ar,subtract:br,typed:ce,unaryMinus:Ut});var Um=Ma({larger:yt,smaller:Xt});var Xm=Ca({DenseMatrix:je,smaller:Xt}),Zm=_a({ImmutableDenseMatrix:Xm});var Zs=ba({config:We,larger:yt,numeric:Ja,typed:ce});var Qm=ia({Index:Zm,matrix:Re,range:qm,typed:ce});var Zt=Va({abs:qn,addScalar:Xr,det:Vn,divideScalar:Or,identity:Ka,matrix:Re,multiply:Ar,typed:ce,unaryMinus:Ut});var Un=ha({Complex:zn,config:We,fraction:Os,identity:Ka,inv:Zt,matrix:Re,multiply:Ar,number:$a,typed:ce});var Gm=Ta({FibonacciHeap:Um,addScalar:Xr,equalScalar:Tr});var Qs=Xa({divideScalar:Or,equalScalar:Tr,inv:Zt,matrix:Re,multiply:Ar,typed:ce});var Ym=Ra({DenseMatrix:je,Spa:Gm,SparseMatrix:gt,abs:qn,addScalar:Xr,divideScalar:Or,equalScalar:Tr,larger:yt,matrix:Re,multiplyScalar:Wr,subtract:br,typed:ce,unaryMinus:Ut});var Gs=Ua({abs:qn,add:Dt,addScalar:Xr,atan:Tm,bignumber:Ya,column:Qm,complex:Vt,config:We,cos:Im,diag:Rm,divideScalar:Or,dot:Xs,equal:zs,flatten:qs,im:Sm,inv:Zt,larger:yt,matrix:Re,matrixFromColumns:Om,multiply:Ar,multiplyScalar:Wr,number:$a,qr:zm,re:Nm,sin:Bm,smaller:Xt,sqrt:kn,subtract:br,typed:ce,usolve:Us,usolveAll:Vm});var Ys=qa({DenseMatrix:je,lsolve:Lm,lup:Ym,matrix:Re,slu:km,typed:ce,usolve:Us});var Ee=class{constructor(e,r){this.rows=1;this.cols=1;this.values=[];this.rows=e,this.cols=r,this.values=new Array(e*r).fill(0)}getRows(){return this.rows}getCols(){return this.cols}setValue(e,r,t){this.values[e*this.cols+r]=t}getValue(e,r){return this.values[e*this.cols+r]}getCol(e){let r=new ke(this.rows);for(let t=0;t<this.rows;t++)r.setValue(t,this.getValue(t,e));return r}clone(){let e=new Ee(this.rows,this.cols);return e.values=[...this.values],e}toString(){let e="[";for(let r=0;r<this.rows;r++){r>0&&(e+=","),e+="[";for(let t=0;t<this.cols;t++)t>0&&(e+=","),e+=this.getValue(r,t);e+="]"}return e+="]",e}static equal(e,r,t=1e-9){if(e.getRows()!=r.getRows()||e.getCols()!=r.getCols())return!1;let i=e.getRows(),a=e.getCols();for(let l=0;l<i;l++)for(let c=0;c<a;c++)if(Math.abs(e.getValue(l,c)-r.getValue(l,c))>t)return!1;return!0}floor(){let e=this.getRows(),r=this.getCols();for(let t=0;t<e;t++)for(let i=0;i<r;i++)this.setValue(t,i,Math.floor(this.getValue(t,i)))}ceil(){let e=this.getRows(),r=this.getCols();for(let t=0;t<e;t++)for(let i=0;i<r;i++)this.setValue(t,i,Math.ceil(this.getValue(t,i)))}round(){let e=this.getRows(),r=this.getCols();for(let t=0;t<e;t++)for(let i=0;i<r;i++)this.setValue(t,i,Math.round(this.getValue(t,i)))}static mod(e,r){let t=e.clone(),i=t.getRows(),a=t.getCols();for(let l=0;l<i;l++)for(let c=0;c<a;c++)t.setValue(l,c,t.getValue(l,c)%r);return t}static mathjs2matrix(e){let r=new Ee(e.size()[0],e.size()[1]),t=r.getRows(),i=r.getCols();for(let a=0;a<t;a++)for(let l=0;l<i;l++)r.setValue(a,l,e.get([a,l]));return r}static matrix2mathjs(e){let r=Wa(e.rows,e.cols);for(let t=0;t<e.rows;t++)for(let i=0;i<e.cols;i++)r.set([t,i],e.getValue(t,i));return r}is_zero(e=1e-9){for(let r=0;r<this.rows;r++)for(let t=0;t<this.cols;t++)if(Math.abs(this.getValue(r,t))>e)return!1;return!0}is_integer(){for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++){let t=this.getValue(e,r);if(Math.abs(t-Math.round(t))!=0)return!1}return!0}is_symmetric(){if(this.rows!=this.cols)return!1;for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)if(this.getValue(e,r)!=this.getValue(r,e))return!1;return!0}rank(e=1e-12){let r=this.clone(),t=r.rows,i=r.cols,a=0,l=[];for(let c=0;c<i;c++)l.push(!1);for(let c=0;c<t;c++){let f;for(f=0;f<i&&!(!l[f]&&Math.abs(r.getValue(c,f))>e);f++);if(f!=i){a++,l[f]=!0;for(let u=c+1;u<t;u++)r.setValue(u,f,r.getValue(u,f)/r.getValue(c,f));for(let u=0;u<i;u++)if(u!=f&&Math.abs(r.getValue(c,u))>e)for(let o=c+1;o<t;o++)r.setValue(o,u,r.getValue(o,u)-r.getValue(o,f)*r.getValue(c,u))}}return a}};var Zn=class{constructor(e=[]){this.elements=[];this.elements=e}add(e){this.elements.includes(e)==!1&&this.elements.push(e)}toString(){let e="{";return e+=this.elements.sort().join(","),e+="}",e}},Et=class{constructor(e=[]){this.elements=[];this.elements=e}add(e){this.elements.includes(e)==!1&&this.elements.push(e)}toString(){let e="{";return e+=this.elements.sort().join(","),e+="}",e}},Qn=class{constructor(e=[]){this.elements=[];this.elements=e}add(e){this.elements.push(e)}toString(){let e="{";return e+=this.elements.join(","),e+="}",e}};var Gn=class{constructor(e){this.parent=null;this.parent=e}_create(e,r,t){let i=new Ee(e,r),a=0;for(let l=0;l<e;l++)for(let c=0;c<r;c++)i.setValue(l,c,t[a++]);return i}_clone(e){return e.clone()}_equalMatrices(e,r){return Ee.equal(e,r)}_unequalMatrices(e,r){return Ee.equal(e,r)==!1}_getElement(e,r,t,i){if(r<0||r>=e.getRows())throw new Ne(i,"matrix has "+e.getRows()+" rows. Cannot get row "+r);if(t<0||t>=e.getCols())throw new Ne(i,"matrix has "+e.getCols()+" columns. Cannot get column "+t);return e.getValue(r,t)}_setElement(e,r,t,i,a){if(r<0||r>=e.getRows())throw new Ne(a,"matrix has "+e.getRows()+" rows. Cannot get row "+r);if(t<0||t>=e.getCols())throw new Ne(a,"matrix has "+e.getCols()+" columns. Cannot get column "+t);e.setValue(r,t,i)}_eye(e){let r=new Ee(e,e);for(let t=0;t<e;t++)r.setValue(t,t,1);return r}_addMatrices(e,r,t){let i;try{i=Dt(Ee.matrix2mathjs(e),Ee.matrix2mathjs(r))}catch{throw new Ne(t,"dimensions do not match")}return Ee.mathjs2matrix(i)}_subMatrices(e,r,t){let i;try{i=br(Ee.matrix2mathjs(e),Ee.matrix2mathjs(r))}catch{throw new Ne(t,"dimensions do not match")}return Ee.mathjs2matrix(i)}_mulScalarMatrix(e,r){let t=Ar(e,Ee.matrix2mathjs(r));return Ee.mathjs2matrix(t)}_mulMatrixScalar(e,r){let t=Ar(Ee.matrix2mathjs(e),r);return Ee.mathjs2matrix(t)}_mulMatrices(e,r,t){let i;try{i=Ar(Ee.matrix2mathjs(e),Ee.matrix2mathjs(r))}catch{throw new Ne(t,"dimensions do not match")}return Ee.mathjs2matrix(i)}_randMatrix(e,r,t,i){let a=new Ee(e,r);for(let l=0;l<e;l++)for(let c=0;c<r;c++)a.setValue(l,c,this.parent.interpret_basic._randIntMinMax(t,i));return a}_randZMatrix(e,r,t,i){let a=new Ee(e,r);for(let l=0;l<e;l++)for(let c=0;c<r;c++)a.setValue(l,c,this.parent.interpret_basic._randIntMinMaxZ(t,i));return a}_det(e,r){try{return Vn(Ee.matrix2mathjs(e))}catch{throw new Ne(r,"matrix is not square")}}_minMatrix(e){return Vs(Ee.matrix2mathjs(e))}_maxMatrix(e){return Zs(Ee.matrix2mathjs(e))}_zeros(e,r){let t=new Ee(e,r);for(let i=0;i<e;i++)for(let a=0;a<r;a++)t.setValue(i,a,0);return t}_ones(e,r){let t=new Ee(e,r);for(let i=0;i<e;i++)for(let a=0;a<r;a++)t.setValue(i,a,1);return t}_floorMatrix(e){let r=e.clone();return r.floor(),r}_ceilMatrix(e){let r=e.clone();return r.ceil(),r}_roundMatrix(e){let r=e.clone();return r.round(),r}_transposeMatrix(e){return Ee.mathjs2matrix(Ha(Ee.matrix2mathjs(e)))}_triu(e){let r=e.clone();for(let t=0;t<r.getRows();t++)for(let i=0;i<r.getCols();i++)t>i&&r.setValue(t,i,0);return r}_linsolve(e,r){return Ee.mathjs2matrix(Ys(Ee.matrix2mathjs(e),ke.vector2list(r))).getCol(0)}_matrixFromVectors(e,r){let t=e.length;if(t==0)throw new Ne(r,"no vector given");let i=-1;for(let l=0;l<t;l++)if(l==0)i=e[0].getSize();else if(e[l].getSize()!=i)throw new Ne(r,"vector lengths differ");let a=new Ee(i,t);for(let l=0;l<i;l++)for(let c=0;c<t;c++)a.setValue(l,c,e[c].getValue(l));return a}_rank(e){return e.rank()}_isMatrixZero(e){return e.is_zero(1e-9)}_isMatrixSymmetric(e,r){if(e.getRows()!=e.getCols())throw new Ne(r,"matrix is not symmetric");return e.is_symmetric()}_isMatrixInvertible(e,r){if(e.getRows()!=e.getCols())throw new Ne(r,"matrix is not symmetric");let t=Vn(Ee.matrix2mathjs(e));return Math.abs(t)>1e-9}_invMatrix(e,r){if(this._isMatrixInvertible(e,r)==!1)throw new Ne(r,"matrix is not invertible");return Ee.mathjs2matrix(Zt(Ee.matrix2mathjs(e)))}_modMatrix(e,r,t){if(e.is_integer()==!1)throw new Ne(t,"matrix is not integral");return Ee.mod(e,r)}_matrixColumn(e,r,t){if(r<0||r>=e.getCols())throw new Ne(t,"invalid column");let i=new ke(e.getRows());for(let a=0;a<e.getRows();a++)i.setValue(a,e.getValue(a,r));return i}_matrixRow(e,r,t){if(r<0||r>=e.getRows())throw new Ne(t,"invalid row");let i=new ke(e.getCols());for(let a=0;a<e.getCols();a++)i.setValue(a,e.getValue(r,a));return i}_eigenvaluesSym(e,r){if(e.getRows()!=e.getCols())throw new Ne(r,"matrix is not symmetric");let t=Gs(Ee.matrix2mathjs(e)).values._data,i=new Et;for(let a of t)i.add(a);return i}};var Ie=class{constructor(e=0,r=0){this.real=e,this.imag=r}clone(){return new Ie(this.real,this.imag)}mulReal(e){this.real*=e,this.imag*=e}static mathjs2complex(e){return new Ie(e.re,e.im)}static complex2mathjs(e){return Vt(e.real,e.imag)}toMathJs(){return Ie.complex2mathjs(this)}toString(){return this.imag>=0?this.real+"+"+this.imag+"i":this.real+"-"+-this.imag+"i"}};var Yn=class{constructor(e){this.parent=null;this.parent=e}_create(e,r){return new Ie(e,r)}_unaryMinusComplex(e){return new Ie(-e.real,-e.imag)}_addComplex(e,r){return Ie.mathjs2complex(Dt(e.toMathJs(),r.toMathJs()))}_addNumberComplex(e,r){return new Ie(e+r.real,r.imag)}_addComplexNumber(e,r){return new Ie(e.real+r,e.imag)}_subComplex(e,r){return Ie.mathjs2complex(br(e.toMathJs(),r.toMathJs()))}_subNumberComplex(e,r){return new Ie(e-r.real,r.imag)}_subComplexNumber(e,r){return new Ie(e.real-r,e.imag)}_mulComplex(e,r){return Ie.mathjs2complex(Ar(e.toMathJs(),r.toMathJs()))}_divComplex(e,r){return Ie.mathjs2complex(Qs(e.toMathJs(),r.toMathJs()))}_mulNumberComplex(e,r){let t=r.clone();return t.mulReal(e),t}_mulComplexNumber(e,r){let t=e.clone();return t.mulReal(r),t}_powComplexComplex(e,r){return Ie.mathjs2complex(Un(Ie.complex2mathjs(e),Ie.complex2mathjs(r)))}_powComplexNumber(e,r){return Ie.mathjs2complex(Un(Ie.complex2mathjs(e),r))}_powNumberComplex(e,r){return Ie.mathjs2complex(Un(e,Ie.complex2mathjs(r)))}_conjComplex(e){return new Ie(e.real,-e.imag)}_complex(e,r){return new Ie(e,r)}_extractComplexReal(e){return e.real}_extractComplexImag(e){return e.imag}_sqrtC_number(e){return e>=0?new Ie(Math.sqrt(e),0):new Ie(0,Math.sqrt(e))}_sqrtC_complex(e){return Ie.mathjs2complex(kn(Ie.complex2mathjs(e)))}_absComplex(e){return Math.sqrt(e.real*e.real+e.imag*e.imag)}};var $n=class{constructor(e){this.parent=null;this.parent=e}_equalBooleans(e,r){return e==r}_equalNumbers(e,r){return Math.abs(e-r)<=1e-9}_unequalBooleans(e,r){return e!=r}_unequalNumbers(e,r){return Math.abs(e-r)>1e-9}_add(e,r){return e+r}_unaryMinus(e){return-e}_unaryNot(e){return!e}_sub(e,r){return e-r}_mul(e,r){return e*r}_div(e,r){return e/r}_mod(e,r){return e%r}_pow(e,r){return Math.pow(e,r)}_randIntMax(e){return Math.floor(Math.random()*e)}_randIntMaxZ(e){let r=0;for(;r==0;)r=this._randIntMax(e);return r}_randIntMinMax(e,r){return Math.floor(Math.random()*(r+1-e)+e)}_randIntMinMaxZ(e,r){let t=0;for(;t==0;)t=this._randIntMinMax(e,r);return t}_sin(e){return Math.sin(e)}_cos(e){return Math.cos(e)}_tan(e){return Math.tan(e)}_asin(e){return Math.asin(e)}_acos(e){return Math.acos(e)}_atan(e){return Math.atan(e)}_exp(e){return Math.exp(e)}_sqrt(e,r){if(e<0)throw new Ne(r,'parameter must be positive; otherwise use function "sqrtC"');return Math.sqrt(e)}_abs(e){return Math.abs(e)}_floor(e){return Math.floor(e)}_int2real(e){return e}_ceil(e){return Math.ceil(e)}_round(e){return Math.round(e)}_sign(e){return e==0?0:e<0?-1:1}_maxInt(e){return Math.max(...e)}_fac(e){let r=1;for(let t=1;t<=e;t++)r*=t;return r}_binomial(e,r){return Is(e,r)}};var wt=class extends Error{constructor(e){super(e),this.name="TermError"}},ue=class{constructor(e="",r=[]){this.op="";this.value="";this.o=[];this.op=e,this.o=r}static Op(e,r){let t=new ue;return t.op=e,t.o=r,t}static Const(e){let r=new ue;return r.op="#",r.value=e,r}static Var(e){let r=new ue;return r.op="$",r.value=e,r}clone(){let e=new ue;e.op=this.op,e.value=this.value;for(let r of this.o)e.o.push(r.clone());return e}eval(e={}){let r;switch(this.op){case"+":r=0;for(let t of this.o)r+=t.eval(e);break;case"*":r=1;for(let t of this.o)r*=t.eval(e);break;case"-":r=0;for(let t of this.o)r-=t.eval(e);break;case".-":r=-this.o[0].eval(e);break;case"^":r=Math.pow(this.o[0].eval(e),this.o[1].eval(e));break;case"#":r=this.value;break;case"sin":r=Math.sin(this.o[0].eval(e));break;case"cos":r=Math.cos(this.o[0].eval(e));break;case"tan":r=Math.tan(this.o[0].eval(e));break;case"asin":r=Math.asin(this.o[0].eval(e));break;case"atan":r=Math.atan(this.o[0].eval(e));break;case"exp":r=Math.exp(this.o[0].eval(e));break;case"$":if(this.value in e)return e[this.value];throw new wt('eval(..): unset variable "'+this.value+'"');default:throw new wt('eval(..): unimplemented operator "'+this.op+'"')}return r}diff(e){let r=null,t,i;switch(this.op){case".-":r=ue.Op(".-",[this.o[0].diff(e)]);break;case"+":r=ue.Op("+",[]);for(let a of this.o)r.o.push(a.diff(e));break;case"*":t=this.o[0],i=this.o.length==2?this.o[1]:ue.Op("*",this.o.slice(1)),r=ue.Op("+",[ue.Op("*",[t.diff(e),i.clone()]),ue.Op("*",[t.clone(),i.diff(e)])]);break;case"^":if(this.o[1].op!=="#")throw new wt("diff(..): u^v: operator ^ only implemented for constant v");r=ue.Op("*",[this.o[0].diff(e),this.o[1].clone(),ue.Op("^",[this.o[0].clone(),ue.Const(this.o[1].value-1)])]);break;case"exp":r=ue.Op("*",[this.o[0].diff(e),ue.Op("exp",[this.o[0].clone()])]);break;case"sin":r=ue.Op("*",[this.o[0].diff(e),ue.Op("cos",[this.o[0].clone()])]);break;case"cos":r=ue.Op(".-",[ue.Op("*",[this.o[0].diff(e),ue.Op("cos",[this.o[0].clone()])])]);break;case"$":r=ue.Const(this.value===e?1:0);break;case"#":r=ue.Const(0);break;default:throw new wt('diff(..): unimplemented operator "'+this.op+'"')}return r}integrate(e,r,t,i=1e-12){let a=0;for(let l=r;l<=t;l+=i)a+=this.eval({varId:l});return a/i}optimize(){let e=this.clone();for(let r=0;r<e.o.length;r++)e.o[r]=e.o[r].optimize();if(this.op==="*"){for(let r of e.o)if(r.op==="#"&&r.value==0)return ue.Const(0)}try{let r=e.eval();return ue.Const(r)}catch{}return e}setVariableValue(e,r){this.op==="$"&&(this.op="#",this.value=r);for(let t of this.o)t.setVariableValue(e,r)}getVariableIDs(){let e=new Set;this.op==="$"&&e.add(this.value);for(let r of this.o)e=new Set([...e,...r.getVariableIDs()]);return e}toString(){let e="";switch(this.op){case"#":case"$":e=""+this.value;break;case".-":e+="-("+this.o[0].toString()+")";break;default:if(this.op.length>2){e+=this.op+"(";for(let r=0;r<this.o.length;r++)r>0&&(e+=","),e+=this.o[r].toString();e+=")"}else{e+="(";for(let r=0;r<this.o.length;r++)r>0&&(e+=this.op),e+=this.o[r].toString();e+=")"}break}return e}};var Jn=class{constructor(e){this.parent=null;this.parent=e}var(e){return ue.Var(e)}_eval(e,r,t){let i=0;try{i=e.eval(r)}catch(a){throw new Ne(t,a.message)}return i}_numberToTerm(e){return ue.Const(e)}_addTermReal(e,r){return ue.Op("+",[e,ue.Const(r)])}_addRealTerm(e,r){return ue.Op("+",[ue.Const(e),r])}_addTermTerm(e,r){return ue.Op("+",[e,r])}_subTermReal(e,r){return ue.Op("-",[e,ue.Const(r)])}_subRealTerm(e,r){return ue.Op("-",[ue.Const(e),r])}_subTermTerm(e,r){return ue.Op("-",[e,r])}_mulTermReal(e,r){return ue.Op("*",[e,ue.Const(r)])}_mulRealTerm(e,r){return ue.Op("*",[ue.Const(e),r])}_mulTermTerm(e,r){return ue.Op("*",[e,r])}_divTermReal(e,r){return ue.Op("/",[e,ue.Const(r)])}_divRealTerm(e,r){return ue.Op("/",[ue.Const(e),r])}_divTermTerm(e,r){return ue.Op("/",[e,r])}_powTermReal(e,r){return ue.Op("^",[e,ue.Const(r)])}_powRealTerm(e,r){return ue.Op("^",[ue.Const(e),r])}_powTermTerm(e,r){return ue.Op("^",[e,r])}_sinTerm(e){return ue.Op("sin",[e])}_cosTerm(e){return ue.Op("cos",[e])}_tanTerm(e){return ue.Op("tan",[e])}_expTerm(e){return ue.Op("exp",[e])}_diffTerm(e,r){return e.diff(r.toString())}_ode(e,r){return ue.Op("ode",[e,r])}};var Hn=class{constructor(e){this.parent=null;this.parent=e}_createIntSet(e){let r=new Zn;for(let t of e)r.add(t);return r}_createRealSet(e){let r=new Et;for(let t of e)r.add(t);return r}_createComplexSet(e){let r=new Qn;for(let t of e)r.add(t);return r}_lenSet(e){return e.elements.length}};var Ne=class extends Error{constructor(e,r){super(""+e+":"+r),this.name="RunError"}},Wn=class{constructor(){this.interpret_vector=null;this.interpret_matrix=null;this.interpret_complex=null;this.interpret_basic=null;this.interpret_term=null;this.interpret_set=null;this.interpret_vector=new jt(this),this.interpret_matrix=new Gn(this),this.interpret_complex=new Yn(this),this.interpret_basic=new $n(this),this.interpret_term=new Jn(this),this.interpret_set=new Hn(this)}interpret(e,r){e+="return [";let t=0;for(let a of r)a.type.base!="TERM_VAR"&&(t>0&&(e+=", "),e+=a.id,t++);e+="];";let i=new Function("runtime",e);try{let a=i(this);for(let l=0;l<r.length;l++){let c=r[l];switch(c.type.base){case"BOOL":c.value=a[l];break;case"INT":case"REAL":c.value=a[l];break;case"COMPLEX":c.value=a[l];break;case"VECTOR":c.value=a[l];break;case"MATRIX":c.value=a[l];break;case"TERM":c.value=a[l];break;case"INT_SET":c.value=a[l];break;case"REAL_SET":c.value=a[l];break;case"COMPLEX_SET":c.value=a[l];break;default:throw new Ne("-1","interpret(..): unimplemented type "+c.type)}}}catch(a){throw new Ne("-1","interpret(..) failed: "+a)}}};var Js=Mt(ni());var $s=`

_equal(x:BOOL,y:BOOL):BOOL -> interpret_basic._equalBooleans;
_equal(x:INT,y:INT):BOOL -> interpret_basic._equalNumbers;
_equal(x:INT,y:REAL):BOOL -> interpret_basic._equalNumbers;
_equal(x:REAL,y:INT):BOOL -> interpret_basic._equalNumbers;
_equal(x:REAL,y:REAL):BOOL -> interpret_basic._equalNumbers;
_unequal(x:BOOL,y:BOOL):BOOL -> interpret_basic._unequalBooleans;
_unequal(x:INT,y:INT):BOOL -> interpret_basic._unequalNumbers;
_unequal(x:INT,y:REAL):BOOL -> interpret_basic._unequalNumbers;
_unequal(x:REAL,y:INT):BOOL -> interpret_basic._unequalNumbers;
_unequal(x:REAL,y:REAL):BOOL -> interpret_basic._unequalNumbers;
_add(x:INT,y:INT):INT -> interpret_basic._add;
_add(x:INT,y:REAL):REAL -> interpret_basic._add;
_add(x:REAL,y:INT):REAL -> interpret_basic._add;
_add(x:REAL,y:REAL):REAL -> interpret_basic._add;
_unaryMinus(x:INT):INT -> interpret_basic._unaryMinus;
_unaryMinus(x:REAL):REAL -> interpret_basic._unaryMinus;
_unaryNot(x:BOOL):BOOL -> interpret_basic._unaryNot;
_sub(x:INT,y:INT):INT -> interpret_basic._sub;
_sub(X:INT,y:REAL):REAL -> interpret_basic._sub;
_sub(x:REAL,y:INT):REAL -> interpret_basic._sub;
_sub(x:REAL,y:REAL):REAL -> interpret_basic._sub;
_mul(x:INT,y:INT):INT -> interpret_basic._mul;
_mul(x:INT,y:REAL):REAL -> interpret_basic._mul;
_mul(x:REAL,y:INT):REAL -> interpret_basic._mul;
_mul(x:REAL,y:REAL):REAL -> interpret_basic._mul;
_div(x:INT,y:INT):REAL -> interpret_basic._div;
_div(x:INT,y:REAL):REAL -> interpret_basic._div;
_div(x:REAL,y:INT):REAL -> interpret_basic._div;
_div(x:REAL,y:REAL):REAL -> interpret_basic._div;
_mod(x:INT,y:INT):INT -> interpret_basic._mod;
_pow(x:INT,y:INT):INT -> interpret_basic._pow;
_pow(x:INT,y:REAL):REAL -> interpret_basic._pow;
_pow(x:REAL,y:INT):REAL -> interpret_basic._pow;
_pow(x:REAL,y:REAL):REAL -> interpret_basic._pow;
rand(max:INT): INT -> interpret_basic._randIntMax;
rand(min:INT,max:INT): INT -> interpret_basic._randIntMinMax;
randZ(min:INT,max:INT): INT -> interpret_basic._randIntMinMaxZ;
sin(x:INT): REAL -> interpret_basic._sin;
sin(x:REAL): REAL -> interpret_basic._sin;
cos(x:INT): REAL -> interpret_basic._cos;
cos(x:REAL): REAL -> interpret_basic._cos;
tan(x:INT): REAL -> interpret_basic._tan;
tan(x:REAL): REAL -> interpret_basic._tan;
asin(x:INT): REAL -> interpret_basic._asin;
asin(x:REAL): REAL -> interpret_basic._asin;
acos(x:INT): REAL -> interpret_basic._acos;
acos(x:REAL): REAL -> interpret_basic._acos;
atan(x:INT): REAL -> interpret_basic._atan;
atan(x:REAL): REAL -> interpret_basic._atan;
exp(x:INT):REAL -> interpret_basic._exp;
exp(x:REAL):REAL -> interpret_basic._exp;
sqrt(x:INT): REAL -> interpret_basic._sqrt;
sqrt(x:REAL): REAL -> interpret_basic._sqrt;
abs(x:INT):INT -> interpret_basic._abs;
abs(x:REAL):REAL -> interpret_basic._abs;
floor(x:INT): INT -> interpret_basic._floor;
floor(x:REAL): INT -> interpret_basic._floor;
int(x:INT): INT -> interpret_basic._floor;
int(x:REAL): INT -> interpret_basic._floor;
real(x:INT): REAL -> interpret_basic._int2real;
ceil(x:INT): INT -> interpret_basic._ceil;
ceil(x:REAL): INT -> interpret_basic._ceil;
round(x:INT): INT -> interpret_basic._round;
round(x:REAL): INT -> interpret_basic._round;
sign(x:INT): INT -> interpret_basic._sign;
sign(x:REAL): INT -> interpret_basic._sign;
max(list:INT_LIST): INT -> interpret_basic._maxInt;
fac(x:INT): INT -> interpret_basic._fac;
binomial(n:INT,k:INT): INT -> interpret_basic._binomial;
set(elements:INT_LIST): SET_INT -> interpret_set._createIntSet;
set(elements:REAL_LIST): SET_REAL -> interpret_set._createRealSet;
set(elements:COMPLEX_LIST): SET_COMPLEX -> interpret_set._createComplexSet;
len(s:SET_INT): INT -> interpret_set._lenSet;
_unaryMinus(x:COMPLEX):COMPLEX -> interpret_complex._unaryMinusComplex;
_add(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._addComplex;
_add(x:INT, y:COMPLEX): COMPLEX -> interpret_complex._addNumberComplex;
_add(x:REAL, y:COMPLEX): COMPLEX -> interpret_complex._addNumberComplex;
_add(x:COMPLEX, y:INT): COMPLEX -> interpret_complex._addComplexNumber;
_add(x:COMPLEX, y:REAL): COMPLEX -> interpret_complex._addComplexNumber;
_sub(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._subComplex;
_sub(x:INT, y:COMPLEX): COMPLEX -> interpret_complex._subNumberComplex;
_sub(x:REAL, y:COMPLEX): COMPLEX -> interpret_complex._subNumberComplex;
_sub(x:COMPLEX, y:INT): COMPLEX -> interpret_complex._subComplexNumber;
_sub(x:COMPLEX, y:REAL): COMPLEX -> interpret_complex._subComplexNumber;
_mul(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._mulComplex;
_div(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._divComplex;
_mul(x:INT,y:COMPLEX):COMPLEX -> interpret_complex._mulNumberComplex;
_mul(x:REAL,y:COMPLEX):COMPLEX -> interpret_complex._mulNumberComplex;
_mul(x:COMPLEX,y:INT):COMPLEX -> interpret_complex._mulComplexNumber;
_mul(x:COMPLEX,y:REAL):COMPLEX -> interpret_complex._mulComplexNumber;
_pow(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._powComplexComplex;
_pow(x:COMPLEX, y:INT):COMPLEX -> interpret_complex._powComplexNumber;
_pow(x:COMPLEX, y:REAL):COMPLEX -> interpret_complex._powComplexNumber;
_pow(x:INT,y:COMPLEX):COMPLEX -> interpret_complex._powNumberComplex;
_pow(x:REAL,y:COMPLEX):COMPLEX -> interpret_complex._powNumberComplex;
conj(x:COMPLEX):COMPLEX -> interpret_complex._conjComplex;
complex(x:INT,y:INT):COMPLEX -> interpret_complex._complex;
complex(x:INT,y:REAL):COMPLEX -> interpret_complex._complex;
complex(x:REAL,y:INT):COMPLEX -> interpret_complex._complex;
complex(x:REAL,y:REAL):COMPLEX -> interpret_complex._complex;
real(x:COMPLEX): REAL -> interpret_complex._extractComplexReal;
imag(x:COMPLEX): REAL -> interpret_complex._extractComplexImag;
sqrtC(x:INT): COMPLEX -> interpret_complex._sqrtC_number;
sqrtC(x:REAL): COMPLEX -> interpret_complex._sqrtC_number;
sqrtC(x:COMPLEX): COMPLEX -> interpret_complex._sqrtC_complex;
abs(x:COMPLEX): REAL -> interpret_complex._absComplex;
_add(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._addVectors;
_sub(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._subVectors;
_mul(x:INT,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
_mul(x:REAL,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
dot(x:VECTOR, y:VECTOR): REAL -> interpret_vector._dotVectors;
cross(x:VECTOR, y:VECTOR): VECTOR -> interpret_vector._crossVectors;
norm2(x:VECTOR): REAL -> interpret_vector._norm2vec;
zeros<size:INT>(): VECTOR -> interpret_vector._zerosVector;
rand<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randVector;
randZ<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randZVector;
is_zero(x:VECTOR): BOOL -> interpret_vector._isVectorZero;
_equal(x:MATRIX, y:MATRIX): BOOL -> interpret_matrix._equalMatrices;
_unequal(x:MATRIX, y:MATRIX): BOOL -> interpret_matrix._unequalMatrices;
eye(n:INT): MATRIX -> interpret_matrix._eye;
_add(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._addMatrices;
_sub(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._subMatrices;
_mul(x:INT,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x:REAL,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x: MATRIX, y: INT): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x: MATRIX, y: REAL): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._mulMatrices;
rand<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randMatrix;
randZ<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randZMatrix;
det(x:MATRIX): REAL -> interpret_matrix._det;
min(x:MATRIX): REAL -> interpret_matrix._minMatrix;
max(x:MATRIX): REAL -> interpret_matrix._maxMatrix;
zeros<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._zeros;
ones<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._ones;
floor(x:MATRIX): MATRIX -> interpret_matrix._floorMatrix;
ceil(x:MATRIX): MATRIX -> interpret_matrix._ceilMatrix;
round(x:MATRIX): MATRIX -> interpret_matrix._roundMatrix;
transpose(x:MATRIX): MATRIX -> interpret_matrix._transposeMatrix;
triu(x:MATRIX): MATRIX -> interpret_matrix._triu;
linsolve(A:MATRIX,b:VECTOR): VECTOR -> interpret_matrix._linsolve;
matrix(v:VECTOR_LIST): MATRIX -> interpret_matrix._matrixFromVectors;
rank(A:MATRIX): INT -> interpret_matrix._rank;
is_zero(x:MATRIX): BOOL -> interpret_matrix._isMatrixZero;
is_symmetric(x:MATRIX): BOOL -> interpret_matrix._isMatrixSymmetric;
is_invertible(x:MATRIX): BOOL -> interpret_matrix._isMatrixInvertible;
inv(x:MATRIX): MATRIX -> interpret_matrix._invMatrix;
_mod(x:MATRIX,y:INT):MATRIX -> interpret_matrix._modMatrix;
column(x:MATRIX, c:INT): VECTOR -> interpret_matrix._matrixColumn;
row(x:MATRIX, r:INT): VECTOR -> interpret_matrix._matrixRow;
eigenvalues_sym(x:MATRIX): SET_REAL -> interpret_matrix._eigenvaluesSym;
_numberToTerm(x:INT):TERM -> interpret_term._numberToTerm;
_add(x:TERM,y:INT):TERM -> interpret_term._addTermReal;
_add(x:TERM,y:REAL):TERM -> interpret_term._addTermReal;
_add(x:INT,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:REAL,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:TERM,y:TERM):TERM -> interpret_term._addTermTerm;
_sub(x:TERM,y:INT):TERM -> interpret_term._subTermReal;
_sub(x:TERM,y:REAL):TERM -> interpret_term._subTermReal;
_sub(x:INT,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:REAL,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:TERM,y:TERM):TERM -> interpret_term._subTermTerm;
_mul(x:TERM,y:INT):TERM -> interpret_term._mulTermReal;
_mul(x:TERM,y:REAL):TERM -> interpret_term._mulTermReal;
_mul(x:INT,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:REAL,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:TERM,y:TERM):TERM -> interpret_term._mulTermTerm;
_div(x:TERM,y:INT):TERM -> interpret_term._divTermReal;
_div(x:TERM,y:REAL):TERM -> interpret_term._divTermReal;
_div(x:INT,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:REAL,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:TERM,y:TERM):TERM -> interpret_term._divTermTerm;
_pow(x:TERM,y:INT):TERM -> interpret_term._powTermReal;
_pow(x:TERM,y:REAL):TERM -> interpret_term._powTermReal;
_pow(x:INT,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:REAL,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:TERM,y:TERM):TERM -> interpret_term._powTermTerm;
sin(x:TERM): TERM -> interpret_term._sinTerm;
cos(x:TERM): TERM -> interpret_term._cosTerm;
tan(x:TERM): TERM -> interpret_term._tanTerm;
exp(x:TERM): TERM -> interpret_term._expTerm;
diff(x:TERM, varId:TERM): TERM -> interpret_term._diffTerm;
ode(lhs:TERM,rhs:TERM): TERM -> interpret_term._ode;

`;var Kn=class{constructor(){this.lexer=null;this.symTab=[];this.loopLevel=0;this.scope=0}getSymbol(e){for(let r of this.symTab)if(r.id===e)return r;return null}removeSymTabEntry(e){let r=[];for(let t of this.symTab)t!==e&&r.push(t);this.symTab=r}getLocalSymbols(){let e=[];for(let r of this.symTab)if(r.kind==="LOCAL"){if(r.type.base==="TERM_VAR")continue;e.push(r)}return e}parse(e){return this.loopLevel=0,this.scope=0,this.symTab=lo($s),this.lexer=new Js.Lexer,this.lexer.configureSingleLineComments("%"),this.lexer.configureMultiLineComments("/*","*/"),this.lexer.enableEmitNewlines(!1),this.lexer.enableEmitIndentation(!1),this.lexer.enableBackslashLineBreaks(!1),this.lexer.pushSource("FILE",e),this.lexer.setTerminals(["&&","||","==","!=",">=","<=","++","--"]),this.parseProgram().str}parseProgram(){let e=new sr;for(;this.lexer.isNotEND();){let r=this.parseStatement();e.str+=r.str}return e}parseStatement(){if(this.lexer.isTER("let"))return this.parseDeclaration();if(this.lexer.isTER("if"))return this.parseIf();if(this.lexer.isTER("do"))return this.parseDo();if(this.lexer.isTER("while"))return this.parseWhile();if(this.lexer.isTER("function"))return this.parseFunction();if(this.lexer.isTER("return"))return this.parseReturn();if(this.lexer.isTER("break"))return this.parseBreak();if(this.lexer.isTER("continue"))return this.parseContinue();{let e=this.parseExpression();return this.lexer.EOS(),new sr(e.code.str+";")}}parseDeclaration(){let e=new sr;this.lexer.TER("let");let r=[];if(r.push(this.lexer.ID()),this.lexer.isTER("(")){let t=r[0];this.lexer.next();let i=[];for(i.push(this.lexer.ID());this.lexer.isTER(",");)this.lexer.next(),i.push(this.lexer.ID());for(let f of i){let u=new ur("TERM_VAR"),o=new Nr(f,"LOCAL",u,this.scope,[]);this.symTab.push(o)}this.lexer.TER(")"),this.lexer.TER("=");let a=this.parseExpression();if(a.type.base!=="TERM")switch(a.type.base){case"INT":case"REAL":a.code.str="runtime.interpret_term._numberToTerm("+a.code.str+")",a.type.base="TERM";break;default:this.lexer.error("right-hand side is not a term")}e.str+="let "+t+" = "+a.code.str+";";for(let f=0;f<i.length;f++)this.symTab.pop();let l=[];for(let f of i)l.push(new Nr(f,"PARAMETER",new ur("TERM_VAR"),this.scope+1,[]));let c=new Nr(t,"LOCAL",new ur("TERM"),this.scope,l);this.symTab.push(c),this.lexer.EOS()}else{let t=!1;for(;this.lexer.isTER(":")||this.lexer.isTER("/");)this.lexer.isTER("/")&&(t=!0),this.lexer.isTER(":")&&t==!0&&this.lexer.error('cannot mix ":" and "/"'),this.lexer.next(),r.push(this.lexer.ID());this.lexer.TER("=");let i=this.parseExpression();for(let a of r){let l=new Nr(a,"LOCAL",i.type,this.scope,[]);this.symTab.push(l)}if(t){i.type.base!=="INT"&&i.type.base!=="MATRIX"&&this.lexer.error('declaration operator "/" is unimplemented for type '+i.type.base),e.str+="let ";for(let a=0;a<r.length;a++){let l=r[a];a>0&&(e.str+=", "),e.str+=l}e.str+=`;
`;for(let a=0;a<r.length;a++){let l=r[a];if(a==0)e.str+=l+" = "+i.code.str+`;
`;else{e.str+="do { "+l+" = "+i.code.str+"; } while (";let c="";for(let f=0;f<a;f++)c.length>0&&(c+=" || "),i.type.base==="INT"?c+=l+" == "+r[f]:c+="runtime.interpret_matrix._equalMatrices("+l+","+r[f]+")";e.str+=c,e.str+=`);
`}}}else for(let a of r)e.str+="let "+a+" = "+i.code.str+";";this.lexer.EOS()}return e}parseExpression(){let e=this.parseOr();for(;this.lexer.isTER("=");){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parseOr();e.code.tmp.includes("setElement")?(t.type.base!=="INT"&&t.type.base!=="REAL"&&this.lexer.error("element must be of type INT or REAL."),e.code.str=e.code.tmp.replace("\xA7RHS\xA7",t.code.str),e.type.base="VOID"):(e.type.base==="INT"||e.type.base==="REAL")&&(t.type.base==="INT"||t.type.base==="REAL")?(e.type.base="INT",e.code.str=e.code.str+" "+r+" "+t.code.str):e.type.base==="VECTOR"&&t.type.base==="VECTOR"?(e.type.base="VECTOR",e.code.str=e.code.str+" "+r+" runtime.interpret_vector._clone("+t.code.str+")"):e.type.base==="MATRIX"&&t.type.base==="MATRIX"?(e.type.base="MATRIX",e.code.str=e.code.str+" "+r+" runtime.interpret_matrix._clone("+t.code.str+")"):this.lexer.errorTypesInBinaryOperation(r,e.type.base,t.type.base)}return e}parseOr(){let e=this.parseAnd();for(;this.lexer.isTER("||");){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parseAnd();e.type.base=="BOOL"&&t.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+t.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,t.type.base)}return e}parseAnd(){let e=this.parseEqual();for(;this.lexer.isTER("&&");){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parseEqual();e.type.base==="BOOL"&&t.type.base==="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+t.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,t.type.base)}return e}parseEqual(){let e=this.parseRelational();if(this.lexer.isTER("==")||this.lexer.isTER("!=")){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parseRelational();e=this.call(this.getSymbol(r==="=="?"_equal":"_unequal"),[],[e,t])}return e}parseRelational(){let e=this.parseAdd();if(this.lexer.isTER("<=")||this.lexer.isTER(">=")||this.lexer.isTER("<")||this.lexer.isTER(">")){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parseAdd();(e.type.base==="INT"||e.type.base==="REAL")&&(t.type.base==="INT"||t.type.base==="REAL")?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+t.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,t.type.base)}return e}parseAdd(){let e=this.parseMul();for(;this.lexer.isTER("+")||this.lexer.isTER("-");){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parseMul();e=this.call(this.getSymbol(r==="+"?"_add":"_sub"),[],[e,t])}return e}parseMul(){let e=this.parsePow();for(;this.lexer.isTER("*")||this.lexer.isTER("/")||this.lexer.isTER("mod");){let r=this.lexer.getToken().token;this.lexer.next();let t=this.parsePow();e=this.call(this.getSymbol(r==="*"?"_mul":r==="/"?"_div":"_mod"),[],[e,t])}return e}parsePow(){let e=this.parseUnary();if(this.lexer.isTER("^")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_pow"),[],[e,r])}return e}parseUnary(){let e=this.parseUnaryExpression();return e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isNotTER("(")&&this.lexer.isNotTER("<")&&this.lexer.errorExpected(["(","<"]),(this.lexer.isTER("++")||this.lexer.isTER("--")||e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isTER("<")||this.lexer.isTER("(")||this.lexer.isTER("["))&&(e=this.parseUnaryPostfix(e)),e}parseUnaryExpression(){let e=new Nt;if(this.lexer.isTER("true"))e.code.str=" true ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isTER("false"))e.code.str=" false ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isINT()){let r=this.lexer.INT();e.code.str=" "+r+" ",e.type.base="INT",this.lexer.isTER("i")&&(this.lexer.next(),e.code.str="runtime.interpret_complex._create(0,"+r+")",e.type.base="COMPLEX")}else if(this.lexer.isREAL()){let r=this.lexer.REAL();e.code.str=" "+r+" ",e.type.base="REAL",this.lexer.isTER("i")&&(this.lexer.next(),e.code.str="runtime.interpret_complex._create(0,"+r+")",e.type.base="COMPLEX")}else if(this.lexer.isTER("(")){this.lexer.next();let r=this.parseExpression();this.lexer.TER(")"),e.code.str=" ( "+r.code.str+" ) ",e.type=r.type}else if(this.lexer.isTER("[")){this.lexer.next();let r=0,t=-1,i=-1,a=[];for(;this.lexer.isNotTER("]");){r>0&&this.lexer.TER(",");let f=this.parseMatrixRow();r==0?i=f.length:i!=f.length&&this.lexer.error("inconsistent number of matrix columns");for(let u of f)a.push(u);r++}t=r,this.lexer.TER("]");let l="[",c=0;for(let f of a)c>0&&(l+=", "),l+=f.code.str,c++;l+="]",e.code.str="runtime.interpret_matrix._create("+t+", "+i+", "+l+")",e.type.base="MATRIX"}else if(this.lexer.isID()){let r=this.lexer.ID();e.sym=this.getSymbol(r),e.sym==null&&this.lexer.errorUnknownSymbol(r),e.sym.type.base==="TERM_VAR"?(e.type=new ur("TERM"),e.code.str='runtime.interpret_term.var("'+r+'")'):(e.type=e.sym.type.clone(),e.code.str=" "+r)}else if(this.lexer.isTER("-")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_unaryMinus"),[],[r])}else if(this.lexer.isTER("!")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_unaryNot"),[],[r])}else this.lexer.errorExpected(["INT","IMAG","REAL","(","ID"]);return e}parseMatrixRow(){this.lexer.TER("[");let e=0,r=[];for(;this.lexer.isNotTER("]");){e>0&&this.lexer.TER(",");let t=this.parseExpression();t.type.base!=="INT"&&t.type.base!=="REAL"&&this.lexer.error("matrix element must be of type INT or REAL."),r.push(t),e++}return this.lexer.TER("]"),r}parseUnaryPostfix(e){if(this.lexer.isTER("++"))this.lexer.next(),e.code.str+=" ++ ";else if(this.lexer.isTER("--"))this.lexer.next(),e.code.str+=" -- ";else if(this.lexer.isTER("<")||this.lexer.isTER("(")){let r=[],t=[];if(this.lexer.isTER("<")){this.lexer.next();let i=0;for(;this.lexer.isNotTER(">");)i>0&&this.lexer.TER(","),r.push(this.parseUnary()),i++;this.lexer.TER(">")}if(this.lexer.TER("("),e.sym==null&&this.lexer.errorNotAFunction(),e.sym.kind=="FUNCTION"||e.sym.kind=="LOCAL"&&e.sym.type.base==="TERM"){let i=0;for(;this.lexer.isNotTER(")");)i>0&&this.lexer.TER(","),t.push(this.parseExpression()),i++;this.lexer.TER(")")}else this.lexer.errorNotAFunction();if(e.sym.kind=="FUNCTION")e=this.call(e.sym,r,t);else{e.sym.subSymbols.length!=t.length&&this.lexer.error("invalid parameters for function "+e.sym.id);let i="{";for(let a=0;a<t.length;a++)t[a].type.base!=="INT"&&t[a].type.base!=="REAL"&&this.lexer.error("parameters for function must be of type INT or REAL."),a>0&&(i+=", "),i+=e.sym.subSymbols[a].id+": "+t[a].code.str;i+="}",e.code.str="runtime.interpret_term._eval("+e.sym.id+", "+i+", "+this.getTokenPosStr()+")",e.type=new ur("REAL")}}else if(this.lexer.isTER("[")){this.lexer.next();let r=[],t=0;for(;this.lexer.isNotTER("]");)t>0&&this.lexer.TER(","),r.push(this.parseExpression()),t++;if(this.lexer.TER("]"),e.type.base==="VECTOR")r.length!=1&&this.lexer.error("expected one index"),r[0].type.base!=="INT"&&this.lexer.error("index is not of type integer"),e.type.base="REAL",e.code.str="runtime.interpret_vector._getElement("+e.sym.id+", "+r[0].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_vector._setElement("+e.sym.id+", "+r[0].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")";else if(e.type.base==="MATRIX"){r.length!=2&&this.lexer.error("expected two indices");for(let i=0;i<r.length;i++)r[i].type.base!=="INT"&&this.lexer.error("index "+(i+1)+" is not of type integer");e.type.base="REAL",e.code.str="runtime.interpret_matrix._getElement("+e.sym.id+", "+r[0].code.str+", "+r[1].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_matrix._setElement("+e.sym.id+", "+r[0].code.str+", "+r[1].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")"}else this.lexer.error("can only index a matrix or a vector")}else this.lexer.errorExpected(["++","--","(","["]);return e}call(e,r,t){let i=new Nt;i.sym=e,i.type=e.type.clone();let a=e;for(;a!=null;){let l=[],c=[];for(let f of a.subSymbols)f.kind=="DIMENSION"?l.push(f):f.kind==="PARAMETER"&&c.push(f);if(l.length==r.length&&c.length==t.length||c.length==1&&(c[0].type.base=="INT_LIST"||c[0].type.base=="REAL_LIST"||c[0].type.base=="COMPLEX_LIST"||c[0].type.base=="VECTOR_LIST")){let f=c.length==1&&c[0].type.base=="INT_LIST",u=c.length==1&&c[0].type.base=="REAL_LIST",o=c.length==1&&c[0].type.base=="COMPLEX_LIST",s=c.length==1&&c[0].type.base=="VECTOR_LIST",p=!0;for(let h=0;h<l.length;h++)if(l[h].type.base!==r[h].type.base){p=!1;break}if(f||u||o||s){for(let h=0;h<t.length;h++)if(f&&t[h].type.base!="INT"||u&&t[h].type.base!="REAL"||o&&t[h].type.base!="COMPLEX"||s&&t[h].type.base!="VECTOR"){p=!1;break}}else for(let h=0;h<c.length;h++)if(c[h].type.base!==t[h].type.base){p=!1;break}if(p){i.type=a.type.clone(),i.code.str="runtime."+a.runtimeId+"(";let h=0;for(let v=0;v<l.length;v++)h>0&&(i.code.str+=", "),i.code.str+=r[v].code.str,h++;if(f||u||o||s){h>0&&(i.code.str+=", "),i.code.str+="[";for(let v=0;v<t.length;v++)v>0&&(i.code.str+=","),i.code.str+=t[v].code.str;i.code.str+="]",h++}else for(let v=0;v<c.length;v++)h>0&&(i.code.str+=", "),i.code.str+=t[v].code.str,h++;h>0&&(i.code.str+=", "),i.code.str+=this.getTokenPosStr(),h++,i.code.str+=")",i.sym=null;break}}a=a.functionOverloadSuccessor}if(a==null){let l="";for(let c of t)l.length>0&&(l+=", "),l+=c.type.toString();this.lexer.error('no matching function prototype for calling "'+i.sym.id+'" with types ('+l+")")}return i}parseIf(){let e=new sr;this.lexer.TER("if"),this.lexer.TER("(");let r=this.parseExpression();r.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),e.str="if ("+r.code.str+")";let t=this.parseBlock();if(e.str+=t.str,this.lexer.isTER("else")){this.lexer.next(),e.str+=" else ";let i=this.parseBlock();e.str+=i.str}return e}parseBlock(){let e=new sr;if(this.lexer.isTER("{")){for(this.lexer.next(),e.str+="{";this.lexer.isNotTER("}");)e.str+=this.parseStatement().str;return this.lexer.TER("}"),e.str+="}",e}else return this.parseStatement()}parseDo(){this.lexer.TER("do"),this.loopLevel++;let e=this.parseBlock();this.loopLevel--,this.lexer.TER("while"),this.lexer.TER("(");let r=this.parseExpression();return r.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.lexer.EOS(),new sr(" do "+e.str+" while( "+r.code.str+" ); ")}parseWhile(){this.lexer.TER("while"),this.lexer.TER("(");let e=this.parseExpression();e.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.loopLevel++;let r=this.parseBlock();return this.loopLevel--,new sr(" while( "+e.code.str+" ) "+r.str)}parseFunction(){this.lexer.TER("function");let e=this.lexer.ID();this.lexer.TER("(");let r=0;for(;this.lexer.isNotTER(")");){r>0&&this.lexer.TER(",");let i=this.lexer.ID();r++}return this.lexer.TER(")"),this.parseBlock()}parseReturn(){if(this.lexer.TER("return"),this.lexer.isEOS()==!1){let e=this.parseExpression();return this.lexer.EOS(),new sr(" return "+e.code)}else return this.lexer.EOS(),new sr(" return ")}parseBreak(){return this.lexer.TER("break"),this.loopLevel==0&&this.lexer.error("break not allowed outside loop"),this.lexer.EOS(),new sr(" break ")}parseContinue(){return this.lexer.TER("continue"),this.loopLevel==0&&this.lexer.error("continue not allowed outside loop"),this.lexer.EOS(),new sr(" continue ")}getTokenPosStr(){return"'"+this.lexer.getToken().row+":"+this.lexer.getToken().col+"'"}};var jn="";function Jm(n,e=!1){let r=new Kn;jn=r.parse(n);let t=r.getLocalSymbols();return e&&console.log(jn),new Wn().interpret(jn,t),t}return Nf(Hm);})();
/*!
 *  decimal.js v10.4.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
