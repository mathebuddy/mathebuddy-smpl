"use strict";var mathebuddySMPL=(()=>{var Ns=Object.create;var Lt=Object.defineProperty;var Fs=Object.getOwnPropertyDescriptor;var Ss=Object.getOwnPropertyNames;var Bs=Object.getPrototypeOf,Is=Object.prototype.hasOwnProperty;var Nr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Rs=(t,e)=>{for(var r in e)Lt(t,r,{get:e[r],enumerable:!0})},ga=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ss(e))!Is.call(t,i)&&i!==r&&Lt(t,i,{get:()=>e[i],enumerable:!(n=Fs(e,i))||n.enumerable});return t};var ht=(t,e,r)=>(r=t!=null?Ns(Bs(t)):{},ga(e||!t||!t.__esModule?Lt(r,"default",{value:t,enumerable:!0}):r,t)),Ls=t=>ga(Lt({},"__esModule",{value:!0}),t);var Ea=Nr(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.getStr=pr.setLanguage=pr.LanguageText=pr.Language=void 0;var Ot;(function(t){t[t.EN=0]="EN",t[t.DE=1]="DE"})(Ot=pr.Language||(pr.Language={}));var fr;(function(t){t[t.EXPECTED=0]="EXPECTED",t[t.EXPECTED_ONE_OF=1]="EXPECTED_ONE_OF",t[t.CONDITION_NOT_BOOLEAN=2]="CONDITION_NOT_BOOLEAN",t[t.UNKNOWN_SYMBOL=3]="UNKNOWN_SYMBOL",t[t.SYMBOL_IS_NOT_A_FUNCTION=4]="SYMBOL_IS_NOT_A_FUNCTION",t[t.BIN_OP_INCOMPATIBLE_TYPES=5]="BIN_OP_INCOMPATIBLE_TYPES"})(fr=pr.LanguageText||(pr.LanguageText={}));function Os(t){Da=t}pr.setLanguage=Os;function Ps(t){return Ln[t+"_"+Da]}pr.getStr=Ps;var Da=Ot.EN,Ln={};function $r(t,e){Ln[t+"_"+Ot.EN]=e}function Qr(t,e){Ln[t+"_"+Ot.DE]=e}$r(fr.EXPECTED,"expected");Qr(fr.EXPECTED,"erwarte");$r(fr.EXPECTED_ONE_OF,"expected one of");Qr(fr.EXPECTED_ONE_OF,"erwarte Token aus Liste");$r(fr.CONDITION_NOT_BOOLEAN,"condition must be boolean");Qr(fr.CONDITION_NOT_BOOLEAN,"Bedingung muss Boolsch sein");$r(fr.UNKNOWN_SYMBOL,"unknown symbol");Qr(fr.UNKNOWN_SYMBOL,"unbekanntes Symbol");$r(fr.SYMBOL_IS_NOT_A_FUNCTION,"symbol is not a function");Qr(fr.SYMBOL_IS_NOT_A_FUNCTION,"Symbol ist keine Funktion");$r(fr.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP is incompatible for types $T1 and $T2");Qr(fr.BIN_OP_INCOMPATIBLE_TYPES,"Operator $OP ist inkompatibel mit den Typen $T1 und $T2")});var ya=Nr(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.LexerState=void 0;var vt=class{constructor(){this.i=0,this.n=-1,this.row=1,this.col=1,this.indent=0,this.lastIndent=0,this.stack=[]}copy(){let e=new vt;e.i=this.i,e.n=this.n,e.row=this.row,e.col=this.col,e.indent=this.indent,e.lastIndent=this.lastIndent;for(let r=0;r<this.stack.length;r++)e.stack.push(this.stack[r].copy());return e}};Pt.LexerState=vt});var _a=Nr(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.LexerToken=Vr.LexerTokenType=void 0;var wa;(function(t){t.DEL="DEL",t.TER="TER",t.INT="INT",t.BIGINT="BIGINT",t.REAL="REAL",t.HEX="HEX",t.STR="STR",t.ID="ID",t.END="END"})(wa=Vr.LexerTokenType||(Vr.LexerTokenType={}));var dt=class{constructor(){this.token="",this.type=wa.TER,this.value=0,this.valueBigint=0n,this.fileID="",this.row=0,this.col=0}toString(){let e=this.token;e=e.replace(/\n/g,"\\n"),e=e.replace(/\t/g,"\\t");let r=this.fileID+":"+this.row+":"+this.col;return r+=': "'+e+'" ('+this.type+")",r}copy(){let e=new dt;return e.token=this.token,e.type=this.type,e.value=this.value,e.fileID=this.fileID,e.row=this.row,e.col=this.col,e}};Vr.LexerToken=dt});var Ca=Nr(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.Lexer=Fr.ParseError=Fr.LexerFile=void 0;var le=Ea(),zs=ya(),W=_a(),zt=class{constructor(){this.stateBackup=null,this.tokenBackup=null,this.id="",this.sourceCode=""}};Fr.LexerFile=zt;var ke=class extends Error{constructor(e){super(e),this.name="ParseError"}};Fr.ParseError=ke;var On=class{constructor(){this.terminals=new Set,this.fileStack=[],this.token=null,this.lastToken=null,this.state=null,this.singleLineCommentStart="//",this.multiLineCommentStart="/*",this.multilineCommentEnd="*/",this.emitNewline=!1,this.emitHex=!0,this.emitInt=!0,this.emitReal=!0,this.emitBigint=!0,this.emitDoubleQuotes=!0,this.emitIndentation=!1,this.lexerFilePositionPrefix="!>",this.allowBackslashLineBreaks=!1,this.putTrailingSemicolon=[],this.multicharDelimiters=[]}configureSingleLineComments(e="//"){this.singleLineCommentStart=e}configureMultiLineComments(e="/*",r="*/"){this.multiLineCommentStart=e,this.multilineCommentEnd=r}configureLexerFilePositionPrefix(e="!>"){this.lexerFilePositionPrefix=e}enableEmitNewlines(e){this.emitNewline=e}enableEmitHex(e){this.emitHex=e}enableEmitInt(e){this.emitInt=e}enableEmitReal(e){this.emitReal=e}enableEmitBigint(e){this.emitBigint=e}enableEmitDoubleQuotes(e){this.emitDoubleQuotes=e}enableEmitIndentation(e){this.emitIndentation=e}enableBackslashLineBreaks(e){this.allowBackslashLineBreaks=e}isEND(){return this.token.type===W.LexerTokenType.END}isNotEND(){return this.token.type!==W.LexerTokenType.END}END(){if(this.token.type===W.LexerTokenType.END)this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" END")}isID(){return this.token.type===W.LexerTokenType.ID}ID(){let e="";if(this.token.type===W.LexerTokenType.ID)e=this.token.token,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" ID");return e}isLID(){return this.token.type===W.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase()}LID(){let e="";if(this.token.type===W.LexerTokenType.ID&&this.token.token===this.token.token.toLowerCase())e=this.token.token,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" LowerCaseID");return e}isUID(){return this.token.type===W.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase()}UID(){let e="";if(this.token.type===W.LexerTokenType.ID&&this.token.token===this.token.token.toUpperCase())e=this.token.token,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" UpperCaseID");return e}isINT(){return this.token.type===W.LexerTokenType.INT}INT(){let e=0;if(this.token.type===W.LexerTokenType.INT)e=this.token.value,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" INT");return e}isBIGINT(){return this.token.type===W.LexerTokenType.BIGINT}BIGINT(){let e=0n;if(this.token.type===W.LexerTokenType.BIGINT)e=this.token.valueBigint,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" BIGINT");return e}isREAL(){return this.token.type===W.LexerTokenType.REAL}REAL(){let e=0;if(this.token.type===W.LexerTokenType.REAL)e=this.token.value,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" REAL");return e}isHEX(){return this.token.type===W.LexerTokenType.HEX}HEX(){let e="";if(this.token.type===W.LexerTokenType.HEX)e=this.token.token,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" HEX");return e}isSTR(){return this.token.type===W.LexerTokenType.STR}STR(){let e="";if(this.token.type===W.LexerTokenType.STR)e=this.token.token,this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" STR");return e}isTER(e){return this.token.type===W.LexerTokenType.DEL&&this.token.token===e||this.token.type===W.LexerTokenType.ID&&this.token.token===e}isNotTER(e){return this.isTER(e)==!1&&this.token.type!=W.LexerTokenType.END}TER(e){if(this.token.type===W.LexerTokenType.DEL&&this.token.token===e||this.token.type===W.LexerTokenType.ID&&this.token.token===e)this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+' "'+e+'"')}isEOS(){return this.token.token===";"}EOS(){if(this.token.token===";")this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+' ";"')}isINDENT(){return this.token.type==W.LexerTokenType.DEL&&this.token.token==="	+"}isNotINDENT(){return!(this.token.type===W.LexerTokenType.DEL&&this.token.token==="	+")}INDENT(){if(this.token.type==W.LexerTokenType.DEL&&this.token.token==="	+")this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" INDENT")}isOUTDENT(){return this.token.type==W.LexerTokenType.DEL&&this.token.token==="	-"}isNotOUTDENT(){return this.token.type===W.LexerTokenType.END?!1:!(this.token.type===W.LexerTokenType.DEL&&this.token.token==="	-")}OUTDENT(){if(this.token.type==W.LexerTokenType.DEL&&this.token.token==="	-")this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" OUTDENT")}isNEWLINE(){return this.isOUTDENT()||this.token.type==W.LexerTokenType.DEL&&this.token.token===`
`}isNotNEWLINE(){return!this.isOUTDENT()&&!(this.token.type===W.LexerTokenType.DEL&&this.token.token===`
`)}NEWLINE(){if(!this.isOUTDENT())if(this.token.type==W.LexerTokenType.DEL&&this.token.token===`
`)this.next();else throw new ke(this.err_pos()+(0,le.getStr)(le.LanguageText.EXPECTED)+" NEWLINE")}error(e,r=null){throw new ke(this.err_pos(r)+e)}errorExpected(e){let r=(0,le.getStr)(le.LanguageText.EXPECTED_ONE_OF)+" ";for(let n=0;n<e.length;n++)n>0&&(r+=", "),r+=e[n];r+=".",this.error(r)}errorConditionNotBoolean(){this.error((0,le.getStr)(le.LanguageText.CONDITION_NOT_BOOLEAN))}errorUnknownSymbol(e){this.error((0,le.getStr)(le.LanguageText.UNKNOWN_SYMBOL)+" "+e)}errorNotAFunction(){this.error((0,le.getStr)(le.LanguageText.SYMBOL_IS_NOT_A_FUNCTION))}errorTypesInBinaryOperation(e,r,n){this.error((0,le.getStr)(le.LanguageText.BIN_OP_INCOMPATIBLE_TYPES).replace("$OP",e).replace("$T1",r).replace("$T2",n))}err_pos(e=null){return e==null&&(e=this.token),e.fileID+":"+e.row+":"+e.col+": "}addPutTrailingSemicolon(e,r=""){let n=new W.LexerToken;n.type=e,n.token=r,this.putTrailingSemicolon.push(n)}setTerminals(e){this.terminals.clear(),this.multicharDelimiters=[];for(let r of e)r.length!=0&&(r[0]>="A"&&r[0]<="Z"||r[0]>="a"&&r[0]<="z"||r[0]=="_"?this.terminals.add(r):this.multicharDelimiters.push(r));this.multicharDelimiters.sort(function(r,n){return n.length-r.length})}getTerminals(){return Array.from(this.terminals)}getMulticharDelimiters(){return this.multicharDelimiters}getToken(){return this.token}next(){this.lastToken=this.token;let e=this.fileStack.slice(-1)[0].sourceCode,r=this.fileStack.slice(-1)[0].id,n=this.state;if(n.stack.length>0){this.token=n.stack[0],n.stack.shift();return}this.token=new W.LexerToken,this.token.fileID=r,n.indent=-1;let i=!1;for(;;)if(n.i<n.n&&e[n.i]===`
`)n.indent=0,i=this.nextTokenLinefeed(n);else if(n.i<n.n&&e[n.i]===" ")n.i++,n.col++,n.indent>=0&&n.indent++;else if(n.i<n.n&&e[n.i]==="	")n.i++,n.col+=4,n.indent>=0&&(n.indent+=4);else if(this.allowBackslashLineBreaks&&n.i<n.n&&e[n.i]==="\\")for(n.i++;n.i<n.n;){if(e[n.i]==" ")n.col++;else if(e[n.i]=="	")n.col+=4;else if(e[n.i]==`
`)n.row++,n.col=1;else break;n.i++}else if(this.singleLineCommentStart.length>0&&this.isNext(this.singleLineCommentStart)){if(this.emitIndentation&&n.indent>=0)break;let c=this.singleLineCommentStart.length;for(n.i+=c,n.col+=c;n.i<n.n&&e[n.i]!=`
`;)n.i++,n.col++;n.i<n.n&&e[n.i]===`
`&&(i=this.nextTokenLinefeed(n)),n.indent=0}else if(this.multiLineCommentStart.length>0&&this.isNext(this.multiLineCommentStart)){if(this.emitIndentation&&n.indent>=0)break;let c=this.multiLineCommentStart.length;for(n.i+=c,n.col+=c;n.i<n.n&&!this.isNext(this.multilineCommentEnd);)e[n.i]===`
`?(n.row++,n.col=1,n.indent=0):n.col++,n.i++;c=this.multilineCommentEnd.length,n.i+=c,n.col+=c}else if(this.lexerFilePositionPrefix.length>0&&e.substring(n.i).startsWith(this.lexerFilePositionPrefix)){n.i+=this.lexerFilePositionPrefix.length;let c="";for(;n.i<n.n&&e[n.i]!==":";)c+=e[n.i],n.i++;n.i++,this.fileStack.slice(-1)[0].id=c,this.token.fileID=c;let m="";for(;n.i<n.n&&e[n.i]!==":";)m+=e[n.i],n.i++;n.i++,this.token.row=parseInt(m);let f="";for(;n.i<n.n&&e[n.i]!==":";)f+=e[n.i],n.i++;n.i++,this.token.col=parseInt(f)}else break;if(this.emitIndentation&&n.indent>=0){let c=n.indent-n.lastIndent;if(n.lastIndent=n.indent,c!=0)if(c%4==0){let m=c>0,f=Math.floor(Math.abs(c)/4);for(let u=0;u<f;u++)this.token=new W.LexerToken,this.token.fileID=r,this.token.row=n.row,m?this.token.col=n.col-c+4*u:this.token.col=n.col,this.token.type=W.LexerTokenType.DEL,this.token.token=m?"	+":"	-",n.stack.push(this.token);this.token=n.stack[0],n.stack.shift();return}else{this.token.row=n.row,this.token.col=n.col-c,this.token.type=W.LexerTokenType.TER,this.token.token="	err";return}}if(i)return;let o=n.copy();if(this.token.row=n.row,this.token.col=n.col,n.indent=0,n.i>=n.n){this.token.token="$end",this.token.type=W.LexerTokenType.END;return}if(this.token.type=W.LexerTokenType.ID,this.token.token="",n.i<n.n&&(e[n.i]>="A"&&e[n.i]<="Z"||e[n.i]>="a"&&e[n.i]<="z"||e[n.i]==="_"))for(this.token.token+=e[n.i],n.i++,n.col++;n.i<n.n&&(e[n.i]>="A"&&e[n.i]<="Z"||e[n.i]>="a"&&e[n.i]<="z"||e[n.i]>="0"&&e[n.i]<="9"||e[n.i]==="_");)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0){this.terminals.has(this.token.token)&&(this.token.type=W.LexerTokenType.TER),this.state=n;return}if(n=o.copy(),this.emitDoubleQuotes&&(this.token.type=W.LexerTokenType.STR,n.i<n.n&&e[n.i]==='"')){for(this.token.token="",n.i++,n.col++;n.i<n.n&&e[n.i]!='"'&&e[n.i]!=`
`;)this.token.token+=e[n.i],n.i++,n.col++;if(n.i<n.n&&e[n.i]==='"'){n.i++,n.col++,this.state=n;return}}if(n=o.copy(),this.emitHex&&(this.token.type=W.LexerTokenType.HEX,this.token.token="",n.i<n.n&&e[n.i]==="0"&&(n.i++,n.col++,n.i<n.n&&e[n.i]==="x"))){n.i++,n.col++;let c=0;for(;n.i<n.n&&(e[n.i]>="0"&&e[n.i]<="9"||e[n.i]>="A"&&e[n.i]<="F"||e[n.i]>="a"&&e[n.i]<="f");)this.token.token+=e[n.i],n.i++,n.col++,c++;if(c>0){this.token.token="0x"+this.token.token,this.token.value=parseInt(this.token.token,16),this.token.valueBigint=BigInt(this.token.token),this.state=n;return}}if(n=o.copy(),this.emitInt){if(this.token.type=W.LexerTokenType.INT,this.token.token="",n.i<n.n&&e[n.i]==="0")this.token.token="0",n.i++,n.col++;else if(n.i<n.n&&e[n.i]>="1"&&e[n.i]<="9")for(this.token.token=e[n.i],n.i++,n.col++;n.i<n.n&&e[n.i]>="0"&&e[n.i]<="9";)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0&&this.emitBigint&&n.i<n.n&&e[n.i]==="n")n.i++,n.col++,this.token.type=W.LexerTokenType.BIGINT;else if(this.token.token.length>0&&this.emitReal&&n.i<n.n&&e[n.i]===".")for(this.token.type=W.LexerTokenType.REAL,this.token.token+=".",n.i++,n.col++;n.i<n.n&&e[n.i]>="0"&&e[n.i]<="9";)this.token.token+=e[n.i],n.i++,n.col++;if(this.token.token.length>0){this.token.type===W.LexerTokenType.INT?this.token.value=parseInt(this.token.token):this.token.type===W.LexerTokenType.BIGINT?this.token.valueBigint=BigInt(this.token.token):this.token.value=parseFloat(this.token.token),this.state=n;return}}this.token.type=W.LexerTokenType.DEL,this.token.token="";for(let c=0;c<this.multicharDelimiters.length;c++){let m=this.multicharDelimiters[c],f=!0;n=o.copy();for(let u=0;u<m.length;u++){let a=m[u];if(n.i<n.n&&e[n.i]===a)n.i++,n.col++;else{f=!1;break}}if(f){this.state=n,this.token.token=m;return}}n=o.copy(),this.token.type=W.LexerTokenType.DEL,this.token.token="",n.i<n.n&&(this.token.token=e[n.i],n.i++,n.col++,this.state=n)}nextTokenLinefeed(e){let r=!1;if(this.emitNewline)this.token.row=e.row,this.token.col=e.col,this.token.token=`
`,this.token.type=W.LexerTokenType.DEL;else if(this.putTrailingSemicolon.length>0){let n=!1;for(let i of this.putTrailingSemicolon)if(i.type===this.lastToken.type&&(i.type===W.LexerTokenType.DEL?n=i.token===this.lastToken.token:n=!0,n))break;n&&(r=!0,this.token.row=e.row,this.token.col=e.col,this.token.token=";",this.token.type=W.LexerTokenType.DEL)}return e.row++,e.col=1,e.indent=0,e.i++,this.emitNewline||r}isNext(e){let r=this.fileStack.slice(-1)[0].sourceCode,n=this.state,i=e.length;if(n.i+i>=n.n)return!1;for(let o=0;o<i;o++){let c=e[o];if(r[n.i+o]!=c)return!1}return!0}pushSource(e,r){this.fileStack.length>0&&(this.fileStack.slice(-1)[0].stateBackup=this.state.copy(),this.fileStack.slice(-1)[0].tokenBackup=this.token.copy());let n=new zt;n.id=e,n.sourceCode=r,this.fileStack.push(n),this.state=new zs.LexerState,this.state.n=r.length,this.next()}popSource(){this.fileStack.pop(),this.fileStack.length>0&&(this.state=this.fileStack.slice(-1)[0].stateBackup,this.token=this.fileStack.slice(-1)[0].tokenBackup)}backupState(){return{state:this.state.copy(),token:this.token.copy()}}replayState(e){this.state=e.state,this.token=e.token}};Fr.Lexer=On});var Pn=Nr(Xr=>{"use strict";var ks=Xr&&Xr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qs=Xr&&Xr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ks(e,t,r)};Object.defineProperty(Xr,"__esModule",{value:!0});qs(Ca(),Xr)});var to=Nr((Xn,Un)=>{(function(t,e){typeof Xn=="object"&&typeof Un<"u"?Un.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.typed=e())})(Xn,function(){"use strict";function t(a,s){var l=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!l){if(Array.isArray(a)||(l=e(a))||s&&a&&typeof a.length=="number"){l&&(a=l);var h=0,v=function(){};return{s:v,n:function(){return h>=a.length?{done:!0}:{done:!1,value:a[h++]}},e:function(D){throw D},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,d=!1,g;return{s:function(){l=l.call(a)},n:function(){var D=l.next();return p=D.done,D},e:function(D){d=!0,g=D},f:function(){try{!p&&l.return!=null&&l.return()}finally{if(d)throw g}}}}function e(a,s){if(!!a){if(typeof a=="string")return r(a,s);var l=Object.prototype.toString.call(a).slice(8,-1);if(l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set")return Array.from(a);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return r(a,s)}}function r(a,s){(s==null||s>a.length)&&(s=a.length);for(var l=0,h=new Array(s);l<s;l++)h[l]=a[l];return h}function n(a){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},n(a)}function i(){return!0}function o(){return!1}function c(){}var m="Argument is not a typed-function.";function f(){function a(b){return n(b)==="object"&&b!==null&&b.constructor===Object}var s=[{name:"number",test:function(T){return typeof T=="number"}},{name:"string",test:function(T){return typeof T=="string"}},{name:"boolean",test:function(T){return typeof T=="boolean"}},{name:"Function",test:function(T){return typeof T=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(T){return T instanceof Date}},{name:"RegExp",test:function(T){return T instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(T){return T===null}},{name:"undefined",test:function(T){return T===void 0}}],l={name:"any",test:i,isAny:!0},h,v,p=0,d={createCount:0};function g(b){var T=h.get(b);if(T)return T;var B='Unknown type "'+b+'"',P=b.toLowerCase(),V,Z=t(v),G;try{for(Z.s();!(G=Z.n()).done;)if(V=G.value,V.toLowerCase()===P){B+='. Did you mean "'+V+'" ?';break}}catch(k){Z.e(k)}finally{Z.f()}throw new TypeError(B)}function E(b){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",B=T?g(T).index:v.length,P=[],V=0;V<b.length;++V){if(!b[V]||typeof b[V].name!="string"||typeof b[V].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var Z=b[V].name;if(h.has(Z))throw new TypeError('Duplicate type name "'+Z+'"');P.push(Z),h.set(Z,{name:Z,test:b[V].test,isAny:b[V].isAny,index:B+V,conversionsTo:[]})}var G=v.slice(B);v=v.slice(0,B).concat(P).concat(G);for(var k=B+P.length;k<v.length;++k)h.get(v[k]).index=k}function D(){h=new Map,v=[],p=0,E([l],!1)}D(),E(s);function _(){var b,T=t(v),B;try{for(T.s();!(B=T.n()).done;)b=B.value,h.get(b).conversionsTo=[]}catch(P){T.e(P)}finally{T.f()}p=0}function w(b){var T=v.filter(function(B){var P=h.get(B);return!P.isAny&&P.test(b)});return T.length?T:["any"]}function x(b){return b&&typeof b=="function"&&"_typedFunctionData"in b}function y(b,T,B){if(!x(b))throw new TypeError(m);var P=B&&B.exact,V=Array.isArray(T)?T.join(","):T,Z=O(V),G=M(Z);if(!P||G in b.signatures){var k=b._typedFunctionData.signatureMap.get(G);if(k)return k}var H=Z.length,re;if(P){re=[];var ce;for(ce in b.signatures)re.push(b._typedFunctionData.signatureMap.get(ce))}else re=b._typedFunctionData.signatures;for(var $=0;$<H;++$){var Qe=Z[$],Xe=[],Ye=void 0,Re=t(re),er;try{for(Re.s();!(er=Re.n()).done;){Ye=er.value;var ze=X(Ye.params,$);if(!(!ze||Qe.restParam&&!ze.restParam)){if(!ze.hasAny){var lr=function(){var rr=q(ze);if(Qe.types.some(function(qr){return!rr.has(qr.name)}))return"continue"}();if(lr==="continue")continue}Xe.push(Ye)}}}catch(rr){Re.e(rr)}finally{Re.f()}if(re=Xe,re.length===0)break}var je,Je=t(re),kr;try{for(Je.s();!(kr=Je.n()).done;)if(je=kr.value,je.params.length<=H)return je}catch(rr){Je.e(rr)}finally{Je.f()}throw new TypeError("Signature not found (signature: "+(b.name||"unnamed")+"("+M(Z,", ")+"))")}function A(b,T,B){return y(b,T,B).implementation}function C(b,T){var B=g(T);if(B.test(b))return b;var P=B.conversionsTo;if(P.length===0)throw new Error("There are no conversions to "+T+" defined.");for(var V=0;V<P.length;V++){var Z=g(P[V].from);if(Z.test(b))return P[V].convert(b)}throw new Error("Cannot convert "+b+" to "+T)}function M(b){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return b.map(function(B){return B.name}).join(T)}function F(b){var T=b.indexOf("...")===0,B=T?b.length>3?b.slice(3):"any":b,P=B.split("|").map(function(k){return g(k.trim())}),V=!1,Z=T?"...":"",G=P.map(function(k){return V=k.isAny||V,Z+=k.name+"|",{name:k.name,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:null,conversionIndex:-1}});return{types:G,name:Z.slice(0,-1),hasAny:V,hasConversion:!1,restParam:T}}function R(b){var T=b.types.map(function(G){return G.name}),B=oe(T),P=b.hasAny,V=b.name,Z=B.map(function(G){var k=g(G.from);return P=k.isAny||P,V+="|"+G.from,{name:G.from,typeIndex:k.index,test:k.test,isAny:k.isAny,conversion:G,conversionIndex:G.index}});return{types:b.types.concat(Z),name:V,hasAny:P,hasConversion:Z.length>0,restParam:b.restParam}}function q(b){return b.typeSet||(b.typeSet=new Set,b.types.forEach(function(T){return b.typeSet.add(T.name)})),b.typeSet}function O(b){var T=[];if(typeof b!="string")throw new TypeError("Signatures must be strings");var B=b.trim();if(B==="")return T;for(var P=B.split(","),V=0;V<P.length;++V){var Z=F(P[V].trim());if(Z.restParam&&V!==P.length-1)throw new SyntaxError('Unexpected rest parameter "'+P[V]+'": only allowed for the last parameter');if(Z.types.length===0)return null;T.push(Z)}return T}function I(b){var T=Be(b);return T?T.restParam:!1}function N(b){if(!b||b.types.length===0)return i;if(b.types.length===1)return g(b.types[0].name).test;if(b.types.length===2){var T=g(b.types[0].name).test,B=g(b.types[1].name).test;return function(Z){return T(Z)||B(Z)}}else{var P=b.types.map(function(V){return g(V.name).test});return function(Z){for(var G=0;G<P.length;G++)if(P[G](Z))return!0;return!1}}}function Y(b){var T,B,P;if(I(b)){T=xe(b).map(N);var V=T.length,Z=N(Be(b)),G=function(H){for(var re=V;re<H.length;re++)if(!Z(H[re]))return!1;return!0};return function(H){for(var re=0;re<T.length;re++)if(!T[re](H[re]))return!1;return G(H)&&H.length>=V+1}}else return b.length===0?function(H){return H.length===0}:b.length===1?(B=N(b[0]),function(H){return B(H[0])&&H.length===1}):b.length===2?(B=N(b[0]),P=N(b[1]),function(H){return B(H[0])&&P(H[1])&&H.length===2}):(T=b.map(N),function(H){for(var re=0;re<T.length;re++)if(!T[re](H[re]))return!1;return H.length===T.length})}function X(b,T){return T<b.length?b[T]:I(b)?Be(b):null}function S(b,T){var B=X(b,T);return B?q(B):new Set}function U(b){return b.conversion===null||b.conversion===void 0}function Q(b,T){var B=new Set;return b.forEach(function(P){var V=S(P.params,T),Z,G=t(V),k;try{for(G.s();!(k=G.n()).done;)Z=k.value,B.add(Z)}catch(H){G.e(H)}finally{G.f()}}),B.has("any")?["any"]:Array.from(B)}function ue(b,T,B){var P,V,Z=b||"unnamed",G=B,k,H=function(){var Re=[];if(G.forEach(function(ze){var lr=X(ze.params,k),je=N(lr);(k<ze.params.length||I(ze.params))&&je(T[k])&&Re.push(ze)}),Re.length===0){if(V=Q(G,k),V.length>0){var er=w(T[k]);return P=new TypeError("Unexpected type of argument in function "+Z+" (expected: "+V.join(" or ")+", actual: "+er.join(" | ")+", index: "+k+")"),P.data={category:"wrongType",fn:Z,index:k,actual:er,expected:V},{v:P}}}else G=Re};for(k=0;k<T.length;k++){var re=H();if(n(re)==="object")return re.v}var ce=G.map(function(Ye){return I(Ye.params)?1/0:Ye.params.length});if(T.length<Math.min.apply(null,ce))return V=Q(G,k),P=new TypeError("Too few arguments in function "+Z+" (expected: "+V.join(" or ")+", index: "+T.length+")"),P.data={category:"tooFewArgs",fn:Z,index:T.length,expected:V},P;var $=Math.max.apply(null,ce);if(T.length>$)return P=new TypeError("Too many arguments in function "+Z+" (expected: "+$+", actual: "+T.length+")"),P.data={category:"tooManyArgs",fn:Z,index:T.length,expectedLength:$},P;for(var Qe=[],Xe=0;Xe<T.length;++Xe)Qe.push(w(T[Xe]).join("|"));return P=new TypeError('Arguments of type "'+Qe.join(", ")+'" do not match any of the defined signatures of function '+Z+"."),P.data={category:"mismatch",actual:Qe},P}function ee(b){for(var T=v.length+1,B=0;B<b.types.length;B++)U(b.types[B])&&(T=Math.min(T,b.types[B].typeIndex));return T}function J(b){for(var T=p+1,B=0;B<b.types.length;B++)U(b.types[B])||(T=Math.min(T,b.types[B].conversionIndex));return T}function _e(b,T){if(b.hasAny){if(!T.hasAny)return 1}else if(T.hasAny)return-1;if(b.restParam){if(!T.restParam)return 1}else if(T.restParam)return-1;if(b.hasConversion){if(!T.hasConversion)return 1}else if(T.hasConversion)return-1;var B=ee(b)-ee(T);if(B<0)return-1;if(B>0)return 1;var P=J(b)-J(T);return P<0?-1:P>0?1:0}function he(b,T){var B=b.params,P=T.params,V=Be(B),Z=Be(P),G=I(B),k=I(P);if(G&&V.hasAny){if(!k||!Z.hasAny)return 1}else if(k&&Z.hasAny)return-1;var H=0,re=0,ce,$=t(B),Qe;try{for($.s();!(Qe=$.n()).done;)ce=Qe.value,ce.hasAny&&++H,ce.hasConversion&&++re}catch(lt){$.e(lt)}finally{$.f()}var Xe=0,Ye=0,Re=t(P),er;try{for(Re.s();!(er=Re.n()).done;)ce=er.value,ce.hasAny&&++Xe,ce.hasConversion&&++Ye}catch(lt){Re.e(lt)}finally{Re.f()}if(H!==Xe)return H-Xe;if(G&&V.hasConversion){if(!k||!Z.hasConversion)return 1}else if(k&&Z.hasConversion)return-1;if(re!==Ye)return re-Ye;if(G){if(!k)return 1}else if(k)return-1;var ze=(B.length-P.length)*(G?-1:1);if(ze!==0)return ze;for(var lr=[],je=0,Je=0;Je<B.length;++Je){var kr=_e(B[Je],P[Je]);lr.push(kr),je+=kr}if(je!==0)return je;for(var rr,qr=0,Bt=lr;qr<Bt.length;qr++)if(rr=Bt[qr],rr!==0)return rr;return 0}function oe(b){if(b.length===0)return[];var T=b.map(g);b.length>1&&T.sort(function(H,re){return H.index-re.index});var B=T[0].conversionsTo;if(b.length===1)return B;B=B.concat([]);for(var P=new Set(b),V=1;V<T.length;++V){var Z=void 0,G=t(T[V].conversionsTo),k;try{for(G.s();!(k=G.n()).done;)Z=k.value,P.has(Z.from)||(B.push(Z),P.add(Z.from))}catch(H){G.e(H)}finally{G.f()}}return B}function de(b,T){var B=T;if(b.some(function(k){return k.hasConversion})){var P=I(b),V=b.map(ve);B=function(){for(var H=[],re=P?arguments.length-1:arguments.length,ce=0;ce<re;ce++)H[ce]=V[ce](arguments[ce]);return P&&(H[re]=arguments[re].map(V[re])),T.apply(this,H)}}var Z=B;if(I(b)){var G=b.length-1;Z=function(){return B.apply(this,ur(arguments,0,G).concat([ur(arguments,G)]))}}return Z}function ve(b){var T,B,P,V,Z=[],G=[];switch(b.types.forEach(function(k){k.conversion&&(Z.push(g(k.conversion.from).test),G.push(k.conversion.convert))}),G.length){case 0:return function(H){return H};case 1:return T=Z[0],P=G[0],function(H){return T(H)?P(H):H};case 2:return T=Z[0],B=Z[1],P=G[0],V=G[1],function(H){return T(H)?P(H):B(H)?V(H):H};default:return function(H){for(var re=0;re<G.length;re++)if(Z[re](H))return G[re](H);return H}}}function ne(b){function T(B,P,V){if(P<B.length){var Z=B[P],G=[];if(Z.restParam){var k=Z.types.filter(U);k.length<Z.types.length&&G.push({types:k,name:"..."+k.map(function(H){return H.name}).join("|"),hasAny:k.some(function(H){return H.isAny}),hasConversion:!1,restParam:!0}),G.push(Z)}else G=Z.types.map(function(H){return{types:[H],name:H.name,hasAny:H.isAny,hasConversion:H.conversion,restParam:!1}});return Nt(G,function(H){return T(B,P+1,V.concat([H]))})}else return[V]}return T(b,0,[])}function Se(b,T){for(var B=Math.max(b.length,T.length),P=0;P<B;P++){var V=S(b,P),Z=S(T,P),G=!1,k=void 0,H=t(Z),re;try{for(H.s();!(re=H.n()).done;)if(k=re.value,V.has(k)){G=!0;break}}catch(Ye){H.e(Ye)}finally{H.f()}if(!G)return!1}var ce=b.length,$=T.length,Qe=I(b),Xe=I(T);return Qe?Xe?ce===$:$>=ce:Xe?ce>=$:ce===$}function Me(b){return b.map(function(T){return Gr(T)?ft(T.referToSelf.callback):ct(T)?St(T.referTo.references,T.referTo.callback):T})}function se(b,T,B){var P=[],V,Z=t(b),G;try{for(Z.s();!(G=Z.n()).done;){V=G.value;var k=B[V];if(typeof k!="number")throw new TypeError('No definition for referenced signature "'+V+'"');if(k=T[k],typeof k!="function")return!1;P.push(k)}}catch(H){Z.e(H)}finally{Z.f()}return P}function ge(b,T,B){for(var P=Me(b),V=new Array(P.length).fill(!1),Z=!0;Z;){Z=!1;for(var G=!0,k=0;k<P.length;++k)if(!V[k]){var H=P[k];if(Gr(H))P[k]=H.referToSelf.callback(B),P[k].referToSelf=H.referToSelf,V[k]=!0,G=!1;else if(ct(H)){var re=se(H.referTo.references,P,T);re?(P[k]=H.referTo.callback.apply(this,re),P[k].referTo=H.referTo,V[k]=!0,G=!1):Z=!0}}if(G&&Z)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return P}function Pe(b){var T=/\bthis(\(|\.signatures\b)/;Object.keys(b).forEach(function(B){var P=b[B];if(T.test(P.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function or(b,T){if(d.createCount++,Object.keys(T).length===0)throw new SyntaxError("No signatures provided");d.warnAgainstDeprecatedThis&&Pe(T);var B=[],P=[],V={},Z=[],G,k=function(){if(!Object.prototype.hasOwnProperty.call(T,G))return"continue";var Ue=O(G);if(!Ue)return"continue";B.forEach(function(Yr){if(Se(Yr,Ue))throw new TypeError('Conflicting signatures "'+M(Yr)+'" and "'+M(Ue)+'".')}),B.push(Ue);var va=P.length;P.push(T[G]);var Ts=Ue.map(R),It=void 0,Rt=t(ne(Ts)),da;try{for(Rt.s();!(da=Rt.n()).done;){It=da.value;var xa=M(It);Z.push({params:It,name:xa,fn:va}),It.every(function(Yr){return!Yr.hasConversion})&&(V[xa]=va)}}catch(Yr){Rt.e(Yr)}finally{Rt.f()}};for(G in T)var H=k();Z.sort(he);var re=ge(P,V,mt),ce;for(ce in V)Object.prototype.hasOwnProperty.call(V,ce)&&(V[ce]=re[V[ce]]);for(var $=[],Qe=new Map,Xe=0,Ye=Z;Xe<Ye.length;Xe++)ce=Ye[Xe],Qe.has(ce.name)||(ce.fn=re[ce.fn],$.push(ce),Qe.set(ce.name,ce));for(var Re=$[0]&&$[0].params.length<=2&&!I($[0].params),er=$[1]&&$[1].params.length<=2&&!I($[1].params),ze=$[2]&&$[2].params.length<=2&&!I($[2].params),lr=$[3]&&$[3].params.length<=2&&!I($[3].params),je=$[4]&&$[4].params.length<=2&&!I($[4].params),Je=$[5]&&$[5].params.length<=2&&!I($[5].params),kr=Re&&er&&ze&&lr&&je&&Je,rr=0;rr<$.length;++rr)$[rr].test=Y($[rr].params);for(var qr=Re?N($[0].params[0]):o,Bt=er?N($[1].params[0]):o,lt=ze?N($[2].params[0]):o,ts=lr?N($[3].params[0]):o,ns=je?N($[4].params[0]):o,is=Je?N($[5].params[0]):o,as=Re?N($[0].params[1]):o,os=er?N($[1].params[1]):o,us=ze?N($[2].params[1]):o,ss=lr?N($[3].params[1]):o,fs=je?N($[4].params[1]):o,cs=Je?N($[5].params[1]):o,pt=0;pt<$.length;++pt)$[pt].implementation=de($[pt].params,$[pt].fn);var ls=Re?$[0].implementation:c,ps=er?$[1].implementation:c,ms=ze?$[2].implementation:c,hs=lr?$[3].implementation:c,vs=je?$[4].implementation:c,ds=Je?$[5].implementation:c,xs=Re?$[0].params.length:-1,gs=er?$[1].params.length:-1,Ds=ze?$[2].params.length:-1,Es=lr?$[3].params.length:-1,ys=je?$[4].params.length:-1,ws=Je?$[5].params.length:-1,_s=kr?6:0,Cs=$.length,As=$.map(function(sr){return sr.test}),bs=$.map(function(sr){return sr.implementation}),Ms=function(){for(var Ue=_s;Ue<Cs;Ue++)if(As[Ue](arguments))return bs[Ue].apply(this,arguments);return d.onMismatch(b,arguments,$)};function mt(sr,Ue){return arguments.length===xs&&qr(sr)&&as(Ue)?ls.apply(this,arguments):arguments.length===gs&&Bt(sr)&&os(Ue)?ps.apply(this,arguments):arguments.length===Ds&&lt(sr)&&us(Ue)?ms.apply(this,arguments):arguments.length===Es&&ts(sr)&&ss(Ue)?hs.apply(this,arguments):arguments.length===ys&&ns(sr)&&fs(Ue)?vs.apply(this,arguments):arguments.length===ws&&is(sr)&&cs(Ue)?ds.apply(this,arguments):Ms.apply(this,arguments)}try{Object.defineProperty(mt,"name",{value:b})}catch{}return mt.signatures=V,mt._typedFunctionData={signatures:$,signatureMap:Qe},mt}function Ge(b,T,B){throw ue(b,T,B)}function xe(b){return ur(b,0,b.length-1)}function Be(b){return b[b.length-1]}function ur(b,T,B){return Array.prototype.slice.call(b,T,B)}function Rn(b,T){for(var B=0;B<b.length;B++)if(T(b[B]))return b[B]}function Nt(b,T){return Array.prototype.concat.apply([],b.map(T))}function Ft(){var b=xe(arguments).map(function(B){return M(O(B))}),T=Be(arguments);if(typeof T!="function")throw new TypeError("Callback function expected as last argument");return St(b,T)}function St(b,T){return{referTo:{references:b,callback:T}}}function ft(b){if(typeof b!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:b}}}function ct(b){return b&&n(b.referTo)==="object"&&Array.isArray(b.referTo.references)&&typeof b.referTo.callback=="function"}function Gr(b){return b&&n(b.referToSelf)==="object"&&typeof b.referToSelf.callback=="function"}function ma(b,T){if(!b)return T;if(T&&T!==b){var B=new Error("Function names do not match (expected: "+b+", actual: "+T+")");throw B.data={actual:T,expected:b},B}return b}function Wu(b){var T;for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&(x(b[B])||typeof b[B].signature=="string")&&(T=ma(T,b[B].name));return T}function es(b,T){var B;for(B in T)if(Object.prototype.hasOwnProperty.call(T,B)){if(B in b&&T[B]!==b[B]){var P=new Error('Signature "'+B+'" is defined twice');throw P.data={signature:B,sourceFunction:T[B],destFunction:b[B]},P}b[B]=T[B]}}var rs=d;d=function(T){for(var B=typeof T=="string",P=B?1:0,V=B?T:"",Z={},G=P;G<arguments.length;++G){var k=arguments[G],H={},re=void 0;if(typeof k=="function"?(re=k.name,typeof k.signature=="string"?H[k.signature]=k:x(k)&&(H=k.signatures)):a(k)&&(H=k,B||(re=Wu(k))),Object.keys(H).length===0){var ce=new TypeError("Argument to 'typed' at index "+G+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw ce.data={index:G,argument:k},ce}B||(V=ma(V,re)),es(Z,H)}return or(V||"",Z)},d.create=f,d.createCount=rs.createCount,d.onMismatch=Ge,d.throwMismatchError=Ge,d.createError=ue,d.clear=D,d.clearConversions=_,d.addTypes=E,d._findType=g,d.referTo=Ft,d.referToSelf=ft,d.convert=C,d.findSignature=y,d.find=A,d.isTypedFunction=x,d.warnAgainstDeprecatedThis=!0,d.addType=function(b,T){var B="any";T!==!1&&h.has("Object")&&(B="Object"),d.addTypes([b],B)};function ha(b){if(!b||typeof b.from!="string"||typeof b.to!="string"||typeof b.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(b.to===b.from)throw new SyntaxError('Illegal to define conversion from "'+b.from+'" to itself.')}return d.addConversion=function(b){ha(b);var T=g(b.to);if(T.conversionsTo.every(function(B){return B.from!==b.from}))T.conversionsTo.push({from:b.from,convert:b.convert,index:p++});else throw new Error('There is already a conversion from "'+b.from+'" to "'+T.name+'"')},d.addConversions=function(b){b.forEach(d.addConversion)},d.removeConversion=function(b){ha(b);var T=g(b.to),B=Rn(T.conversionsTo,function(V){return V.from===b.from});if(!B)throw new Error("Attempt to remove nonexistent conversion from "+b.from+" to "+b.to);if(B.convert!==b.convert)throw new Error("Conversion to remove does not match existing conversion");var P=T.conversionsTo.indexOf(B);T.conversionsTo.splice(P,1)},d.resolve=function(b,T){if(!x(b))throw new TypeError(m);for(var B=b._typedFunctionData.signatures,P=0;P<B.length;++P)if(B[P].test(T))return B[P];return null},d}var u=f();return u})});var Xo=Nr((ui,Vo)=>{(function(t){"use strict";var e=Math.cosh||function(u){return Math.abs(u)<1e-9?1-u:(Math.exp(u)+Math.exp(-u))*.5},r=Math.sinh||function(u){return Math.abs(u)<1e-9?u:(Math.exp(u)-Math.exp(-u))*.5},n=function(u){var a=Math.PI/4;if(-a>u||u>a)return Math.cos(u)-1;var s=u*u;return s*(s*(s*(s*(s*(s*(s*(s/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},i=function(u,a){var s=Math.abs(u),l=Math.abs(a);return s<3e3&&l<3e3?Math.sqrt(s*s+l*l):(s<l?(s=l,l=u/a):l=a/u,s*Math.sqrt(1+l*l))},o=function(){throw SyntaxError("Invalid Param")};function c(u,a){var s=Math.abs(u),l=Math.abs(a);return u===0?Math.log(l):a===0?Math.log(s):s<3e3&&l<3e3?Math.log(u*u+a*a)*.5:(u=u/2,a=a/2,.5*Math.log(u*u+a*a)+Math.LN2)}var m=function(u,a){var s={re:0,im:0};if(u==null)s.re=s.im=0;else if(a!==void 0)s.re=u,s.im=a;else switch(typeof u){case"object":if("im"in u&&"re"in u)s.re=u.re,s.im=u.im;else if("abs"in u&&"arg"in u){if(!Number.isFinite(u.abs)&&Number.isFinite(u.arg))return f.INFINITY;s.re=u.abs*Math.cos(u.arg),s.im=u.abs*Math.sin(u.arg)}else if("r"in u&&"phi"in u){if(!Number.isFinite(u.r)&&Number.isFinite(u.phi))return f.INFINITY;s.re=u.r*Math.cos(u.phi),s.im=u.r*Math.sin(u.phi)}else u.length===2?(s.re=u[0],s.im=u[1]):o();break;case"string":s.im=s.re=0;var l=u.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),h=1,v=0;l===null&&o();for(var p=0;p<l.length;p++){var d=l[p];d===" "||d==="	"||d===`
`||(d==="+"?h++:d==="-"?v++:d==="i"||d==="I"?(h+v===0&&o(),l[p+1]!==" "&&!isNaN(l[p+1])?(s.im+=parseFloat((v%2?"-":"")+l[p+1]),p++):s.im+=parseFloat((v%2?"-":"")+"1"),h=v=0):((h+v===0||isNaN(d))&&o(),l[p+1]==="i"||l[p+1]==="I"?(s.im+=parseFloat((v%2?"-":"")+d),p++):s.re+=parseFloat((v%2?"-":"")+d),h=v=0))}h+v>0&&o();break;case"number":s.im=0,s.re=u;break;default:o()}return isNaN(s.re)||isNaN(s.im),s};function f(u,a){if(!(this instanceof f))return new f(u,a);var s=m(u,a);this.re=s.re,this.im=s.im}f.prototype={re:0,im:0,sign:function(){var u=this.abs();return new f(this.re/u,this.im/u)},add:function(u,a){var s=new f(u,a);return this.isInfinite()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:new f(this.re+s.re,this.im+s.im)},sub:function(u,a){var s=new f(u,a);return this.isInfinite()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:new f(this.re-s.re,this.im-s.im)},mul:function(u,a){var s=new f(u,a);return this.isInfinite()&&s.isZero()||this.isZero()&&s.isInfinite()?f.NAN:this.isInfinite()||s.isInfinite()?f.INFINITY:s.im===0&&this.im===0?new f(this.re*s.re,0):new f(this.re*s.re-this.im*s.im,this.re*s.im+this.im*s.re)},div:function(u,a){var s=new f(u,a);if(this.isZero()&&s.isZero()||this.isInfinite()&&s.isInfinite())return f.NAN;if(this.isInfinite()||s.isZero())return f.INFINITY;if(this.isZero()||s.isInfinite())return f.ZERO;u=this.re,a=this.im;var l=s.re,h=s.im,v,p;return h===0?new f(u/l,a/l):Math.abs(l)<Math.abs(h)?(p=l/h,v=l*p+h,new f((u*p+a)/v,(a*p-u)/v)):(p=h/l,v=h*p+l,new f((u+a*p)/v,(a-u*p)/v))},pow:function(u,a){var s=new f(u,a);if(u=this.re,a=this.im,s.isZero())return f.ONE;if(s.im===0){if(a===0&&u>0)return new f(Math.pow(u,s.re),0);if(u===0)switch((s.re%4+4)%4){case 0:return new f(Math.pow(a,s.re),0);case 1:return new f(0,Math.pow(a,s.re));case 2:return new f(-Math.pow(a,s.re),0);case 3:return new f(0,-Math.pow(a,s.re))}}if(u===0&&a===0&&s.re>0&&s.im>=0)return f.ZERO;var l=Math.atan2(a,u),h=c(u,a);return u=Math.exp(s.re*h-s.im*l),a=s.im*h+s.re*l,new f(u*Math.cos(a),u*Math.sin(a))},sqrt:function(){var u=this.re,a=this.im,s=this.abs(),l,h;if(u>=0){if(a===0)return new f(Math.sqrt(u),0);l=.5*Math.sqrt(2*(s+u))}else l=Math.abs(a)/Math.sqrt(2*(s-u));return u<=0?h=.5*Math.sqrt(2*(s-u)):h=Math.abs(a)/Math.sqrt(2*(s+u)),new f(l,a<0?-h:h)},exp:function(){var u=Math.exp(this.re);return this.im,new f(u*Math.cos(this.im),u*Math.sin(this.im))},expm1:function(){var u=this.re,a=this.im;return new f(Math.expm1(u)*Math.cos(a)+n(a),Math.exp(u)*Math.sin(a))},log:function(){var u=this.re,a=this.im;return a===0&&u>0,new f(c(u,a),Math.atan2(a,u))},abs:function(){return i(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var u=this.re,a=this.im;return new f(Math.sin(u)*e(a),Math.cos(u)*r(a))},cos:function(){var u=this.re,a=this.im;return new f(Math.cos(u)*e(a),-Math.sin(u)*r(a))},tan:function(){var u=2*this.re,a=2*this.im,s=Math.cos(u)+e(a);return new f(Math.sin(u)/s,r(a)/s)},cot:function(){var u=2*this.re,a=2*this.im,s=Math.cos(u)-e(a);return new f(-Math.sin(u)/s,r(a)/s)},sec:function(){var u=this.re,a=this.im,s=.5*e(2*a)+.5*Math.cos(2*u);return new f(Math.cos(u)*e(a)/s,Math.sin(u)*r(a)/s)},csc:function(){var u=this.re,a=this.im,s=.5*e(2*a)-.5*Math.cos(2*u);return new f(Math.sin(u)*e(a)/s,-Math.cos(u)*r(a)/s)},asin:function(){var u=this.re,a=this.im,s=new f(a*a-u*u+1,-2*u*a).sqrt(),l=new f(s.re-a,s.im+u).log();return new f(l.im,-l.re)},acos:function(){var u=this.re,a=this.im,s=new f(a*a-u*u+1,-2*u*a).sqrt(),l=new f(s.re-a,s.im+u).log();return new f(Math.PI/2-l.im,l.re)},atan:function(){var u=this.re,a=this.im;if(u===0){if(a===1)return new f(0,1/0);if(a===-1)return new f(0,-1/0)}var s=u*u+(1-a)*(1-a),l=new f((1-a*a-u*u)/s,-2*u/s).log();return new f(-.5*l.im,.5*l.re)},acot:function(){var u=this.re,a=this.im;if(a===0)return new f(Math.atan2(1,u),0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).atan():new f(u!==0?u/0:0,a!==0?-a/0:0).atan()},asec:function(){var u=this.re,a=this.im;if(u===0&&a===0)return new f(0,1/0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).acos():new f(u!==0?u/0:0,a!==0?-a/0:0).acos()},acsc:function(){var u=this.re,a=this.im;if(u===0&&a===0)return new f(Math.PI/2,1/0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).asin():new f(u!==0?u/0:0,a!==0?-a/0:0).asin()},sinh:function(){var u=this.re,a=this.im;return new f(r(u)*Math.cos(a),e(u)*Math.sin(a))},cosh:function(){var u=this.re,a=this.im;return new f(e(u)*Math.cos(a),r(u)*Math.sin(a))},tanh:function(){var u=2*this.re,a=2*this.im,s=e(u)+Math.cos(a);return new f(r(u)/s,Math.sin(a)/s)},coth:function(){var u=2*this.re,a=2*this.im,s=e(u)-Math.cos(a);return new f(r(u)/s,-Math.sin(a)/s)},csch:function(){var u=this.re,a=this.im,s=Math.cos(2*a)-e(2*u);return new f(-2*r(u)*Math.cos(a)/s,2*e(u)*Math.sin(a)/s)},sech:function(){var u=this.re,a=this.im,s=Math.cos(2*a)+e(2*u);return new f(2*e(u)*Math.cos(a)/s,-2*r(u)*Math.sin(a)/s)},asinh:function(){var u=this.im;this.im=-this.re,this.re=u;var a=this.asin();return this.re=-this.im,this.im=u,u=a.re,a.re=-a.im,a.im=u,a},acosh:function(){var u=this.acos();if(u.im<=0){var a=u.re;u.re=-u.im,u.im=a}else{var a=u.im;u.im=-u.re,u.re=a}return u},atanh:function(){var u=this.re,a=this.im,s=u>1&&a===0,l=1-u,h=1+u,v=l*l+a*a,p=v!==0?new f((h*l-a*a)/v,(a*l+h*a)/v):new f(u!==-1?u/0:0,a!==0?a/0:0),d=p.re;return p.re=c(p.re,p.im)/2,p.im=Math.atan2(p.im,d)/2,s&&(p.im=-p.im),p},acoth:function(){var u=this.re,a=this.im;if(u===0&&a===0)return new f(0,Math.PI/2);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).atanh():new f(u!==0?u/0:0,a!==0?-a/0:0).atanh()},acsch:function(){var u=this.re,a=this.im;if(a===0)return new f(u!==0?Math.log(u+Math.sqrt(u*u+1)):1/0,0);var s=u*u+a*a;return s!==0?new f(u/s,-a/s).asinh():new f(u!==0?u/0:0,a!==0?-a/0:0).asinh()},asech:function(){var u=this.re,a=this.im;if(this.isZero())return f.INFINITY;var s=u*u+a*a;return s!==0?new f(u/s,-a/s).acosh():new f(u!==0?u/0:0,a!==0?-a/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var u=this.re,a=this.im,s=u*u+a*a;return new f(u/s,-a/s)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(u){return u=Math.pow(10,u||0),new f(Math.ceil(this.re*u)/u,Math.ceil(this.im*u)/u)},floor:function(u){return u=Math.pow(10,u||0),new f(Math.floor(this.re*u)/u,Math.floor(this.im*u)/u)},round:function(u){return u=Math.pow(10,u||0),new f(Math.round(this.re*u)/u,Math.round(this.im*u)/u)},equals:function(u,a){var s=new f(u,a);return Math.abs(s.re-this.re)<=f.EPSILON&&Math.abs(s.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var u=this.re,a=this.im,s="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(u)<f.EPSILON&&(u=0),Math.abs(a)<f.EPSILON&&(a=0),a===0?s+u:(u!==0?(s+=u,s+=" ",a<0?(a=-a,s+="-"):s+="+",s+=" "):a<0&&(a=-a,s+="-"),a!==1&&(s+=a),s+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,typeof define=="function"&&define.amd?define([],function(){return f}):typeof ui=="object"?(Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,Vo.exports=f):t.Complex=f})(ui)});var Zo=Nr((fi,Uo)=>{(function(t){"use strict";var e=2e3,r={s:1,n:0,d:1};function n(l,h){if(isNaN(l=parseInt(l,10)))throw s.InvalidParameter;return l*h}function i(l,h){if(h===0)throw s.DivisionByZero;var v=Object.create(s.prototype);v.s=l<0?-1:1,l=l<0?-l:l;var p=a(l,h);return v.n=l/p,v.d=h/p,v}function o(l){for(var h={},v=l,p=2,d=4;d<=v;){for(;v%p===0;)v/=p,h[p]=(h[p]||0)+1;d+=1+2*p++}return v!==l?v>1&&(h[v]=(h[v]||0)+1):h[l]=(h[l]||0)+1,h}var c=function(l,h){var v=0,p=1,d=1,g=0,E=0,D=0,_=1,w=1,x=0,y=1,A=1,C=1,M=1e7,F;if(l!=null)if(h!==void 0){if(v=l,p=h,d=v*p,v%1!==0||p%1!==0)throw s.NonIntegerParameter}else switch(typeof l){case"object":{if("d"in l&&"n"in l)v=l.n,p=l.d,"s"in l&&(v*=l.s);else if(0 in l)v=l[0],1 in l&&(p=l[1]);else throw s.InvalidParameter;d=v*p;break}case"number":{if(l<0&&(d=l,l=-l),l%1===0)v=l;else if(l>0){for(l>=1&&(w=Math.pow(10,Math.floor(1+Math.log(l)/Math.LN10)),l/=w);y<=M&&C<=M;)if(F=(x+A)/(y+C),l===F){y+C<=M?(v=x+A,p=y+C):C>y?(v=A,p=C):(v=x,p=y);break}else l>F?(x+=A,y+=C):(A+=x,C+=y),y>M?(v=A,p=C):(v=x,p=y);v*=w}else(isNaN(l)||isNaN(h))&&(p=v=NaN);break}case"string":{if(y=l.match(/\d+|./g),y===null)throw s.InvalidParameter;if(y[x]==="-"?(d=-1,x++):y[x]==="+"&&x++,y.length===x+1?E=n(y[x++],d):y[x+1]==="."||y[x]==="."?(y[x]!=="."&&(g=n(y[x++],d)),x++,(x+1===y.length||y[x+1]==="("&&y[x+3]===")"||y[x+1]==="'"&&y[x+3]==="'")&&(E=n(y[x],d),_=Math.pow(10,y[x].length),x++),(y[x]==="("&&y[x+2]===")"||y[x]==="'"&&y[x+2]==="'")&&(D=n(y[x+1],d),w=Math.pow(10,y[x+1].length)-1,x+=3)):y[x+1]==="/"||y[x+1]===":"?(E=n(y[x],d),_=n(y[x+2],1),x+=3):y[x+3]==="/"&&y[x+1]===" "&&(g=n(y[x],d),E=n(y[x+2],d),_=n(y[x+4],1),x+=5),y.length<=x){p=_*w,d=v=D+p*g+w*E;break}}default:throw s.InvalidParameter}if(p===0)throw s.DivisionByZero;r.s=d<0?-1:1,r.n=Math.abs(v),r.d=Math.abs(p)};function m(l,h,v){for(var p=1;h>0;l=l*l%v,h>>=1)h&1&&(p=p*l%v);return p}function f(l,h){for(;h%2===0;h/=2);for(;h%5===0;h/=5);if(h===1)return 0;for(var v=10%h,p=1;v!==1;p++)if(v=v*10%h,p>e)return 0;return p}function u(l,h,v){for(var p=1,d=m(10,v,h),g=0;g<300;g++){if(p===d)return g;p=p*10%h,d=d*10%h}return 0}function a(l,h){if(!l)return h;if(!h)return l;for(;;){if(l%=h,!l)return h;if(h%=l,!h)return l}}function s(l,h){if(c(l,h),this instanceof s)l=a(r.d,r.n),this.s=r.s,this.n=r.n/l,this.d=r.d/l;else return i(r.s*r.n,r.d)}s.DivisionByZero=new Error("Division by Zero"),s.InvalidParameter=new Error("Invalid argument"),s.NonIntegerParameter=new Error("Parameters must be integer"),s.prototype={s:1,n:0,d:1,abs:function(){return i(this.n,this.d)},neg:function(){return i(-this.s*this.n,this.d)},add:function(l,h){return c(l,h),i(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(l,h){return c(l,h),i(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(l,h){return c(l,h),i(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(l,h){return c(l,h),i(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return i(this.s*this.n,this.d)},mod:function(l,h){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(l===void 0)return i(this.s*this.n%this.d,1);if(c(l,h),r.n===0&&this.d===0)throw s.DivisionByZero;return i(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(l,h){return c(l,h),i(a(r.n,this.n)*a(r.d,this.d),r.d*this.d)},lcm:function(l,h){return c(l,h),r.n===0&&this.n===0?i(0,1):i(r.n*this.n,a(r.n,this.n)*a(r.d,this.d))},ceil:function(l){return l=Math.pow(10,l||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.ceil(l*this.s*this.n/this.d),l)},floor:function(l){return l=Math.pow(10,l||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.floor(l*this.s*this.n/this.d),l)},round:function(l){return l=Math.pow(10,l||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.round(l*this.s*this.n/this.d),l)},inverse:function(){return i(this.s*this.d,this.n)},pow:function(l,h){if(c(l,h),r.d===1)return r.s<0?i(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):i(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var v=o(this.n),p=o(this.d),d=1,g=1;for(var E in v)if(E!=="1"){if(E==="0"){d=0;break}if(v[E]*=r.n,v[E]%r.d===0)v[E]/=r.d;else return null;d*=Math.pow(E,v[E])}for(var E in p)if(E!=="1"){if(p[E]*=r.n,p[E]%r.d===0)p[E]/=r.d;else return null;g*=Math.pow(E,p[E])}return r.s<0?i(g,d):i(d,g)},equals:function(l,h){return c(l,h),this.s*this.n*r.d===r.s*r.n*this.d},compare:function(l,h){c(l,h);var v=this.s*this.n*r.d-r.s*r.n*this.d;return(0<v)-(v<0)},simplify:function(l){if(isNaN(this.n)||isNaN(this.d))return this;l=l||.001;for(var h=this.abs(),v=h.toContinued(),p=1;p<v.length;p++){for(var d=i(v[p-1],1),g=p-2;g>=0;g--)d=d.inverse().add(v[g]);if(d.sub(h).abs().valueOf()<l)return d.mul(this.s)}return this},divisible:function(l,h){return c(l,h),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(l){var h,v="",p=this.n,d=this.d;return this.s<0&&(v+="-"),d===1?v+=p:(l&&(h=Math.floor(p/d))>0&&(v+=h,v+=" ",p%=d),v+=p,v+="/",v+=d),v},toLatex:function(l){var h,v="",p=this.n,d=this.d;return this.s<0&&(v+="-"),d===1?v+=p:(l&&(h=Math.floor(p/d))>0&&(v+=h,p%=d),v+="\\frac{",v+=p,v+="}{",v+=d,v+="}"),v},toContinued:function(){var l,h=this.n,v=this.d,p=[];if(isNaN(h)||isNaN(v))return p;do p.push(Math.floor(h/v)),l=h%v,h=v,v=l;while(h!==1);return p},toString:function(l){var h=this.n,v=this.d;if(isNaN(h)||isNaN(v))return"NaN";l=l||15;var p=f(h,v),d=u(h,v,p),g=this.s<0?"-":"";if(g+=h/v|0,h%=v,h*=10,h&&(g+="."),p){for(var E=d;E--;)g+=h/v|0,h%=v,h*=10;g+="(";for(var E=p;E--;)g+=h/v|0,h%=v,h*=10;g+=")"}else for(var E=l;h&&E--;)g+=h/v|0,h%=v,h*=10;return g}},typeof define=="function"&&define.amd?define([],function(){return s}):typeof fi=="object"?(Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,Uo.exports=s):t.Fraction=s})(fi)});var bp={};Rs(bp,{code:()=>In,interpret:()=>Ap});var Aa=ht(Pn());var Ke=class{constructor(e="INT"){this.base="INT";this.base=e}clone(){let e=new Ke;return e.base=this.base,e}toString(){return""+this.base}},We=class{constructor(e=""){this.str="";this.tmp="";this.str=e}},xt=class{constructor(){this.type=new Ke;this.code=new We;this.sym=null}};var Dr=class{constructor(e,r,n,i,o=[]){this.id="";this.kind="LOCAL";this.type=new Ke;this.scope=0;this.runtimeId="";this.subSymbols=[];this.functionOverloadSuccessor=null;this.value=null;this.id=e,this.kind=r,this.type=n,this.scope=i,this.subSymbols=o}toString(){let e="SYM";if(e+=',id="'+this.id+'"',e+=',kind="'+this.kind+'"',e+=',type="'+this.type.toString()+'"',e+=',scope="'+this.scope+'"',e+=',runtimeId="'+this.runtimeId+'"',this.subSymbols.length>0){e+=`,subSymbols=[
`;for(let r=0;r<this.subSymbols.length;r++)e+="  "+this.subSymbols[r].toString();e+="]"}return e+=`
`,e}};function zn(t,e){if(e==="ID")return"ID";if(e==="BOOL")return"BOOL";if(e==="INT")return"INT";if(e==="REAL")return"REAL";if(e==="COMPLEX")return"COMPLEX";if(e==="VECTOR")return"VECTOR";if(e==="MATRIX")return"MATRIX";if(e==="TERM")return"TERM";if(e==="TERM_VAR")return"TERM_VAR";if(e==="SET_INT")return"INT_SET";if(e==="SET_COMPLEX")return"COMPLEX_SET";if(e==="INT_LIST")return"INT_LIST";if(e==="COMPLEX_LIST")return"COMPLEX_LIST";if(e==="VECTOR_LIST")return"VECTOR_LIST";t.error("unknown base type "+e)}function ba(t){let e=new Aa.Lexer;e.configureSingleLineComments("#"),e.configureMultiLineComments("",""),e.enableEmitNewlines(!1),e.enableEmitIndentation(!1),e.enableBackslashLineBreaks(!1),e.setTerminals(["->"]),e.pushSource("PROTOTYPES",t);let r=[];for(;e.isNotEND();){let n=e.ID(),i=[],o=[];if(e.isTER("<")){e.next();let h=0;for(;e.isNotTER(">");)h>0&&e.TER(","),i.push(e.ID()),e.TER(":"),o.push(zn(e,e.ID())),h++;e.TER(">")}let c=[],m=[];e.TER("(");let f=0;for(;e.isNotTER(")");)f>0&&e.TER(","),c.push(e.ID()),e.TER(":"),m.push(zn(e,e.ID())),f++;e.TER(")"),e.TER(":");let u=zn(e,e.ID());e.TER("->");let a=e.ID();e.TER("."),a+="."+e.ID(),e.TER(";");let s=[];for(let h=0;h<i.length;h++){let v=new Dr(i[h],"DIMENSION",new Ke(o[h]),1,[]);s.push(v)}for(let h=0;h<c.length;h++){let v=new Dr(c[h],"PARAMETER",new Ke(m[h]),1,[]);s.push(v)}let l=new Dr(n,"FUNCTION",new Ke(u),0,s);l.runtimeId=a;for(let h=r.length-1;h>=0;h--)if(r[h].id===n){r[h].functionOverloadSuccessor=l;break}r.push(l)}return r}var jr=class extends Error{constructor(e){super(e),this.name="VectorError"}},Ie=class{constructor(e){this.size=1;this.values=[];this.size=e,this.values=new Array(e).fill(0)}getSize(){return this.size}setValue(e,r){this.values[e]=r}getValue(e){return this.values[e]}static vector2list(e){return e.clone().values}clone(){let e=new Ie(this.size);return e.values=[...this.values],e}toString(){let e="[";for(let r=0;r<this.size;r++)r>0&&(e+=","),e+=this.getValue(r);return e+="]",e}static add(e,r){if(e.size!=r.size)throw new jr("dimensions do not match");let n=e.clone();for(let i=0;i<r.size;i++)n.values[i]+=r.values[i];return n}static sub(e,r){if(e.size!=r.size)throw new jr("dimensions do not match");let n=e.clone();for(let i=0;i<r.size;i++)n.values[i]-=r.values[i];return n}mul(e){let r=this.clone();for(let n=0;n<r.size;n++)r.values[n]*=e;return r}static dot(e,r){if(e.size!=r.size)throw new jr("dimensions do not match");let n=0;for(let i=0;i<r.size;i++)n+=e.values[i]*r.values[i];return n}static cross(e,r){if(e.size!=3||r.size!=3)throw new jr("vector length must be 3");let n=new Ie(3);return n.values[0]=e.values[1]*r.values[2]-e.values[2]*r.values[1],n.values[1]=e.values[2]*r.values[0]-e.values[0]*r.values[2],n.values[2]=e.values[0]*r.values[1]-e.values[1]*r.values[0],n}norm2(){let e=0;for(let r=0;r<this.size;r++)e+=this.values[r]*this.values[r];return Math.sqrt(e)}is_zero(e=1e-9){for(let r=0;r<this.size;r++)if(Math.abs(this.getValue(r))>e)return!1;return!0}};var kt=class{constructor(e){this.parent=null;this.parent=e}_create(e,r){let n=new Ie(e),i=0;for(let o=0;o<e;o++)n.setValue(o,r[i++]);return n}_clone(e){return e.clone()}_getElement(e,r,n){if(r<0||r>=e.getSize())throw new De(n,"vector has "+e.getSize()+" elements. Cannot get element "+r);return e.getValue(r)}_setElement(e,r,n,i){if(r<0||r>=e.getSize())throw new De(i,"vector has "+e.getSize()+" element. Cannot get element "+r);e.setValue(r,n)}_addVectors(e,r,n){if(e.getSize()!=r.getSize())throw new De(n,"dimensions do not match");return Ie.add(e,r)}_subVectors(e,r,n){if(e.getSize()!=r.getSize())throw new De(n,"dimensions do not match");return Ie.sub(e,r)}_mulScalarVector(e,r){return r.mul(e)}_dotVectors(e,r,n){if(e.getSize()!=r.getSize())throw new De(n,"dimensions do not match");return Ie.dot(e,r)}_crossVectors(e,r,n){if(e.getSize()!=3||r.getSize()!=3)throw new De(n,"vector length must be 3");return Ie.cross(e,r)}_norm2vec(e){return e.norm2()}_zerosVector(e){let r=new Ie(e);for(let n=0;n<e;n++)r.setValue(n,0);return r}_randVector(e,r,n){let i=new Ie(e);for(let o=0;o<e;o++)i.setValue(o,this.parent.interpret_basic._randIntMinMax(r,n));return i}_randZVector(e,r,n){let i=new Ie(e);for(let o=0;o<e;o++)i.setValue(o,this.parent.interpret_basic._randIntMinMaxZ(r,n));return i}_isVectorZero(e){return e.is_zero(1e-9)}};function gt(){return gt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gt.apply(this,arguments)}var kn={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function be(t){return typeof t=="number"}function Fe(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function qn(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Vn(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function qt(t){return t&&t.constructor.prototype.isUnit===!0||!1}function tr(t){return typeof t=="string"}var Ce=Array.isArray;function Ee(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function _r(t){return Array.isArray(t)||Ee(t)}function Vt(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Xt(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ma(t){return t&&t.constructor.prototype.isRange===!0||!1}function Jr(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Ta(t){return typeof t=="boolean"}function Na(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Fa(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Sa(t){return typeof t=="function"}function Ba(t){return t instanceof Date}function Ia(t){return t instanceof RegExp}function Ra(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!qn(t)&&!Vn(t))}function La(t){return t===null}function Oa(t){return t===void 0}function Pa(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function za(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function ka(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function qa(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Va(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xa(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ua(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Za(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ha(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ga(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ya(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function $a(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qa(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function ja(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ja(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ka(t){return t&&t.constructor.prototype.isChain===!0||!1}function cr(t){var e=typeof t;return e==="object"?t===null?"null":Fe(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function ye(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return ye(r)});if(t instanceof Date)return new Date(t.valueOf());if(Fe(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Vs(t,ye)}function Vs(t,e){var r={};for(var n in t)Wr(t,n)&&(r[n]=e(t[n]));return r}function Ut(t,e){for(var r in e)Wr(e,r)&&(t[r]=e[r]);return t}function Kr(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Kr(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Kr(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function Wr(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Wa(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],o=t[i];o!==void 0&&(r[i]=o)}return r}var eo=["Matrix","Array"],ro=["number","BigNumber","Fraction"];var nr=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(kn)};gt(nr,kn,{MATRIX_OPTIONS:eo,NUMBER_OPTIONS:ro});var Jn=ht(to(),1);function ae(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}var no=Math.sign||function(t){return t>0?1:t<0?-1:0},io=Math.log2||function(e){return Math.log(e)/Math.LN2},ao=Math.log10||function(e){return Math.log(e)/Math.LN10},oo=Math.log1p||function(t){return Math.log(t+1)},uo=Math.cbrt||function(e){if(e===0)return e;var r=e<0,n;return r&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,r?-n:n},so=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Zn(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!ae(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!ae(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),o="i".concat(r)}var c="";return t<0&&(t=-t,c="-"),"".concat(c).concat(i).concat(t.toString(e)).concat(o)}function Dt(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),be(e)?n=e:be(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return fo(t,n);case"exponential":return co(t,n);case"engineering":return Xs(t,n);case"bin":return Zn(t,2,i);case"oct":return Zn(t,8,i);case"hex":return Zn(t,16,i);case"auto":return Us(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],c=arguments[4];return o!=="."?o+c:c});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Zt(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),o=n.indexOf(".");i+=o!==-1?o-1:n.length-1;var c=n.replace(".","").replace(/^0*/,function(m){return i-=m.length,""}).replace(/0*$/,"").split("").map(function(m){return parseInt(m)});return c.length===0&&(c.push(0),i++),{sign:r,coefficients:c,exponent:i}}function Xs(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zt(t),n=Ht(r,e),i=n.exponent,o=n.coefficients,c=i%3===0?i:i<0?i-3-i%3:i-i%3;if(be(e))for(;e>o.length||i-c+1>o.length;)o.push(0);else for(var m=Math.abs(i-c)-(o.length-1),f=0;f<m;f++)o.push(0);for(var u=Math.abs(i-c),a=1;u>0;)a++,u--;var s=o.slice(a).join(""),l=be(e)&&s.length||s.match(/[1-9]/)?"."+s:"",h=o.slice(0,a).join("")+l+"e"+(i>=0?"+":"")+c.toString();return n.sign+h}function fo(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zt(t),n=typeof e=="number"?Ht(r,r.exponent+1+e):r,i=n.coefficients,o=n.exponent+1,c=o+(e||0);return i.length<c&&(i=i.concat(et(c-i.length))),o<0&&(i=et(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),n.sign+i.join("")}function co(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zt(t),n=e?Ht(r,e):r,i=n.coefficients,o=n.exponent;i.length<e&&(i=i.concat(et(e-i.length)));var c=i.shift();return n.sign+c+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function Us(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,o=Zt(t),c=e?Ht(o,e):o;if(c.exponent<n||c.exponent>=i)return co(t,e);var m=c.coefficients,f=c.exponent;m.length<e&&(m=m.concat(et(e-m.length))),m=m.concat(et(f-m.length+1+(m.length<e?e-m.length:0))),m=et(-f).concat(m);var u=f>0?f:0;return u<m.length-1&&m.splice(u+1,0,"."),c.sign+m.join("")}function Ht(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var o=e-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),r.exponent++,o++),o--,n[o]++}}return r}function et(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function lo(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Zs=Number.EPSILON||2220446049250313e-31;function mr(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<Zs?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Hn(t,e,r){var n=t.constructor,i=new n(2),o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!ae(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),o="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function mo(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Gs(t,n);case"exponential":return po(t,n);case"engineering":return Hs(t,n);case"bin":return Hn(t,2,i);case"oct":return Hn(t,8,i);case"hex":return Hn(t,16,i);case"auto":{var o=e&&e.lowerExp!==void 0?e.lowerExp:-3,c=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var m,f=t.toSignificantDigits(n),u=f.e;return u>=o&&u<c?m=f.toFixed():m=po(t,n),m.replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Hs(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),o=i.toPrecision(e);return o.indexOf("e")!==-1&&(o=i.toString()),o+"e"+(r>=0?"+":"")+n.toString()}function po(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Gs(t,e){return t.toFixed(e)}function we(t,e){var r=Ys(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Ys(t,e){if(typeof t=="number")return Dt(t,e);if(Fe(t))return mo(t,e);if($s(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return ho(t,e);if(tr(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+we(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function ho(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=ho(t[i],e);return r+="]",r}else return we(t,e)}function $s(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function pe(t,e,r){if(!(this instanceof pe))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}pe.prototype=new RangeError;pe.prototype.constructor=RangeError;pe.prototype.name="DimensionError";pe.prototype.isDimensionError=!0;function Cr(t,e,r){if(!(this instanceof Cr))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Cr.prototype=new RangeError;Cr.prototype.constructor=RangeError;Cr.prototype.name="IndexError";Cr.prototype.isIndexError=!0;function Le(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function vo(t,e,r){var n,i=t.length;if(i!==e[r])throw new pe(i,e[r]);if(r<e.length-1){var o=r+1;for(n=0;n<i;n++){var c=t[n];if(!Array.isArray(c))throw new pe(e.length-1,e.length,"<");vo(t[n],e,o)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new pe(e.length+1,e.length,">")}function Yn(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new pe(t.length,0)}else vo(t,e,0)}function Ne(t,e){if(!be(t)||!ae(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Cr(t,e)}function Ur(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!be(i)||!ae(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+we(e)+")")});var n=r!==void 0?r:0;return Gn(t,e,0,n),t}function Gn(t,e,r,n){var i,o,c=t.length,m=e[r],f=Math.min(c,m);if(t.length=m,r<e.length-1){var u=r+1;for(i=0;i<f;i++)o=t[i],Array.isArray(o)||(o=[o],t[i]=o),Gn(o,e,u,n);for(i=f;i<m;i++)o=[],t[i]=o,Gn(o,e,u,n)}else{for(i=0;i<f;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=f;i<m;i++)t[i]=n}}function xo(t,e){var r=js(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new pe(0,n,"!=");e=Et(e,n);var i=go(e);if(n!==i)throw new pe(i,n,"!=");try{return Qs(r,e)}catch(o){throw o instanceof pe?new pe(i,n,"!="):o}}function Et(t,e){var r=go(t),n=t.slice(),i=-1,o=t.indexOf(i),c=t.indexOf(i,o+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var m=o>=0,f=e%r===0;if(m)if(f)n[o]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function go(t){return t.reduce((e,r)=>e*r,1)}function Qs(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var c=r.length/o,m=0;m<c;m++)n.push(r.slice(m*o,(m+1)*o));r=n}return r}function Gt(t,e,r,n){var i=n||Le(t);if(r)for(var o=0;o<r;o++)t=[t],i.unshift(1);for(t=Do(t,e,0);i.length<e;)i.push(1);return t}function Do(t,e,r){var n,i;if(Array.isArray(t)){var o=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Do(t[n],e,o)}else for(var c=r;c<e;c++)t=[t];return t}function js(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function rt(t,e){for(var r,n=0,i=0;i<t.length;i++){var o=t[i],c=Array.isArray(o);if(i===0&&c&&(n=o.length),c&&o.length!==n)return;var m=c?rt(o,e):e(o);if(r===void 0)r=m;else if(r!==m)return"mixed"}return r}function L(t,e,r,n){function i(o){var c=Wa(o,e.map(Ws));return Js(t,e,o),r(c)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Js(t,e,r){var n=e.filter(o=>!Ks(o)).every(o=>r[o]!==void 0);if(!n){var i=e.filter(o=>r[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function Ks(t){return t&&t[0]==="?"}function Ws(t){return t&&t[0]==="?"?t.slice(1):t}function Eo(t,e){if(Co(t)&&_o(t,e))return t[e];throw typeof t[e]=="function"&&ef(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function yo(t,e,r){if(Co(t)&&_o(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function wo(t,e){return e in t}function _o(t,e){return!t||typeof t!="object"?!1:Wr(rf,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ef(t,e){return t==null||typeof t[e]!="function"||Wr(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Wr(tf,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Co(t){return typeof t=="object"&&t&&t.constructor===Object}var rf={length:!0,name:!0},tf={toString:!0,valueOf:!0,toLocaleString:!0};var $n=class{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Eo(this.wrappedObject,e)}set(e,r){return yo(this.wrappedObject,e,r),this}has(e){return wo(this.wrappedObject,e)}};function Ao(t){return t?t instanceof Map||t instanceof $n||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var bo=function(){return bo=Jn.default.create,Jn.default},nf=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Kn=L("typed",nf,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:o}=e,c=bo();return c.clear(),c.addTypes([{name:"number",test:be},{name:"Complex",test:qn},{name:"BigNumber",test:Fe},{name:"Fraction",test:Vn},{name:"Unit",test:qt},{name:"identifier",test:m=>tr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(m)},{name:"string",test:tr},{name:"Chain",test:Ka},{name:"Array",test:Ce},{name:"Matrix",test:Ee},{name:"DenseMatrix",test:Vt},{name:"SparseMatrix",test:Xt},{name:"Range",test:Ma},{name:"Index",test:Jr},{name:"boolean",test:Ta},{name:"ResultSet",test:Na},{name:"Help",test:Fa},{name:"function",test:Sa},{name:"Date",test:Ba},{name:"RegExp",test:Ia},{name:"null",test:La},{name:"undefined",test:Oa},{name:"AccessorNode",test:Pa},{name:"ArrayNode",test:za},{name:"AssignmentNode",test:ka},{name:"BlockNode",test:qa},{name:"ConditionalNode",test:Va},{name:"ConstantNode",test:Xa},{name:"FunctionNode",test:Za},{name:"FunctionAssignmentNode",test:Ua},{name:"IndexNode",test:Ha},{name:"Node",test:Ga},{name:"ObjectNode",test:Ya},{name:"OperatorNode",test:$a},{name:"ParenthesisNode",test:Qa},{name:"RangeNode",test:ja},{name:"SymbolNode",test:Ja},{name:"Map",test:Ao},{name:"Object",test:Ra}]),c.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||Qn(f),lo(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return n||Yt(f),new n(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return n||Yt(f),new n(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return n||Yt(f),new n(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){o||jn(f);var u=new o(f);if(u.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(f){var u=Number(f);if(isNaN(u))throw new Error('Cannot convert "'+f+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(f){r||Qn(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){o||jn(f);try{return new o(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){n||Yt(f);try{return new n(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||Qn(f),new r(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return o||jn(f),new o(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||af(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),c.onMismatch=(m,f,u)=>{var a=c.createError(m,f,u);if(["wrongType","mismatch"].includes(a.data.category)&&f.length===1&&_r(f[0])&&u.some(l=>!l.params.includes(","))){var s=new TypeError("Function '".concat(m,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(m,")'."));throw s.data=a.data,s}throw a},c.onMismatch=(m,f,u)=>{var a=c.createError(m,f,u);if(["wrongType","mismatch"].includes(a.data.category)&&f.length===1&&_r(f[0])&&u.some(l=>!l.params.includes(","))){var s=new TypeError("Function '".concat(m,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(m,")'."));throw s.data=a.data,s}throw a},c});function Qn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Yt(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function af(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function jn(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var tt=9e15,Rr=1e9,Wn="0123456789abcdef",Qt="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",jt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ei={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-tt,maxE:tt,crypto:!1},Fo,Ar,ie=!0,Kt="[DecimalError] ",Ir=Kt+"Invalid argument: ",So=Kt+"Precision limit exceeded",Bo=Kt+"crypto unavailable",Io="[object Decimal]",$e=Math.floor,Oe=Math.pow,of=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,uf=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,sf=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ro=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,dr=1e7,te=7,ff=9007199254740991,cf=Qt.length-1,ri=jt.length-1,z={toStringTag:Io};z.absoluteValue=z.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),K(t)};z.ceil=function(){return K(new this.constructor(this),this.e+1,2)};z.clampedTo=z.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ir+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};z.comparedTo=z.cmp=function(t){var e,r,n,i,o=this,c=o.d,m=(t=new o.constructor(t)).d,f=o.s,u=t.s;if(!c||!m)return!f||!u?NaN:f!==u?f:c===m?0:!c^f<0?1:-1;if(!c[0]||!m[0])return c[0]?f:m[0]?-u:0;if(f!==u)return f;if(o.e!==t.e)return o.e>t.e^f<0?1:-1;for(n=c.length,i=m.length,e=0,r=n<i?n:i;e<r;++e)if(c[e]!==m[e])return c[e]>m[e]^f<0?1:-1;return n===i?0:n>i^f<0?1:-1};z.cosine=z.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+te,n.rounding=1,r=lf(n,ko(n,r)),n.precision=t,n.rounding=e,K(Ar==2||Ar==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};z.cubeRoot=z.cbrt=function(){var t,e,r,n,i,o,c,m,f,u,a=this,s=a.constructor;if(!a.isFinite()||a.isZero())return new s(a);for(ie=!1,o=a.s*Oe(a.s*a,1/3),!o||Math.abs(o)==1/0?(r=Ze(a.d),t=a.e,(o=(t-r.length+1)%3)&&(r+=o==1||o==-2?"0":"00"),o=Oe(r,1/3),t=$e((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?r="5e"+t:(r=o.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new s(r),n.s=a.s):n=new s(o.toString()),c=(t=s.precision)+3;;)if(m=n,f=m.times(m).times(m),u=f.plus(a),n=Te(u.plus(a).times(m),u.plus(f),c+2,1),Ze(m.d).slice(0,c)===(r=Ze(n.d)).slice(0,c))if(r=r.slice(c-3,c+1),r=="9999"||!i&&r=="4999"){if(!i&&(K(m,t+1,0),m.times(m).times(m).eq(a))){n=m;break}c+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(K(n,t+1,1),e=!n.times(n).times(n).eq(a));break}return ie=!0,K(n,t,s.rounding,e)};z.decimalPlaces=z.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-$e(this.e/te))*te,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};z.dividedBy=z.div=function(t){return Te(this,new this.constructor(t))};z.dividedToIntegerBy=z.divToInt=function(t){var e=this,r=e.constructor;return K(Te(e,new r(t),0,1,1),r.precision,r.rounding)};z.equals=z.eq=function(t){return this.cmp(t)===0};z.floor=function(){return K(new this.constructor(this),this.e+1,3)};z.greaterThan=z.gt=function(t){return this.cmp(t)>0};z.greaterThanOrEqualTo=z.gte=function(t){var e=this.cmp(t);return e==1||e===0};z.hyperbolicCosine=z.cosh=function(){var t,e,r,n,i,o=this,c=o.constructor,m=new c(1);if(!o.isFinite())return new c(o.s?1/0:NaN);if(o.isZero())return m;r=c.precision,n=c.rounding,c.precision=r+Math.max(o.e,o.sd())+4,c.rounding=1,i=o.d.length,i<32?(t=Math.ceil(i/3),e=(1/en(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=nt(c,1,o.times(e),new c(1),!0);for(var f,u=t,a=new c(8);u--;)f=o.times(o),o=m.minus(f.times(a.minus(f.times(a))));return K(o,c.precision=r,c.rounding=n,!0)};z.hyperbolicSine=z.sinh=function(){var t,e,r,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,r=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=nt(o,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/en(5,t)),i=nt(o,2,i,i,!0);for(var c,m=new o(5),f=new o(16),u=new o(20);t--;)c=i.times(i),i=i.times(m.plus(c.times(f.times(c).plus(u))))}return o.precision=e,o.rounding=r,K(i,e,r,!0)};z.hyperbolicTangent=z.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Te(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};z.inverseCosine=z.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,o=r.rounding;return n!==-1?n===0?e.isNeg()?vr(r,i,o):new r(0):new r(NaN):e.isZero()?vr(r,i+4,o).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=vr(r,i+4,o).times(.5),r.precision=i,r.rounding=o,t.minus(e))};z.inverseHyperbolicCosine=z.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ie=!1,r=r.times(r).minus(1).sqrt().plus(r),ie=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};z.inverseHyperbolicSine=z.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ie=!1,r=r.times(r).plus(1).sqrt().plus(r),ie=!0,n.precision=t,n.rounding=e,r.ln())};z.inverseHyperbolicTangent=z.atanh=function(){var t,e,r,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?K(new o(i),t,e,!0):(o.precision=r=n-i.e,i=Te(i.plus(1),new o(1).minus(i),r+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)};z.inverseSine=z.asin=function(){var t,e,r,n,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),r=o.precision,n=o.rounding,e!==-1?e===0?(t=vr(o,r+4,n).times(.5),t.s=i.s,t):new o(NaN):(o.precision=r+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=n,i.times(2)))};z.inverseTangent=z.atan=function(){var t,e,r,n,i,o,c,m,f,u=this,a=u.constructor,s=a.precision,l=a.rounding;if(u.isFinite()){if(u.isZero())return new a(u);if(u.abs().eq(1)&&s+4<=ri)return c=vr(a,s+4,l).times(.25),c.s=u.s,c}else{if(!u.s)return new a(NaN);if(s+4<=ri)return c=vr(a,s+4,l).times(.5),c.s=u.s,c}for(a.precision=m=s+10,a.rounding=1,r=Math.min(28,m/te+2|0),t=r;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ie=!1,e=Math.ceil(m/te),n=1,f=u.times(u),c=new a(u),i=u;t!==-1;)if(i=i.times(f),o=c.minus(i.div(n+=2)),i=i.times(f),c=o.plus(i.div(n+=2)),c.d[e]!==void 0)for(t=e;c.d[t]===o.d[t]&&t--;);return r&&(c=c.times(2<<r-1)),ie=!0,K(c,a.precision=s,a.rounding=l,!0)};z.isFinite=function(){return!!this.d};z.isInteger=z.isInt=function(){return!!this.d&&$e(this.e/te)>this.d.length-2};z.isNaN=function(){return!this.s};z.isNegative=z.isNeg=function(){return this.s<0};z.isPositive=z.isPos=function(){return this.s>0};z.isZero=function(){return!!this.d&&this.d[0]===0};z.lessThan=z.lt=function(t){return this.cmp(t)<0};z.lessThanOrEqualTo=z.lte=function(t){return this.cmp(t)<1};z.logarithm=z.log=function(t){var e,r,n,i,o,c,m,f,u=this,a=u.constructor,s=a.precision,l=a.rounding,h=5;if(t==null)t=new a(10),e=!0;else{if(t=new a(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new a(NaN);e=t.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new a(r&&!r[0]?-1/0:u.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)o=!0;else{for(i=r[0];i%10===0;)i/=10;o=i!==1}if(ie=!1,m=s+h,c=Br(u,m),n=e?Jt(a,m+10):Br(t,m),f=Te(c,n,m,1),yt(f.d,i=s,l))do if(m+=10,c=Br(u,m),n=e?Jt(a,m+10):Br(t,m),f=Te(c,n,m,1),!o){+Ze(f.d).slice(i+1,i+15)+1==1e14&&(f=K(f,s+1,0));break}while(yt(f.d,i+=10,l));return ie=!0,K(f,s,l)};z.minus=z.sub=function(t){var e,r,n,i,o,c,m,f,u,a,s,l,h=this,v=h.constructor;if(t=new v(t),!h.d||!t.d)return!h.s||!t.s?t=new v(NaN):h.d?t.s=-t.s:t=new v(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(u=h.d,l=t.d,m=v.precision,f=v.rounding,!u[0]||!l[0]){if(l[0])t.s=-t.s;else if(u[0])t=new v(h);else return new v(f===3?-0:0);return ie?K(t,m,f):t}if(r=$e(t.e/te),a=$e(h.e/te),u=u.slice(),o=a-r,o){for(s=o<0,s?(e=u,o=-o,c=l.length):(e=l,r=a,c=u.length),n=Math.max(Math.ceil(m/te),c)+2,o>n&&(o=n,e.length=1),e.reverse(),n=o;n--;)e.push(0);e.reverse()}else{for(n=u.length,c=l.length,s=n<c,s&&(c=n),n=0;n<c;n++)if(u[n]!=l[n]){s=u[n]<l[n];break}o=0}for(s&&(e=u,u=l,l=e,t.s=-t.s),c=u.length,n=l.length-c;n>0;--n)u[c++]=0;for(n=l.length;n>o;){if(u[--n]<l[n]){for(i=n;i&&u[--i]===0;)u[i]=dr-1;--u[i],u[n]+=dr}u[n]-=l[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(t.d=u,t.e=Wt(u,r),ie?K(t,m,f):t):new v(f===3?-0:0)};z.modulo=z.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?K(new n(r),n.precision,n.rounding):(ie=!1,n.modulo==9?(e=Te(r,t.abs(),0,3,1),e.s*=t.s):e=Te(r,t,0,n.modulo,1),e=e.times(t),ie=!0,r.minus(e))};z.naturalExponential=z.exp=function(){return ti(this)};z.naturalLogarithm=z.ln=function(){return Br(this)};z.negated=z.neg=function(){var t=new this.constructor(this);return t.s=-t.s,K(t)};z.plus=z.add=function(t){var e,r,n,i,o,c,m,f,u,a,s=this,l=s.constructor;if(t=new l(t),!s.d||!t.d)return!s.s||!t.s?t=new l(NaN):s.d||(t=new l(t.d||s.s===t.s?s:NaN)),t;if(s.s!=t.s)return t.s=-t.s,s.minus(t);if(u=s.d,a=t.d,m=l.precision,f=l.rounding,!u[0]||!a[0])return a[0]||(t=new l(s)),ie?K(t,m,f):t;if(o=$e(s.e/te),n=$e(t.e/te),u=u.slice(),i=o-n,i){for(i<0?(r=u,i=-i,c=a.length):(r=a,n=o,c=u.length),o=Math.ceil(m/te),c=o>c?o+1:c+1,i>c&&(i=c,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(c=u.length,i=a.length,c-i<0&&(i=c,r=a,a=u,u=r),e=0;i;)e=(u[--i]=u[i]+a[i]+e)/dr|0,u[i]%=dr;for(e&&(u.unshift(e),++n),c=u.length;u[--c]==0;)u.pop();return t.d=u,t.e=Wt(u,n),ie?K(t,m,f):t};z.precision=z.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ir+t);return r.d?(e=Lo(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};z.round=function(){var t=this,e=t.constructor;return K(new e(t),t.e+1,e.rounding)};z.sine=z.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+te,n.rounding=1,r=mf(n,ko(n,r)),n.precision=t,n.rounding=e,K(Ar>2?r.neg():r,t,e,!0)):new n(NaN)};z.squareRoot=z.sqrt=function(){var t,e,r,n,i,o,c=this,m=c.d,f=c.e,u=c.s,a=c.constructor;if(u!==1||!m||!m[0])return new a(!u||u<0&&(!m||m[0])?NaN:m?c:1/0);for(ie=!1,u=Math.sqrt(+c),u==0||u==1/0?(e=Ze(m),(e.length+f)%2==0&&(e+="0"),u=Math.sqrt(e),f=$e((f+1)/2)-(f<0||f%2),u==1/0?e="5e"+f:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+f),n=new a(e)):n=new a(u.toString()),r=(f=a.precision)+3;;)if(o=n,n=o.plus(Te(c,o,r+2,1)).times(.5),Ze(o.d).slice(0,r)===(e=Ze(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(K(o,f+1,0),o.times(o).eq(c))){n=o;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(K(n,f+1,1),t=!n.times(n).eq(c));break}return ie=!0,K(n,f,a.rounding,t)};z.tangent=z.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Te(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,K(Ar==2||Ar==4?r.neg():r,t,e,!0)):new n(NaN)};z.times=z.mul=function(t){var e,r,n,i,o,c,m,f,u,a=this,s=a.constructor,l=a.d,h=(t=new s(t)).d;if(t.s*=a.s,!l||!l[0]||!h||!h[0])return new s(!t.s||l&&!l[0]&&!h||h&&!h[0]&&!l?NaN:!l||!h?t.s/0:t.s*0);for(r=$e(a.e/te)+$e(t.e/te),f=l.length,u=h.length,f<u&&(o=l,l=h,h=o,c=f,f=u,u=c),o=[],c=f+u,n=c;n--;)o.push(0);for(n=u;--n>=0;){for(e=0,i=f+n;i>n;)m=o[i]+h[n]*l[i-n-1]+e,o[i--]=m%dr|0,e=m/dr|0;o[i]=(o[i]+e)%dr|0}for(;!o[--c];)o.pop();return e?++r:o.shift(),t.d=o,t.e=Wt(o,r),ie?K(t,s.precision,s.rounding):t};z.toBinary=function(t,e){return ii(this,2,t,e)};z.toDecimalPlaces=z.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ir(t,0,Rr),e===void 0?e=n.rounding:ir(e,0,8),K(r,t+r.e+1,e))};z.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Er(n,!0):(ir(t,0,Rr),e===void 0?e=i.rounding:ir(e,0,8),n=K(new i(n),t+1,e),r=Er(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};z.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?r=Er(i):(ir(t,0,Rr),e===void 0?e=o.rounding:ir(e,0,8),n=K(new o(i),t+i.e+1,e),r=Er(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};z.toFraction=function(t){var e,r,n,i,o,c,m,f,u,a,s,l,h=this,v=h.d,p=h.constructor;if(!v)return new p(h);if(u=r=new p(1),n=f=new p(0),e=new p(n),o=e.e=Lo(v)-h.e-1,c=o%te,e.d[0]=Oe(10,c<0?te+c:c),t==null)t=o>0?e:u;else{if(m=new p(t),!m.isInt()||m.lt(u))throw Error(Ir+m);t=m.gt(e)?o>0?e:u:m}for(ie=!1,m=new p(Ze(v)),a=p.precision,p.precision=o=v.length*te*2;s=Te(m,e,0,1,1),i=r.plus(s.times(n)),i.cmp(t)!=1;)r=n,n=i,i=u,u=f.plus(s.times(i)),f=i,i=e,e=m.minus(s.times(i)),m=i;return i=Te(t.minus(r),n,0,1,1),f=f.plus(i.times(u)),r=r.plus(i.times(n)),f.s=u.s=h.s,l=Te(u,n,o,1).minus(h).abs().cmp(Te(f,r,o,1).minus(h).abs())<1?[u,n]:[f,r],p.precision=a,ie=!0,l};z.toHexadecimal=z.toHex=function(t,e){return ii(this,16,t,e)};z.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:ir(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ie=!1,r=Te(r,t,0,e,1).times(t),ie=!0,K(r)):(t.s=r.s,r=t),r};z.toNumber=function(){return+this};z.toOctal=function(t,e){return ii(this,8,t,e)};z.toPower=z.pow=function(t){var e,r,n,i,o,c,m=this,f=m.constructor,u=+(t=new f(t));if(!m.d||!t.d||!m.d[0]||!t.d[0])return new f(Oe(+m,u));if(m=new f(m),m.eq(1))return m;if(n=f.precision,o=f.rounding,t.eq(1))return K(m,n,o);if(e=$e(t.e/te),e>=t.d.length-1&&(r=u<0?-u:u)<=ff)return i=Oo(f,m,r,n),t.s<0?new f(1).div(i):K(i,n,o);if(c=m.s,c<0){if(e<t.d.length-1)return new f(NaN);if((t.d[e]&1)==0&&(c=1),m.e==0&&m.d[0]==1&&m.d.length==1)return m.s=c,m}return r=Oe(+m,u),e=r==0||!isFinite(r)?$e(u*(Math.log("0."+Ze(m.d))/Math.LN10+m.e+1)):new f(r+"").e,e>f.maxE+1||e<f.minE-1?new f(e>0?c/0:0):(ie=!1,f.rounding=m.s=1,r=Math.min(12,(e+"").length),i=ti(t.times(Br(m,n+r)),n),i.d&&(i=K(i,n+5,1),yt(i.d,n,o)&&(e=n+10,i=K(ti(t.times(Br(m,e+r)),e),e+5,1),+Ze(i.d).slice(n+1,n+15)+1==1e14&&(i=K(i,n+1,0)))),i.s=c,ie=!0,f.rounding=o,K(i,n,o))};z.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Er(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(ir(t,1,Rr),e===void 0?e=i.rounding:ir(e,0,8),n=K(new i(n),t,e),r=Er(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};z.toSignificantDigits=z.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ir(t,1,Rr),e===void 0?e=n.rounding:ir(e,0,8)),K(new n(r),t,e)};z.toString=function(){var t=this,e=t.constructor,r=Er(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};z.truncated=z.trunc=function(){return K(new this.constructor(this),this.e+1,1)};z.valueOf=z.toJSON=function(){var t=this,e=t.constructor,r=Er(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ze(t){var e,r,n,i=t.length-1,o="",c=t[0];if(i>0){for(o+=c,e=1;e<i;e++)n=t[e]+"",r=te-n.length,r&&(o+=Sr(r)),o+=n;c=t[e],n=c+"",r=te-n.length,r&&(o+=Sr(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return o+c}function ir(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ir+t)}function yt(t,e,r,n){var i,o,c,m;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=te,i=0):(i=Math.ceil((e+1)/te),e%=te),o=Oe(10,te-e),m=t[i]%o|0,n==null?e<3?(e==0?m=m/100|0:e==1&&(m=m/10|0),c=r<4&&m==99999||r>3&&m==49999||m==5e4||m==0):c=(r<4&&m+1==o||r>3&&m+1==o/2)&&(t[i+1]/o/100|0)==Oe(10,e-2)-1||(m==o/2||m==0)&&(t[i+1]/o/100|0)==0:e<4?(e==0?m=m/1e3|0:e==1?m=m/100|0:e==2&&(m=m/10|0),c=(n||r<4)&&m==9999||!n&&r>3&&m==4999):c=((n||r<4)&&m+1==o||!n&&r>3&&m+1==o/2)&&(t[i+1]/o/1e3|0)==Oe(10,e-3)-1,c}function $t(t,e,r){for(var n,i=[0],o,c=0,m=t.length;c<m;){for(o=i.length;o--;)i[o]*=e;for(i[0]+=Wn.indexOf(t.charAt(c++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function lf(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/en(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=nt(t,1,e.times(i),new t(1));for(var o=r;o--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return t.precision-=r,e}var Te=function(){function t(n,i,o){var c,m=0,f=n.length;for(n=n.slice();f--;)c=n[f]*i+m,n[f]=c%o|0,m=c/o|0;return m&&n.unshift(m),n}function e(n,i,o,c){var m,f;if(o!=c)f=o>c?1:-1;else for(m=f=0;m<o;m++)if(n[m]!=i[m]){f=n[m]>i[m]?1:-1;break}return f}function r(n,i,o,c){for(var m=0;o--;)n[o]-=m,m=n[o]<i[o]?1:0,n[o]=m*c+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,c,m,f){var u,a,s,l,h,v,p,d,g,E,D,_,w,x,y,A,C,M,F,R,q=n.constructor,O=n.s==i.s?1:-1,I=n.d,N=i.d;if(!I||!I[0]||!N||!N[0])return new q(!n.s||!i.s||(I?N&&I[0]==N[0]:!N)?NaN:I&&I[0]==0||!N?O*0:O/0);for(f?(h=1,a=n.e-i.e):(f=dr,h=te,a=$e(n.e/h)-$e(i.e/h)),F=N.length,C=I.length,g=new q(O),E=g.d=[],s=0;N[s]==(I[s]||0);s++);if(N[s]>(I[s]||0)&&a--,o==null?(x=o=q.precision,c=q.rounding):m?x=o+(n.e-i.e)+1:x=o,x<0)E.push(1),v=!0;else{if(x=x/h+2|0,s=0,F==1){for(l=0,N=N[0],x++;(s<C||l)&&x--;s++)y=l*f+(I[s]||0),E[s]=y/N|0,l=y%N|0;v=l||s<C}else{for(l=f/(N[0]+1)|0,l>1&&(N=t(N,l,f),I=t(I,l,f),F=N.length,C=I.length),A=F,D=I.slice(0,F),_=D.length;_<F;)D[_++]=0;R=N.slice(),R.unshift(0),M=N[0],N[1]>=f/2&&++M;do l=0,u=e(N,D,F,_),u<0?(w=D[0],F!=_&&(w=w*f+(D[1]||0)),l=w/M|0,l>1?(l>=f&&(l=f-1),p=t(N,l,f),d=p.length,_=D.length,u=e(p,D,d,_),u==1&&(l--,r(p,F<d?R:N,d,f))):(l==0&&(u=l=1),p=N.slice()),d=p.length,d<_&&p.unshift(0),r(D,p,_,f),u==-1&&(_=D.length,u=e(N,D,F,_),u<1&&(l++,r(D,F<_?R:N,_,f))),_=D.length):u===0&&(l++,D=[0]),E[s++]=l,u&&D[0]?D[_++]=I[A]||0:(D=[I[A]],_=1);while((A++<C||D[0]!==void 0)&&x--);v=D[0]!==void 0}E[0]||E.shift()}if(h==1)g.e=a,Fo=v;else{for(s=1,l=E[0];l>=10;l/=10)s++;g.e=s+a*h-1,K(g,m?o+g.e+1:o,c,v)}return g}}();function K(t,e,r,n){var i,o,c,m,f,u,a,s,l,h=t.constructor;e:if(e!=null){if(s=t.d,!s)return t;for(i=1,m=s[0];m>=10;m/=10)i++;if(o=e-i,o<0)o+=te,c=e,a=s[l=0],f=a/Oe(10,i-c-1)%10|0;else if(l=Math.ceil((o+1)/te),m=s.length,l>=m)if(n){for(;m++<=l;)s.push(0);a=f=0,i=1,o%=te,c=o-te+1}else break e;else{for(a=m=s[l],i=1;m>=10;m/=10)i++;o%=te,c=o-te+i,f=c<0?0:a/Oe(10,i-c-1)%10|0}if(n=n||e<0||s[l+1]!==void 0||(c<0?a:a%Oe(10,i-c-1)),u=r<4?(f||n)&&(r==0||r==(t.s<0?3:2)):f>5||f==5&&(r==4||n||r==6&&(o>0?c>0?a/Oe(10,i-c):0:s[l-1])%10&1||r==(t.s<0?8:7)),e<1||!s[0])return s.length=0,u?(e-=t.e+1,s[0]=Oe(10,(te-e%te)%te),t.e=-e||0):s[0]=t.e=0,t;if(o==0?(s.length=l,m=1,l--):(s.length=l+1,m=Oe(10,te-o),s[l]=c>0?(a/Oe(10,i-c)%Oe(10,c)|0)*m:0),u)for(;;)if(l==0){for(o=1,c=s[0];c>=10;c/=10)o++;for(c=s[0]+=m,m=1;c>=10;c/=10)m++;o!=m&&(t.e++,s[0]==dr&&(s[0]=1));break}else{if(s[l]+=m,s[l]!=dr)break;s[l--]=0,m=1}for(o=s.length;s[--o]===0;)s.pop()}return ie&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function Er(t,e,r){if(!t.isFinite())return zo(t);var n,i=t.e,o=Ze(t.d),c=o.length;return e?(r&&(n=r-c)>0?o=o.charAt(0)+"."+o.slice(1)+Sr(n):c>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+Sr(-i-1)+o,r&&(n=r-c)>0&&(o+=Sr(n))):i>=c?(o+=Sr(i+1-c),r&&(n=r-i-1)>0&&(o=o+"."+Sr(n))):((n=i+1)<c&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(o+="."),o+=Sr(n))),o}function Wt(t,e){var r=t[0];for(e*=te;r>=10;r/=10)e++;return e}function Jt(t,e,r){if(e>cf)throw ie=!0,r&&(t.precision=r),Error(So);return K(new t(Qt),e,1,!0)}function vr(t,e,r){if(e>ri)throw Error(So);return K(new t(jt),e,r,!0)}function Lo(t){var e=t.length-1,r=e*te+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Sr(t){for(var e="";t--;)e+="0";return e}function Oo(t,e,r,n){var i,o=new t(1),c=Math.ceil(n/te+4);for(ie=!1;;){if(r%2&&(o=o.times(e),To(o.d,c)&&(i=!0)),r=$e(r/2),r===0){r=o.d.length-1,i&&o.d[r]===0&&++o.d[r];break}e=e.times(e),To(e.d,c)}return ie=!0,o}function Mo(t){return t.d[t.d.length-1]&1}function Po(t,e,r){for(var n,i=new t(e[0]),o=0;++o<e.length;)if(n=new t(e[o]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function ti(t,e){var r,n,i,o,c,m,f,u=0,a=0,s=0,l=t.constructor,h=l.rounding,v=l.precision;if(!t.d||!t.d[0]||t.e>17)return new l(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ie=!1,f=v):f=e,m=new l(.03125);t.e>-2;)t=t.times(m),s+=5;for(n=Math.log(Oe(2,s))/Math.LN10*2+5|0,f+=n,r=o=c=new l(1),l.precision=f;;){if(o=K(o.times(t),f,1),r=r.times(++a),m=c.plus(Te(o,r,f,1)),Ze(m.d).slice(0,f)===Ze(c.d).slice(0,f)){for(i=s;i--;)c=K(c.times(c),f,1);if(e==null)if(u<3&&yt(c.d,f-n,h,u))l.precision=f+=10,r=o=m=new l(1),a=0,u++;else return K(c,l.precision=v,h,ie=!0);else return l.precision=v,c}c=m}}function Br(t,e){var r,n,i,o,c,m,f,u,a,s,l,h=1,v=10,p=t,d=p.d,g=p.constructor,E=g.rounding,D=g.precision;if(p.s<0||!d||!d[0]||!p.e&&d[0]==1&&d.length==1)return new g(d&&!d[0]?-1/0:p.s!=1?NaN:d?0:p);if(e==null?(ie=!1,a=D):a=e,g.precision=a+=v,r=Ze(d),n=r.charAt(0),Math.abs(o=p.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Ze(p.d),n=r.charAt(0),h++;o=p.e,n>1?(p=new g("0."+r),o++):p=new g(n+"."+r.slice(1))}else return u=Jt(g,a+2,D).times(o+""),p=Br(new g(n+"."+r.slice(1)),a-v).plus(u),g.precision=D,e==null?K(p,D,E,ie=!0):p;for(s=p,f=c=p=Te(p.minus(1),p.plus(1),a,1),l=K(p.times(p),a,1),i=3;;){if(c=K(c.times(l),a,1),u=f.plus(Te(c,new g(i),a,1)),Ze(u.d).slice(0,a)===Ze(f.d).slice(0,a))if(f=f.times(2),o!==0&&(f=f.plus(Jt(g,a+2,D).times(o+""))),f=Te(f,new g(h),a,1),e==null)if(yt(f.d,a-v,E,m))g.precision=a+=v,u=c=p=Te(s.minus(1),s.plus(1),a,1),l=K(p.times(p),a,1),i=m=1;else return K(f,g.precision=D,E,ie=!0);else return g.precision=D,f;f=u,i+=2}}function zo(t){return String(t.s*t.s/0)}function ni(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%te,r<0&&(n+=te),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=te;n<i;)t.d.push(+e.slice(n,n+=te));e=e.slice(n),n=te-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ie&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function pf(t,e){var r,n,i,o,c,m,f,u,a;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Ro.test(e))return ni(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(uf.test(e))r=16,e=e.toLowerCase();else if(of.test(e))r=2;else if(sf.test(e))r=8;else throw Error(Ir+e);for(o=e.search(/p/i),o>0?(f=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),c=o>=0,n=t.constructor,c&&(e=e.replace(".",""),m=e.length,o=m-o,i=Oo(n,new n(r),o,o*2)),u=$t(e,r,dr),a=u.length-1,o=a;u[o]===0;--o)u.pop();return o<0?new n(t.s*0):(t.e=Wt(u,a),t.d=u,ie=!1,c&&(t=Te(t,i,m*4)),f&&(t=t.times(Math.abs(f)<54?Oe(2,f):wt.pow(2,f))),ie=!0,t)}function mf(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:nt(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/en(5,r)),e=nt(t,2,e,e);for(var i,o=new t(5),c=new t(16),m=new t(20);r--;)i=e.times(e),e=e.times(o.plus(i.times(c.times(i).minus(m))));return e}function nt(t,e,r,n,i){var o,c,m,f,u=1,a=t.precision,s=Math.ceil(a/te);for(ie=!1,f=r.times(r),m=new t(n);;){if(c=Te(m.times(f),new t(e++*e++),a,1),m=i?n.plus(c):n.minus(c),n=Te(c.times(f),new t(e++*e++),a,1),c=m.plus(n),c.d[s]!==void 0){for(o=s;c.d[o]===m.d[o]&&o--;);if(o==-1)break}o=m,m=n,n=c,c=o,u++}return ie=!0,c.d.length=s+1,c}function en(t,e){for(var r=t;--e;)r*=t;return r}function ko(t,e){var r,n=e.s<0,i=vr(t,t.precision,1),o=i.times(.5);if(e=e.abs(),e.lte(o))return Ar=n?4:1,e;if(r=e.divToInt(i),r.isZero())Ar=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(o))return Ar=Mo(r)?n?2:3:n?4:1,e;Ar=Mo(r)?n?1:4:n?3:2}return e.minus(i).abs()}function ii(t,e,r,n){var i,o,c,m,f,u,a,s,l,h=t.constructor,v=r!==void 0;if(v?(ir(r,1,Rr),n===void 0?n=h.rounding:ir(n,0,8)):(r=h.precision,n=h.rounding),!t.isFinite())a=zo(t);else{for(a=Er(t),c=a.indexOf("."),v?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,c>=0&&(a=a.replace(".",""),l=new h(1),l.e=a.length-c,l.d=$t(Er(l),10,i),l.e=l.d.length),s=$t(a,10,i),o=f=s.length;s[--f]==0;)s.pop();if(!s[0])a=v?"0p+0":"0";else{if(c<0?o--:(t=new h(t),t.d=s,t.e=o,t=Te(t,l,r,n,0,i),s=t.d,o=t.e,u=Fo),c=s[r],m=i/2,u=u||s[r+1]!==void 0,u=n<4?(c!==void 0||u)&&(n===0||n===(t.s<0?3:2)):c>m||c===m&&(n===4||u||n===6&&s[r-1]&1||n===(t.s<0?8:7)),s.length=r,u)for(;++s[--r]>i-1;)s[r]=0,r||(++o,s.unshift(1));for(f=s.length;!s[f-1];--f);for(c=0,a="";c<f;c++)a+=Wn.charAt(s[c]);if(v){if(f>1)if(e==16||e==8){for(c=e==16?4:3,--f;f%c;f++)a+="0";for(s=$t(a,i,e),f=s.length;!s[f-1];--f);for(c=1,a="1.";c<f;c++)a+=Wn.charAt(s[c])}else a=a.charAt(0)+"."+a.slice(1);a=a+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)a="0"+a;a="0."+a}else if(++o>f)for(o-=f;o--;)a+="0";else o<f&&(a=a.slice(0,o)+"."+a.slice(o))}a=(e==16?"0x":e==2?"0b":e==8?"0o":"")+a}return t.s<0?"-"+a:a}function To(t,e){if(t.length>e)return t.length=e,!0}function hf(t){return new this(t).abs()}function vf(t){return new this(t).acos()}function df(t){return new this(t).acosh()}function xf(t,e){return new this(t).plus(e)}function gf(t){return new this(t).asin()}function Df(t){return new this(t).asinh()}function Ef(t){return new this(t).atan()}function yf(t){return new this(t).atanh()}function wf(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,o=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=vr(this,o,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?vr(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=vr(this,o,1).times(.5),r.s=t.s):e.s<0?(this.precision=o,this.rounding=1,r=this.atan(Te(t,e,o,1)),e=vr(this,o,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Te(t,e,o,1)),r}function _f(t){return new this(t).cbrt()}function Cf(t){return K(t=new this(t),t.e+1,2)}function Af(t,e,r){return new this(t).clamp(e,r)}function bf(t){if(!t||typeof t!="object")throw Error(Kt+"Object expected");var e,r,n,i=t.defaults===!0,o=["precision",1,Rr,"rounding",0,8,"toExpNeg",-tt,0,"toExpPos",0,tt,"maxE",0,tt,"minE",-tt,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(r=o[e],i&&(this[r]=ei[r]),(n=t[r])!==void 0)if($e(n)===n&&n>=o[e+1]&&n<=o[e+2])this[r]=n;else throw Error(Ir+r+": "+n);if(r="crypto",i&&(this[r]=ei[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Bo);else this[r]=!1;else throw Error(Ir+r+": "+n);return this}function Mf(t){return new this(t).cos()}function Tf(t){return new this(t).cosh()}function qo(t){var e,r,n;function i(o){var c,m,f,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,No(o)){u.s=o.s,ie?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(f=typeof o,f==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(c=0,m=o;m>=10;m/=10)c++;ie?c>i.maxE?(u.e=NaN,u.d=null):c<i.minE?(u.e=0,u.d=[0]):(u.e=c,u.d=[o]):(u.e=c,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return ni(u,o.toString())}else if(f!=="string")throw Error(Ir+o);return(m=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(m===43&&(o=o.slice(1)),u.s=1),Ro.test(o)?ni(u,o):pf(u,o)}if(i.prototype=z,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=bf,i.clone=qo,i.isDecimal=No,i.abs=hf,i.acos=vf,i.acosh=df,i.add=xf,i.asin=gf,i.asinh=Df,i.atan=Ef,i.atanh=yf,i.atan2=wf,i.cbrt=_f,i.ceil=Cf,i.clamp=Af,i.cos=Mf,i.cosh=Tf,i.div=Nf,i.exp=Ff,i.floor=Sf,i.hypot=Bf,i.ln=If,i.log=Rf,i.log10=Of,i.log2=Lf,i.max=Pf,i.min=zf,i.mod=kf,i.mul=qf,i.pow=Vf,i.random=Xf,i.round=Uf,i.sign=Zf,i.sin=Hf,i.sinh=Gf,i.sqrt=Yf,i.sub=$f,i.sum=Qf,i.tan=jf,i.tanh=Jf,i.trunc=Kf,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Nf(t,e){return new this(t).div(e)}function Ff(t){return new this(t).exp()}function Sf(t){return K(t=new this(t),t.e+1,3)}function Bf(){var t,e,r=new this(0);for(ie=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ie=!0,new this(1/0);r=e}return ie=!0,r.sqrt()}function No(t){return t instanceof wt||t&&t.toStringTag===Io||!1}function If(t){return new this(t).ln()}function Rf(t,e){return new this(t).log(e)}function Lf(t){return new this(t).log(2)}function Of(t){return new this(t).log(10)}function Pf(){return Po(this,arguments,"lt")}function zf(){return Po(this,arguments,"gt")}function kf(t,e){return new this(t).mod(e)}function qf(t,e){return new this(t).mul(e)}function Vf(t,e){return new this(t).pow(e)}function Xf(t){var e,r,n,i,o=0,c=new this(1),m=[];if(t===void 0?t=this.precision:ir(t,1,Rr),n=Math.ceil(t/te),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));o<n;)i=e[o],i>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:m[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);o<n;)i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,o):(m.push(i%1e7),o+=4);o=n/4}else throw Error(Bo);else for(;o<n;)m[o++]=Math.random()*1e7|0;for(n=m[--o],t%=te,n&&t&&(i=Oe(10,te-t),m[o]=(n/i|0)*i);m[o]===0;o--)m.pop();if(o<0)r=0,m=[0];else{for(r=-1;m[0]===0;r-=te)m.shift();for(n=1,i=m[0];i>=10;i/=10)n++;n<te&&(r-=te-n)}return c.e=r,c.d=m,c}function Uf(t){return K(t=new this(t),t.e+1,this.rounding)}function Zf(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Hf(t){return new this(t).sin()}function Gf(t){return new this(t).sinh()}function Yf(t){return new this(t).sqrt()}function $f(t,e){return new this(t).sub(e)}function Qf(){var t=0,e=arguments,r=new this(e[t]);for(ie=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ie=!0,K(r,this.precision,this.rounding)}function jf(t){return new this(t).tan()}function Jf(t){return new this(t).tanh()}function Kf(t){return K(t=new this(t),t.e+1,1)}z[Symbol.for("nodejs.util.inspect.custom")]=z.toString;z[Symbol.toStringTag]="Decimal";var wt=z.constructor=qo(ei);Qt=new wt(Qt);jt=new wt(jt);var ai=wt;var Wf="BigNumber",ec=["?on","config"],oi=L(Wf,ec,t=>{var{on:e,config:r}=t,n=ai.clone({precision:r.precision,modulo:ai.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,o){i.precision!==o.precision&&n.config({precision:i.precision})}),n},{isClass:!0});var qe=ht(Xo(),1);var rc="Complex",tc=[],si=L(rc,tc,()=>(Object.defineProperty(qe.default,"name",{value:"Complex"}),qe.default.prototype.constructor=qe.default,qe.default.prototype.type="Complex",qe.default.prototype.isComplex=!0,qe.default.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},qe.default.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},qe.default.prototype.format=function(t){var e="",r=this.im,n=this.re,i=Dt(this.re,t),o=Dt(this.im,t),c=be(t)?t:t?t.precision:null;if(c!==null){var m=Math.pow(10,-c);Math.abs(n/r)<m&&(n=0),Math.abs(r/n)<m&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=o+"i":r<0?r===-1?e=i+" - i":e=i+" - "+o.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+o+"i",e},qe.default.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return(0,qe.default)(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(be(r)){if(qt(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),be(n))return new qe.default({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},qe.default.prototype.valueOf=qe.default.prototype.toString,qe.default.fromJSON=function(t){return new qe.default(t)},qe.default.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},qe.default),{isClass:!0});var yr=ht(Zo(),1);var nc="Fraction",ic=[],ci=L(nc,ic,()=>(Object.defineProperty(yr.default,"name",{value:"Fraction"}),yr.default.prototype.constructor=yr.default,yr.default.prototype.type="Fraction",yr.default.prototype.isFraction=!0,yr.default.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},yr.default.fromJSON=function(t){return new yr.default(t)},yr.default),{isClass:!0});var ac="Matrix",oc=[],li=L(ac,oc,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function rn(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var uc="DenseMatrix",sc=["Matrix"],pi=L(uc,sc,t=>{var{Matrix:e}=t;function r(a,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!tr(s))throw new Error("Invalid datatype: "+s);if(Ee(a))a.type==="DenseMatrix"?(this._data=ye(a._data),this._size=ye(a._size),this._datatype=s||a._datatype):(this._data=a.toArray(),this._size=a.size(),this._datatype=s||a._datatype);else if(a&&Ce(a.data)&&Ce(a.size))this._data=a.data,this._size=a.size,Yn(this._data,this._size),this._datatype=s||a.datatype;else if(Ce(a))this._data=u(a),this._size=Le(this._data),Yn(this._data,this._size),this._datatype=s;else{if(a)throw new TypeError("Unsupported type of data ("+cr(a)+")");this._data=[],this._size=[0],this._datatype=s}}r.prototype=new e,r.prototype.createDenseMatrix=function(a,s){return new r(a,s)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return rt(this._data,cr)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(a,s){return new r(a,s)},r.prototype.subset=function(a,s,l){switch(arguments.length){case 1:return n(this,a);case 2:case 3:return o(this,a,s,l);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(a){if(!Ce(a))throw new TypeError("Array expected");if(a.length!==this._size.length)throw new pe(a.length,this._size.length);for(var s=0;s<a.length;s++)Ne(a[s],this._size[s]);for(var l=this._data,h=0,v=a.length;h<v;h++){var p=a[h];Ne(p,l.length),l=l[p]}return l},r.prototype.set=function(a,s,l){if(!Ce(a))throw new TypeError("Array expected");if(a.length<this._size.length)throw new pe(a.length,this._size.length,"<");var h,v,p,d=a.map(function(E){return E+1});f(this,d,l);var g=this._data;for(h=0,v=a.length-1;h<v;h++)p=a[h],Ne(p,g.length),g=g[p];return p=a[a.length-1],Ne(p,g.length),g[p]=s,this};function n(a,s){if(!Jr(s))throw new TypeError("Invalid index");var l=s.isScalar();if(l)return a.get(s.min());var h=s.size();if(h.length!==a._size.length)throw new pe(h.length,a._size.length);for(var v=s.min(),p=s.max(),d=0,g=a._size.length;d<g;d++)Ne(v[d],a._size[d]),Ne(p[d],a._size[d]);return new r(i(a._data,s,h.length,0),a._datatype)}function i(a,s,l,h){var v=h===l-1,p=s.dimension(h);return v?p.map(function(d){return Ne(d,a.length),a[d]}).valueOf():p.map(function(d){Ne(d,a.length);var g=a[d];return i(g,s,l,h+1)}).valueOf()}function o(a,s,l,h){if(!s||s.isIndex!==!0)throw new TypeError("Invalid index");var v=s.size(),p=s.isScalar(),d;if(Ee(l)?(d=l.size(),l=l.valueOf()):d=Le(l),p){if(d.length!==0)throw new TypeError("Scalar expected");a.set(s.min(),l,h)}else{if(v.length<a._size.length)throw new pe(v.length,a._size.length,"<");if(d.length<v.length){for(var g=0,E=0;v[g]===1&&d[g]===1;)g++;for(;v[g]===1;)E++,g++;l=Gt(l,v.length,E,d)}if(!Kr(v,d))throw new pe(v,d,">");var D=s.max().map(function(x){return x+1});f(a,D,h);var _=v.length,w=0;c(a._data,s,l,_,w)}return a}function c(a,s,l,h,v){var p=v===h-1,d=s.dimension(v);p?d.forEach(function(g,E){Ne(g),a[g]=l[E[0]]}):d.forEach(function(g,E){Ne(g),c(a[g],s,l[E[0]],h,v+1)})}r.prototype.resize=function(a,s,l){if(!_r(a))throw new TypeError("Array or Matrix expected");var h=a.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),v=l?this.clone():this;return m(v,h,s)};function m(a,s,l){if(s.length===0){for(var h=a._data;Ce(h);)h=h[0];return h}return a._size=s.slice(0),a._data=Ur(a._data,a._size,l),a}r.prototype.reshape=function(a,s){var l=s?this.clone():this;l._data=xo(l._data,a);var h=l._size.reduce((v,p)=>v*p);return l._size=Et(a,h),l};function f(a,s,l){for(var h=a._size.slice(0),v=!1;h.length<s.length;)h.push(0),v=!0;for(var p=0,d=s.length;p<d;p++)s[p]>h[p]&&(h[p]=s[p],v=!0);v&&m(a,h,l)}r.prototype.clone=function(){var a=new r({data:ye(this._data),size:ye(this._size),datatype:this._datatype});return a},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(a){var s=this,l=rn(a),h=function d(g,E){return Ce(g)?g.map(function(D,_){return d(D,E.concat(_))}):l===1?a(g):l===2?a(g,E):a(g,E,s)},v=h(this._data,[]),p=this._datatype!==void 0?rt(v,cr):void 0;return new r(v,p)},r.prototype.forEach=function(a){var s=this,l=function h(v,p){Ce(v)?v.forEach(function(d,g){h(d,p.concat(g))}):a(v,p,s)};l(this._data,[])},r.prototype[Symbol.iterator]=function*(){var a=function*s(l,h){if(Ce(l))for(var v=0;v<l.length;v++)yield*s(l[v],h.concat(v));else yield{value:l,index:h}};yield*a(this._data,[])},r.prototype.rows=function(){var a=[],s=this.size();if(s.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var l=this._data;for(var h of l)a.push(new r([h],this._datatype));return a},r.prototype.columns=function(){var a=this,s=[],l=this.size();if(l.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,v=function(g){var E=h.map(D=>[D[g]]);s.push(new r(E,a._datatype))},p=0;p<l[1];p++)v(p);return s},r.prototype.toArray=function(){return ye(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(a){return we(this._data,a)},r.prototype.toString=function(){return we(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(a){if(a){if(Fe(a)&&(a=a.toNumber()),!be(a)||!ae(a))throw new TypeError("The parameter k must be an integer number")}else a=0;for(var s=a>0?a:0,l=a<0?-a:0,h=this._size[0],v=this._size[1],p=Math.min(h-l,v-s),d=[],g=0;g<p;g++)d[g]=this._data[g+l][g+s];return new r({data:d,size:[p],datatype:this._datatype})},r.diagonal=function(a,s,l,h){if(!Ce(a))throw new TypeError("Array expected, size parameter");if(a.length!==2)throw new Error("Only two dimensions matrix are supported");if(a=a.map(function(y){if(Fe(y)&&(y=y.toNumber()),!be(y)||!ae(y)||y<1)throw new Error("Size values must be positive integers");return y}),l){if(Fe(l)&&(l=l.toNumber()),!be(l)||!ae(l))throw new TypeError("The parameter k must be an integer number")}else l=0;var v=l>0?l:0,p=l<0?-l:0,d=a[0],g=a[1],E=Math.min(d-p,g-v),D;if(Ce(s)){if(s.length!==E)throw new Error("Invalid value array length");D=function(A){return s[A]}}else if(Ee(s)){var _=s.size();if(_.length!==1||_[0]!==E)throw new Error("Invalid matrix length");D=function(A){return s.get([A])}}else D=function(){return s};h||(h=Fe(D(0))?D(0).mul(0):0);var w=[];if(a.length>0){w=Ur(w,a,h);for(var x=0;x<E;x++)w[x+p][x+v]=D(x)}return new r({data:w,size:[d,g]})},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(a,s){if(!be(a)||!ae(a)||!be(s)||!ae(s))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Ne(a,this._size[0]),Ne(s,this._size[0]),r._swapRows(a,s,this._data),this},r._swapRows=function(a,s,l){var h=l[a];l[a]=l[s],l[s]=h};function u(a){for(var s=0,l=a.length;s<l;s++){var h=a[s];Ce(h)?a[s]=u(h):h&&h.isMatrix===!0&&(a[s]=u(h.valueOf()))}return a}return r},{isClass:!0});function Ho(t){var e=t.length,r=t[0].length,n,i,o=[];for(i=0;i<r;i++){var c=[];for(n=0;n<e;n++)c.push(t[n][i]);o.push(c)}return o}function nn(t){for(var e=0;e<t.length;e++)if(_r(t[e]))return!0;return!1}function _t(t,e){Ee(t)&&(t=t.valueOf());for(var r=0,n=t.length;r<n;r++){var i=t[r];Array.isArray(i)?_t(i,e):e(i)}}function He(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return He(n,e,r)}):e(t)}function an(t,e,r){var n=Array.isArray(t)?Le(t):t.size();if(e<0||e>=n.length)throw new Cr(e,n.length);return Ee(t)?t.create(tn(t.valueOf(),e,r)):tn(t,e,r)}function tn(t,e,r){var n,i,o,c;if(e<=0)if(Array.isArray(t[0])){for(c=Ho(t),i=[],n=0;n<c.length;n++)i[n]=tn(c[n],e-1,r);return i}else{for(o=t[0],n=1;n<t.length;n++)o=r(o,t[n]);return o}else{for(i=[],n=0;n<t.length;n++)i[n]=tn(t[n],e-1,r);return i}}var ar="number",br="number, number";function mi(t){return Math.abs(t)}mi.signature=ar;function hi(t,e){return t+e}hi.signature=br;function fc(t,e){return t-e}fc.signature=br;function vi(t,e){return t*e}vi.signature=br;function cc(t,e){return t/e}cc.signature=br;function di(t){return-t}di.signature=ar;function lc(t){return t}lc.signature=ar;function pc(t){return uo(t)}pc.signature=ar;function mc(t){return t*t*t}mc.signature=ar;function hc(t){return Math.exp(t)}hc.signature=ar;function vc(t){return so(t)}vc.signature=ar;function dc(t,e){if(!ae(t)||!ae(e))throw new Error("Parameters in function gcd must be integer numbers");for(var r;e!==0;)r=t%e,t=e,e=r;return t<0?-t:t}dc.signature=br;function xc(t,e){if(!ae(t)||!ae(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var r,n=t*e;e!==0;)r=e,e=t%r,t=r;return Math.abs(n/t)}xc.signature=br;function gc(t){return ao(t)}gc.signature=ar;function Dc(t){return io(t)}Dc.signature=ar;function Ec(t){return oo(t)}Ec.signature=ar;function yc(t,e){if(e>0)return t-e*Math.floor(t/e);if(e===0)return t;throw new Error("Cannot calculate mod for a negative divisor")}yc.signature=br;function wc(t){return no(t)}wc.signature=ar;function _c(t){return Math.sqrt(t)}_c.signature=ar;function Cc(t){return t*t}Cc.signature=ar;function Ac(t,e){var r,n,i,o=0,c=1,m=1,f=0;if(!ae(t)||!ae(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(t/e),i=t-n*e,r=o,o=c-n*o,c=r,r=m,m=f-n*m,f=r,t=e,e=i;var u;return t<0?u=[-t,-c,-f]:u=[t,t?c:0,f],u}Ac.signature=br;function xi(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}xi.signature=br;function bc(t){return Math.abs(t)}bc.signature=ar;function on(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return on(t,r)*on(r+1,e)}function gi(t,e){if(!ae(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!ae(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,i=e<r?r+1:e+1,o=2,c=e<r?e:r,m=i;m<=t;++m)for(n*=m;o<=c&&n%o===0;)n/=o,++o;return o<=c&&(n/=on(o,c)),n}gi.signature="number, number";var Ct="number";function Mc(t){return ae(t)}Mc.signature=Ct;function Tc(t){return t<0}Tc.signature=Ct;function Nc(t){return t>0}Nc.signature=Ct;function Di(t){return t===0}Di.signature=Ct;function Fc(t){return Number.isNaN(t)}Fc.signature=Ct;var Go="isZero",Sc=["typed"],Ei=L(Go,Sc,t=>{var{typed:e}=t;return e(Go,{number:Di,BigNumber:function(n){return n.isZero()},Complex:function(n){return n.re===0&&n.im===0},Fraction:function(n){return n.d===1&&n.n===0},Unit:e.referToSelf(r=>n=>e.find(r,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(r=>n=>He(n,r))})});function Lr(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function Yo(t,e,r){return mr(t.re,e.re,r)&&mr(t.im,e.im,r)}var Or=L("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}});var un="equalScalar",Bc=["typed","config"],yi=L(un,Bc,t=>{var{typed:e,config:r}=t,n=Or({typed:e});return e(un,{"boolean, boolean":function(o,c){return o===c},"number, number":function(o,c){return mr(o,c,r.epsilon)},"BigNumber, BigNumber":function(o,c){return o.eq(c)||Lr(o,c,r.epsilon)},"Fraction, Fraction":function(o,c){return o.equals(c)},"Complex, Complex":function(o,c){return Yo(o,c,r.epsilon)}},n)}),gh=L(un,["typed","config"],t=>{var{typed:e,config:r}=t;return e(un,{"number, number":function(i,o){return mr(i,o,r.epsilon)}})});var Ic="SparseMatrix",Rc=["typed","equalScalar","Matrix"],wi=L(Ic,Rc,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(p,d){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!tr(d))throw new Error("Invalid datatype: "+d);if(Ee(p))o(this,p,d);else if(p&&Ce(p.index)&&Ce(p.ptr)&&Ce(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=d||p.datatype;else if(Ce(p))c(this,p,d);else{if(p)throw new TypeError("Unsupported type of data ("+cr(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=d}}function o(p,d,g){d.type==="SparseMatrix"?(p._values=d._values?ye(d._values):void 0,p._index=ye(d._index),p._ptr=ye(d._ptr),p._size=ye(d._size),p._datatype=g||d._datatype):c(p,d.valueOf(),g||d._datatype)}function c(p,d,g){p._values=[],p._index=[],p._ptr=[],p._datatype=g;var E=d.length,D=0,_=r,w=0;if(tr(g)&&(_=e.find(r,[g,g])||r,w=e.convert(0,g)),E>0){var x=0;do{p._ptr.push(p._index.length);for(var y=0;y<E;y++){var A=d[y];if(Ce(A)){if(x===0&&D<A.length&&(D=A.length),x<A.length){var C=A[x];_(C,w)||(p._values.push(C),p._index.push(y))}}else x===0&&D<1&&(D=1),_(A,w)||(p._values.push(A),p._index.push(y))}x++}while(x<D)}p._ptr.push(p._index.length),p._size=[E,D]}i.prototype=new n,i.prototype.createSparseMatrix=function(p,d){return new i(p,d)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return rt(this._values,cr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,d){return new i(p,d)},i.prototype.density=function(){var p=this._size[0],d=this._size[1];return p!==0&&d!==0?this._index.length/(p*d):0},i.prototype.subset=function(p,d,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return m(this,p);case 2:case 3:return f(this,p,d,g);default:throw new SyntaxError("Wrong number of arguments")}};function m(p,d){if(!Jr(d))throw new TypeError("Invalid index");var g=d.isScalar();if(g)return p.get(d.min());var E=d.size();if(E.length!==p._size.length)throw new pe(E.length,p._size.length);var D,_,w,x,y=d.min(),A=d.max();for(D=0,_=p._size.length;D<_;D++)Ne(y[D],p._size[D]),Ne(A[D],p._size[D]);var C=p._values,M=p._index,F=p._ptr,R=d.dimension(0),q=d.dimension(1),O=[],I=[];R.forEach(function(S,U){I[S]=U[0],O[S]=!0});var N=C?[]:void 0,Y=[],X=[];return q.forEach(function(S){for(X.push(Y.length),w=F[S],x=F[S+1];w<x;w++)D=M[w],O[D]===!0&&(Y.push(I[D]),N&&N.push(C[w]))}),X.push(Y.length),new i({values:N,index:Y,ptr:X,size:E,datatype:p._datatype})}function f(p,d,g,E){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var D=d.size(),_=d.isScalar(),w;if(Ee(g)?(w=g.size(),g=g.toArray()):w=Le(g),_){if(w.length!==0)throw new TypeError("Scalar expected");p.set(d.min(),g,E)}else{if(D.length!==1&&D.length!==2)throw new pe(D.length,p._size.length,"<");if(w.length<D.length){for(var x=0,y=0;D[x]===1&&w[x]===1;)x++;for(;D[x]===1;)y++,x++;g=Gt(g,D.length,y,w)}if(!Kr(D,w))throw new pe(D,w,">");if(D.length===1){var A=d.dimension(0);A.forEach(function(F,R){Ne(F),p.set([F,0],g[R[0]],E)})}else{var C=d.dimension(0),M=d.dimension(1);C.forEach(function(F,R){Ne(F),M.forEach(function(q,O){Ne(q),p.set([F,q],g[R[0]][O[0]],E)})})}}return p}i.prototype.get=function(p){if(!Ce(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new pe(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var d=p[0],g=p[1];Ne(d,this._size[0]),Ne(g,this._size[1]);var E=u(d,this._ptr[g],this._ptr[g+1],this._index);return E<this._ptr[g+1]&&this._index[E]===d?this._values[E]:0},i.prototype.set=function(p,d,g){if(!Ce(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new pe(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var E=p[0],D=p[1],_=this._size[0],w=this._size[1],x=r,y=0;tr(this._datatype)&&(x=e.find(r,[this._datatype,this._datatype])||r,y=e.convert(0,this._datatype)),(E>_-1||D>w-1)&&(l(this,Math.max(E+1,_),Math.max(D+1,w),g),_=this._size[0],w=this._size[1]),Ne(E,_),Ne(D,w);var A=u(E,this._ptr[D],this._ptr[D+1],this._index);return A<this._ptr[D+1]&&this._index[A]===E?x(d,y)?a(A,D,this._values,this._index,this._ptr):this._values[A]=d:s(A,E,D,d,this._values,this._index,this._ptr),this};function u(p,d,g,E){if(g-d===0)return g;for(var D=d;D<g;D++)if(E[D]===p)return D;return d}function a(p,d,g,E,D){g.splice(p,1),E.splice(p,1);for(var _=d+1;_<D.length;_++)D[_]--}function s(p,d,g,E,D,_,w){D.splice(p,0,E),_.splice(p,0,d);for(var x=g+1;x<w.length;x++)w[x]++}i.prototype.resize=function(p,d,g){if(!_r(p))throw new TypeError("Array or Matrix expected");var E=p.valueOf().map(_=>Array.isArray(_)&&_.length===1?_[0]:_);if(E.length!==2)throw new Error("Only two dimensions matrix are supported");E.forEach(function(_){if(!be(_)||!ae(_)||_<0)throw new TypeError("Invalid size, must contain positive integers (size: "+we(E)+")")});var D=g?this.clone():this;return l(D,E[0],E[1],d)};function l(p,d,g,E){var D=E||0,_=r,w=0;tr(p._datatype)&&(_=e.find(r,[p._datatype,p._datatype])||r,w=e.convert(0,p._datatype),D=e.convert(D,p._datatype));var x=!_(D,w),y=p._size[0],A=p._size[1],C,M,F;if(g>A){for(M=A;M<g;M++)if(p._ptr[M]=p._values.length,x)for(C=0;C<y;C++)p._values.push(D),p._index.push(C);p._ptr[g]=p._values.length}else g<A&&(p._ptr.splice(g+1,A-g),p._values.splice(p._ptr[g],p._values.length),p._index.splice(p._ptr[g],p._index.length));if(A=g,d>y){if(x){var R=0;for(M=0;M<A;M++){p._ptr[M]=p._ptr[M]+R,F=p._ptr[M+1]+R;var q=0;for(C=y;C<d;C++,q++)p._values.splice(F+q,0,D),p._index.splice(F+q,0,C),R++}p._ptr[A]=p._values.length}}else if(d<y){var O=0;for(M=0;M<A;M++){p._ptr[M]=p._ptr[M]-O;var I=p._ptr[M],N=p._ptr[M+1]-O;for(F=I;F<N;F++)C=p._index[F],C>d-1&&(p._values.splice(F,1),p._index.splice(F,1),O++)}p._ptr[M]=p._values.length}return p._size[0]=d,p._size[1]=g,p}i.prototype.reshape=function(p,d){if(!Ce(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(S){if(!be(S)||!ae(S)||S<=-2||S===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+we(p)+")")});var g=this._size[0]*this._size[1];p=Et(p,g);var E=p[0]*p[1];if(g!==E)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var D=d?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return D;for(var _=[],w=0;w<D._ptr.length;w++)for(var x=0;x<D._ptr[w+1]-D._ptr[w];x++)_.push(w);for(var y=D._values.slice(),A=D._index.slice(),C=0;C<D._index.length;C++){var M=A[C],F=_[C],R=M*D._size[1]+F;_[C]=R%p[1],A[C]=Math.floor(R/p[1])}D._values.length=0,D._index.length=0,D._ptr.length=p[1]+1,D._size=p.slice();for(var q=0;q<D._ptr.length;q++)D._ptr[q]=0;for(var O=0;O<y.length;O++){var I=A[O],N=_[O],Y=y[O],X=u(I,D._ptr[N],D._ptr[N+1],D._index);s(X,I,N,Y,D._values,D._index,D._ptr)}return D},i.prototype.clone=function(){var p=new i({values:this._values?ye(this._values):void 0,index:ye(this._index),ptr:ye(this._ptr),size:ye(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,d){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,E=this._size[0],D=this._size[1],_=rn(p),w=function(y,A,C){return _===1?p(y):_===2?p(y,[A,C]):p(y,[A,C],g)};return h(this,0,E-1,0,D-1,w,d)};function h(p,d,g,E,D,_,w){var x=[],y=[],A=[],C=r,M=0;tr(p._datatype)&&(C=e.find(r,[p._datatype,p._datatype])||r,M=e.convert(0,p._datatype));for(var F=function(ee,J,_e){ee=_(ee,J,_e),C(ee,M)||(x.push(ee),y.push(J))},R=E;R<=D;R++){A.push(x.length);var q=p._ptr[R],O=p._ptr[R+1];if(w)for(var I=q;I<O;I++){var N=p._index[I];N>=d&&N<=g&&F(p._values[I],N-d,R-E)}else{for(var Y={},X=q;X<O;X++){var S=p._index[X];Y[S]=p._values[X]}for(var U=d;U<=g;U++){var Q=U in Y?Y[U]:0;F(Q,U-d,R-E)}}}return A.push(x.length),new i({values:x,index:y,ptr:A,size:[g-d+1,D-E+1]})}i.prototype.forEach=function(p,d){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,E=this._size[0],D=this._size[1],_=0;_<D;_++){var w=this._ptr[_],x=this._ptr[_+1];if(d)for(var y=w;y<x;y++){var A=this._index[y];p(this._values[y],[A,_],g)}else{for(var C={},M=w;M<x;M++){var F=this._index[M];C[F]=this._values[M]}for(var R=0;R<E;R++){var q=R in C?C[R]:0;p(q,[R,_],g)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],d=0;d<p;d++)for(var g=this._ptr[d],E=this._ptr[d+1],D=g;D<E;D++){var _=this._index[D];yield{value:this._values[D],index:[_,d]}}},i.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(p,d,g,E,D){var _=E[0],w=E[1],x=[],y,A;for(y=0;y<_;y++)for(x[y]=[],A=0;A<w;A++)x[y][A]=0;for(A=0;A<w;A++)for(var C=g[A],M=g[A+1],F=C;F<M;F++)y=d[F],x[y][A]=p?D?ye(p[F]):p[F]:1;return x}return i.prototype.format=function(p){for(var d=this._size[0],g=this._size[1],E=this.density(),D="Sparse Matrix ["+we(d,p)+" x "+we(g,p)+"] density: "+we(E,p)+`
`,_=0;_<g;_++)for(var w=this._ptr[_],x=this._ptr[_+1],y=w;y<x;y++){var A=this._index[y];D+=`
    (`+we(A,p)+", "+we(_,p)+") ==> "+(this._values?we(this._values[y],p):"X")}return D},i.prototype.toString=function(){return we(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(Fe(p)&&(p=p.toNumber()),!be(p)||!ae(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var d=p>0?p:0,g=p<0?-p:0,E=this._size[0],D=this._size[1],_=Math.min(E-g,D-d),w=[],x=[],y=[];y[0]=0;for(var A=d;A<D&&w.length<_;A++)for(var C=this._ptr[A],M=this._ptr[A+1],F=C;F<M;F++){var R=this._index[F];if(R===A-d+g){w.push(this._values[F]),x[w.length-1]=R-g;break}}return y.push(w.length),new i({values:w,index:x,ptr:y,size:[_,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,d,g,E,D){if(!Ce(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(S){if(Fe(S)&&(S=S.toNumber()),!be(S)||!ae(S)||S<1)throw new Error("Size values must be positive integers");return S}),g){if(Fe(g)&&(g=g.toNumber()),!be(g)||!ae(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var _=r,w=0;tr(D)&&(_=e.find(r,[D,D])||r,w=e.convert(0,D));var x=g>0?g:0,y=g<0?-g:0,A=p[0],C=p[1],M=Math.min(A-y,C-x),F;if(Ce(d)){if(d.length!==M)throw new Error("Invalid value array length");F=function(U){return d[U]}}else if(Ee(d)){var R=d.size();if(R.length!==1||R[0]!==M)throw new Error("Invalid matrix length");F=function(U){return d.get([U])}}else F=function(){return d};for(var q=[],O=[],I=[],N=0;N<C;N++){I.push(q.length);var Y=N-x;if(Y>=0&&Y<M){var X=F(Y);_(X,w)||(O.push(Y+y),q.push(X))}}return I.push(q.length),new i({values:q,index:O,ptr:I,size:[A,C]})},i.prototype.swapRows=function(p,d){if(!be(p)||!ae(p)||!be(d)||!ae(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Ne(p,this._size[0]),Ne(d,this._size[0]),i._swapRows(p,d,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,d,g,E,D){for(var _=E[p],w=E[p+1],x=_;x<w;x++)D(g[x],d[x])},i._swapRows=function(p,d,g,E,D,_){for(var w=0;w<g;w++){var x=_[w],y=_[w+1],A=u(p,x,y,D),C=u(d,x,y,D);if(A<y&&C<y&&D[A]===p&&D[C]===d){if(E){var M=E[A];E[A]=E[C],E[C]=M}continue}if(A<y&&D[A]===p&&(C>=y||D[C]!==d)){var F=E?E[A]:void 0;D.splice(C,0,d),E&&E.splice(C,0,F),D.splice(C<=A?A+1:A,1),E&&E.splice(C<=A?A+1:A,1);continue}if(C<y&&D[C]===d&&(A>=y||D[A]!==p)){var R=E?E[C]:void 0;D.splice(A,0,p),E&&E.splice(A,0,R),D.splice(A<=C?C+1:C,1),E&&E.splice(A<=C?C+1:C,1)}}},i},{isClass:!0});var Lc="number",Oc=["typed"];function Pc(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:i}}else return null}function zc(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var i=parseInt(t.fractionalPart[n],t.radix);r+=i/Math.pow(t.radix,n+1)}var o=e+r;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is no valid number');return o}var _i=L(Lc,Oc,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=Pc(i);if(o)return zc(o);var c=0,m=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);m&&(c=Number(m[2]),i=m[1]);var f=Number(i);if(isNaN(f))throw new SyntaxError('String "'+i+'" is no valid number');if(m){if(f>2**c-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));f>=2**(c-1)&&(f=f-2**c)}return f},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":e.referToSelf(n=>i=>He(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r});var kc="bignumber",qc=["typed","BigNumber"],Ci=L(kc,qc,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var c=o[2],m=r(o[1]),f=new r(2).pow(Number(c));if(m.gt(f.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new r(2).pow(Number(c)-1);return m.gte(u)?m.sub(f):m}return new r(i)},BigNumber:function(i){return i},Fraction:function(i){return new r(i.n).div(i.d).times(i.s)},null:function(i){return new r(0)},"Array | Matrix":e.referToSelf(n=>i=>He(i,n))})});var Vc="complex",Xc=["typed","Complex"],Ai=L(Vc,Xc,t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(i){return new r(i,0)},"number, number":function(i,o){return new r(i,o)},"BigNumber, BigNumber":function(i,o){return new r(i.toNumber(),o.toNumber())},Fraction:function(i){return new r(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return r(i)},null:function(i){return r(0)},Object:function(i){if("re"in i&&"im"in i)return new r(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new r(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>He(i,n))})});var Uc="fraction",Zc=["typed","Fraction"],bi=L(Uc,Zc,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,o){return new r(i,o)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},Fraction:function(i){return i},Object:function(i){return new r(i)},"Array | Matrix":e.referToSelf(n=>i=>He(i,n))})});var $o="matrix",Hc=["typed","Matrix","DenseMatrix","SparseMatrix"],Mi=L($o,Hc,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e($o,{"":function(){return o([])},string:function(m){return o([],m)},"string, string":function(m,f){return o([],m,f)},Array:function(m){return o(m)},Matrix:function(m){return o(m,m.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(c,m,f){if(m==="dense"||m==="default"||m===void 0)return new n(c,f);if(m==="sparse")return new i(c,f);throw new TypeError("Unknown matrix type "+JSON.stringify(m)+".")}});var Qo="unaryMinus",Gc=["typed"],Ti=L(Qo,Gc,t=>{var{typed:e}=t;return e(Qo,{number:di,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>He(n,r,!0))})});var jo="abs",Yc=["typed"],Ni=L(jo,Yc,t=>{var{typed:e}=t;return e(jo,{number:mi,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),"Array | Matrix":e.referToSelf(r=>n=>He(n,r,!0))})});var Jo="addScalar",$c=["typed"],Fi=L(Jo,$c,t=>{var{typed:e}=t;return e(Jo,{"number, number":hi,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(r,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var Qc="matAlgo11xS0s",jc=["typed","equalScalar"],sn=L(Qc,jc,t=>{var{typed:e,equalScalar:r}=t;return function(i,o,c,m){var f=i._values,u=i._index,a=i._ptr,s=i._size,l=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],p,d=r,g=0,E=c;typeof l=="string"&&(p=l,d=e.find(r,[p,p]),g=e.convert(0,p),o=e.convert(o,p),E=e.find(c,[p,p]));for(var D=[],_=[],w=[],x=0;x<v;x++){w[x]=_.length;for(var y=a[x],A=a[x+1],C=y;C<A;C++){var M=u[C],F=m?E(o,f[C]):E(f[C],o);d(F,g)||(_.push(M),D.push(F))}}return w[v]=_.length,i.createSparseMatrix({values:D,index:_,ptr:w,size:[h,v],datatype:p})}});var Jc="matAlgo12xSfs",Kc=["typed","DenseMatrix"],Pr=L(Jc,Kc,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,o,c,m){var f=i._values,u=i._index,a=i._ptr,s=i._size,l=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],p,d=c;typeof l=="string"&&(p=l,o=e.convert(o,p),d=e.find(c,[p,p]));for(var g=[],E=[],D=[],_=0;_<v;_++){for(var w=_+1,x=a[_],y=a[_+1],A=x;A<y;A++){var C=u[A];E[C]=f[A],D[C]=w}for(var M=0;M<h;M++)_===0&&(g[M]=[]),D[M]===w?g[M][_]=m?d(o,E[M]):d(E[M],o):g[M][_]=m?d(o,0):d(0,o)}return new r({data:g,size:[h,v],datatype:p})}});var Wc="matAlgo14xDs",el=["typed"],it=L(Wc,el,t=>{var{typed:e}=t;return function(i,o,c,m){var f=i._data,u=i._size,a=i._datatype,s,l=c;typeof a=="string"&&(s=a,o=e.convert(o,s),l=e.find(c,[s,s]));var h=u.length>0?r(l,0,u,u[0],f,o,m):[];return i.createDenseMatrix({data:h,size:ye(u),datatype:s})};function r(n,i,o,c,m,f,u){var a=[];if(i===o.length-1)for(var s=0;s<c;s++)a[s]=u?n(f,m[s]):n(m[s],f);else for(var l=0;l<c;l++)a[l]=r(n,i+1,o,o[i+1],m[l],f,u);return a}});var rl="matAlgo01xDSid",tl=["typed"],fn=L(rl,tl,t=>{var{typed:e}=t;return function(n,i,o,c){var m=n._data,f=n._size,u=n._datatype,a=i._values,s=i._index,l=i._ptr,h=i._size,v=i._datatype;if(f.length!==h.length)throw new pe(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");if(!a)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=f[0],d=f[1],g=typeof u=="string"&&u===v?u:void 0,E=g?e.find(o,[g,g]):o,D,_,w=[];for(D=0;D<p;D++)w[D]=[];var x=[],y=[];for(_=0;_<d;_++){for(var A=_+1,C=l[_],M=l[_+1],F=C;F<M;F++)D=s[F],x[D]=c?E(a[F],m[D][_]):E(m[D][_],a[F]),y[D]=A;for(D=0;D<p;D++)y[D]===A?w[D][_]=x[D]:w[D][_]=m[D][_]}return n.createDenseMatrix({data:w,size:[p,d],datatype:g})}});var nl="matAlgo04xSidSid",il=["typed","equalScalar"],Ko=L(nl,il,t=>{var{typed:e,equalScalar:r}=t;return function(i,o,c){var m=i._values,f=i._index,u=i._ptr,a=i._size,s=i._datatype,l=o._values,h=o._index,v=o._ptr,p=o._size,d=o._datatype;if(a.length!==p.length)throw new pe(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");var g=a[0],E=a[1],D,_=r,w=0,x=c;typeof s=="string"&&s===d&&(D=s,_=e.find(r,[D,D]),w=e.convert(0,D),x=e.find(c,[D,D]));var y=m&&l?[]:void 0,A=[],C=[],M=m&&l?[]:void 0,F=m&&l?[]:void 0,R=[],q=[],O,I,N,Y,X;for(I=0;I<E;I++){C[I]=A.length;var S=I+1;for(Y=u[I],X=u[I+1],N=Y;N<X;N++)O=f[N],A.push(O),R[O]=S,M&&(M[O]=m[N]);for(Y=v[I],X=v[I+1],N=Y;N<X;N++)if(O=h[N],R[O]===S){if(M){var U=x(M[O],l[N]);_(U,w)?R[O]=null:M[O]=U}}else A.push(O),q[O]=S,F&&(F[O]=l[N]);if(M&&F)for(N=C[I];N<A.length;)O=A[N],R[O]===S?(y[N]=M[O],N++):q[O]===S?(y[N]=F[O],N++):A.splice(N,1)}return C[E]=A.length,i.createSparseMatrix({values:y,index:A,ptr:C,size:[g,E],datatype:D})}});var al="matAlgo10xSids",ol=["typed","DenseMatrix"],cn=L(al,ol,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,o,c,m){var f=i._values,u=i._index,a=i._ptr,s=i._size,l=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=s[0],v=s[1],p,d=c;typeof l=="string"&&(p=l,o=e.convert(o,p),d=e.find(c,[p,p]));for(var g=[],E=[],D=[],_=0;_<v;_++){for(var w=_+1,x=a[_],y=a[_+1],A=x;A<y;A++){var C=u[A];E[C]=f[A],D[C]=w}for(var M=0;M<h;M++)_===0&&(g[M]=[]),D[M]===w?g[M][_]=m?d(o,E[M]):d(E[M],o):g[M][_]=o}return new r({data:g,size:[h,v],datatype:p})}});var ul="matAlgo13xDD",sl=["typed"],Wo=L(ul,sl,t=>{var{typed:e}=t;return function(i,o,c){var m=i._data,f=i._size,u=i._datatype,a=o._data,s=o._size,l=o._datatype,h=[];if(f.length!==s.length)throw new pe(f.length,s.length);for(var v=0;v<f.length;v++){if(f[v]!==s[v])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+s+")");h[v]=f[v]}var p,d=c;typeof u=="string"&&u===l&&(p=u,d=e.find(c,[p,p]));var g=h.length>0?r(d,0,h,h[0],m,a):[];return i.createDenseMatrix({data:g,size:h,datatype:p})};function r(n,i,o,c,m,f){var u=[];if(i===o.length-1)for(var a=0;a<c;a++)u[a]=n(m[a],f[a]);else for(var s=0;s<c;s++)u[s]=r(n,i+1,o,o[i+1],m[s],f[s]);return u}});var fl="matrixAlgorithmSuite",cl=["typed","matrix"],wr=L(fl,cl,t=>{var{typed:e,matrix:r}=t,n=Wo({typed:e}),i=it({typed:e});return function(c){var m=c.elop,f=c.SD||c.DS,u;m?(u={"DenseMatrix, DenseMatrix":(h,v)=>n(h,v,m),"Array, Array":(h,v)=>n(r(h),r(v),m).valueOf(),"Array, DenseMatrix":(h,v)=>n(r(h),v,m),"DenseMatrix, Array":(h,v)=>n(h,r(v),m)},c.SS&&(u["SparseMatrix, SparseMatrix"]=(h,v)=>c.SS(h,v,m,!1)),c.DS&&(u["DenseMatrix, SparseMatrix"]=(h,v)=>c.DS(h,v,m,!1),u["Array, SparseMatrix"]=(h,v)=>c.DS(r(h),v,m,!1)),f&&(u["SparseMatrix, DenseMatrix"]=(h,v)=>f(v,h,m,!0),u["SparseMatrix, Array"]=(h,v)=>f(r(v),h,m,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(v,p)=>n(v,p,h)),"Array, Array":e.referToSelf(h=>(v,p)=>n(r(v),r(p),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(v,p)=>n(r(v),p,h)),"DenseMatrix, Array":e.referToSelf(h=>(v,p)=>n(v,r(p),h))},c.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(v,p)=>c.SS(v,p,h,!1))),c.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(v,p)=>c.DS(v,p,h,!1)),u["Array, SparseMatrix"]=e.referToSelf(h=>(v,p)=>c.DS(r(v),p,h,!1))),f&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(v,p)=>f(p,v,h,!0)),u["SparseMatrix, Array"]=e.referToSelf(h=>(v,p)=>f(r(p),v,h,!0))));var a=c.scalar||"any",s=c.Ds||c.Ss;s&&(m?(u["DenseMatrix,"+a]=(h,v)=>i(h,v,m,!1),u[a+", DenseMatrix"]=(h,v)=>i(v,h,m,!0),u["Array,"+a]=(h,v)=>i(r(h),v,m,!1).valueOf(),u[a+", Array"]=(h,v)=>i(r(v),h,m,!0).valueOf()):(u["DenseMatrix,"+a]=e.referToSelf(h=>(v,p)=>i(v,p,h,!1)),u[a+", DenseMatrix"]=e.referToSelf(h=>(v,p)=>i(p,v,h,!0)),u["Array,"+a]=e.referToSelf(h=>(v,p)=>i(r(v),p,h,!1).valueOf()),u[a+", Array"]=e.referToSelf(h=>(v,p)=>i(r(p),v,h,!0).valueOf())));var l=c.sS!==void 0?c.sS:c.Ss;return m?(c.Ss&&(u["SparseMatrix,"+a]=(h,v)=>c.Ss(h,v,m,!1)),l&&(u[a+", SparseMatrix"]=(h,v)=>l(v,h,m,!0))):(c.Ss&&(u["SparseMatrix,"+a]=e.referToSelf(h=>(v,p)=>c.Ss(v,p,h,!1))),l&&(u[a+", SparseMatrix"]=e.referToSelf(h=>(v,p)=>l(p,v,h,!0)))),m&&m.signatures&&Ut(u,m.signatures),u}});var ll="matAlgo03xDSf",pl=["typed"],zr=L(ll,pl,t=>{var{typed:e}=t;return function(n,i,o,c){var m=n._data,f=n._size,u=n._datatype,a=i._values,s=i._index,l=i._ptr,h=i._size,v=i._datatype;if(f.length!==h.length)throw new pe(f.length,h.length);if(f[0]!==h[0]||f[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");if(!a)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=f[0],d=f[1],g,E=0,D=o;typeof u=="string"&&u===v&&(g=u,E=e.convert(0,g),D=e.find(o,[g,g]));for(var _=[],w=0;w<p;w++)_[w]=[];for(var x=[],y=[],A=0;A<d;A++){for(var C=A+1,M=l[A],F=l[A+1],R=M;R<F;R++){var q=s[R];x[q]=c?D(a[R],m[q][A]):D(m[q][A],a[R]),y[q]=C}for(var O=0;O<p;O++)y[O]===C?_[O][A]=x[O]:_[O][A]=c?D(E,m[O][A]):D(m[O][A],E)}return n.createDenseMatrix({data:_,size:[p,d],datatype:g})}});var ml="matAlgo05xSfSf",hl=["typed","equalScalar"],eu=L(ml,hl,t=>{var{typed:e,equalScalar:r}=t;return function(i,o,c){var m=i._values,f=i._index,u=i._ptr,a=i._size,s=i._datatype,l=o._values,h=o._index,v=o._ptr,p=o._size,d=o._datatype;if(a.length!==p.length)throw new pe(a.length,p.length);if(a[0]!==p[0]||a[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+p+")");var g=a[0],E=a[1],D,_=r,w=0,x=c;typeof s=="string"&&s===d&&(D=s,_=e.find(r,[D,D]),w=e.convert(0,D),x=e.find(c,[D,D]));var y=m&&l?[]:void 0,A=[],C=[],M=y?[]:void 0,F=y?[]:void 0,R=[],q=[],O,I,N,Y;for(I=0;I<E;I++){C[I]=A.length;var X=I+1;for(N=u[I],Y=u[I+1];N<Y;N++)O=f[N],A.push(O),R[O]=X,M&&(M[O]=m[N]);for(N=v[I],Y=v[I+1];N<Y;N++)O=h[N],R[O]!==X&&A.push(O),q[O]=X,F&&(F[O]=l[N]);if(y)for(N=C[I];N<A.length;){O=A[N];var S=R[O],U=q[O];if(S===X||U===X){var Q=S===X?M[O]:w,ue=U===X?F[O]:w,ee=x(Q,ue);_(ee,w)?A.splice(N,1):(y.push(ee),N++)}}}return C[E]=A.length,i.createSparseMatrix({values:y,index:A,ptr:C,size:[g,E],datatype:D})}});var vl="multiplyScalar",dl=["typed"],Si=L(vl,dl,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":vi,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})});var ru="multiply",xl=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Bi=L(ru,xl,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:o,dot:c}=t,m=sn({typed:e,equalScalar:o}),f=it({typed:e});function u(w,x){switch(w.length){case 1:switch(x.length){case 1:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;case 2:switch(x.length){case 1:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+x[0]+")");break;case 2:if(w[1]!==x[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+x[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+x.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function a(w,x,y){if(y===0)throw new Error("Cannot multiply two empty vectors");return c(w,x)}function s(w,x){if(x.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return l(w,x)}function l(w,x){var y=w._data,A=w._size,C=w._datatype,M=x._data,F=x._size,R=x._datatype,q=A[0],O=F[1],I,N=n,Y=i;C&&R&&C===R&&typeof C=="string"&&(I=C,N=e.find(n,[I,I]),Y=e.find(i,[I,I]));for(var X=[],S=0;S<O;S++){for(var U=Y(y[0],M[0][S]),Q=1;Q<q;Q++)U=N(U,Y(y[Q],M[Q][S]));X[S]=U}return w.createDenseMatrix({data:X,size:[O],datatype:I})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":E}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":d,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":D,"SparseMatrix, SparseMatrix":_});function p(w,x){var y=w._data,A=w._size,C=w._datatype,M=x._data,F=x._datatype,R=A[0],q=A[1],O,I=n,N=i;C&&F&&C===F&&typeof C=="string"&&(O=C,I=e.find(n,[O,O]),N=e.find(i,[O,O]));for(var Y=[],X=0;X<R;X++){for(var S=y[X],U=N(S[0],M[0]),Q=1;Q<q;Q++)U=I(U,N(S[Q],M[Q]));Y[X]=U}return w.createDenseMatrix({data:Y,size:[R],datatype:O})}function d(w,x){var y=w._data,A=w._size,C=w._datatype,M=x._data,F=x._size,R=x._datatype,q=A[0],O=A[1],I=F[1],N,Y=n,X=i;C&&R&&C===R&&typeof C=="string"&&(N=C,Y=e.find(n,[N,N]),X=e.find(i,[N,N]));for(var S=[],U=0;U<q;U++){var Q=y[U];S[U]=[];for(var ue=0;ue<I;ue++){for(var ee=X(Q[0],M[0][ue]),J=1;J<O;J++)ee=Y(ee,X(Q[J],M[J][ue]));S[U][ue]=ee}}return w.createDenseMatrix({data:S,size:[q,I],datatype:N})}function g(w,x){var y=w._data,A=w._size,C=w._datatype,M=x._values,F=x._index,R=x._ptr,q=x._size,O=x._datatype;if(!M)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var I=A[0],N=q[1],Y,X=n,S=i,U=o,Q=0;C&&O&&C===O&&typeof C=="string"&&(Y=C,X=e.find(n,[Y,Y]),S=e.find(i,[Y,Y]),U=e.find(o,[Y,Y]),Q=e.convert(0,Y));for(var ue=[],ee=[],J=[],_e=x.createSparseMatrix({values:ue,index:ee,ptr:J,size:[I,N],datatype:Y}),he=0;he<N;he++){J[he]=ee.length;var oe=R[he],de=R[he+1];if(de>oe)for(var ve=0,ne=0;ne<I;ne++){for(var Se=ne+1,Me=void 0,se=oe;se<de;se++){var ge=F[se];ve!==Se?(Me=S(y[ne][ge],M[se]),ve=Se):Me=X(Me,S(y[ne][ge],M[se]))}ve===Se&&!U(Me,Q)&&(ee.push(ne),ue.push(Me))}}return J[N]=ee.length,_e}function E(w,x){var y=w._values,A=w._index,C=w._ptr,M=w._datatype;if(!y)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var F=x._data,R=x._datatype,q=w._size[0],O=x._size[0],I=[],N=[],Y=[],X,S=n,U=i,Q=o,ue=0;M&&R&&M===R&&typeof M=="string"&&(X=M,S=e.find(n,[X,X]),U=e.find(i,[X,X]),Q=e.find(o,[X,X]),ue=e.convert(0,X));var ee=[],J=[];Y[0]=0;for(var _e=0;_e<O;_e++){var he=F[_e];if(!Q(he,ue))for(var oe=C[_e],de=C[_e+1],ve=oe;ve<de;ve++){var ne=A[ve];J[ne]?ee[ne]=S(ee[ne],U(he,y[ve])):(J[ne]=!0,N.push(ne),ee[ne]=U(he,y[ve]))}}for(var Se=N.length,Me=0;Me<Se;Me++){var se=N[Me];I[Me]=ee[se]}return Y[1]=N.length,w.createSparseMatrix({values:I,index:N,ptr:Y,size:[q,1],datatype:X})}function D(w,x){var y=w._values,A=w._index,C=w._ptr,M=w._datatype;if(!y)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var F=x._data,R=x._datatype,q=w._size[0],O=x._size[0],I=x._size[1],N,Y=n,X=i,S=o,U=0;M&&R&&M===R&&typeof M=="string"&&(N=M,Y=e.find(n,[N,N]),X=e.find(i,[N,N]),S=e.find(o,[N,N]),U=e.convert(0,N));for(var Q=[],ue=[],ee=[],J=w.createSparseMatrix({values:Q,index:ue,ptr:ee,size:[q,I],datatype:N}),_e=[],he=[],oe=0;oe<I;oe++){ee[oe]=ue.length;for(var de=oe+1,ve=0;ve<O;ve++){var ne=F[ve][oe];if(!S(ne,U))for(var Se=C[ve],Me=C[ve+1],se=Se;se<Me;se++){var ge=A[se];he[ge]!==de?(he[ge]=de,ue.push(ge),_e[ge]=X(ne,y[se])):_e[ge]=Y(_e[ge],X(ne,y[se]))}}for(var Pe=ee[oe],or=ue.length,Ge=Pe;Ge<or;Ge++){var xe=ue[Ge];Q[Ge]=_e[xe]}}return ee[I]=ue.length,J}function _(w,x){var y=w._values,A=w._index,C=w._ptr,M=w._datatype,F=x._values,R=x._index,q=x._ptr,O=x._datatype,I=w._size[0],N=x._size[1],Y=y&&F,X,S=n,U=i;M&&O&&M===O&&typeof M=="string"&&(X=M,S=e.find(n,[X,X]),U=e.find(i,[X,X]));for(var Q=Y?[]:void 0,ue=[],ee=[],J=w.createSparseMatrix({values:Q,index:ue,ptr:ee,size:[I,N],datatype:X}),_e=Y?[]:void 0,he=[],oe,de,ve,ne,Se,Me,se,ge,Pe=0;Pe<N;Pe++){ee[Pe]=ue.length;var or=Pe+1;for(Se=q[Pe],Me=q[Pe+1],ne=Se;ne<Me;ne++)if(ge=R[ne],Y)for(de=C[ge],ve=C[ge+1],oe=de;oe<ve;oe++)se=A[oe],he[se]!==or?(he[se]=or,ue.push(se),_e[se]=U(F[ne],y[oe])):_e[se]=S(_e[se],U(F[ne],y[oe]));else for(de=C[ge],ve=C[ge+1],oe=de;oe<ve;oe++)se=A[oe],he[se]!==or&&(he[se]=or,ue.push(se));if(Y)for(var Ge=ee[Pe],xe=ue.length,Be=Ge;Be<xe;Be++){var ur=ue[Be];Q[Be]=_e[ur]}}return ee[N]=ue.length,J}return e(ru,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(x,y)=>{u(Le(x),Le(y));var A=w(r(x),r(y));return Ee(A)?A.valueOf():A}),"Matrix, Matrix":function(x,y){var A=x.size(),C=y.size();return u(A,C),A.length===1?C.length===1?a(x,y,A[0]):s(x,y):C.length===1?h(x,y):v(x,y)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(x,y)=>w(x,r(y))),"Array, Matrix":e.referToSelf(w=>(x,y)=>w(r(x,y.storage()),y)),"SparseMatrix, any":function(x,y){return m(x,y,i,!1)},"DenseMatrix, any":function(x,y){return f(x,y,i,!1)},"any, SparseMatrix":function(x,y){return m(y,x,i,!0)},"any, DenseMatrix":function(x,y){return f(y,x,i,!0)},"Array, any":function(x,y){return f(r(x),y,i,!1).valueOf()},"any, Array":function(x,y){return f(r(y),x,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(x,y,A)=>{for(var C=w(x,y),M=0;M<A.length;M++)C=w(C,A[M]);return C})})});var gl="sqrt",Dl=["config","typed","Complex"],Ii=L(gl,Dl,t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:i,Complex:function(c){return c.sqrt()},BigNumber:function(c){return!c.isNegative()||e.predictable?c.sqrt():i(c.toNumber())},Unit:function(c){return c.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||e.predictable?Math.sqrt(o):new n(o,0).sqrt()}});var tu="subtract",El=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],Ri=L(tu,El,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:o,DenseMatrix:c}=t,m=fn({typed:e}),f=zr({typed:e}),u=eu({typed:e,equalScalar:n}),a=cn({typed:e,DenseMatrix:c}),s=Pr({typed:e,DenseMatrix:c}),l=wr({typed:e,matrix:r});return e(tu,{"number, number":(h,v)=>h-v,"Complex, Complex":(h,v)=>h.sub(v),"BigNumber, BigNumber":(h,v)=>h.minus(v),"Fraction, Fraction":(h,v)=>h.sub(v),"Unit, Unit":e.referToSelf(h=>(v,p)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(p.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(p))throw new Error("Units do not match");var d=v.clone();return d.value=e.find(h,[d.valueType(),p.valueType()])(d.value,p.value),d.fixPrefix=!1,d})},l({SS:u,DS:m,SD:f,Ss:s,sS:a}))});var yl="matAlgo07xSSf",wl=["typed","DenseMatrix"],at=L(yl,wl,t=>{var{typed:e,DenseMatrix:r}=t;return function(o,c,m){var f=o._size,u=o._datatype,a=c._size,s=c._datatype;if(f.length!==a.length)throw new pe(f.length,a.length);if(f[0]!==a[0]||f[1]!==a[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+a+")");var l=f[0],h=f[1],v,p=0,d=m;typeof u=="string"&&u===s&&(v=u,p=e.convert(0,v),d=e.find(m,[v,v]));var g,E,D=[];for(g=0;g<l;g++)D[g]=[];var _=[],w=[],x=[],y=[];for(E=0;E<h;E++){var A=E+1;for(n(o,E,x,_,A),n(c,E,y,w,A),g=0;g<l;g++){var C=x[g]===A?_[g]:p,M=y[g]===A?w[g]:p;D[g][E]=d(C,M)}}return new r({data:D,size:[l,h],datatype:v})};function n(i,o,c,m,f){for(var u=i._values,a=i._index,s=i._ptr,l=s[o],h=s[o+1];l<h;l++){var v=a[l];c[v]=f,m[v]=u[l]}}});var nu="conj",_l=["typed"],Li=L(nu,_l,t=>{var{typed:e}=t;return e(nu,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>He(n,r))})});var iu="identity",Cl=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Oi=L(iu,Cl,t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:o,SparseMatrix:c}=t;return e(iu,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(a){return n(a)},"number | BigNumber":function(a){return f(a,a,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(a,s){return f(a,a,s)},"number | BigNumber, number | BigNumber":function(a,s){return f(a,s,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(a,s,l){return f(a,s,l)},Array:function(a){return m(a)},"Array, string":function(a,s){return m(a,s)},Matrix:function(a){return m(a.valueOf(),a.storage())},"Matrix, string":function(a,s){return m(a.valueOf(),s)}});function m(u,a){switch(u.length){case 0:return a?n(a):[];case 1:return f(u[0],u[0],a);case 2:return f(u[0],u[1],a);default:throw new Error("Vector containing two values expected")}}function f(u,a,s){var l=Fe(u)||Fe(a)?i:null;if(Fe(u)&&(u=u.toNumber()),Fe(a)&&(a=a.toNumber()),!ae(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!ae(a)||a<1)throw new Error("Parameters in function identity must be positive integers");var h=l?new i(1):1,v=l?new l(0):0,p=[u,a];if(s){if(s==="sparse")return c.diagonal(p,h,0,v);if(s==="dense")return o.diagonal(p,h,0,v);throw new TypeError('Unknown matrix type "'.concat(s,'"'))}for(var d=Ur([],p,v),g=u<a?u:a,E=0;E<g;E++)d[E][E]=h;return d}});function au(){throw new Error('No "bignumber" implementation available')}function ou(){throw new Error('No "fraction" implementation available')}function uu(){throw new Error('No "matrix" implementation available')}var su="size",Al=["typed","config","?matrix"],Pi=L(su,Al,t=>{var{typed:e,config:r,matrix:n}=t;return e(su,{Matrix:function(o){return o.create(o.size())},Array:Le,string:function(o){return r.matrix==="Array"?[o.length]:n([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return r.matrix==="Array"?[]:n?n([]):uu()}})});var fu="transpose",bl=["typed","matrix"],zi=L(fu,bl,t=>{var{typed:e,matrix:r}=t;return e(fu,{Array:c=>n(r(c)).valueOf(),Matrix:n,any:ye});function n(c){var m=c.size(),f;switch(m.length){case 1:f=c.clone();break;case 2:{var u=m[0],a=m[1];if(a===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+we(m)+")");switch(c.storage()){case"dense":f=i(c,u,a);break;case"sparse":f=o(c,u,a);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+we(m)+")")}return f}function i(c,m,f){for(var u=c._data,a=[],s,l=0;l<f;l++){s=a[l]=[];for(var h=0;h<m;h++)s[h]=ye(u[h][l])}return c.createDenseMatrix({data:a,size:[f,m],datatype:c._datatype})}function o(c,m,f){for(var u=c._values,a=c._index,s=c._ptr,l=u?[]:void 0,h=[],v=[],p=[],d=0;d<m;d++)p[d]=0;var g,E,D;for(g=0,E=a.length;g<E;g++)p[a[g]]++;for(var _=0,w=0;w<m;w++)v.push(_),_+=p[w],p[w]=v[w];for(v.push(_),D=0;D<f;D++)for(var x=s[D],y=s[D+1],A=x;A<y;A++){var C=p[a[A]]++;h[C]=D,u&&(l[C]=ye(u[A]))}return c.createSparseMatrix({values:l,index:h,ptr:v,size:[f,m],datatype:c._datatype})}});var cu="zeros",Ml=["typed","config","matrix","BigNumber"],ki=L(cu,Ml,t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(cu,{"":function(){return r.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(u){var a=u[u.length-1];if(typeof a=="string"){var s=u.pop();return o(u,s)}else return r.matrix==="Array"?o(u):o(u,"default")},Array:o,Matrix:function(u){var a=u.storage();return o(u.valueOf(),a)},"Array | Matrix, string":function(u,a){return o(u.valueOf(),a)}});function o(f,u){var a=c(f),s=a?new i(0):0;if(m(f),u){var l=n(u);return f.length>0?l.resize(f,s):l}else{var h=[];return f.length>0?Ur(h,f,s):h}}function c(f){var u=!1;return f.forEach(function(a,s,l){Fe(a)&&(u=!0,l[s]=a.toNumber())}),u}function m(f){f.forEach(function(u){if(typeof u!="number"||!ae(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}});function ot(t,e,r){var n;return String(t).indexOf("Unexpected type")!==-1?(n=arguments.length>2?" (type: "+cr(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(t).indexOf("complex numbers")!==-1?(n=arguments.length>2?" (type: "+cr(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var Tl="numeric",Nl=["number","?bignumber","?fraction"],qi=L(Tl,Nl,t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:c=>e(c),BigNumber:r?c=>r(c):au,Fraction:n?c=>n(c):ou};return function(m){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var a=cr(m);if(!(a in i))throw new TypeError("Cannot convert "+m+' of type "'+a+'"; valid input types are '+Object.keys(i).join(", "));if(!(f in o))throw new TypeError("Cannot convert "+m+' to type "'+f+'"; valid output types are '+Object.keys(o).join(", "));return f===a?m:o[f](m)}});var lu="divideScalar",Fl=["typed","numeric"],Vi=L(lu,Fl,t=>{var{typed:e,numeric:r}=t;return e(lu,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})});var pu="pow",Sl=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Xi=L(pu,Sl,t=>{var{typed:e,config:r,identity:n,multiply:i,matrix:o,inv:c,number:m,fraction:f,Complex:u}=t;return e(pu,{"number, number":a,"Complex, Complex":function(v,p){return v.pow(p)},"BigNumber, BigNumber":function(v,p){return p.isInteger()||v>=0||r.predictable?v.pow(p):new u(v.toNumber(),0).pow(p.toNumber(),0)},"Fraction, Fraction":function(v,p){var d=v.pow(p);if(d!=null)return d;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return a(v.valueOf(),p.valueOf())},"Array, number":s,"Array, BigNumber":function(v,p){return s(v,p.toNumber())},"Matrix, number":l,"Matrix, BigNumber":function(v,p){return l(v,p.toNumber())},"Unit, number | BigNumber":function(v,p){return v.pow(p)}});function a(h,v){if(r.predictable&&!ae(v)&&h<0)try{var p=f(v),d=m(p);if((v===d||Math.abs((v-d)/v)<1e-14)&&p.d%2===1)return(p.n%2===0?1:-1)*Math.pow(-h,v)}catch{}return r.predictable&&(h<-1&&v===1/0||h>-1&&h<0&&v===-1/0)?NaN:ae(v)||h>=0||r.predictable?xi(h,v):h*h<1&&v===1/0||h*h>1&&v===-1/0?0:new u(h,0).pow(v,0)}function s(h,v){if(!ae(v))throw new TypeError("For A^b, b must be an integer (value is "+v+")");var p=Le(h);if(p.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+p.length+" dimensions)");if(p[0]!==p[1])throw new Error("For A^b, A must be square (size is "+p[0]+"x"+p[1]+")");if(v<0)try{return s(c(h),-v)}catch(E){throw E.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+v+")"):E}for(var d=n(p[0]).valueOf(),g=h;v>=1;)(v&1)===1&&(d=i(g,d)),v>>=1,g=i(g,g);return d}function l(h,v){return o(s(h.valueOf(),v))}});function ut(t){var{DenseMatrix:e}=t;return function(n,i,o){var c=n.size();if(c.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+we(c)+")");var m=c[0],f=c[1];if(m!==f)throw new RangeError("Matrix must be square (size: "+we(c)+")");var u=[];if(Ee(i)){var a=i.size(),s=i._data;if(a.length===1){if(a[0]!==m)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var l=0;l<m;l++)u[l]=[s[l]];return new e({data:u,size:[m,1],datatype:i._datatype})}if(a.length===2){if(a[0]!==m||a[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Vt(i)){if(o){u=[];for(var h=0;h<m;h++)u[h]=[s[h][0]];return new e({data:u,size:[m,1],datatype:i._datatype})}return i}if(Xt(i)){for(var v=0;v<m;v++)u[v]=[0];for(var p=i._values,d=i._index,g=i._ptr,E=g[1],D=g[0];D<E;D++){var _=d[D];u[_][0]=p[D]}return new e({data:u,size:[m,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Ce(i)){var w=Le(i);if(w.length===1){if(w[0]!==m)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<m;x++)u[x]=[i[x]];return new e({data:u,size:[m,1]})}if(w.length===2){if(w[0]!==m||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<m;y++)u[y]=[i[y][0]];return new e({data:u,size:[m,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var mu="lsolve",Bl=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Ui=L(mu,Bl,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:c,DenseMatrix:m}=t,f=ut({DenseMatrix:m});return e(mu,{"SparseMatrix, Array | Matrix":function(l,h){return a(l,h)},"DenseMatrix, Array | Matrix":function(l,h){return u(l,h)},"Array, Array | Matrix":function(l,h){var v=r(l),p=u(v,h);return p.valueOf()}});function u(s,l){l=f(s,l,!0);for(var h=l._data,v=s._size[0],p=s._size[1],d=[],g=s._data,E=0;E<p;E++){var D=h[E][0]||0,_=void 0;if(c(D,0))_=0;else{var w=g[E][E];if(c(w,0))throw new Error("Linear system cannot be solved since matrix is singular");_=n(D,w);for(var x=E+1;x<v;x++)h[x]=[o(h[x][0]||0,i(_,g[x][E]))]}d[E]=[_]}return new m({data:d,size:[v,1]})}function a(s,l){l=f(s,l,!0);for(var h=l._data,v=s._size[0],p=s._size[1],d=s._values,g=s._index,E=s._ptr,D=[],_=0;_<p;_++){var w=h[_][0]||0;if(c(w,0))D[_]=[0];else{for(var x=0,y=[],A=[],C=E[_],M=E[_+1],F=C;F<M;F++){var R=g[F];R===_?x=d[F]:R>_&&(y.push(d[F]),A.push(R))}if(c(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var q=n(w,x),O=0,I=A.length;O<I;O++){var N=A[O];h[N]=[o(h[N][0]||0,i(q,y[O]))]}D[_]=[q]}}return new m({data:D,size:[v,1]})}});var hu="usolve",Il=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],Zi=L(hu,Il,t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:o,equalScalar:c,DenseMatrix:m}=t,f=ut({DenseMatrix:m});return e(hu,{"SparseMatrix, Array | Matrix":function(l,h){return a(l,h)},"DenseMatrix, Array | Matrix":function(l,h){return u(l,h)},"Array, Array | Matrix":function(l,h){var v=r(l),p=u(v,h);return p.valueOf()}});function u(s,l){l=f(s,l,!0);for(var h=l._data,v=s._size[0],p=s._size[1],d=[],g=s._data,E=p-1;E>=0;E--){var D=h[E][0]||0,_=void 0;if(c(D,0))_=0;else{var w=g[E][E];if(c(w,0))throw new Error("Linear system cannot be solved since matrix is singular");_=n(D,w);for(var x=E-1;x>=0;x--)h[x]=[o(h[x][0]||0,i(_,g[x][E]))]}d[E]=[_]}return new m({data:d,size:[v,1]})}function a(s,l){l=f(s,l,!0);for(var h=l._data,v=s._size[0],p=s._size[1],d=s._values,g=s._index,E=s._ptr,D=[],_=p-1;_>=0;_--){var w=h[_][0]||0;if(c(w,0))D[_]=[0];else{for(var x=0,y=[],A=[],C=E[_],M=E[_+1],F=M-1;F>=C;F--){var R=g[F];R===_?x=d[F]:R<_&&(y.push(d[F]),A.push(R))}if(c(x,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var q=n(w,x),O=0,I=A.length;O<I;O++){var N=A[O];h[N]=[o(h[N][0],i(q,y[O]))]}D[_]=[q]}}return new m({data:D,size:[v,1]})}});var ln="smaller",Rl=["typed","config","matrix","DenseMatrix"],Hi=L(ln,Rl,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,o=zr({typed:e}),c=at({typed:e,DenseMatrix:i}),m=Pr({typed:e,DenseMatrix:i}),f=wr({typed:e,matrix:n}),u=Or({typed:e});return e(ln,Ll({typed:e,config:r}),{"boolean, boolean":(a,s)=>a<s,"BigNumber, BigNumber":function(s,l){return s.lt(l)&&!Lr(s,l,r.epsilon)},"Fraction, Fraction":(a,s)=>a.compare(s)===-1,"Complex, Complex":function(s,l){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:c,DS:o,Ss:m}))}),Ll=L(ln,["typed","config"],t=>{var{typed:e,config:r}=t;return e(ln,{"number, number":function(i,o){return i<o&&!mr(i,o,r.epsilon)}})});var pn="larger",Ol=["typed","config","matrix","DenseMatrix"],Gi=L(pn,Ol,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,o=zr({typed:e}),c=at({typed:e,DenseMatrix:i}),m=Pr({typed:e,DenseMatrix:i}),f=wr({typed:e,matrix:n}),u=Or({typed:e});return e(pn,Pl({typed:e,config:r}),{"boolean, boolean":(a,s)=>a>s,"BigNumber, BigNumber":function(s,l){return s.gt(l)&&!Lr(s,l,r.epsilon)},"Fraction, Fraction":(a,s)=>a.compare(s)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:c,DS:o,Ss:m}))}),Pl=L(pn,["typed","config"],t=>{var{typed:e,config:r}=t;return e(pn,{"number, number":function(i,o){return i>o&&!mr(i,o,r.epsilon)}})});var mn="largerEq",zl=["typed","config","matrix","DenseMatrix"],Yi=L(mn,zl,t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,o=zr({typed:e}),c=at({typed:e,DenseMatrix:i}),m=Pr({typed:e,DenseMatrix:i}),f=wr({typed:e,matrix:n}),u=Or({typed:e});return e(mn,kl({typed:e,config:r}),{"boolean, boolean":(a,s)=>a>=s,"BigNumber, BigNumber":function(s,l){return s.gte(l)||Lr(s,l,r.epsilon)},"Fraction, Fraction":(a,s)=>a.compare(s)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},u,f({SS:c,DS:o,Ss:m}))}),kl=L(mn,["typed","config"],t=>{var{typed:e,config:r}=t;return e(mn,{"number, number":function(i,o){return i>=o||mr(i,o,r.epsilon)}})});var vu="max",ql=["typed","config","numeric","larger"],$i=L(vu,ql,t=>{var{typed:e,config:r,numeric:n,larger:i}=t;return e(vu,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(f,u){return an(f,u.valueOf(),o)},"...":function(f){if(nn(f))throw new TypeError("Scalar values expected in function max");return c(f)}});function o(m,f){try{return i(m,f)?m:f}catch(u){throw ot(u,"max",f)}}function c(m){var f;if(_t(m,function(u){try{isNaN(u)&&typeof u=="number"?f=NaN:(f===void 0||i(u,f))&&(f=u)}catch(a){throw ot(a,"max",u)}}),f===void 0)throw new Error("Cannot calculate max of an empty array");return typeof f=="string"&&(f=n(f,r.number)),f}});var du="min",Vl=["typed","config","numeric","smaller"],Qi=L(du,Vl,t=>{var{typed:e,config:r,numeric:n,smaller:i}=t;return e(du,{"Array | Matrix":c,"Array | Matrix, number | BigNumber":function(f,u){return an(f,u.valueOf(),o)},"...":function(f){if(nn(f))throw new TypeError("Scalar values expected in function min");return c(f)}});function o(m,f){try{return i(m,f)?m:f}catch(u){throw ot(u,"min",f)}}function c(m){var f;if(_t(m,function(u){try{isNaN(u)&&typeof u=="number"?f=NaN:(f===void 0||i(u,f))&&(f=u)}catch(a){throw ot(a,"min",u)}}),f===void 0)throw new Error("Cannot calculate min of an empty array");return typeof f=="string"&&(f=n(f,r.number)),f}});var Xl="FibonacciHeap",Ul=["smaller","larger"],ji=L(Xl,Ul,t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(a,s){var l={key:a,value:s,degree:0};if(this._minimum){var h=this._minimum;l.left=h,l.right=h.right,h.right=l,l.right.left=l,e(a,h.key)&&(this._minimum=l)}else l.left=l,l.right=l,this._minimum=l;return this._size++,l},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var a=this._minimum;if(a===null)return a;for(var s=this._minimum,l=a.degree,h=a.child;l>0;){var v=h.right;h.left.right=h.right,h.right.left=h.left,h.left=s,h.right=s.right,s.right=h,h.right.left=h,h.parent=null,h=v,l--}return a.left.right=a.right,a.right.left=a.left,a===a.right?s=null:(s=a.right,s=u(s,this._size)),this._size--,this._minimum=s,a},i.prototype.remove=function(a){this._minimum=o(this._minimum,a,-1),this.extractMinimum()};function o(a,s,l){s.key=l;var h=s.parent;return h&&e(s.key,h.key)&&(c(a,s,h),m(a,h)),e(s.key,a.key)&&(a=s),a}function c(a,s,l){s.left.right=s.right,s.right.left=s.left,l.degree--,l.child===s&&(l.child=s.right),l.degree===0&&(l.child=null),s.left=a,s.right=a.right,a.right=s,s.right.left=s,s.parent=null,s.mark=!1}function m(a,s){var l=s.parent;!l||(s.mark?(c(a,s,l),m(l)):s.mark=!0)}var f=function(s,l){s.left.right=s.right,s.right.left=s.left,s.parent=l,l.child?(s.left=l.child,s.right=l.child.right,l.child.right=s,s.right.left=s):(l.child=s,s.right=s,s.left=s),l.degree++,s.mark=!1};function u(a,s){var l=Math.floor(Math.log(s)*n)+1,h=new Array(l),v=0,p=a;if(p)for(v++,p=p.right;p!==a;)v++,p=p.right;for(var d;v>0;){for(var g=p.degree,E=p.right;d=h[g],!!d;){if(r(p.key,d.key)){var D=d;d=p,p=D}f(d,p),h[g]=null,g++}h[g]=p,p=E,v--}a=null;for(var _=0;_<l;_++)d=h[_],d&&(a?(d.left.right=d.right,d.right.left=d.left,d.left=a,d.right=a.right,a.right=d,d.right.left=d,e(d.key,a.key)&&(a=d)):a=d);return a}return i},{isClass:!0});var Zl="Spa",Hl=["addScalar","equalScalar","FibonacciHeap"],Ji=L(Zl,Hl,t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(o,c){if(this._values[o])this._values[o].value=c;else{var m=this._heap.insert(o,c);this._values[o]=m}},i.prototype.get=function(o){var c=this._values[o];return c?c.value:0},i.prototype.accumulate=function(o,c){var m=this._values[o];m?m.value=e(m.value,c):(m=this._heap.insert(o,c),this._values[o]=m)},i.prototype.forEach=function(o,c,m){var f=this._heap,u=this._values,a=[],s=f.extractMinimum();for(s&&a.push(s);s&&s.key<=c;)s.key>=o&&(r(s.value,0)||m(s.key,s.value,this)),s=f.extractMinimum(),s&&a.push(s);for(var l=0;l<a.length;l++){var h=a[l];s=f.insert(h.key,h.value),u[s.key]=s}},i.prototype.swap=function(o,c){var m=this._values[o],f=this._values[c];if(!m&&f)m=this._heap.insert(o,f.value),this._heap.remove(f),this._values[o]=m,this._values[c]=void 0;else if(m&&!f)f=this._heap.insert(c,m.value),this._heap.remove(m),this._values[c]=f,this._values[o]=void 0;else if(m&&f){var u=m.value;m.value=f.value,f.value=u}},i},{isClass:!0});var xu="add",Gl=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],Ki=L(xu,Gl,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:o,SparseMatrix:c}=t,m=fn({typed:e}),f=Ko({typed:e,equalScalar:i}),u=cn({typed:e,DenseMatrix:o}),a=wr({typed:e,matrix:r});return e(xu,{"any, any":n,"any, any, ...any":e.referToSelf(s=>(l,h,v)=>{for(var p=s(l,h),d=0;d<v.length;d++)p=s(p,v[d]);return p})},a({elop:n,DS:m,SS:f,Ss:u}))});var gu="dot",Yl=["typed","addScalar","multiplyScalar","conj","size"],Wi=L(gu,Yl,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:o}=t;return e(gu,{"Array | DenseMatrix, Array | DenseMatrix":m,"SparseMatrix, SparseMatrix":f});function c(a,s){var l=u(a),h=u(s),v,p;if(l.length===1)v=l[0];else if(l.length===2&&l[1]===1)v=l[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+l.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(v!==p)throw new RangeError("Vectors must have equal length ("+v+" != "+p+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function m(a,s){var l=c(a,s),h=Ee(a)?a._data:a,v=Ee(a)?a._datatype:void 0,p=Ee(s)?s._data:s,d=Ee(s)?s._datatype:void 0,g=u(a).length===2,E=u(s).length===2,D=r,_=n;if(v&&d&&v===d&&typeof v=="string"){var w=v;D=e.find(r,[w,w]),_=e.find(n,[w,w])}if(!g&&!E){for(var x=_(i(h[0]),p[0]),y=1;y<l;y++)x=D(x,_(i(h[y]),p[y]));return x}if(!g&&E){for(var A=_(i(h[0]),p[0][0]),C=1;C<l;C++)A=D(A,_(i(h[C]),p[C][0]));return A}if(g&&!E){for(var M=_(i(h[0][0]),p[0]),F=1;F<l;F++)M=D(M,_(i(h[F][0]),p[F]));return M}if(g&&E){for(var R=_(i(h[0][0]),p[0][0]),q=1;q<l;q++)R=D(R,_(i(h[q][0]),p[q][0]));return R}}function f(a,s){c(a,s);for(var l=a._index,h=a._values,v=s._index,p=s._values,d=0,g=r,E=n,D=0,_=0;D<l.length&&_<v.length;){var w=l[D],x=v[_];if(w<x){D++;continue}if(w>x){_++;continue}w===x&&(d=g(d,E(h[D],p[_])),D++,_++)}return d}function u(a){return Ee(a)?a.size():o(a)}});var Du="lup",$l=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],ea=L(Du,$l,t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:o,multiplyScalar:c,subtract:m,larger:f,equalScalar:u,unaryMinus:a,DenseMatrix:s,SparseMatrix:l,Spa:h}=t;return e(Du,{DenseMatrix:function(g){return v(g)},SparseMatrix:function(g){return p(g)},Array:function(g){var E=r(g),D=v(E);return{L:D.L.valueOf(),U:D.U.valueOf(),p:D.p}}});function v(d){var g=d._size[0],E=d._size[1],D=Math.min(g,E),_=ye(d._data),w=[],x=[g,D],y=[],A=[D,E],C,M,F,R=[];for(C=0;C<g;C++)R[C]=C;for(M=0;M<E;M++){if(M>0)for(C=0;C<g;C++){var q=Math.min(C,M),O=0;for(F=0;F<q;F++)O=i(O,c(_[C][F],_[F][M]));_[C][M]=m(_[C][M],O)}var I=M,N=0,Y=0;for(C=M;C<g;C++){var X=_[C][M],S=n(X);f(S,N)&&(I=C,N=S,Y=X)}if(M!==I&&(R[M]=[R[I],R[I]=R[M]][0],s._swapRows(M,I,_)),M<g)for(C=M+1;C<g;C++){var U=_[C][M];u(U,0)||(_[C][M]=o(_[C][M],Y))}}for(M=0;M<E;M++)for(C=0;C<g;C++){if(M===0&&(C<E&&(y[C]=[]),w[C]=[]),C<M){C<E&&(y[C][M]=_[C][M]),M<g&&(w[C][M]=0);continue}if(C===M){C<E&&(y[C][M]=_[C][M]),M<g&&(w[C][M]=1);continue}C<E&&(y[C][M]=0),M<g&&(w[C][M]=_[C][M])}var Q=new s({data:w,size:x}),ue=new s({data:y,size:A}),ee=[];for(C=0,D=R.length;C<D;C++)ee[R[C]]=C;return{L:Q,U:ue,p:ee,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function p(d){var g=d._size[0],E=d._size[1],D=Math.min(g,E),_=d._values,w=d._index,x=d._ptr,y=[],A=[],C=[],M=[g,D],F=[],R=[],q=[],O=[D,E],I,N,Y,X=[],S=[];for(I=0;I<g;I++)X[I]=I,S[I]=I;var U=function(ee,J){var _e=S[ee],he=S[J];X[_e]=J,X[he]=ee,S[ee]=he,S[J]=_e},Q=function(){var ee=new h;N<g&&(C.push(y.length),y.push(1),A.push(N)),q.push(F.length);var J=x[N],_e=x[N+1];for(Y=J;Y<_e;Y++)I=w[Y],ee.set(X[I],_[Y]);N>0&&ee.forEach(0,N-1,function(ve,ne){l._forEachRow(ve,y,A,C,function(Se,Me){Se>ve&&ee.accumulate(Se,a(c(Me,ne)))})});var he=N,oe=ee.get(N),de=n(oe);ee.forEach(N+1,g-1,function(ve,ne){var Se=n(ne);f(Se,de)&&(he=ve,de=Se,oe=ne)}),N!==he&&(l._swapRows(N,he,M[1],y,A,C),l._swapRows(N,he,O[1],F,R,q),ee.swap(N,he),U(N,he)),ee.forEach(0,g-1,function(ve,ne){ve<=N?(F.push(ne),R.push(ve)):(ne=o(ne,oe),u(ne,0)||(y.push(ne),A.push(ve)))})};for(N=0;N<E;N++)Q();return q.push(F.length),C.push(y.length),{L:new l({values:y,index:A,ptr:C,size:M}),U:new l({values:F,index:R,ptr:q,size:O}),p:X,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function Eu(t,e,r,n){for(var i=t._values,o=t._index,c=t._ptr,m=t._size,f=t._datatype,u=m[0],a=m[1],s=n&&t._values?[]:null,l=[],h=[],v=0,p=0;p<a;p++){h[p]=v;for(var d=r?r[p]:p,g=c[d],E=c[d+1],D=g;D<E;D++){var _=e?e[o[D]]:o[D];l[v]=_,s&&(s[v]=i[D]),v++}}return h[a]=v,t.createSparseMatrix({values:s,index:l,ptr:h,size:[u,a],datatype:f})}function hn(t,e,r,n,i,o,c){var m=0;for(r[c]=t;m>=0;){var f=r[c+m],u=r[n+f];u===-1?(m--,o[e++]=f):(r[n+f]=r[i+u],++m,r[c+m]=u)}return e}function yu(t,e){if(!t)return null;var r=0,n,i=[],o=[],c=0,m=e,f=2*e;for(n=0;n<e;n++)o[c+n]=-1;for(n=e-1;n>=0;n--)t[n]!==-1&&(o[m+n]=o[c+t[n]],o[c+t[n]]=n);for(n=0;n<e;n++)t[n]===-1&&(r=hn(n,r,o,c,m,i,f));return i}function wu(t,e){if(!t)return null;var r=t._index,n=t._ptr,i=t._size,o=i[0],c=i[1],m=[],f=[],u=0,a=c,s,l;if(e)for(s=0;s<o;s++)f[a+s]=-1;for(var h=0;h<c;h++){m[h]=-1,f[u+h]=-1;for(var v=n[h],p=n[h+1],d=v;d<p;d++){var g=r[d];for(s=e?f[a+g]:g;s!==-1&&s<h;s=l)l=f[u+s],f[u+s]=h,l===-1&&(m[s]=h);e&&(f[a+g]=h)}}return m}function _u(t,e,r){for(var n=t._values,i=t._index,o=t._ptr,c=t._size,m=c[1],f=0,u=0;u<m;u++){var a=o[u];for(o[u]=f;a<o[u+1];a++)e(i[a],u,n?n[a]:1,r)&&(i[f]=i[a],n&&(n[f]=n[a]),f++)}return o[m]=f,i.splice(f,i.length-f),n&&n.splice(f,n.length-f),f}function xr(t){return-t-2}var Ql="csAmd",jl=["add","multiply","transpose"],Cu=L(Ql,jl,t=>{var{add:e,multiply:r,transpose:n}=t;return function(a,s){if(!s||a<=0||a>3)return null;var l=s._size,h=l[0],v=l[1],p=0,d=Math.max(16,10*Math.sqrt(v));d=Math.min(v-2,d);var g=i(a,s,h,v,d);_u(g,f,null);for(var E=g._index,D=g._ptr,_=D[v],w=[],x=[],y=0,A=v+1,C=2*(v+1),M=3*(v+1),F=4*(v+1),R=5*(v+1),q=6*(v+1),O=7*(v+1),I=w,N=o(v,D,x,y,M,I,C,O,A,q,F,R),Y=c(v,D,x,R,F,q,d,A,M,I,C),X=0,S,U,Q,ue,ee,J,_e,he,oe,de,ve,ne,Se,Me,se,ge;Y<v;){for(Q=-1;X<v&&(Q=x[M+X])===-1;X++);x[C+Q]!==-1&&(I[x[C+Q]]=-1),x[M+X]=x[C+Q];var Pe=x[F+Q],or=x[A+Q];Y+=or;var Ge=0;x[A+Q]=-or;var xe=D[Q],Be=Pe===0?xe:_,ur=Be;for(ue=1;ue<=Pe+1;ue++){for(ue>Pe?(J=Q,_e=xe,he=x[y+Q]-Pe):(J=E[xe++],_e=D[J],he=x[y+J]),ee=1;ee<=he;ee++)S=E[_e++],!((oe=x[A+S])<=0)&&(Ge+=oe,x[A+S]=-oe,E[ur++]=S,x[C+S]!==-1&&(I[x[C+S]]=I[S]),I[S]!==-1?x[C+I[S]]=x[C+S]:x[M+x[R+S]]=x[C+S]);J!==Q&&(D[J]=xr(Q),x[q+J]=0)}for(Pe!==0&&(_=ur),x[R+Q]=Ge,D[Q]=Be,x[y+Q]=ur-Be,x[F+Q]=-2,N=m(N,p,x,q,v),de=Be;de<ur;de++)if(S=E[de],!((ve=x[F+S])<=0)){oe=-x[A+S];var Rn=N-oe;for(xe=D[S],ne=D[S]+ve-1;xe<=ne;xe++)J=E[xe],x[q+J]>=N?x[q+J]-=oe:x[q+J]!==0&&(x[q+J]=x[R+J]+Rn)}for(de=Be;de<ur;de++){for(S=E[de],ne=D[S],Se=ne+x[F+S]-1,Me=ne,se=0,ge=0,xe=ne;xe<=Se;xe++)if(J=E[xe],x[q+J]!==0){var Nt=x[q+J]-N;Nt>0?(ge+=Nt,E[Me++]=J,se+=J):(D[J]=xr(Q),x[q+J]=0)}x[F+S]=Me-ne+1;var Ft=Me,St=ne+x[y+S];for(xe=Se+1;xe<St;xe++){U=E[xe];var ft=x[A+U];ft<=0||(ge+=ft,E[Me++]=U,se+=U)}ge===0?(D[S]=xr(Q),oe=-x[A+S],Ge-=oe,or+=oe,Y+=oe,x[A+S]=0,x[F+S]=-1):(x[R+S]=Math.min(x[R+S],ge),E[Me]=E[Ft],E[Ft]=E[ne],E[ne]=Q,x[y+S]=Me-ne+1,se=(se<0?-se:se)%v,x[C+S]=x[O+se],x[O+se]=S,I[S]=se)}for(x[R+Q]=Ge,p=Math.max(p,Ge),N=m(N+p,p,x,q,v),de=Be;de<ur;de++)if(S=E[de],!(x[A+S]>=0))for(se=I[S],S=x[O+se],x[O+se]=-1;S!==-1&&x[C+S]!==-1;S=x[C+S],N++){for(he=x[y+S],ve=x[F+S],xe=D[S]+1;xe<=D[S]+he-1;xe++)x[q+E[xe]]=N;var ct=S;for(U=x[C+S];U!==-1;){var Gr=x[y+U]===he&&x[F+U]===ve;for(xe=D[U]+1;Gr&&xe<=D[U]+he-1;xe++)x[q+E[xe]]!==N&&(Gr=0);Gr?(D[U]=xr(S),x[A+S]+=x[A+U],x[A+U]=0,x[F+U]=-1,U=x[C+U],x[C+ct]=U):(ct=U,U=x[C+U])}}for(xe=Be,de=Be;de<ur;de++)S=E[de],!((oe=-x[A+S])<=0)&&(x[A+S]=oe,ge=x[R+S]+Ge-oe,ge=Math.min(ge,v-Y-oe),x[M+ge]!==-1&&(I[x[M+ge]]=S),x[C+S]=x[M+ge],I[S]=-1,x[M+ge]=S,X=Math.min(X,ge),x[R+S]=ge,E[xe++]=S);x[A+Q]=or,(x[y+Q]=xe-Be)===0&&(D[Q]=-1,x[q+Q]=0),Pe!==0&&(_=xe)}for(S=0;S<v;S++)D[S]=xr(D[S]);for(U=0;U<=v;U++)x[M+U]=-1;for(U=v;U>=0;U--)x[A+U]>0||(x[C+U]=x[M+D[U]],x[M+D[U]]=U);for(J=v;J>=0;J--)x[A+J]<=0||D[J]!==-1&&(x[C+J]=x[M+D[J]],x[M+D[J]]=J);for(Q=0,S=0;S<=v;S++)D[S]===-1&&(Q=hn(S,Q,x,M,C,w,q));return w.splice(w.length-1,1),w};function i(u,a,s,l,h){var v=n(a);if(u===1&&l===s)return e(a,v);if(u===2){for(var p=v._index,d=v._ptr,g=0,E=0;E<s;E++){var D=d[E];if(d[E]=g,!(d[E+1]-D>h))for(var _=d[E+1];D<_;D++)p[g++]=p[D]}return d[s]=g,a=n(v),r(v,a)}return r(v,a)}function o(u,a,s,l,h,v,p,d,g,E,D,_){for(var w=0;w<u;w++)s[l+w]=a[w+1]-a[w];s[l+u]=0;for(var x=0;x<=u;x++)s[h+x]=-1,v[x]=-1,s[p+x]=-1,s[d+x]=-1,s[g+x]=1,s[E+x]=1,s[D+x]=0,s[_+x]=s[l+x];var y=m(0,0,s,E,u);return s[D+u]=-2,a[u]=-1,s[E+u]=0,y}function c(u,a,s,l,h,v,p,d,g,E,D){for(var _=0,w=0;w<u;w++){var x=s[l+w];if(x===0)s[h+w]=-2,_++,a[w]=-1,s[v+w]=0;else if(x>p)s[d+w]=0,s[h+w]=-1,_++,a[w]=xr(u),s[d+u]++;else{var y=s[g+x];y!==-1&&(E[y]=w),s[D+w]=s[g+x],s[g+x]=w}}return _}function m(u,a,s,l,h){if(u<2||u+a<0){for(var v=0;v<h;v++)s[l+v]!==0&&(s[l+v]=1);u=2}return u}function f(u,a){return u!==a}});function Au(t,e,r,n,i,o,c){var m,f,u=0,a;if(t<=e||r[n+e]<=r[i+t])return-1;r[i+t]=r[n+e];var s=r[o+t];if(r[o+t]=e,s===-1)u=1,a=t;else{for(u=2,a=s;a!==r[c+a];a=r[c+a]);for(m=s;m!==a;m=f)f=r[c+m],r[c+m]=a}return{jleaf:u,q:a}}var Jl="csCounts",Kl=["transpose"],bu=L(Jl,Kl,t=>{var{transpose:e}=t;return function(r,n,i,o){if(!r||!n||!i)return null;var c=r._size,m=c[0],f=c[1],u,a,s,l,h,v,p,d=4*f+(o?f+m+1:0),g=[],E=0,D=f,_=2*f,w=3*f,x=4*f,y=5*f+1;for(s=0;s<d;s++)g[s]=-1;var A=[],C=e(r),M=C._index,F=C._ptr;for(s=0;s<f;s++)for(a=i[s],A[a]=g[w+a]===-1?1:0;a!==-1&&g[w+a]===-1;a=n[a])g[w+a]=s;if(o){for(s=0;s<f;s++)g[i[s]]=s;for(u=0;u<m;u++){for(s=f,v=F[u],p=F[u+1],h=v;h<p;h++)s=Math.min(s,g[M[h]]);g[y+u]=g[x+s],g[x+s]=u}}for(u=0;u<f;u++)g[E+u]=u;for(s=0;s<f;s++){for(a=i[s],n[a]!==-1&&A[n[a]]--,l=o?g[x+s]:a;l!==-1;l=o?g[y+l]:-1)for(h=F[l];h<F[l+1];h++){u=M[h];var R=Au(u,a,g,w,D,_,E);R.jleaf>=1&&A[a]++,R.jleaf===2&&A[R.q]--}n[a]!==-1&&(g[E+a]=n[a])}for(a=0;a<f;a++)n[a]!==-1&&(A[n[a]]+=A[a]);return A}});var Wl="csSqr",ep=["add","multiply","transpose"],Mu=L(Wl,ep,t=>{var{add:e,multiply:r,transpose:n}=t,i=Cu({add:e,multiply:r,transpose:n}),o=bu({transpose:n});return function(f,u,a){var s=u._ptr,l=u._size,h=l[1],v,p={};if(p.q=i(f,u),f&&!p.q)return null;if(a){var d=f?Eu(u,null,p.q,0):u;p.parent=wu(d,1);var g=yu(p.parent,h);if(p.cp=o(d,p.parent,g,1),d&&p.parent&&p.cp&&c(d,p))for(p.unz=0,v=0;v<h;v++)p.unz+=p.cp[v]}else p.unz=4*s[h]+h,p.lnz=p.unz;return p};function c(m,f){var u=m._ptr,a=m._index,s=m._size,l=s[0],h=s[1];f.pinv=[],f.leftmost=[];var v=f.parent,p=f.pinv,d=f.leftmost,g=[],E=0,D=l,_=l+h,w=l+2*h,x,y,A,C,M;for(y=0;y<h;y++)g[D+y]=-1,g[_+y]=-1,g[w+y]=0;for(x=0;x<l;x++)d[x]=-1;for(y=h-1;y>=0;y--)for(C=u[y],M=u[y+1],A=C;A<M;A++)d[a[A]]=y;for(x=l-1;x>=0;x--)p[x]=-1,y=d[x],y!==-1&&(g[w+y]++===0&&(g[_+y]=x),g[E+x]=g[D+y],g[D+y]=x);for(f.lnz=0,f.m2=l,y=0;y<h;y++)if(x=g[D+y],f.lnz++,x<0&&(x=f.m2++),p[x]=y,!(--w[y]<=0)){f.lnz+=g[w+y];var F=v[y];F!==-1&&(g[w+F]===0&&(g[_+F]=g[_+y]),g[E+g[_+y]]=g[D+F],g[D+F]=g[E+x],g[w+F]+=g[w+y])}for(x=0;x<l;x++)p[x]<0&&(p[x]=y++);return!0}});function At(t,e){return t[e]<0}function vn(t,e){t[e]=xr(t[e])}function ra(t){return t<0?xr(t):t}function Tu(t,e,r,n,i){var o=e._index,c=e._ptr,m=e._size,f=m[1],u,a,s,l=0;for(n[0]=t;l>=0;){t=n[l];var h=i?i[t]:t;At(c,t)||(vn(c,t),n[f+l]=h<0?0:ra(c[h]));var v=1;for(a=n[f+l],s=h<0?0:ra(c[h+1]);a<s;a++)if(u=o[a],!At(c,u)){n[f+l]=a,n[++l]=u,v=0;break}v&&(l--,n[--r]=t)}return r}function Nu(t,e,r,n,i){var o=t._ptr,c=t._size,m=e._index,f=e._ptr,u=c[1],a,s,l,h=u;for(s=f[r],l=f[r+1],a=s;a<l;a++){var v=m[a];At(o,v)||(h=Tu(v,t,h,n,i))}for(a=h;a<u;a++)vn(o,n[a]);return h}var rp="csSpsolve",tp=["divideScalar","multiply","subtract"],Fu=L(rp,tp,t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(o,c,m,f,u,a,s){var l=o._values,h=o._index,v=o._ptr,p=o._size,d=p[1],g=c._values,E=c._index,D=c._ptr,_,w,x,y,A=Nu(o,c,m,f,a);for(_=A;_<d;_++)u[f[_]]=0;for(w=D[m],x=D[m+1],_=w;_<x;_++)u[E[_]]=g[_];for(var C=A;C<d;C++){var M=f[C],F=a?a[M]:M;if(!(F<0))for(w=v[F],x=v[F+1],u[M]=e(u[M],l[s?w:x-1]),_=s?w+1:w,y=s?x:x-1;_<y;_++){var R=h[_];u[R]=n(u[R],r(l[_],u[M]))}}return A}});var np="csLu",ip=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Su=L(np,ip,t=>{var{abs:e,divideScalar:r,multiply:n,subtract:i,larger:o,largerEq:c,SparseMatrix:m}=t,f=Fu({divideScalar:r,multiply:n,subtract:i});return function(a,s,l){if(!a)return null;var h=a._size,v=h[1],p,d=100,g=100;s&&(p=s.q,d=s.lnz||d,g=s.unz||g);var E=[],D=[],_=[],w=new m({values:E,index:D,ptr:_,size:[v,v]}),x=[],y=[],A=[],C=new m({values:x,index:y,ptr:A,size:[v,v]}),M=[],F,R,q=[],O=[];for(F=0;F<v;F++)q[F]=0,M[F]=-1,_[F+1]=0;d=0,g=0;for(var I=0;I<v;I++){_[I]=d,A[I]=g;var N=p?p[I]:I,Y=f(w,a,N,O,q,M,1),X=-1,S=-1;for(R=Y;R<v;R++)if(F=O[R],M[F]<0){var U=e(q[F]);o(U,S)&&(S=U,X=F)}else y[g]=M[F],x[g++]=q[F];if(X===-1||S<=0)return null;M[N]<0&&c(e(q[N]),n(S,l))&&(X=N);var Q=q[X];for(y[g]=I,x[g++]=Q,M[X]=I,D[d]=X,E[d++]=1,R=Y;R<v;R++)F=O[R],M[F]<0&&(D[d]=F,E[d++]=r(q[F],Q)),q[F]=0}for(_[v]=d,A[v]=g,R=0;R<d;R++)D[R]=M[D[R]];return E.splice(d,E.length-d),D.splice(d,D.length-d),x.splice(g,x.length-g),y.splice(g,y.length-g),{L:w,U:C,pinv:M}}});var Bu="slu",ap=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],ta=L(Bu,ap,t=>{var{typed:e,abs:r,add:n,multiply:i,transpose:o,divideScalar:c,subtract:m,larger:f,largerEq:u,SparseMatrix:a}=t,s=Mu({add:n,multiply:i,transpose:o}),l=Su({abs:r,divideScalar:c,multiply:i,subtract:m,larger:f,largerEq:u,SparseMatrix:a});return e(Bu,{"SparseMatrix, number, number":function(v,p,d){if(!ae(p)||p<0||p>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(d<0||d>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var g=s(p,v,!1),E=l(v,g,d);return{L:E.L,U:E.U,p:E.pinv,q:g.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function na(t,e){var r,n=e.length,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}var Iu="lusolve",op=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],ia=L(Iu,op,t=>{var{typed:e,matrix:r,lup:n,slu:i,usolve:o,lsolve:c,DenseMatrix:m}=t,f=ut({DenseMatrix:m});return e(Iu,{"Array, Array | Matrix":function(l,h){l=r(l);var v=n(l),p=a(v.L,v.U,v.p,null,h);return p.valueOf()},"DenseMatrix, Array | Matrix":function(l,h){var v=n(l);return a(v.L,v.U,v.p,null,h)},"SparseMatrix, Array | Matrix":function(l,h){var v=n(l);return a(v.L,v.U,v.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(l,h,v,p){var d=i(l,v,p);return a(d.L,d.U,d.p,d.q,h)},"Object, Array | Matrix":function(l,h){return a(l.L,l.U,l.p,l.q,h)}});function u(s){if(Ee(s))return s;if(Ce(s))return r(s);throw new TypeError("Invalid Matrix LU decomposition")}function a(s,l,h,v,p){s=u(s),l=u(l),h&&(p=f(s,p,!0),p._data=na(h,p._data));var d=c(s,p),g=o(l,d);return v&&(g._data=na(v,g._data)),g}});var Ru="det",up=["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],aa=L(Ru,up,t=>{var{typed:e,matrix:r,subtract:n,multiply:i,divideScalar:o,isZero:c,unaryMinus:m}=t;return e(Ru,{any:function(a){return ye(a)},"Array | Matrix":function(a){var s;switch(Ee(a)?s=a.size():Array.isArray(a)?(a=r(a),s=a.size()):s=[],s.length){case 0:return ye(a);case 1:if(s[0]===1)return ye(a.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+we(s)+")");case 2:{var l=s[0],h=s[1];if(l===h)return f(a.clone().valueOf(),l,h);throw new RangeError("Matrix must be square (size: "+we(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+we(s)+")")}}});function f(u,a,s){if(a===1)return ye(u[0][0]);if(a===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var l=!1,h=new Array(a).fill(0).map((y,A)=>A),v=0;v<a;v++){var p=h[v];if(c(u[p][v])){var d=void 0;for(d=v+1;d<a;d++)if(!c(u[h[d]][v])){p=h[d],h[d]=h[v],h[v]=p,l=!l;break}if(d===a)return u[p][v]}for(var g=u[p][v],E=v===0?1:u[h[v-1]][v-1],D=v+1;D<a;D++)for(var _=h[D],w=v+1;w<a;w++)u[_][w]=o(n(i(u[_][w],g),i(u[_][v],u[p][w])),E)}var x=u[h[a-1]][a-1];return l?m(x):x}});var Lu="inv",sp=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],oa=L(Lu,sp,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:o,unaryMinus:c,det:m,identity:f,abs:u}=t;return e(Lu,{"Array | Matrix":function(l){var h=Ee(l)?l.size():Le(l);switch(h.length){case 1:if(h[0]===1)return Ee(l)?r([n(1,l.valueOf()[0])]):[n(1,l[0])];throw new RangeError("Matrix must be square (size: "+we(h)+")");case 2:{var v=h[0],p=h[1];if(v===p)return Ee(l)?r(a(l.valueOf(),v,p),l.storage()):a(l,v,p);throw new RangeError("Matrix must be square (size: "+we(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+we(h)+")")}},any:function(l){return n(1,l)}});function a(s,l,h){var v,p,d,g,E;if(l===1){if(g=s[0][0],g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,g)]]}else if(l===2){var D=m(s);if(D===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(s[1][1],D),n(c(s[0][1]),D)],[n(c(s[1][0]),D),n(s[0][0],D)]]}else{var _=s.concat();for(v=0;v<l;v++)_[v]=_[v].concat();for(var w=f(l).valueOf(),x=0;x<h;x++){var y=u(_[x][x]),A=x;for(v=x+1;v<l;)u(_[v][x])>y&&(y=u(_[v][x]),A=v),v++;if(y===0)throw Error("Cannot calculate inverse, determinant is zero");v=A,v!==x&&(E=_[x],_[x]=_[v],_[v]=E,E=w[x],w[x]=w[v],w[v]=E);var C=_[x],M=w[x];for(v=0;v<l;v++){var F=_[v],R=w[v];if(v!==x){if(F[x]!==0){for(d=n(c(F[x]),C[x]),p=x;p<h;p++)F[p]=i(F[p],o(d,C[p]));for(p=0;p<h;p++)R[p]=i(R[p],o(d,M[p]))}}else{for(d=C[x],p=x;p<h;p++)F[p]=n(F[p],d);for(p=0;p<h;p++)R[p]=n(R[p],d)}}}return w}}});var fp="divide",cp=["typed","matrix","multiply","equalScalar","divideScalar","inv"],ua=L(fp,cp,t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:o,inv:c}=t,m=sn({typed:e,equalScalar:i}),f=it({typed:e});return e("divide",Ut({"Array | Matrix, Array | Matrix":function(a,s){return n(a,c(s))},"DenseMatrix, any":function(a,s){return f(a,s,o,!1)},"SparseMatrix, any":function(a,s){return m(a,s,o,!1)},"Array, any":function(a,s){return f(r(a),s,o,!1).valueOf()},"any, Array | Matrix":function(a,s){return n(a,c(s))}},o.signatures))});var Ou="combinations",lp=["typed"],sa=L(Ou,lp,t=>{var{typed:e}=t;return e(Ou,{"number, number":gi,"BigNumber, BigNumber":function(n,i){var o=n.constructor,c,m,f=n.minus(i),u=new o(1);if(!Pu(n)||!Pu(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(c=u,i.lt(f))for(m=u;m.lte(f);m=m.plus(u))c=c.times(i.plus(m)).dividedBy(m);else for(m=u;m.lte(i);m=m.plus(u))c=c.times(f.plus(m)).dividedBy(m);return c}})});function Pu(t){return t.isInteger()&&t.gte(0)}var dn=oi({config:nr}),xn=si({});var zu=ci({});var fa=li({});var hr=pi({Matrix:fa});var me=Kn({BigNumber:dn,Complex:xn,DenseMatrix:hr,Fraction:zu});var ca=Ni({typed:me});var Zr=Fi({typed:me});var pp=Ci({BigNumber:dn,typed:me});var ku=sa({typed:me}),qu=Ai({Complex:xn,typed:me}),mp=Li({typed:me});var Mr=yi({config:nr,typed:me});var hp=Ei({typed:me});var bt=Si({typed:me});var Vu=_i({typed:me});var Mt=wi({Matrix:fa,equalScalar:Mr,typed:me});var Xu=Ii({Complex:xn,config:nr,typed:me});var gn=Ti({typed:me});var Uu=bi({Fraction:zu,typed:me});var Ve=Mi({DenseMatrix:hr,Matrix:fa,SparseMatrix:Mt,typed:me});var la=qi({bignumber:pp,fraction:Uu,number:Vu});var vp=Pi({matrix:Ve,config:nr,typed:me}),Zu=Hi({DenseMatrix:hr,config:nr,matrix:Ve,typed:me});var Tr=Ri({DenseMatrix:hr,addScalar:Zr,equalScalar:Mr,matrix:Ve,typed:me,unaryMinus:gn});var pa=zi({matrix:Ve,typed:me});var Hu=ki({BigNumber:dn,config:nr,matrix:Ve,typed:me});var Hr=Vi({numeric:la,typed:me});var dp=Yi({DenseMatrix:hr,config:nr,matrix:Ve,typed:me});var xp=Ui({DenseMatrix:hr,divideScalar:Hr,equalScalar:Mr,matrix:Ve,multiplyScalar:bt,subtract:Tr,typed:me});var Gu=Qi({config:nr,numeric:la,smaller:Zu,typed:me});var gp=Zi({DenseMatrix:hr,divideScalar:Hr,equalScalar:Mr,matrix:Ve,multiplyScalar:bt,subtract:Tr,typed:me});var Tt=Ki({DenseMatrix:hr,SparseMatrix:Mt,addScalar:Zr,equalScalar:Mr,matrix:Ve,typed:me});var Dp=Wi({addScalar:Zr,conj:mp,multiplyScalar:bt,size:vp,typed:me});var Yu=Oi({BigNumber:dn,DenseMatrix:hr,SparseMatrix:Mt,config:nr,matrix:Ve,typed:me});var Dn=Gi({DenseMatrix:hr,config:nr,matrix:Ve,typed:me});var gr=Bi({addScalar:Zr,dot:Dp,equalScalar:Mr,matrix:Ve,multiplyScalar:bt,typed:me});var Ep=ta({SparseMatrix:Mt,abs:ca,add:Tt,divideScalar:Hr,larger:Dn,largerEq:dp,multiply:gr,subtract:Tr,transpose:pa,typed:me});var En=aa({divideScalar:Hr,isZero:hp,matrix:Ve,multiply:gr,subtract:Tr,typed:me,unaryMinus:gn});var yp=ji({larger:Dn,smaller:Zu});var $u=$i({config:nr,larger:Dn,numeric:la,typed:me});var yn=oa({abs:ca,addScalar:Zr,det:En,divideScalar:Hr,identity:Yu,matrix:Ve,multiply:gr,typed:me,unaryMinus:gn});var wn=Xi({Complex:xn,config:nr,fraction:Uu,identity:Yu,inv:yn,matrix:Ve,multiply:gr,number:Vu,typed:me});var wp=Ji({FibonacciHeap:yp,addScalar:Zr,equalScalar:Mr});var Qu=ua({divideScalar:Hr,equalScalar:Mr,inv:yn,matrix:Ve,multiply:gr,typed:me});var _p=ea({DenseMatrix:hr,Spa:wp,SparseMatrix:Mt,abs:ca,addScalar:Zr,divideScalar:Hr,equalScalar:Mr,larger:Dn,matrix:Ve,multiplyScalar:bt,subtract:Tr,typed:me,unaryMinus:gn});var ju=ia({DenseMatrix:hr,lsolve:xp,lup:_p,matrix:Ve,slu:Ep,typed:me,usolve:gp});var fe=class{constructor(e,r){this.rows=1;this.cols=1;this.values=[];this.rows=e,this.cols=r,this.values=new Array(e*r).fill(0)}getRows(){return this.rows}getCols(){return this.cols}setValue(e,r,n){this.values[e*this.cols+r]=n}getValue(e,r){return this.values[e*this.cols+r]}getCol(e){let r=new Ie(this.rows);for(let n=0;n<this.rows;n++)r.setValue(n,this.getValue(n,e));return r}clone(){let e=new fe(this.rows,this.cols);return e.values=[...this.values],e}toString(){let e="[";for(let r=0;r<this.rows;r++){r>0&&(e+=","),e+="[";for(let n=0;n<this.cols;n++)n>0&&(e+=","),e+=this.getValue(r,n);e+="]"}return e+="]",e}static equal(e,r,n=1e-9){if(e.getRows()!=r.getRows()||e.getCols()!=r.getCols())return!1;let i=e.getRows(),o=e.getCols();for(let c=0;c<i;c++)for(let m=0;m<o;m++)if(Math.abs(e.getValue(c,m)-r.getValue(c,m))>n)return!1;return!0}floor(){let e=this.getRows(),r=this.getCols();for(let n=0;n<e;n++)for(let i=0;i<r;i++)this.setValue(n,i,Math.floor(this.getValue(n,i)))}ceil(){let e=this.getRows(),r=this.getCols();for(let n=0;n<e;n++)for(let i=0;i<r;i++)this.setValue(n,i,Math.ceil(this.getValue(n,i)))}round(){let e=this.getRows(),r=this.getCols();for(let n=0;n<e;n++)for(let i=0;i<r;i++)this.setValue(n,i,Math.round(this.getValue(n,i)))}static mod(e,r){let n=e.clone(),i=n.getRows(),o=n.getCols();for(let c=0;c<i;c++)for(let m=0;m<o;m++)n.setValue(c,m,n.getValue(c,m)%r);return n}static mathjs2matrix(e){let r=new fe(e.size()[0],e.size()[1]),n=r.getRows(),i=r.getCols();for(let o=0;o<n;o++)for(let c=0;c<i;c++)r.setValue(o,c,e.get([o,c]));return r}static matrix2mathjs(e){let r=Hu(e.rows,e.cols);for(let n=0;n<e.rows;n++)for(let i=0;i<e.cols;i++)r.set([n,i],e.getValue(n,i));return r}is_zero(e=1e-9){for(let r=0;r<this.rows;r++)for(let n=0;n<this.cols;n++)if(Math.abs(this.getValue(r,n))>e)return!1;return!0}is_integer(){for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++){let n=this.getValue(e,r);if(Math.abs(n-Math.round(n))!=0)return!1}return!0}is_symmetric(){if(this.rows!=this.cols)return!1;for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)if(this.getValue(e,r)!=this.getValue(r,e))return!1;return!0}rank(e=1e-12){let r=this.clone(),n=r.rows,i=r.cols,o=0,c=[];for(let m=0;m<i;m++)c.push(!1);for(let m=0;m<n;m++){let f;for(f=0;f<i&&!(!c[f]&&Math.abs(r.getValue(m,f))>e);f++);if(f!=i){o++,c[f]=!0;for(let u=m+1;u<n;u++)r.setValue(u,f,r.getValue(u,f)/r.getValue(m,f));for(let u=0;u<i;u++)if(u!=f&&Math.abs(r.getValue(m,u))>e)for(let a=m+1;a<n;a++)r.setValue(a,u,r.getValue(a,u)-r.getValue(a,f)*r.getValue(m,u))}}return o}};var Cn=class{constructor(e){this.parent=null;this.parent=e}_create(e,r,n){let i=new fe(e,r),o=0;for(let c=0;c<e;c++)for(let m=0;m<r;m++)i.setValue(c,m,n[o++]);return i}_clone(e){return e.clone()}_equalMatrices(e,r){return fe.equal(e,r)}_unequalMatrices(e,r){return fe.equal(e,r)==!1}_getElement(e,r,n,i){if(r<0||r>=e.getRows())throw new De(i,"matrix has "+e.getRows()+" rows. Cannot get row "+r);if(n<0||n>=e.getCols())throw new De(i,"matrix has "+e.getCols()+" columns. Cannot get column "+n);return e.getValue(r,n)}_setElement(e,r,n,i,o){if(r<0||r>=e.getRows())throw new De(o,"matrix has "+e.getRows()+" rows. Cannot get row "+r);if(n<0||n>=e.getCols())throw new De(o,"matrix has "+e.getCols()+" columns. Cannot get column "+n);e.setValue(r,n,i)}_eye(e){let r=new fe(e,e);for(let n=0;n<e;n++)r.setValue(n,n,1);return r}_addMatrices(e,r,n){let i;try{i=Tt(fe.matrix2mathjs(e),fe.matrix2mathjs(r))}catch{throw new De(n,"dimensions do not match")}return fe.mathjs2matrix(i)}_subMatrices(e,r,n){let i;try{i=Tr(fe.matrix2mathjs(e),fe.matrix2mathjs(r))}catch{throw new De(n,"dimensions do not match")}return fe.mathjs2matrix(i)}_mulScalarMatrix(e,r){let n=gr(e,fe.matrix2mathjs(r));return fe.mathjs2matrix(n)}_mulMatrixScalar(e,r){let n=gr(fe.matrix2mathjs(e),r);return fe.mathjs2matrix(n)}_mulMatrices(e,r,n){let i;try{i=gr(fe.matrix2mathjs(e),fe.matrix2mathjs(r))}catch{throw new De(n,"dimensions do not match")}return fe.mathjs2matrix(i)}_randMatrix(e,r,n,i){let o=new fe(e,r);for(let c=0;c<e;c++)for(let m=0;m<r;m++)o.setValue(c,m,this.parent.interpret_basic._randIntMinMax(n,i));return o}_randZMatrix(e,r,n,i){let o=new fe(e,r);for(let c=0;c<e;c++)for(let m=0;m<r;m++)o.setValue(c,m,this.parent.interpret_basic._randIntMinMaxZ(n,i));return o}_det(e,r){try{return En(fe.matrix2mathjs(e))}catch{throw new De(r,"matrix is not square")}}_minMatrix(e){return Gu(fe.matrix2mathjs(e))}_maxMatrix(e){return $u(fe.matrix2mathjs(e))}_zeros(e,r){let n=new fe(e,r);for(let i=0;i<e;i++)for(let o=0;o<r;o++)n.setValue(i,o,0);return n}_ones(e,r){let n=new fe(e,r);for(let i=0;i<e;i++)for(let o=0;o<r;o++)n.setValue(i,o,1);return n}_floorMatrix(e){let r=e.clone();return r.floor(),r}_ceilMatrix(e){let r=e.clone();return r.ceil(),r}_roundMatrix(e){let r=e.clone();return r.round(),r}_transposeMatrix(e){return fe.mathjs2matrix(pa(fe.matrix2mathjs(e)))}_triu(e){let r=e.clone();for(let n=0;n<r.getRows();n++)for(let i=0;i<r.getCols();i++)n>i&&r.setValue(n,i,0);return r}_linsolve(e,r){return fe.mathjs2matrix(ju(fe.matrix2mathjs(e),Ie.vector2list(r))).getCol(0)}_matrixFromVectors(e,r){let n=e.length;if(n==0)throw new De(r,"no vector given");let i=-1;for(let c=0;c<n;c++)if(c==0)i=e[0].getSize();else if(e[c].getSize()!=i)throw new De(r,"vector lengths differ");let o=new fe(i,n);for(let c=0;c<i;c++)for(let m=0;m<n;m++)o.setValue(c,m,e[m].getValue(c));return o}_rank(e){return e.rank()}_isMatrixZero(e){return e.is_zero(1e-9)}_isMatrixSymmetric(e,r){if(e.getRows()!=e.getCols())throw new De(r,"matrix is not symmetric");return e.is_symmetric()}_isMatrixInvertible(e,r){if(e.getRows()!=e.getCols())throw new De(r,"matrix is not symmetric");let n=En(fe.matrix2mathjs(e));return Math.abs(n)>1e-9}_invMatrix(e,r){if(this._isMatrixInvertible(e,r)==!1)throw new De(r,"matrix is not invertible");return fe.mathjs2matrix(yn(fe.matrix2mathjs(e)))}_modMatrix(e,r,n){if(e.is_integer()==!1)throw new De(n,"matrix is not integral");return fe.mod(e,r)}_matrixColumn(e,r,n){if(r<0||r>=e.getCols())throw new De(n,"invalid column");let i=new Ie(e.getRows());for(let o=0;o<e.getRows();o++)i.setValue(o,e.getValue(o,r));return i}_matrixRow(e,r,n){if(r<0||r>=e.getRows())throw new De(n,"invalid row");let i=new Ie(e.getCols());for(let o=0;o<e.getCols();o++)i.setValue(o,e.getValue(r,o));return i}};var Ae=class{constructor(e=0,r=0){this.real=e,this.imag=r}clone(){return new Ae(this.real,this.imag)}mulReal(e){this.real*=e,this.imag*=e}static mathjs2complex(e){return new Ae(e.re,e.im)}static complex2mathjs(e){return qu(e.real,e.imag)}toMathJs(){return Ae.complex2mathjs(this)}toString(){return this.imag>=0?this.real+"+"+this.imag+"i":this.real+"-"+-this.imag+"i"}};var An=class{constructor(e){this.parent=null;this.parent=e}_create(e,r){return new Ae(e,r)}_unaryMinusComplex(e){return new Ae(-e.real,-e.imag)}_addComplex(e,r){return Ae.mathjs2complex(Tt(e.toMathJs(),r.toMathJs()))}_addNumberComplex(e,r){return new Ae(e+r.real,r.imag)}_addComplexNumber(e,r){return new Ae(e.real+r,e.imag)}_subComplex(e,r){return Ae.mathjs2complex(Tr(e.toMathJs(),r.toMathJs()))}_subNumberComplex(e,r){return new Ae(e-r.real,r.imag)}_subComplexNumber(e,r){return new Ae(e.real-r,e.imag)}_mulComplex(e,r){return Ae.mathjs2complex(gr(e.toMathJs(),r.toMathJs()))}_divComplex(e,r){return Ae.mathjs2complex(Qu(e.toMathJs(),r.toMathJs()))}_mulNumberComplex(e,r){let n=r.clone();return n.mulReal(e),n}_mulComplexNumber(e,r){let n=e.clone();return n.mulReal(r),n}_powComplexComplex(e,r){return Ae.mathjs2complex(wn(Ae.complex2mathjs(e),Ae.complex2mathjs(r)))}_powComplexNumber(e,r){return Ae.mathjs2complex(wn(Ae.complex2mathjs(e),r))}_powNumberComplex(e,r){return Ae.mathjs2complex(wn(e,Ae.complex2mathjs(r)))}_conjComplex(e){return new Ae(e.real,-e.imag)}_complex(e,r){return new Ae(e,r)}_extractComplexReal(e){return e.real}_extractComplexImag(e){return e.imag}_sqrtC_number(e){return e>=0?new Ae(Math.sqrt(e),0):new Ae(0,Math.sqrt(e))}_sqrtC_complex(e){return Ae.mathjs2complex(Xu(Ae.complex2mathjs(e)))}_absComplex(e){return Math.sqrt(e.real*e.real+e.imag*e.imag)}};var bn=class{constructor(e){this.parent=null;this.parent=e}_equalBooleans(e,r){return e==r}_equalNumbers(e,r){return Math.abs(e-r)<=1e-9}_unequalBooleans(e,r){return e!=r}_unequalNumbers(e,r){return Math.abs(e-r)>1e-9}_add(e,r){return e+r}_unaryMinus(e){return-e}_unaryNot(e){return!e}_sub(e,r){return e-r}_mul(e,r){return e*r}_div(e,r){return e/r}_mod(e,r){return e%r}_pow(e,r){return Math.pow(e,r)}_randIntMax(e){return Math.floor(Math.random()*e)}_randIntMaxZ(e){let r=0;for(;r==0;)r=this._randIntMax(e);return r}_randIntMinMax(e,r){return Math.floor(Math.random()*(r+1-e)+e)}_randIntMinMaxZ(e,r){let n=0;for(;n==0;)n=this._randIntMinMax(e,r);return n}_sin(e){return Math.sin(e)}_cos(e){return Math.cos(e)}_tan(e){return Math.tan(e)}_asin(e){return Math.asin(e)}_acos(e){return Math.acos(e)}_atan(e){return Math.atan(e)}_exp(e){return Math.exp(e)}_sqrt(e,r){if(e<0)throw new De(r,'parameter must be positive; otherwise use function "sqrtC"');return Math.sqrt(e)}_abs(e){return Math.abs(e)}_floor(e){return Math.floor(e)}_ceil(e){return Math.ceil(e)}_round(e){return Math.round(e)}_sign(e){return e==0?0:e<0?-1:1}_maxInt(e){return Math.max(...e)}_fac(e){let r=1;for(let n=1;n<=e;n++)r*=n;return r}_binomial(e,r){return ku(e,r)}};var st=class extends Error{constructor(e){super(e),this.name="TermError"}},j=class{constructor(e="",r=[]){this.op="";this.value="";this.o=[];this.op=e,this.o=r}static Op(e,r){let n=new j;return n.op=e,n.o=r,n}static Const(e){let r=new j;return r.op="#",r.value=e,r}static Var(e){let r=new j;return r.op="$",r.value=e,r}clone(){let e=new j;e.op=this.op,e.value=this.value;for(let r of this.o)e.o.push(r.clone());return e}eval(e={}){let r;switch(this.op){case"+":r=0;for(let n of this.o)r+=n.eval(e);break;case"*":r=1;for(let n of this.o)r*=n.eval(e);break;case"-":r=0;for(let n of this.o)r-=n.eval(e);break;case".-":r=-this.o[0].eval(e);break;case"^":r=Math.pow(this.o[0].eval(e),this.o[1].eval(e));break;case"#":r=this.value;break;case"sin":r=Math.sin(this.o[0].eval(e));break;case"cos":r=Math.cos(this.o[0].eval(e));break;case"tan":r=Math.tan(this.o[0].eval(e));break;case"asin":r=Math.asin(this.o[0].eval(e));break;case"atan":r=Math.atan(this.o[0].eval(e));break;case"exp":r=Math.exp(this.o[0].eval(e));break;case"$":if(this.value in e)return e[this.value];throw new st('eval(..): unset variable "'+this.value+'"');default:throw new st('eval(..): unimplemented operator "'+this.op+'"')}return r}diff(e){let r=null,n,i;switch(this.op){case".-":r=j.Op(".-",[this.o[0].diff(e)]);break;case"+":r=j.Op("+",[]);for(let o of this.o)r.o.push(o.diff(e));break;case"*":n=this.o[0],i=this.o.length==2?this.o[1]:j.Op("*",this.o.slice(1)),r=j.Op("+",[j.Op("*",[n.diff(e),i.clone()]),j.Op("*",[n.clone(),i.diff(e)])]);break;case"^":if(this.o[1].op!=="#")throw new st("diff(..): u^v: operator ^ only implemented for constant v");r=j.Op("*",[this.o[0].diff(e),this.o[1].clone(),j.Op("^",[this.o[0].clone(),j.Const(this.o[1].value-1)])]);break;case"exp":r=j.Op("*",[this.o[0].diff(e),j.Op("exp",[this.o[0].clone()])]);break;case"sin":r=j.Op("*",[this.o[0].diff(e),j.Op("cos",[this.o[0].clone()])]);break;case"cos":r=j.Op(".-",[j.Op("*",[this.o[0].diff(e),j.Op("cos",[this.o[0].clone()])])]);break;case"$":r=j.Const(this.value===e?1:0);break;case"#":r=j.Const(0);break;default:throw new st('diff(..): unimplemented operator "'+this.op+'"')}return r}integrate(e,r,n,i=1e-12){let o=0;for(let c=r;c<=n;c+=i)o+=this.eval({varId:c});return o/i}optimize(){let e=this.clone();for(let r=0;r<e.o.length;r++)e.o[r]=e.o[r].optimize();if(this.op==="*"){for(let r of e.o)if(r.op==="#"&&r.value==0)return j.Const(0)}try{let r=e.eval();return j.Const(r)}catch{}return e}setVariableValue(e,r){this.op==="$"&&(this.op="#",this.value=r);for(let n of this.o)n.setVariableValue(e,r)}getVariableIDs(){let e=new Set;this.op==="$"&&e.add(this.value);for(let r of this.o)e=new Set([...e,...r.getVariableIDs()]);return e}toString(){let e="";switch(this.op){case"#":case"$":e=""+this.value;break;case".-":e+="-("+this.o[0].toString()+")";break;default:if(this.op.length>2){e+=this.op+"(";for(let r=0;r<this.o.length;r++)r>0&&(e+=","),e+=this.o[r].toString();e+=")"}else{e+="(";for(let r=0;r<this.o.length;r++)r>0&&(e+=this.op),e+=this.o[r].toString();e+=")"}break}return e}};var Mn=class{constructor(e){this.parent=null;this.parent=e}var(e){return j.Var(e)}_eval(e,r,n){let i=0;try{i=e.eval(r)}catch(o){throw new De(n,o.message)}return i}_numberToTerm(e){return j.Const(e)}_addTermReal(e,r){return j.Op("+",[e,j.Const(r)])}_addRealTerm(e,r){return j.Op("+",[j.Const(e),r])}_addTermTerm(e,r){return j.Op("+",[e,r])}_subTermReal(e,r){return j.Op("-",[e,j.Const(r)])}_subRealTerm(e,r){return j.Op("-",[j.Const(e),r])}_subTermTerm(e,r){return j.Op("-",[e,r])}_mulTermReal(e,r){return j.Op("*",[e,j.Const(r)])}_mulRealTerm(e,r){return j.Op("*",[j.Const(e),r])}_mulTermTerm(e,r){return j.Op("*",[e,r])}_divTermReal(e,r){return j.Op("/",[e,j.Const(r)])}_divRealTerm(e,r){return j.Op("/",[j.Const(e),r])}_divTermTerm(e,r){return j.Op("/",[e,r])}_powTermReal(e,r){return j.Op("^",[e,j.Const(r)])}_powRealTerm(e,r){return j.Op("^",[j.Const(e),r])}_powTermTerm(e,r){return j.Op("^",[e,r])}_sinTerm(e){return j.Op("sin",[e])}_cosTerm(e){return j.Op("cos",[e])}_tanTerm(e){return j.Op("tan",[e])}_expTerm(e){return j.Op("exp",[e])}_diffTerm(e,r){return e.diff(r.toString())}_ode(e,r){return j.Op("ode",[e,r])}};var Tn=class{constructor(e=[]){this.elements=[];this.elements=e}add(e){this.elements.includes(e)==!1&&this.elements.push(e)}toString(){let e="{";return e+=this.elements.sort().join(","),e+="}",e}},Nn=class{constructor(e=[]){this.elements=[];this.elements=e}add(e){this.elements.push(e)}toString(){let e="{";return e+=this.elements.join(","),e+="}",e}};var Fn=class{constructor(e){this.parent=null;this.parent=e}_createIntSet(e){let r=new Tn;for(let n of e)r.add(n);return r}_createComplexSet(e){let r=new Nn;for(let n of e)r.add(n);return r}_lenSet(e){return e.elements.length}};var De=class extends Error{constructor(e,r){super(""+e+":"+r),this.name="RunError"}},Sn=class{constructor(){this.interpret_vector=null;this.interpret_matrix=null;this.interpret_complex=null;this.interpret_basic=null;this.interpret_term=null;this.interpret_set=null;this.interpret_vector=new kt(this),this.interpret_matrix=new Cn(this),this.interpret_complex=new An(this),this.interpret_basic=new bn(this),this.interpret_term=new Mn(this),this.interpret_set=new Fn(this)}interpret(e,r){e+="return [";let n=0;for(let o of r)o.type.base!="TERM_VAR"&&(n>0&&(e+=", "),e+=o.id,n++);e+="];";let i=new Function("runtime",e);try{let o=i(this);for(let c=0;c<r.length;c++){let m=r[c];switch(m.type.base){case"BOOL":m.value=o[c];break;case"INT":case"REAL":m.value=o[c];break;case"COMPLEX":m.value=o[c];break;case"VECTOR":m.value=o[c];break;case"MATRIX":m.value=o[c];break;case"TERM":m.value=o[c];break;case"INT_SET":m.value=o[c];break;case"COMPLEX_SET":m.value=o[c];break;default:throw new De("-1","interpret(..): unimplemented type "+m.type)}}}catch(o){throw new De("-1","interpret(..) failed: "+o)}}};var Ku=ht(Pn());var Ju=`

_equal(x:BOOL,y:BOOL):BOOL -> interpret_basic._equalBooleans;
_equal(x:INT,y:INT):BOOL -> interpret_basic._equalNumbers;
_equal(x:INT,y:REAL):BOOL -> interpret_basic._equalNumbers;
_equal(x:REAL,y:INT):BOOL -> interpret_basic._equalNumbers;
_equal(x:REAL,y:REAL):BOOL -> interpret_basic._equalNumbers;
_unequal(x:BOOL,y:BOOL):BOOL -> interpret_basic._unequalBooleans;
_unequal(x:INT,y:INT):BOOL -> interpret_basic._unequalNumbers;
_unequal(x:INT,y:REAL):BOOL -> interpret_basic._unequalNumbers;
_unequal(x:REAL,y:INT):BOOL -> interpret_basic._unequalNumbers;
_unequal(x:REAL,y:REAL):BOOL -> interpret_basic._unequalNumbers;
_add(x:INT,y:INT):INT -> interpret_basic._add;
_add(x:INT,y:REAL):REAL -> interpret_basic._add;
_add(x:REAL,y:INT):REAL -> interpret_basic._add;
_add(x:REAL,y:REAL):REAL -> interpret_basic._add;
_unaryMinus(x:INT):INT -> interpret_basic._unaryMinus;
_unaryMinus(x:REAL):REAL -> interpret_basic._unaryMinus;
_unaryNot(x:BOOL):BOOL -> interpret_basic._unaryNot;
_sub(x:INT,y:INT):INT -> interpret_basic._sub;
_sub(X:INT,y:REAL):REAL -> interpret_basic._sub;
_sub(x:REAL,y:INT):REAL -> interpret_basic._sub;
_sub(x:REAL,y:REAL):REAL -> interpret_basic._sub;
_mul(x:INT,y:INT):INT -> interpret_basic._mul;
_mul(x:INT,y:REAL):REAL -> interpret_basic._mul;
_mul(x:REAL,y:INT):REAL -> interpret_basic._mul;
_mul(x:REAL,y:REAL):REAL -> interpret_basic._mul;
_div(x:INT,y:INT):REAL -> interpret_basic._div;
_div(x:INT,y:REAL):REAL -> interpret_basic._div;
_div(x:REAL,y:INT):REAL -> interpret_basic._div;
_div(x:REAL,y:REAL):REAL -> interpret_basic._div;
_mod(x:INT,y:INT):INT -> interpret_basic._mod;
_pow(x:INT,y:INT):INT -> interpret_basic._pow;
_pow(x:INT,y:REAL):REAL -> interpret_basic._pow;
_pow(x:REAL,y:INT):REAL -> interpret_basic._pow;
_pow(x:REAL,y:REAL):REAL -> interpret_basic._pow;
rand(max:INT): INT -> interpret_basic._randIntMax;
rand(min:INT,max:INT): INT -> interpret_basic._randIntMinMax;
randZ(min:INT,max:INT): INT -> interpret_basic._randIntMinMaxZ;
sin(x:INT): REAL -> interpret_basic._sin;
sin(x:REAL): REAL -> interpret_basic._sin;
cos(x:INT): REAL -> interpret_basic._cos;
cos(x:REAL): REAL -> interpret_basic._cos;
tan(x:INT): REAL -> interpret_basic._tan;
tan(x:REAL): REAL -> interpret_basic._tan;
asin(x:INT): REAL -> interpret_basic._asin;
asin(x:REAL): REAL -> interpret_basic._asin;
acos(x:INT): REAL -> interpret_basic._acos;
acos(x:REAL): REAL -> interpret_basic._acos;
atan(x:INT): REAL -> interpret_basic._atan;
atan(x:REAL): REAL -> interpret_basic._atan;
exp(x:INT):REAL -> interpret_basic._exp;
exp(x:REAL):REAL -> interpret_basic._exp;
sqrt(x:INT): REAL -> interpret_basic._sqrt;
sqrt(x:REAL): REAL -> interpret_basic._sqrt;
abs(x:INT):INT -> interpret_basic._abs;
abs(x:REAL):REAL -> interpret_basic._abs;
floor(x:INT): INT -> interpret_basic._floor;
floor(x:REAL): INT -> interpret_basic._floor;
int(x:INT): INT -> interpret_basic._floor;
int(x:REAL): INT -> interpret_basic._floor;
ceil(x:INT): INT -> interpret_basic._ceil;
ceil(x:REAL): INT -> interpret_basic._ceil;
round(x:INT): INT -> interpret_basic._round;
round(x:REAL): INT -> interpret_basic._round;
sign(x:INT): INT -> interpret_basic._sign;
sign(x:REAL): INT -> interpret_basic._sign;
max(list:INT_LIST): INT -> interpret_basic._maxInt;
fac(x:INT): INT -> interpret_basic._fac;
binomial(n:INT,k:INT): INT -> interpret_basic._binomial;
set(elements:INT_LIST): SET_INT -> interpret_set._createIntSet;
set(elements:COMPLEX_LIST): SET_COMPLEX -> interpret_set._createComplexSet;
len(s:SET_INT): INT -> interpret_set._lenSet;
_unaryMinus(x:COMPLEX):COMPLEX -> interpret_complex._unaryMinusComplex;
_add(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._addComplex;
_add(x:INT, y:COMPLEX): COMPLEX -> interpret_complex._addNumberComplex;
_add(x:REAL, y:COMPLEX): COMPLEX -> interpret_complex._addNumberComplex;
_add(x:COMPLEX, y:INT): COMPLEX -> interpret_complex._addComplexNumber;
_add(x:COMPLEX, y:REAL): COMPLEX -> interpret_complex._addComplexNumber;
_sub(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._subComplex;
_sub(x:INT, y:COMPLEX): COMPLEX -> interpret_complex._subNumberComplex;
_sub(x:REAL, y:COMPLEX): COMPLEX -> interpret_complex._subNumberComplex;
_sub(x:COMPLEX, y:INT): COMPLEX -> interpret_complex._subComplexNumber;
_sub(x:COMPLEX, y:REAL): COMPLEX -> interpret_complex._subComplexNumber;
_mul(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._mulComplex;
_div(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._divComplex;
_mul(x:INT,y:COMPLEX):COMPLEX -> interpret_complex._mulNumberComplex;
_mul(x:REAL,y:COMPLEX):COMPLEX -> interpret_complex._mulNumberComplex;
_mul(x:COMPLEX,y:INT):COMPLEX -> interpret_complex._mulComplexNumber;
_mul(x:COMPLEX,y:REAL):COMPLEX -> interpret_complex._mulComplexNumber;
_pow(x:COMPLEX,y:COMPLEX):COMPLEX -> interpret_complex._powComplexComplex;
_pow(x:COMPLEX, y:INT):COMPLEX -> interpret_complex._powComplexNumber;
_pow(x:COMPLEX, y:REAL):COMPLEX -> interpret_complex._powComplexNumber;
_pow(x:INT,y:COMPLEX):COMPLEX -> interpret_complex._powNumberComplex;
_pow(x:REAL,y:COMPLEX):COMPLEX -> interpret_complex._powNumberComplex;
conj(x:COMPLEX):COMPLEX -> interpret_complex._conjComplex;
complex(x:INT,y:INT):COMPLEX -> interpret_complex._complex;
complex(x:INT,y:REAL):COMPLEX -> interpret_complex._complex;
complex(x:REAL,y:INT):COMPLEX -> interpret_complex._complex;
complex(x:REAL,y:REAL):COMPLEX -> interpret_complex._complex;
real(x:COMPLEX): REAL -> interpret_complex._extractComplexReal;
imag(x:COMPLEX): REAL -> interpret_complex._extractComplexImag;
sqrtC(x:INT): COMPLEX -> interpret_complex._sqrtC_number;
sqrtC(x:REAL): COMPLEX -> interpret_complex._sqrtC_number;
sqrtC(x:COMPLEX): COMPLEX -> interpret_complex._sqrtC_complex;
abs(x:COMPLEX): REAL -> interpret_complex._absComplex;
_add(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._addVectors;
_sub(x:VECTOR,y:VECTOR):VECTOR -> interpret_vector._subVectors;
_mul(x:INT,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
_mul(x:REAL,y:VECTOR):VECTOR -> interpret_vector._mulScalarVector;
dot(x:VECTOR, y:VECTOR): REAL -> interpret_vector._dotVectors;
cross(x:VECTOR, y:VECTOR): VECTOR -> interpret_vector._crossVectors;
norm2(x:VECTOR): REAL -> interpret_vector._norm2vec;
zeros<size:INT>(): VECTOR -> interpret_vector._zerosVector;
rand<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randVector;
randZ<size:INT>(min:INT, max:INT): VECTOR -> interpret_vector._randZVector;
is_zero(x:VECTOR): BOOL -> interpret_vector._isVectorZero;
_equal(x:MATRIX, y:MATRIX): BOOL -> interpret_matrix._equalMatrices;
_unequal(x:MATRIX, y:MATRIX): BOOL -> interpret_matrix._unequalMatrices;
eye(n:INT): MATRIX -> interpret_matrix._eye;
_add(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._addMatrices;
_sub(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._subMatrices;
_mul(x:INT,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x:REAL,y:MATRIX):MATRIX -> interpret_matrix._mulScalarMatrix;
_mul(x: MATRIX, y: INT): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x: MATRIX, y: REAL): MATRIX -> interpret_matrix._mulMatrixScalar;
_mul(x:MATRIX,y:MATRIX):MATRIX -> interpret_matrix._mulMatrices;
rand<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randMatrix;
randZ<rows:INT,columns:INT>(min:INT,max:INT): MATRIX -> interpret_matrix._randZMatrix;
det(x:MATRIX): REAL -> interpret_matrix._det;
min(x:MATRIX): REAL -> interpret_matrix._minMatrix;
max(x:MATRIX): REAL -> interpret_matrix._maxMatrix;
zeros<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._zeros;
ones<rows:INT,columns:INT>(): MATRIX -> interpret_matrix._ones;
floor(x:MATRIX): MATRIX -> interpret_matrix._floorMatrix;
ceil(x:MATRIX): MATRIX -> interpret_matrix._ceilMatrix;
round(x:MATRIX): MATRIX -> interpret_matrix._roundMatrix;
transpose(x:MATRIX): MATRIX -> interpret_matrix._transposeMatrix;
triu(x:MATRIX): MATRIX -> interpret_matrix._triu;
linsolve(A:MATRIX,b:VECTOR): VECTOR -> interpret_matrix._linsolve;
matrix(v:VECTOR_LIST): MATRIX -> interpret_matrix._matrixFromVectors;
rank(A:MATRIX): INT -> interpret_matrix._rank;
is_zero(x:MATRIX): BOOL -> interpret_matrix._isMatrixZero;
is_symmetric(x:MATRIX): BOOL -> interpret_matrix._isMatrixSymmetric;
is_invertible(x:MATRIX): BOOL -> interpret_matrix._isMatrixInvertible;
inv(x:MATRIX): MATRIX -> interpret_matrix._invMatrix;
_mod(x:MATRIX,y:INT):MATRIX -> interpret_matrix._modMatrix;
column(x:MATRIX, c:INT): VECTOR -> interpret_matrix._matrixColumn;
row(x:MATRIX, r:INT): VECTOR -> interpret_matrix._matrixRow;
_numberToTerm(x:INT):TERM -> interpret_term._numberToTerm;
_add(x:TERM,y:INT):TERM -> interpret_term._addTermReal;
_add(x:TERM,y:REAL):TERM -> interpret_term._addTermReal;
_add(x:INT,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:REAL,y:TERM):TERM -> interpret_term._addRealTerm;
_add(x:TERM,y:TERM):TERM -> interpret_term._addTermTerm;
_sub(x:TERM,y:INT):TERM -> interpret_term._subTermReal;
_sub(x:TERM,y:REAL):TERM -> interpret_term._subTermReal;
_sub(x:INT,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:REAL,y:TERM):TERM -> interpret_term._subRealTerm;
_sub(x:TERM,y:TERM):TERM -> interpret_term._subTermTerm;
_mul(x:TERM,y:INT):TERM -> interpret_term._mulTermReal;
_mul(x:TERM,y:REAL):TERM -> interpret_term._mulTermReal;
_mul(x:INT,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:REAL,y:TERM):TERM -> interpret_term._mulRealTerm;
_mul(x:TERM,y:TERM):TERM -> interpret_term._mulTermTerm;
_div(x:TERM,y:INT):TERM -> interpret_term._divTermReal;
_div(x:TERM,y:REAL):TERM -> interpret_term._divTermReal;
_div(x:INT,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:REAL,y:TERM):TERM -> interpret_term._divRealTerm;
_div(x:TERM,y:TERM):TERM -> interpret_term._divTermTerm;
_pow(x:TERM,y:INT):TERM -> interpret_term._powTermReal;
_pow(x:TERM,y:REAL):TERM -> interpret_term._powTermReal;
_pow(x:INT,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:REAL,y:TERM):TERM -> interpret_term._powRealTerm;
_pow(x:TERM,y:TERM):TERM -> interpret_term._powTermTerm;
sin(x:TERM): TERM -> interpret_term._sinTerm;
cos(x:TERM): TERM -> interpret_term._cosTerm;
tan(x:TERM): TERM -> interpret_term._tanTerm;
exp(x:TERM): TERM -> interpret_term._expTerm;
diff(x:TERM, varId:TERM): TERM -> interpret_term._diffTerm;
ode(lhs:TERM,rhs:TERM): TERM -> interpret_term._ode;

`;var Bn=class{constructor(){this.lexer=null;this.symTab=[];this.loopLevel=0;this.scope=0}getSymbol(e){for(let r of this.symTab)if(r.id===e)return r;return null}removeSymTabEntry(e){let r=[];for(let n of this.symTab)n!==e&&r.push(n);this.symTab=r}getLocalSymbols(){let e=[];for(let r of this.symTab)if(r.kind==="LOCAL"){if(r.type.base==="TERM_VAR")continue;e.push(r)}return e}parse(e){return this.loopLevel=0,this.scope=0,this.symTab=ba(Ju),this.lexer=new Ku.Lexer,this.lexer.configureSingleLineComments("%"),this.lexer.configureMultiLineComments("/*","*/"),this.lexer.enableEmitNewlines(!1),this.lexer.enableEmitIndentation(!1),this.lexer.enableBackslashLineBreaks(!1),this.lexer.pushSource("FILE",e),this.lexer.setTerminals(["&&","||","==","!=",">=","<=","++","--"]),this.parseProgram().str}parseProgram(){let e=new We;for(;this.lexer.isNotEND();){let r=this.parseStatement();e.str+=r.str}return e}parseStatement(){if(this.lexer.isTER("let"))return this.parseDeclaration();if(this.lexer.isTER("if"))return this.parseIf();if(this.lexer.isTER("do"))return this.parseDo();if(this.lexer.isTER("while"))return this.parseWhile();if(this.lexer.isTER("function"))return this.parseFunction();if(this.lexer.isTER("return"))return this.parseReturn();if(this.lexer.isTER("break"))return this.parseBreak();if(this.lexer.isTER("continue"))return this.parseContinue();{let e=this.parseExpression();return this.lexer.EOS(),new We(e.code.str+";")}}parseDeclaration(){let e=new We;this.lexer.TER("let");let r=[];if(r.push(this.lexer.ID()),this.lexer.isTER("(")){let n=r[0];this.lexer.next();let i=[];for(i.push(this.lexer.ID());this.lexer.isTER(",");)this.lexer.next(),i.push(this.lexer.ID());for(let f of i){let u=new Ke("TERM_VAR"),a=new Dr(f,"LOCAL",u,this.scope,[]);this.symTab.push(a)}this.lexer.TER(")"),this.lexer.TER("=");let o=this.parseExpression();if(o.type.base!=="TERM")switch(o.type.base){case"INT":case"REAL":o.code.str="runtime.interpret_term._numberToTerm("+o.code.str+")",o.type.base="TERM";break;default:this.lexer.error("right-hand side is not a term")}e.str+="let "+n+" = "+o.code.str+";";for(let f=0;f<i.length;f++)this.symTab.pop();let c=[];for(let f of i)c.push(new Dr(f,"PARAMETER",new Ke("TERM_VAR"),this.scope+1,[]));let m=new Dr(n,"LOCAL",new Ke("TERM"),this.scope,c);this.symTab.push(m),this.lexer.EOS()}else{let n=!1;for(;this.lexer.isTER(":")||this.lexer.isTER("/");)this.lexer.isTER("/")&&(n=!0),this.lexer.isTER(":")&&n==!0&&this.lexer.error('cannot mix ":" and "/"'),this.lexer.next(),r.push(this.lexer.ID());this.lexer.TER("=");let i=this.parseExpression();for(let o of r){let c=new Dr(o,"LOCAL",i.type,this.scope,[]);this.symTab.push(c)}if(n){i.type.base!=="INT"&&i.type.base!=="MATRIX"&&this.lexer.error('declaration operator "/" is unimplemented for type '+i.type.base),e.str+="let ";for(let o=0;o<r.length;o++){let c=r[o];o>0&&(e.str+=", "),e.str+=c}e.str+=`;
`;for(let o=0;o<r.length;o++){let c=r[o];if(o==0)e.str+=c+" = "+i.code.str+`;
`;else{e.str+="do { "+c+" = "+i.code.str+"; } while (";let m="";for(let f=0;f<o;f++)m.length>0&&(m+=" || "),i.type.base==="INT"?m+=c+" == "+r[f]:m+="runtime.interpret_matrix._equalMatrices("+c+","+r[f]+")";e.str+=m,e.str+=`);
`}}}else for(let o of r)e.str+="let "+o+" = "+i.code.str+";";this.lexer.EOS()}return e}parseExpression(){let e=this.parseOr();for(;this.lexer.isTER("=");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseOr();e.code.tmp.includes("setElement")?(n.type.base!=="INT"&&n.type.base!=="REAL"&&this.lexer.error("element must be of type INT or REAL."),e.code.str=e.code.tmp.replace("\xA7RHS\xA7",n.code.str),e.type.base="VOID"):(e.type.base==="INT"||e.type.base==="REAL")&&(n.type.base==="INT"||n.type.base==="REAL")?(e.type.base="INT",e.code.str=e.code.str+" "+r+" "+n.code.str):e.type.base==="VECTOR"&&n.type.base==="VECTOR"?(e.type.base="VECTOR",e.code.str=e.code.str+" "+r+" runtime.interpret_vector._clone("+n.code.str+")"):e.type.base==="MATRIX"&&n.type.base==="MATRIX"?(e.type.base="MATRIX",e.code.str=e.code.str+" "+r+" runtime.interpret_matrix._clone("+n.code.str+")"):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseOr(){let e=this.parseAnd();for(;this.lexer.isTER("||");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseAnd();e.type.base=="BOOL"&&n.type.base=="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseAnd(){let e=this.parseEqual();for(;this.lexer.isTER("&&");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseEqual();e.type.base==="BOOL"&&n.type.base==="BOOL"?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseEqual(){let e=this.parseRelational();if(this.lexer.isTER("==")||this.lexer.isTER("!=")){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseRelational();e=this.call(this.getSymbol(r==="=="?"_equal":"_unequal"),[],[e,n])}return e}parseRelational(){let e=this.parseAdd();if(this.lexer.isTER("<=")||this.lexer.isTER(">=")||this.lexer.isTER("<")||this.lexer.isTER(">")){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseAdd();(e.type.base==="INT"||e.type.base==="REAL")&&(n.type.base==="INT"||n.type.base==="REAL")?(e.type.base="BOOL",e.code.str=e.code.str+" "+r+" "+n.code.str):this.lexer.errorTypesInBinaryOperation(r,e.type.base,n.type.base)}return e}parseAdd(){let e=this.parseMul();for(;this.lexer.isTER("+")||this.lexer.isTER("-");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parseMul();e=this.call(this.getSymbol(r==="+"?"_add":"_sub"),[],[e,n])}return e}parseMul(){let e=this.parsePow();for(;this.lexer.isTER("*")||this.lexer.isTER("/")||this.lexer.isTER("mod");){let r=this.lexer.getToken().token;this.lexer.next();let n=this.parsePow();e=this.call(this.getSymbol(r==="*"?"_mul":r==="/"?"_div":"_mod"),[],[e,n])}return e}parsePow(){let e=this.parseUnary();if(this.lexer.isTER("^")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_pow"),[],[e,r])}return e}parseUnary(){let e=this.parseUnaryExpression();return e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isNotTER("(")&&this.lexer.isNotTER("<")&&this.lexer.errorExpected(["(","<"]),(this.lexer.isTER("++")||this.lexer.isTER("--")||e.sym!=null&&e.sym.kind==="FUNCTION"&&this.lexer.isTER("<")||this.lexer.isTER("(")||this.lexer.isTER("["))&&(e=this.parseUnaryPostfix(e)),e}parseUnaryExpression(){let e=new xt;if(this.lexer.isTER("true"))e.code.str=" true ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isTER("false"))e.code.str=" false ",e.type.base="BOOL",this.lexer.next();else if(this.lexer.isINT()){let r=this.lexer.INT();e.code.str=" "+r+" ",e.type.base="INT",this.lexer.isTER("i")&&(this.lexer.next(),e.code.str="runtime.interpret_complex._create(0,"+r+")",e.type.base="COMPLEX")}else if(this.lexer.isREAL()){let r=this.lexer.REAL();e.code.str=" "+r+" ",e.type.base="REAL",this.lexer.isTER("i")&&(this.lexer.next(),e.code.str="runtime.interpret_complex._create(0,"+r+")",e.type.base="COMPLEX")}else if(this.lexer.isTER("(")){this.lexer.next();let r=this.parseExpression();this.lexer.TER(")"),e.code.str=" ( "+r.code.str+" ) ",e.type=r.type}else if(this.lexer.isTER("[")){this.lexer.next();let r=0,n=-1,i=-1,o=[];for(;this.lexer.isNotTER("]");){r>0&&this.lexer.TER(",");let f=this.parseMatrixRow();r==0?i=f.length:i!=f.length&&this.lexer.error("inconsistent number of matrix columns");for(let u of f)o.push(u);r++}n=r,this.lexer.TER("]");let c="[",m=0;for(let f of o)m>0&&(c+=", "),c+=f.code.str,m++;c+="]",e.code.str="runtime.interpret_matrix._create("+n+", "+i+", "+c+")",e.type.base="MATRIX"}else if(this.lexer.isID()){let r=this.lexer.ID();e.sym=this.getSymbol(r),e.sym==null&&this.lexer.errorUnknownSymbol(r),e.sym.type.base==="TERM_VAR"?(e.type=new Ke("TERM"),e.code.str='runtime.interpret_term.var("'+r+'")'):(e.type=e.sym.type.clone(),e.code.str=" "+r)}else if(this.lexer.isTER("-")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_unaryMinus"),[],[r])}else if(this.lexer.isTER("!")){this.lexer.next();let r=this.parseUnary();e=this.call(this.getSymbol("_unaryNot"),[],[r])}else this.lexer.errorExpected(["INT","IMAG","REAL","(","ID"]);return e}parseMatrixRow(){this.lexer.TER("[");let e=0,r=[];for(;this.lexer.isNotTER("]");){e>0&&this.lexer.TER(",");let n=this.parseExpression();n.type.base!=="INT"&&n.type.base!=="REAL"&&this.lexer.error("matrix element must be of type INT or REAL."),r.push(n),e++}return this.lexer.TER("]"),r}parseUnaryPostfix(e){if(this.lexer.isTER("++"))this.lexer.next(),e.code.str+=" ++ ";else if(this.lexer.isTER("--"))this.lexer.next(),e.code.str+=" -- ";else if(this.lexer.isTER("<")||this.lexer.isTER("(")){let r=[],n=[];if(this.lexer.isTER("<")){this.lexer.next();let i=0;for(;this.lexer.isNotTER(">");)i>0&&this.lexer.TER(","),r.push(this.parseUnary()),i++;this.lexer.TER(">")}if(this.lexer.TER("("),e.sym==null&&this.lexer.errorNotAFunction(),e.sym.kind=="FUNCTION"||e.sym.kind=="LOCAL"&&e.sym.type.base==="TERM"){let i=0;for(;this.lexer.isNotTER(")");)i>0&&this.lexer.TER(","),n.push(this.parseExpression()),i++;this.lexer.TER(")")}else this.lexer.errorNotAFunction();if(e.sym.kind=="FUNCTION")e=this.call(e.sym,r,n);else{e.sym.subSymbols.length!=n.length&&this.lexer.error("invalid parameters for function "+e.sym.id);let i="{";for(let o=0;o<n.length;o++)n[o].type.base!=="INT"&&n[o].type.base!=="REAL"&&this.lexer.error("parameters for function must be of type INT or REAL."),o>0&&(i+=", "),i+=e.sym.subSymbols[o].id+": "+n[o].code.str;i+="}",e.code.str="runtime.interpret_term._eval("+e.sym.id+", "+i+", "+this.getTokenPosStr()+")",e.type=new Ke("REAL")}}else if(this.lexer.isTER("[")){this.lexer.next();let r=[],n=0;for(;this.lexer.isNotTER("]");)n>0&&this.lexer.TER(","),r.push(this.parseExpression()),n++;if(this.lexer.TER("]"),e.type.base==="VECTOR")r.length!=1&&this.lexer.error("expected one index"),r[0].type.base!=="INT"&&this.lexer.error("index is not of type integer"),e.type.base="REAL",e.code.str="runtime.interpret_vector._getElement("+e.sym.id+", "+r[0].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_vector._setElement("+e.sym.id+", "+r[0].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")";else if(e.type.base==="MATRIX"){r.length!=2&&this.lexer.error("expected two indices");for(let i=0;i<r.length;i++)r[i].type.base!=="INT"&&this.lexer.error("index "+(i+1)+" is not of type integer");e.type.base="REAL",e.code.str="runtime.interpret_matrix._getElement("+e.sym.id+", "+r[0].code.str+", "+r[1].code.str+", "+this.getTokenPosStr()+")",e.code.tmp="runtime.interpret_matrix._setElement("+e.sym.id+", "+r[0].code.str+", "+r[1].code.str+", \xA7RHS\xA7, "+this.getTokenPosStr()+")"}else this.lexer.error("can only index a matrix or a vector")}else this.lexer.errorExpected(["++","--","(","["]);return e}call(e,r,n){let i=new xt;i.sym=e,i.type=e.type.clone();let o=e;for(;o!=null;){let c=[],m=[];for(let f of o.subSymbols)f.kind=="DIMENSION"?c.push(f):f.kind==="PARAMETER"&&m.push(f);if(c.length==r.length&&m.length==n.length||m.length==1&&(m[0].type.base=="INT_LIST"||m[0].type.base=="COMPLEX_LIST"||m[0].type.base=="VECTOR_LIST")){let f=m.length==1&&m[0].type.base=="INT_LIST",u=m.length==1&&m[0].type.base=="COMPLEX_LIST",a=m.length==1&&m[0].type.base=="VECTOR_LIST",s=!0;for(let l=0;l<c.length;l++)if(c[l].type.base!==r[l].type.base){s=!1;break}if(f||u||a){for(let l=0;l<n.length;l++)if(f&&n[l].type.base!="INT"||u&&n[l].type.base!="COMPLEX"||a&&n[l].type.base!="VECTOR"){s=!1;break}}else for(let l=0;l<m.length;l++)if(m[l].type.base!==n[l].type.base){s=!1;break}if(s){i.type=o.type.clone(),i.code.str="runtime."+o.runtimeId+"(";let l=0;for(let h=0;h<c.length;h++)l>0&&(i.code.str+=", "),i.code.str+=r[h].code.str,l++;if(f||u||a){l>0&&(i.code.str+=", "),i.code.str+="[";for(let h=0;h<n.length;h++)h>0&&(i.code.str+=","),i.code.str+=n[h].code.str;i.code.str+="]",l++}else for(let h=0;h<m.length;h++)l>0&&(i.code.str+=", "),i.code.str+=n[h].code.str,l++;l>0&&(i.code.str+=", "),i.code.str+=this.getTokenPosStr(),l++,i.code.str+=")",i.sym=null;break}}o=o.functionOverloadSuccessor}if(o==null){let c="";for(let m of n)c.length>0&&(c+=", "),c+=m.type.toString();this.lexer.error('no matching function prototype for calling "'+i.sym.id+'" with types ('+c+")")}return i}parseIf(){let e=new We;this.lexer.TER("if"),this.lexer.TER("(");let r=this.parseExpression();r.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),e.str="if ("+r.code.str+")";let n=this.parseBlock();if(e.str+=n.str,this.lexer.isTER("else")){this.lexer.next(),e.str+=" else ";let i=this.parseBlock();e.str+=i.str}return e}parseBlock(){let e=new We;if(this.lexer.isTER("{")){for(this.lexer.next(),e.str+="{";this.lexer.isNotTER("}");)e.str+=this.parseStatement().str;return this.lexer.TER("}"),e.str+="}",e}else return this.parseStatement()}parseDo(){this.lexer.TER("do"),this.loopLevel++;let e=this.parseBlock();this.loopLevel--,this.lexer.TER("while"),this.lexer.TER("(");let r=this.parseExpression();return r.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.lexer.EOS(),new We(" do "+e.str+" while( "+r.code.str+" ); ")}parseWhile(){this.lexer.TER("while"),this.lexer.TER("(");let e=this.parseExpression();e.type.base!=="BOOL"&&this.lexer.errorConditionNotBoolean(),this.lexer.TER(")"),this.loopLevel++;let r=this.parseBlock();return this.loopLevel--,new We(" while( "+e.code.str+" ) "+r.str)}parseFunction(){this.lexer.TER("function");let e=this.lexer.ID();this.lexer.TER("(");let r=0;for(;this.lexer.isNotTER(")");){r>0&&this.lexer.TER(",");let i=this.lexer.ID();r++}return this.lexer.TER(")"),this.parseBlock()}parseReturn(){if(this.lexer.TER("return"),this.lexer.isEOS()==!1){let e=this.parseExpression();return this.lexer.EOS(),new We(" return "+e.code)}else return this.lexer.EOS(),new We(" return ")}parseBreak(){return this.lexer.TER("break"),this.loopLevel==0&&this.lexer.error("break not allowed outside loop"),this.lexer.EOS(),new We(" break ")}parseContinue(){return this.lexer.TER("continue"),this.loopLevel==0&&this.lexer.error("continue not allowed outside loop"),this.lexer.EOS(),new We(" continue ")}getTokenPosStr(){return"'"+this.lexer.getToken().row+":"+this.lexer.getToken().col+"'"}};var In="";function Ap(t,e=!1){let r=new Bn;In=r.parse(t);let n=r.getLocalSymbols();return e&&console.log(In),new Sn().interpret(In,n),n}return Ls(bp);})();
/*!
 *  decimal.js v10.4.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */
/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
